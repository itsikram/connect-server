/*! For license information please see main.04bb17e7.js.LICENSE.txt */
(()=>{var e={97:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(9713),a=n(888),o=n(8726);function i(e){if((0,o.A)(1,arguments),!(0,r.default)(e)&&"number"!==typeof e)return!1;var t=(0,a.default)(e);return!isNaN(Number(t))}},147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(888),a=n(618),o=n(8726);function i(e){return(0,o.A)(1,arguments),(0,a.default)(e,{weekStartsOn:1})}function s(e){(0,o.A)(1,arguments);var t=function(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear(),a=new Date(0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);var s=i(a),u=new Date(0);u.setFullYear(n,0,4),u.setHours(0,0,0,0);var l=i(u);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),i(n)}var u=6048e5;function l(e){(0,o.A)(1,arguments);var t=(0,r.default)(e),n=i(t).getTime()-s(t).getTime();return Math.round(n/u)+1}},219:(e,t,n)=>{"use strict";var r=n(3763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var i=c(n);f&&(i=i.concat(f(n)));for(var s=u(t),m=u(n),v=0;v<i.length;++v){var g=i[v];if(!o[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=d(n,g);try{l(t,g,y)}catch(b){}}}}return t}},227:(e,t,n)=>{"use strict";var r=n(6545).F.ERR_STREAM_PREMATURE_CLOSE;function a(){}e.exports=function e(t,n,o){if("function"===typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r)}}}(o||a);var i=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||c()},l=t._writableState&&t._writableState.finished,c=function(){s=!1,l=!0,i||o.call(t)},f=t._readableState&&t._readableState.endEmitted,d=function(){i=!1,f=!0,s||o.call(t)},h=function(e){o.call(t,e)},p=function(){var e;return i&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",c),!1!==n.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",p)}}},246:function(e){e.exports=function(){function e(e){return new Int8Array(e)}function t(e){return new Int16Array(e)}function n(e){return new Int32Array(e)}function r(e){return new Float32Array(e)}function a(e){return new Float64Array(e)}function o(e){if(1==e.length)return r(e[0]);var t=e[0];e=e.slice(1);for(var n=[],a=0;a<t;a++)n.push(o(e));return n}function i(e){if(1==e.length)return n(e[0]);var t=e[0];e=e.slice(1);for(var r=[],a=0;a<t;a++)r.push(i(e));return r}function s(e){if(1==e.length)return t(e[0]);var n=e[0];e=e.slice(1);for(var r=[],a=0;a<n;a++)r.push(s(e));return r}function u(e){if(1==e.length)return new Array(e[0]);var t=e[0];e=e.slice(1);for(var n=[],r=0;r<t;r++)n.push(u(e));return n}var l={fill:function(e,t,n,r){if(2==arguments.length)for(var a=0;a<e.length;a++)e[a]=arguments[1];else for(a=t;a<n;a++)e[a]=r}},c={arraycopy:function(e,t,n,r,a){for(var o=t+a;t<o;)n[r++]=e[t++]}},f={};function d(e){this.ordinal=e}f.SQRT2=1.4142135623730951,f.FAST_LOG10=function(e){return Math.log10(e)},f.FAST_LOG10_X=function(e,t){return Math.log10(e)*t},d.short_block_allowed=new d(0),d.short_block_coupled=new d(1),d.short_block_dispensed=new d(2),d.short_block_forced=new d(3);var h={};function p(e){this.ordinal=e}h.MAX_VALUE=34028235e31,p.vbr_off=new p(0),p.vbr_mt=new p(1),p.vbr_rh=new p(2),p.vbr_abr=new p(3),p.vbr_mtrh=new p(4),p.vbr_default=p.vbr_mtrh;var m={System:c,VbrMode:p,Float:h,ShortBlock:d,Util:f,Arrays:l,new_array_n:u,new_byte:e,new_double:a,new_float:r,new_float_n:o,new_int:n,new_int_n:i,new_short:t,new_short_n:s,assert:function(e){}},v=m.System,g=m.Util,y=m.Arrays,b=m.new_float;function w(){var e=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*g.SQRT2*.5/2384e-9,.017876148*g.SQRT2*.5/2384e-9,.003134727*g.SQRT2*.5/2384e-9,.002457142*g.SQRT2*.5/2384e-9,971317e-9*g.SQRT2*.5/2384e-9,218868e-9*g.SQRT2*.5/2384e-9,101566e-9*g.SQRT2*.5/2384e-9,13828e-9*g.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],t=12,n=36,r=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],a=r[O.SHORT_TYPE],o=r[O.SHORT_TYPE],i=r[O.SHORT_TYPE],s=r[O.SHORT_TYPE],u=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function l(t,n,r){for(var a,o,i,s=10,u=n+238-14-286,l=-15;l<0;l++){var c,f,d;c=e[s+-10],f=t[u+-224]*c,d=t[n+224]*c,c=e[s+-9],f+=t[u+-160]*c,d+=t[n+160]*c,c=e[s+-8],f+=t[u+-96]*c,d+=t[n+96]*c,c=e[s+-7],f+=t[u+-32]*c,d+=t[n+32]*c,c=e[s+-6],f+=t[u+32]*c,d+=t[n+-32]*c,c=e[s+-5],f+=t[u+96]*c,d+=t[n+-96]*c,c=e[s+-4],f+=t[u+160]*c,d+=t[n+-160]*c,c=e[s+-3],f+=t[u+224]*c,d+=t[n+-224]*c,c=e[s+-2],f+=t[n+-256]*c,d-=t[u+256]*c,c=e[s+-1],f+=t[n+-192]*c,d-=t[u+192]*c,c=e[s+0],f+=t[n+-128]*c,d-=t[u+128]*c,c=e[s+1],f+=t[n+-64]*c,d-=t[u+64]*c,c=e[s+2],f+=t[n+0]*c,d-=t[u+0]*c,c=e[s+3],f+=t[n+64]*c,d-=t[u+-64]*c,c=e[s+4],f+=t[n+128]*c,d-=t[u+-128]*c,c=e[s+5],f+=t[n+192]*c,c=(d-=t[u+-192]*c)-(f*=e[s+6]),r[30+2*l]=d+f,r[31+2*l]=e[s+7]*c,s+=18,n--,u++}d=t[n+-16]*e[s+-10],f=t[n+-32]*e[s+-2],d+=(t[n+-48]-t[n+16])*e[s+-9],f+=t[n+-96]*e[s+-1],d+=(t[n+-80]+t[n+48])*e[s+-8],f+=t[n+-160]*e[s+0],d+=(t[n+-112]-t[n+80])*e[s+-7],f+=t[n+-224]*e[s+1],d+=(t[n+-144]+t[n+112])*e[s+-6],f-=t[n+32]*e[s+2],d+=(t[n+-176]-t[n+144])*e[s+-5],f-=t[n+96]*e[s+3],d+=(t[n+-208]+t[n+176])*e[s+-4],f-=t[n+160]*e[s+4],d+=(t[n+-240]-t[n+208])*e[s+-3],a=(f-=t[n+224])-d,o=f+d,d=r[14],f=r[15]-d,r[31]=o+d,r[30]=a+f,r[15]=a-f,r[14]=o-d,i=r[28]-r[0],r[0]+=r[28],r[28]=i*e[s+-36+7],i=r[29]-r[1],r[1]+=r[29],r[29]=i*e[s+-36+7],i=r[26]-r[2],r[2]+=r[26],r[26]=i*e[s+-72+7],i=r[27]-r[3],r[3]+=r[27],r[27]=i*e[s+-72+7],i=r[24]-r[4],r[4]+=r[24],r[24]=i*e[s+-108+7],i=r[25]-r[5],r[5]+=r[25],r[25]=i*e[s+-108+7],i=r[22]-r[6],r[6]+=r[22],r[22]=i*g.SQRT2,i=r[23]-r[7],r[7]+=r[23],r[23]=i*g.SQRT2-r[7],r[7]-=r[6],r[22]-=r[7],r[23]-=r[22],i=r[6],r[6]=r[31]-i,r[31]=r[31]+i,i=r[7],r[7]=r[30]-i,r[30]=r[30]+i,i=r[22],r[22]=r[15]-i,r[15]=r[15]+i,i=r[23],r[23]=r[14]-i,r[14]=r[14]+i,i=r[20]-r[8],r[8]+=r[20],r[20]=i*e[s+-180+7],i=r[21]-r[9],r[9]+=r[21],r[21]=i*e[s+-180+7],i=r[18]-r[10],r[10]+=r[18],r[18]=i*e[s+-216+7],i=r[19]-r[11],r[11]+=r[19],r[19]=i*e[s+-216+7],i=r[16]-r[12],r[12]+=r[16],r[16]=i*e[s+-252+7],i=r[17]-r[13],r[13]+=r[17],r[17]=i*e[s+-252+7],i=-r[20]+r[24],r[20]+=r[24],r[24]=i*e[s+-216+7],i=-r[21]+r[25],r[21]+=r[25],r[25]=i*e[s+-216+7],i=r[4]-r[8],r[4]+=r[8],r[8]=i*e[s+-216+7],i=r[5]-r[9],r[5]+=r[9],r[9]=i*e[s+-216+7],i=r[0]-r[12],r[0]+=r[12],r[12]=i*e[s+-72+7],i=r[1]-r[13],r[1]+=r[13],r[13]=i*e[s+-72+7],i=r[16]-r[28],r[16]+=r[28],r[28]=i*e[s+-72+7],i=-r[17]+r[29],r[17]+=r[29],r[29]=i*e[s+-72+7],i=g.SQRT2*(r[2]-r[10]),r[2]+=r[10],r[10]=i,i=g.SQRT2*(r[3]-r[11]),r[3]+=r[11],r[11]=i,i=g.SQRT2*(-r[18]+r[26]),r[18]+=r[26],r[26]=i-r[18],i=g.SQRT2*(-r[19]+r[27]),r[19]+=r[27],r[27]=i-r[19],i=r[2],r[19]-=r[3],r[3]-=i,r[2]=r[31]-i,r[31]+=i,i=r[3],r[11]-=r[19],r[18]-=i,r[3]=r[30]-i,r[30]+=i,i=r[18],r[27]-=r[11],r[19]-=i,r[18]=r[15]-i,r[15]+=i,i=r[19],r[10]-=i,r[19]=r[14]-i,r[14]+=i,i=r[10],r[11]-=i,r[10]=r[23]-i,r[23]+=i,i=r[11],r[26]-=i,r[11]=r[22]-i,r[22]+=i,i=r[26],r[27]-=i,r[26]=r[7]-i,r[7]+=i,i=r[27],r[27]=r[6]-i,r[6]+=i,i=g.SQRT2*(r[0]-r[4]),r[0]+=r[4],r[4]=i,i=g.SQRT2*(r[1]-r[5]),r[1]+=r[5],r[5]=i,i=g.SQRT2*(r[16]-r[20]),r[16]+=r[20],r[20]=i,i=g.SQRT2*(r[17]-r[21]),r[17]+=r[21],r[21]=i,i=-g.SQRT2*(r[8]-r[12]),r[8]+=r[12],r[12]=i-r[8],i=-g.SQRT2*(r[9]-r[13]),r[9]+=r[13],r[13]=i-r[9],i=-g.SQRT2*(r[25]-r[29]),r[25]+=r[29],r[29]=i-r[25],i=-g.SQRT2*(r[24]+r[28]),r[24]-=r[28],r[28]=i-r[24],i=r[24]-r[16],r[24]=i,i=r[20]-i,r[20]=i,i=r[28]-i,r[28]=i,i=r[25]-r[17],r[25]=i,i=r[21]-i,r[21]=i,i=r[29]-i,r[29]=i,i=r[17]-r[1],r[17]=i,i=r[9]-i,r[9]=i,i=r[25]-i,r[25]=i,i=r[5]-i,r[5]=i,i=r[21]-i,r[21]=i,i=r[13]-i,r[13]=i,i=r[29]-i,r[29]=i,i=r[1]-r[0],r[1]=i,i=r[16]-i,r[16]=i,i=r[17]-i,r[17]=i,i=r[8]-i,r[8]=i,i=r[9]-i,r[9]=i,i=r[24]-i,r[24]=i,i=r[25]-i,r[25]=i,i=r[4]-i,r[4]=i,i=r[5]-i,r[5]=i,i=r[20]-i,r[20]=i,i=r[21]-i,r[21]=i,i=r[12]-i,r[12]=i,i=r[13]-i,r[13]=i,i=r[28]-i,r[28]=i,i=r[29]-i,r[29]=i,i=r[0],r[0]+=r[31],r[31]-=i,i=r[1],r[1]+=r[30],r[30]-=i,i=r[16],r[16]+=r[15],r[15]-=i,i=r[17],r[17]+=r[14],r[14]-=i,i=r[8],r[8]+=r[23],r[23]-=i,i=r[9],r[9]+=r[22],r[22]-=i,i=r[24],r[24]+=r[7],r[7]-=i,i=r[25],r[25]+=r[6],r[6]-=i,i=r[4],r[4]+=r[27],r[27]-=i,i=r[5],r[5]+=r[26],r[26]-=i,i=r[20],r[20]+=r[11],r[11]-=i,i=r[21],r[21]+=r[10],r[10]-=i,i=r[12],r[12]+=r[19],r[19]-=i,i=r[13],r[13]+=r[18],r[18]-=i,i=r[28],r[28]+=r[3],r[3]-=i,i=r[29],r[29]+=r[2],r[2]-=i}function c(e,t){for(var n=0;n<3;n++){var a,o,i,s,u,l;o=(s=e[t+6]*r[O.SHORT_TYPE][0]-e[t+15])+(a=e[t+0]*r[O.SHORT_TYPE][2]-e[t+9]),i=s-a,u=(s=e[t+15]*r[O.SHORT_TYPE][0]+e[t+6])+(a=e[t+9]*r[O.SHORT_TYPE][2]+e[t+0]),l=-s+a,a=2069978111953089e-26*(e[t+3]*r[O.SHORT_TYPE][1]-e[t+12]),s=2069978111953089e-26*(e[t+12]*r[O.SHORT_TYPE][1]+e[t+3]),e[t+0]=190752519173728e-25*o+a,e[t+15]=190752519173728e-25*-u+s,i=.8660254037844387*i*1907525191737281e-26,u=.5*u*1907525191737281e-26+s,e[t+3]=i-u,e[t+6]=i+u,o=.5*o*1907525191737281e-26-a,l=.8660254037844387*l*1907525191737281e-26,e[t+9]=o+l,e[t+12]=o-l,t++}}function f(e,t,n){var r,a,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x;i=n[17]-n[9],u=n[15]-n[11],l=n[14]-n[12],c=n[0]+n[8],f=n[1]+n[7],d=n[2]+n[6],h=n[3]+n[5],e[t+17]=c+d-h-(f-n[4]),a=(c+d-h)*o[19]+(f-n[4]),r=(i-u-l)*o[18],e[t+5]=r+a,e[t+6]=r-a,s=(n[16]-n[10])*o[18],f=f*o[19]+n[4],r=i*o[12]+s+u*o[13]+l*o[14],a=-c*o[16]+f-d*o[17]+h*o[15],e[t+1]=r+a,e[t+2]=r-a,r=i*o[13]-s-u*o[14]+l*o[12],a=-c*o[17]+f-d*o[15]+h*o[16],e[t+9]=r+a,e[t+10]=r-a,r=i*o[14]-s+u*o[12]-l*o[13],a=c*o[15]-f+d*o[16]-h*o[17],e[t+13]=r+a,e[t+14]=r-a,p=n[8]-n[0],v=n[6]-n[2],g=n[5]-n[3],y=n[17]+n[9],b=n[16]+n[10],w=n[15]+n[11],x=n[14]+n[12],e[t+0]=y+w+x+(b+n[13]),r=(y+w+x)*o[19]-(b+n[13]),a=(p-v+g)*o[18],e[t+11]=r+a,e[t+12]=r-a,m=(n[7]-n[1])*o[18],b=n[13]-b*o[19],r=y*o[15]-b+w*o[16]+x*o[17],a=p*o[14]+m+v*o[12]+g*o[13],e[t+3]=r+a,e[t+4]=r-a,r=-y*o[17]+b-w*o[15]-x*o[16],a=p*o[13]+m-v*o[14]-g*o[12],e[t+7]=r+a,e[t+8]=r-a,r=-y*o[16]+b-w*o[17]-x*o[15],a=p*o[12]-m+v*o[13]-g*o[14],e[t+15]=r+a,e[t+16]=r-a}this.mdct_sub48=function(e,o,d){for(var h=o,p=286,m=0;m<e.channels_out;m++){for(var g=0;g<e.mode_gr;g++){for(var w,x=e.l3_side.tt[g][m],C=x.xr,_=0,k=e.sb_sample[m][1-g],S=0,M=0;M<9;M++)for(l(h,p,k[S]),l(h,p+32,k[S+1]),S+=2,p+=64,w=1;w<32;w+=2)k[S-1][w]*=-1;for(w=0;w<32;w++,_+=18){var E=x.block_type,N=e.sb_sample[m][g],T=e.sb_sample[m][1-g];if(0!=x.mixed_block_flag&&w<2&&(E=0),e.amp_filter[w]<1e-12)y.fill(C,_+0,_+18,0);else{if(e.amp_filter[w]<1)for(M=0;M<18;M++)T[M][u[w]]*=e.amp_filter[w];if(E==O.SHORT_TYPE){for(M=-t/4;M<0;M++){var I=r[O.SHORT_TYPE][M+3];C[_+3*M+9]=N[9+M][u[w]]*I-N[8-M][u[w]],C[_+3*M+18]=N[14-M][u[w]]*I+N[15+M][u[w]],C[_+3*M+10]=N[15+M][u[w]]*I-N[14-M][u[w]],C[_+3*M+19]=T[2-M][u[w]]*I+T[3+M][u[w]],C[_+3*M+11]=T[3+M][u[w]]*I-T[2-M][u[w]],C[_+3*M+20]=T[8-M][u[w]]*I+T[9+M][u[w]]}c(C,_)}else{var j=b(18);for(M=-n/4;M<0;M++){var D,L;D=r[E][M+27]*T[M+9][u[w]]+r[E][M+36]*T[8-M][u[w]],L=r[E][M+9]*N[M+9][u[w]]-r[E][M+18]*N[8-M][u[w]],j[M+9]=D-L*a[3+M+9],j[M+18]=D*a[3+M+9]+L}f(C,_,j)}}if(E!=O.SHORT_TYPE&&0!=w)for(M=7;M>=0;--M){var A,R;A=C[_+M]*i[20+M]+C[_+-1-M]*s[28+M],R=C[_+M]*s[28+M]-C[_+-1-M]*i[20+M],C[_+-1-M]=A,C[_+M]=R}}}if(h=d,p=286,1==e.mode_gr)for(var P=0;P<18;P++)v.arraycopy(e.sb_sample[m][1][P],0,e.sb_sample[m][0][P],0,32)}}}var x=w,C=m.System,_=m.new_float,k=m.new_float_n;function S(){this.l=_(O.SBMAX_l),this.s=k([O.SBMAX_s,3]);var e=this;this.assign=function(t){C.arraycopy(t.l,0,e.l,0,O.SBMAX_l);for(var n=0;n<O.SBMAX_s;n++)for(var r=0;r<3;r++)e.s[n][r]=t.s[n][r]}}var M=S;function E(){this.thm=new M,this.en=new M}var N=E,T=m.System,I=m.VbrMode,j=m.new_array_n,D=m.new_float,L=m.new_float_n,A=m.new_int,R=m.assert;function P(){var e=x,t=N,n=P.FFTOFFSET,r=P.MPG_MD_MS_LR,a=null;this.psy=null;var o=null,i=null,s=null;this.setModules=function(e,t,n,r){a=e,this.psy=t,o=t,i=r,s=n};var u=new e;function l(e){var t,n;if(0!=e.ATH.useAdjust)if(n=e.loudness_sq[0][0],t=e.loudness_sq[1][0],2==e.channels_out?(n+=e.loudness_sq[0][1],t+=e.loudness_sq[1][1]):(n+=n,t+=t),2==e.mode_gr&&(n=Math.max(n,t)),n*=.5,(n*=e.ATH.aaSensitivityP)>.03125)e.ATH.adjust>=1?e.ATH.adjust=1:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=1;else{var r=31.98*n+625e-6;e.ATH.adjust>=r?(e.ATH.adjust*=.075*r+.925,e.ATH.adjust<r&&(e.ATH.adjust=r)):e.ATH.adjustLimit>=r?e.ATH.adjust=r:e.ATH.adjust<e.ATH.adjustLimit&&(e.ATH.adjust=e.ATH.adjustLimit),e.ATH.adjustLimit=r}else e.ATH.adjust=1}function c(e){var t,n;for(R(0<=e.bitrate_index&&e.bitrate_index<16),R(0<=e.mode_ext&&e.mode_ext<4),e.bitrate_stereoMode_Hist[e.bitrate_index][4]++,e.bitrate_stereoMode_Hist[15][4]++,2==e.channels_out&&(e.bitrate_stereoMode_Hist[e.bitrate_index][e.mode_ext]++,e.bitrate_stereoMode_Hist[15][e.mode_ext]++),t=0;t<e.mode_gr;++t)for(n=0;n<e.channels_out;++n){var r=0|e.l3_side.tt[t][n].block_type;0!=e.l3_side.tt[t][n].mixed_block_flag&&(r=4),e.bitrate_blockType_Hist[e.bitrate_index][r]++,e.bitrate_blockType_Hist[e.bitrate_index][5]++,e.bitrate_blockType_Hist[15][r]++,e.bitrate_blockType_Hist[15][5]++}}function f(e,t){var n,r,a=e.internal_flags;if(0==a.lame_encode_frame_init){var o,i,s=D(2014),l=D(2014);for(a.lame_encode_frame_init=1,o=0,i=0;o<286+576*(1+a.mode_gr);++o)o<576*a.mode_gr?(s[o]=0,2==a.channels_out&&(l[o]=0)):(s[o]=t[0][i],2==a.channels_out&&(l[o]=t[1][i]),++i);for(r=0;r<a.mode_gr;r++)for(n=0;n<a.channels_out;n++)a.l3_side.tt[r][n].block_type=P.SHORT_TYPE;u.mdct_sub48(a,s,l),R(576>=P.FFTOFFSET),R(a.mf_size>=P.BLKSIZE+e.framesize-P.FFTOFFSET),R(a.mf_size>=512+e.framesize-32)}}this.lame_encode_mp3_frame=function(e,d,h,p,m,v){var g,y=j([2,2]);y[0][0]=new t,y[0][1]=new t,y[1][0]=new t,y[1][1]=new t;var b,w=j([2,2]);w[0][0]=new t,w[0][1]=new t,w[1][0]=new t,w[1][1]=new t;var x,C,_,k=[null,null],S=e.internal_flags,M=L([2,4]),E=[.5,.5],N=[[0,0],[0,0]],D=[[0,0],[0,0]];if(k[0]=d,k[1]=h,0==S.lame_encode_frame_init&&f(e,k),S.padding=0,(S.slot_lag-=S.frac_SpF)<0&&(S.slot_lag+=e.out_samplerate,S.padding=1),0!=S.psymodel){var R=[null,null],O=0,F=A(2);for(_=0;_<S.mode_gr;_++){for(C=0;C<S.channels_out;C++)R[C]=k[C],O=576+576*_-P.FFTOFFSET;if(0!=(e.VBR==I.vbr_mtrh||e.VBR==I.vbr_mt?o.L3psycho_anal_vbr(e,R,O,_,y,w,N[_],D[_],M[_],F):o.L3psycho_anal_ns(e,R,O,_,y,w,N[_],D[_],M[_],F)))return-4;for(e.mode==MPEGMode.JOINT_STEREO&&(E[_]=M[_][2]+M[_][3],E[_]>0&&(E[_]=M[_][3]/E[_])),C=0;C<S.channels_out;C++){var B=S.l3_side.tt[_][C];B.block_type=F[C],B.mixed_block_flag=0}}}else for(_=0;_<S.mode_gr;_++)for(C=0;C<S.channels_out;C++)S.l3_side.tt[_][C].block_type=P.NORM_TYPE,S.l3_side.tt[_][C].mixed_block_flag=0,D[_][C]=N[_][C]=700;if(l(S),u.mdct_sub48(S,k[0],k[1]),S.mode_ext=P.MPG_MD_LR_LR,e.force_ms)S.mode_ext=P.MPG_MD_MS_LR;else if(e.mode==MPEGMode.JOINT_STEREO){var z=0,U=0;for(_=0;_<S.mode_gr;_++)for(C=0;C<S.channels_out;C++)z+=D[_][C],U+=N[_][C];if(z<=1*U){var W=S.l3_side.tt[0],V=S.l3_side.tt[S.mode_gr-1];W[0].block_type==W[1].block_type&&V[0].block_type==V[1].block_type&&(S.mode_ext=P.MPG_MD_MS_LR)}}if(S.mode_ext==r?(b=w,x=D):(b=y,x=N),e.analysis&&null!=S.pinfo)for(_=0;_<S.mode_gr;_++)for(C=0;C<S.channels_out;C++)S.pinfo.ms_ratio[_]=S.ms_ratio[_],S.pinfo.ms_ener_ratio[_]=E[_],S.pinfo.blocktype[_][C]=S.l3_side.tt[_][C].block_type,S.pinfo.pe[_][C]=x[_][C],T.arraycopy(S.l3_side.tt[_][C].xr,0,S.pinfo.xr[_][C],0,576),S.mode_ext==r&&(S.pinfo.ers[_][C]=S.pinfo.ers[_][C+2],T.arraycopy(S.pinfo.energy[_][C+2],0,S.pinfo.energy[_][C],0,S.pinfo.energy[_][C].length));if(e.VBR==I.vbr_off||e.VBR==I.vbr_abr){var H,Y;for(H=0;H<18;H++)S.nsPsy.pefirbuf[H]=S.nsPsy.pefirbuf[H+1];for(Y=0,_=0;_<S.mode_gr;_++)for(C=0;C<S.channels_out;C++)Y+=x[_][C];for(S.nsPsy.pefirbuf[18]=Y,Y=S.nsPsy.pefirbuf[9],H=0;H<9;H++)Y+=(S.nsPsy.pefirbuf[H]+S.nsPsy.pefirbuf[18-H])*P.fircoef[H];for(Y=3350*S.mode_gr*S.channels_out/Y,_=0;_<S.mode_gr;_++)for(C=0;C<S.channels_out;C++)x[_][C]*=Y}if(S.iteration_loop.iteration_loop(e,x,E,b),a.format_bitstream(e),g=a.copy_buffer(S,p,m,v,1),e.bWriteVbrTag&&i.addVbrFrame(e),e.analysis&&null!=S.pinfo){for(C=0;C<S.channels_out;C++){var G;for(G=0;G<n;G++)S.pinfo.pcmdata[C][G]=S.pinfo.pcmdata[C][G+e.framesize];for(G=n;G<1600;G++)S.pinfo.pcmdata[C][G]=k[C][G-n]}s.set_frame_pinfo(e,b)}return c(S),g}}P.ENCDELAY=576,P.POSTDELAY=1152,P.MDCTDELAY=48,P.FFTOFFSET=224+P.MDCTDELAY,P.DECDELAY=528,P.SBLIMIT=32,P.CBANDS=64,P.SBPSY_l=21,P.SBPSY_s=12,P.SBMAX_l=22,P.SBMAX_s=13,P.PSFB21=6,P.PSFB12=6,P.BLKSIZE=1024,P.HBLKSIZE=P.BLKSIZE/2+1,P.BLKSIZE_s=256,P.HBLKSIZE_s=P.BLKSIZE_s/2+1,P.NORM_TYPE=0,P.START_TYPE=1,P.SHORT_TYPE=2,P.STOP_TYPE=3,P.MPG_MD_LR_LR=0,P.MPG_MD_LR_I=1,P.MPG_MD_MS_LR=2,P.MPG_MD_MS_I=3,P.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5];var O=P,F=m.Util,B=m.new_float;function z(){var e=B(O.BLKSIZE),t=B(O.BLKSIZE_s/2),n=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function r(e,t,r){var a,o,i,s=0,u=t+(r<<=1);a=4;do{var l,c,f,d,h,p,m;m=a>>1,p=(h=a<<1)+(d=a),a=h<<1,i=(o=t)+m;do{C=e[o+0]-e[o+d],x=e[o+0]+e[o+d],M=e[o+h]-e[o+p],k=e[o+h]+e[o+p],e[o+h]=x-k,e[o+0]=x+k,e[o+p]=C-M,e[o+d]=C+M,C=e[i+0]-e[i+d],x=e[i+0]+e[i+d],M=F.SQRT2*e[i+p],k=F.SQRT2*e[i+h],e[i+h]=x-k,e[i+0]=x+k,e[i+p]=C-M,e[i+d]=C+M,i+=a,o+=a}while(o<u);for(c=n[s+0],l=n[s+1],f=1;f<m;f++){var v,g;v=1-2*l*l,g=2*l*c,o=t+f,i=t+d-f;do{var y,b,w,x,C,_,k,S,M,E;b=g*e[o+d]-v*e[i+d],y=v*e[o+d]+g*e[i+d],C=e[o+0]-y,x=e[o+0]+y,_=e[i+0]-b,w=e[i+0]+b,b=g*e[o+p]-v*e[i+p],y=v*e[o+p]+g*e[i+p],M=e[o+h]-y,k=e[o+h]+y,E=e[i+h]-b,S=e[i+h]+b,b=l*k-c*E,y=c*k+l*E,e[o+h]=x-y,e[o+0]=x+y,e[i+p]=_-b,e[i+d]=_+b,b=c*S-l*M,y=l*S+c*M,e[i+h]=w-y,e[i+0]=w+y,e[o+p]=C-b,e[o+d]=C+b,i+=a,o+=a}while(o<u);c=(v=c)*n[s+0]-l*n[s+1],l=v*n[s+1]+l*n[s+0]}s+=2}while(a<r)}var a=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,n,o,i,s){for(var u=0;u<3;u++){var l=O.BLKSIZE_s/2,c=65535&192*(u+1),f=O.BLKSIZE_s/8-1;do{var d,h,p,m,v,g=255&a[f<<2];h=(d=t[g]*i[o][s+g+c])-(v=t[127-g]*i[o][s+g+c+128]),d+=v,m=(p=t[g+64]*i[o][s+g+c+64])-(v=t[63-g]*i[o][s+g+c+192]),p+=v,l-=4,n[u][l+0]=d+p,n[u][l+2]=d-p,n[u][l+1]=h+m,n[u][l+3]=h-m,h=(d=t[g+1]*i[o][s+g+c+1])-(v=t[126-g]*i[o][s+g+c+129]),d+=v,m=(p=t[g+65]*i[o][s+g+c+65])-(v=t[62-g]*i[o][s+g+c+193]),p+=v,n[u][l+O.BLKSIZE_s/2+0]=d+p,n[u][l+O.BLKSIZE_s/2+2]=d-p,n[u][l+O.BLKSIZE_s/2+1]=h+m,n[u][l+O.BLKSIZE_s/2+3]=h-m}while(--f>=0);r(n[u],l,O.BLKSIZE_s/2)}},this.fft_long=function(t,n,o,i,s){var u=O.BLKSIZE/8-1,l=O.BLKSIZE/2;do{var c,f,d,h,p,m=255&a[u];f=(c=e[m]*i[o][s+m])-(p=e[m+512]*i[o][s+m+512]),c+=p,h=(d=e[m+256]*i[o][s+m+256])-(p=e[m+768]*i[o][s+m+768]),d+=p,n[0+(l-=4)]=c+d,n[l+2]=c-d,n[l+1]=f+h,n[l+3]=f-h,f=(c=e[m+1]*i[o][s+m+1])-(p=e[m+513]*i[o][s+m+513]),c+=p,h=(d=e[m+257]*i[o][s+m+257])-(p=e[m+769]*i[o][s+m+769]),d+=p,n[l+O.BLKSIZE/2+0]=c+d,n[l+O.BLKSIZE/2+2]=c-d,n[l+O.BLKSIZE/2+1]=f+h,n[l+O.BLKSIZE/2+3]=f-h}while(--u>=0);r(n,l,O.BLKSIZE/2)},this.init_fft=function(n){for(var r=0;r<O.BLKSIZE;r++)e[r]=.42-.5*Math.cos(2*Math.PI*(r+.5)/O.BLKSIZE)+.08*Math.cos(4*Math.PI*(r+.5)/O.BLKSIZE);for(r=0;r<O.BLKSIZE_s/2;r++)t[r]=.5*(1-Math.cos(2*Math.PI*(r+.5)/O.BLKSIZE_s))}}var U=z,W=m.VbrMode,V=m.Float,H=m.ShortBlock,Y=m.Util,G=m.Arrays,q=m.new_float,Q=m.new_float_n,X=m.new_int,K=m.assert;function J(){var e=new U,t=2.302585092994046,n=2,r=16,a=2,o=16,i=.34,s=1/217621504/(O.BLKSIZE/2),u=.01,l=.8,c=.6,f=.3,d=3.5,h=21,p=.2302585093;function m(e){return e}function v(e,t){for(var n=0,r=0;r<O.BLKSIZE/2;++r)n+=e[r]*t.ATH.eql_w[r];return n*=s}function g(t,n,r,a,o,i,s,u,l,c,f){var d=t.internal_flags;if(l<2)e.fft_long(d,a[o],l,c,f),e.fft_short(d,i[s],l,c,f);else if(2==l){for(var h=O.BLKSIZE-1;h>=0;--h){var p=a[o+0][h],g=a[o+1][h];a[o+0][h]=(p+g)*Y.SQRT2*.5,a[o+1][h]=(p-g)*Y.SQRT2*.5}for(var y=2;y>=0;--y)for(h=O.BLKSIZE_s-1;h>=0;--h)p=i[s+0][y][h],g=i[s+1][y][h],i[s+0][y][h]=(p+g)*Y.SQRT2*.5,i[s+1][y][h]=(p-g)*Y.SQRT2*.5}for(n[0]=m(a[o+0][0]),n[0]*=n[0],h=O.BLKSIZE/2-1;h>=0;--h){var b=a[o+0][O.BLKSIZE/2-h],w=a[o+0][O.BLKSIZE/2+h];n[O.BLKSIZE/2-h]=m(.5*(b*b+w*w))}for(y=2;y>=0;--y)for(r[y][0]=i[s+0][y][0],r[y][0]*=r[y][0],h=O.BLKSIZE_s/2-1;h>=0;--h)b=i[s+0][y][O.BLKSIZE_s/2-h],w=i[s+0][y][O.BLKSIZE_s/2+h],r[y][O.BLKSIZE_s/2-h]=m(.5*(b*b+w*w));var x=0;for(h=11;h<O.HBLKSIZE;h++)x+=n[h];if(d.tot_ener[l]=x,t.analysis){for(h=0;h<O.HBLKSIZE;h++)d.pinfo.energy[u][l][h]=d.pinfo.energy_save[l][h],d.pinfo.energy_save[l][h]=n[h];d.pinfo.pe[u][l]=d.pe[l]}2==t.athaa_loudapprox&&l<2&&(d.loudness_sq[u][l]=d.loudness_sq_save[l],d.loudness_sq_save[l]=v(n,d))}var y,b,w,x=8,C=23,_=15,k=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function S(){y=Math.pow(10,(x+1)/16),b=Math.pow(10,(C+1)/16),w=Math.pow(10,_/10)}var M=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],E=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],N=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276];function T(e,t,n,r,a,o){var i,s,u;if(t>e){if(!(t<e*b))return e+t;i=t/e}else{if(e>=t*b)return e+t;i=e/t}if(K(e>=0),K(t>=0),e+=t,r+3<=6){if(i>=y)return e;var l=0|Y.FAST_LOG10_X(i,16);return e*E[l]}return l=0|Y.FAST_LOG10_X(i,16),t=0!=o?a.ATH.cb_s[n]*a.ATH.adjust:a.ATH.cb_l[n]*a.ATH.adjust,K(t>=0),e<w*t?e>t?(s=1,l<=13&&(s=N[l]),u=Y.FAST_LOG10_X(e/t,10/15),e*((M[l]-s)*u+s)):l>13?e:e*N[l]:e*M[l]}var I=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1];function j(e,t,n){var r;if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;if(r=t>e?t/e:e/t,-2<=n&&n<=2){if(r>=y)return e+t;var a=0|Y.FAST_LOG10_X(r,16);return(e+t)*I[a]}return r<b?e+t:(e<t&&(e=t),e)}function D(e,t){var n=e.internal_flags;if(n.channels_out>1){for(var r=0;r<O.SBMAX_l;r++){var a=n.thm[0].l[r],o=n.thm[1].l[r];n.thm[0].l[r]+=o*t,n.thm[1].l[r]+=a*t}for(r=0;r<O.SBMAX_s;r++)for(var i=0;i<3;i++)a=n.thm[0].s[r][i],o=n.thm[1].s[r][i],n.thm[0].s[r][i]+=o*t,n.thm[1].s[r][i]+=a*t}}function L(e){for(var t=0;t<O.SBMAX_l;t++)if(!(e.thm[0].l[t]>1.58*e.thm[1].l[t]||e.thm[1].l[t]>1.58*e.thm[0].l[t])){var n=e.mld_l[t]*e.en[3].l[t],r=Math.max(e.thm[2].l[t],Math.min(e.thm[3].l[t],n));n=e.mld_l[t]*e.en[2].l[t];var a=Math.max(e.thm[3].l[t],Math.min(e.thm[2].l[t],n));e.thm[2].l[t]=r,e.thm[3].l[t]=a}for(t=0;t<O.SBMAX_s;t++)for(var o=0;o<3;o++)e.thm[0].s[t][o]>1.58*e.thm[1].s[t][o]||e.thm[1].s[t][o]>1.58*e.thm[0].s[t][o]||(n=e.mld_s[t]*e.en[3].s[t][o],r=Math.max(e.thm[2].s[t][o],Math.min(e.thm[3].s[t][o],n)),n=e.mld_s[t]*e.en[2].s[t][o],a=Math.max(e.thm[3].s[t][o],Math.min(e.thm[2].s[t][o],n)),e.thm[2].s[t][o]=r,e.thm[3].s[t][o]=a)}function A(e,t,n){var r=t,a=Math.pow(10,n);t*=2,r*=2;for(var o=0;o<O.SBMAX_l;o++)c=e.ATH.cb_l[e.bm_l[o]]*a,(s=Math.min(Math.max(e.thm[0].l[o],c),Math.max(e.thm[1].l[o],c)))*t<(u=Math.max(e.thm[2].l[o],c))+(l=Math.max(e.thm[3].l[o],c))&&K((u*=f=s*r/(u+l))+(l*=f)>0),e.thm[2].l[o]=Math.min(u,e.thm[2].l[o]),e.thm[3].l[o]=Math.min(l,e.thm[3].l[o]);for(a*=O.BLKSIZE_s/O.BLKSIZE,o=0;o<O.SBMAX_s;o++)for(var i=0;i<3;i++){var s,u,l,c,f;c=e.ATH.cb_s[e.bm_s[o]]*a,(s=Math.min(Math.max(e.thm[0].s[o][i],c),Math.max(e.thm[1].s[o][i],c)))*t<(u=Math.max(e.thm[2].s[o][i],c))+(l=Math.max(e.thm[3].s[o][i],c))&&K((u*=f=s*t/(u+l))+(l*=f)>0),e.thm[2].s[o][i]=Math.min(e.thm[2].s[o][i],u),e.thm[3].s[o][i]=Math.min(e.thm[3].s[o][i],l)}}function R(e,t,n,r,a){var o,i,s=0,u=0;for(o=i=0;o<O.SBMAX_s;++i,++o){for(var l=e.bo_s[o],c=e.npart_s,f=l<c?l:c;i<f;)K(t[i]>=0),K(n[i]>=0),s+=t[i],u+=n[i],i++;if(e.en[r].s[o][a]=s,e.thm[r].s[o][a]=u,i>=c){++o;break}K(t[i]>=0),K(n[i]>=0);var d=e.PSY.bo_s_weight[o],h=1-d;s=d*t[i],u=d*n[i],e.en[r].s[o][a]+=s,e.thm[r].s[o][a]+=u,s=h*t[i],u=h*n[i]}for(;o<O.SBMAX_s;++o)e.en[r].s[o][a]=0,e.thm[r].s[o][a]=0}function P(e,t,n,r){var a,o,i=0,s=0;for(a=o=0;a<O.SBMAX_l;++o,++a){for(var u=e.bo_l[a],l=e.npart_l,c=u<l?u:l;o<c;)K(t[o]>=0),K(n[o]>=0),i+=t[o],s+=n[o],o++;if(e.en[r].l[a]=i,e.thm[r].l[a]=s,o>=l){++a;break}K(t[o]>=0),K(n[o]>=0);var f=e.PSY.bo_l_weight[a],d=1-f;i=f*t[o],s=f*n[o],e.en[r].l[a]+=i,e.thm[r].l[a]+=s,i=d*t[o],s=d*n[o]}for(;a<O.SBMAX_l;++a)e.en[r].l[a]=0,e.thm[r].l[a]=0}function F(e,t,n,r,i,s){var u,l,c=e.internal_flags;for(l=u=0;l<c.npart_s;++l){for(var f=0,d=0,h=c.numlines_s[l],p=0;p<h;++p,++u){var m=t[s][u];f+=m,d<m&&(d=m)}n[l]=f}for(K(l==c.npart_s),K(129==u),u=l=0;l<c.npart_s;l++){var v=c.s3ind_s[l][0],g=c.s3_ss[u++]*n[v];for(++v;v<=c.s3ind_s[l][1];)g+=c.s3_ss[u]*n[v],++u,++v;var y=a*c.nb_s1[i][l];if(r[l]=Math.min(g,y),c.blocktype_old[1&i]==O.SHORT_TYPE){y=o*c.nb_s2[i][l];var b=r[l];r[l]=Math.min(y,b)}c.nb_s2[i][l]=c.nb_s1[i][l],c.nb_s1[i][l]=g,K(r[l]>=0)}for(;l<=O.CBANDS;++l)n[l]=0,r[l]=0}function B(e,t,n,r){var a=e.internal_flags;e.short_blocks!=H.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var o=0;o<a.channels_out;o++)r[o]=O.NORM_TYPE,e.short_blocks==H.short_block_dispensed&&(t[o]=1),e.short_blocks==H.short_block_forced&&(t[o]=0),0!=t[o]?(K(a.blocktype_old[o]!=O.START_TYPE),a.blocktype_old[o]==O.SHORT_TYPE&&(r[o]=O.STOP_TYPE)):(r[o]=O.SHORT_TYPE,a.blocktype_old[o]==O.NORM_TYPE&&(a.blocktype_old[o]=O.START_TYPE),a.blocktype_old[o]==O.STOP_TYPE&&(a.blocktype_old[o]=O.SHORT_TYPE)),n[o]=a.blocktype_old[o],a.blocktype_old[o]=r[o]}function z(e,t,n){return n>=1?e:n<=0?t:t>0?Math.pow(e/t,n)*t:0}var J=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function Z(e,n){for(var r=309.07,a=0;a<O.SBMAX_s-1;a++)for(var o=0;o<3;o++){var i=e.thm.s[a][o];if(K(a<J.length),i>0){var s=i*n,u=e.en.s[a][o];u>s&&(u>1e10*s?r+=J[a]*(10*t):(K(s>0),r+=J[a]*Y.FAST_LOG10(u/s)))}}return r}var $=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ee(e,n){for(var r=281.0575,a=0;a<O.SBMAX_l-1;a++){var o=e.thm.l[a];if(K(a<$.length),o>0){var i=o*n,s=e.en.l[a];s>i&&(s>1e10*i?r+=$[a]*(10*t):(K(i>0),r+=$[a]*Y.FAST_LOG10(s/i)))}}return r}function te(e,t,n,r,a){var o,i;for(o=i=0;o<e.npart_l;++o){var s,u=0,l=0;for(s=0;s<e.numlines_l[o];++s,++i){var c=t[i];K(c>=0),u+=c,l<c&&(l=c)}n[o]=u,r[o]=l,a[o]=u*e.rnumlines_l[o],K(e.rnumlines_l[o]>=0),K(u>=0),K(n[o]>=0),K(r[o]>=0),K(a[o]>=0)}}function ne(e,t,n,r){var a=k.length-1,o=0,i=n[o]+n[o+1];for(K(i>=0),i>0?((s=t[o])<t[o+1]&&(s=t[o+1]),K(e.numlines_l[o]+e.numlines_l[o+1]-1>0),(u=0|(i=20*(2*s-i)/(i*(e.numlines_l[o]+e.numlines_l[o+1]-1))))>a&&(u=a),r[o]=u):r[o]=0,o=1;o<e.npart_l-1;o++){var s,u;i=n[o-1]+n[o]+n[o+1],K(i>=0),i>0?((s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),K(e.numlines_l[o-1]+e.numlines_l[o]+e.numlines_l[o+1]-1>0),(u=0|(i=20*(3*s-i)/(i*(e.numlines_l[o-1]+e.numlines_l[o]+e.numlines_l[o+1]-1))))>a&&(u=a),r[o]=u):r[o]=0}K(o>0),K(o==e.npart_l-1),i=n[o-1]+n[o],K(i>=0),i>0?((s=t[o-1])<t[o]&&(s=t[o]),K(e.numlines_l[o-1]+e.numlines_l[o]-1>0),(u=0|(i=20*(2*s-i)/(i*(e.numlines_l[o-1]+e.numlines_l[o]-1))))>a&&(u=a),r[o]=u):r[o]=0,K(o==e.npart_l-1)}var re=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function ae(t,n,r,a,o,i,s,u){var l=t.internal_flags;if(a<2)e.fft_long(l,s[u],a,n,r);else if(2==a)for(var c=O.BLKSIZE-1;c>=0;--c){var f=s[u+0][c],d=s[u+1][c];s[u+0][c]=(f+d)*Y.SQRT2*.5,s[u+1][c]=(f-d)*Y.SQRT2*.5}for(i[0]=m(s[u+0][0]),i[0]*=i[0],c=O.BLKSIZE/2-1;c>=0;--c){var h=s[u+0][O.BLKSIZE/2-c],p=s[u+0][O.BLKSIZE/2+c];i[O.BLKSIZE/2-c]=m(.5*(h*h+p*p))}var v=0;for(c=11;c<O.HBLKSIZE;c++)v+=i[c];if(l.tot_ener[a]=v,t.analysis){for(c=0;c<O.HBLKSIZE;c++)l.pinfo.energy[o][a][c]=l.pinfo.energy_save[a][c],l.pinfo.energy_save[a][c]=i[c];l.pinfo.pe[o][a]=l.pe[a]}}function oe(t,n,r,a,o,i,s,u){var l=t.internal_flags;if(0==o&&a<2&&e.fft_short(l,s[u],a,n,r),2==a)for(var c=O.BLKSIZE_s-1;c>=0;--c){var f=s[u+0][o][c],d=s[u+1][o][c];s[u+0][o][c]=(f+d)*Y.SQRT2*.5,s[u+1][o][c]=(f-d)*Y.SQRT2*.5}for(i[o][0]=s[u+0][o][0],i[o][0]*=i[o][0],c=O.BLKSIZE_s/2-1;c>=0;--c){var h=s[u+0][o][O.BLKSIZE_s/2-c],p=s[u+0][o][O.BLKSIZE_s/2+c];i[o][O.BLKSIZE_s/2-c]=m(.5*(h*h+p*p))}}function ie(e,t,n,r){var a=e.internal_flags;2==e.athaa_loudapprox&&n<2&&(a.loudness_sq[t][n]=a.loudness_sq_save[n],a.loudness_sq_save[n]=v(r,a))}this.L3psycho_anal_ns=function(e,t,a,o,i,s,u,d,p,m){var v,y,b,w,x,C,_,S,M,E,N=e.internal_flags,I=Q([2,O.BLKSIZE]),j=Q([2,3,O.BLKSIZE_s]),U=q(O.CBANDS+1),V=q(O.CBANDS+1),H=q(O.CBANDS+2),Y=X(2),J=X(2),$=Q([2,576]),ae=X(O.CBANDS+2),oe=X(O.CBANDS+2);for(G.fill(oe,0),v=N.channels_out,e.mode==MPEGMode.JOINT_STEREO&&(v=4),M=e.VBR==W.vbr_off?0==N.ResvMax?0:N.ResvSize/N.ResvMax*.5:e.VBR==W.vbr_rh||e.VBR==W.vbr_mtrh||e.VBR==W.vbr_mt?.6:1,y=0;y<N.channels_out;y++){var ie=t[y],se=a+576-350-h+192;for(K(re.length==(h-1)/2),w=0;w<576;w++){var ue,le;for(ue=ie[se+w+10],le=0,x=0;x<(h-1)/2-1;x+=2)ue+=re[x]*(ie[se+w+x]+ie[se+w+h-x]),le+=re[x+1]*(ie[se+w+x+1]+ie[se+w+h-x-1]);$[y][w]=ue+le}i[o][y].en.assign(N.en[y]),i[o][y].thm.assign(N.thm[y]),v>2&&(s[o][y].en.assign(N.en[y+2]),s[o][y].thm.assign(N.thm[y+2]))}for(y=0;y<v;y++){var ce,fe=q(12),de=[0,0,0,0],he=q(12),pe=1,me=q(O.CBANDS),ve=q(O.CBANDS),ge=[0,0,0,0],ye=q(O.HBLKSIZE),be=Q([3,O.HBLKSIZE_s]);for(K(N.npart_s<=O.CBANDS),K(N.npart_l<=O.CBANDS),w=0;w<3;w++)fe[w]=N.nsPsy.last_en_subshort[y][w+6],K(N.nsPsy.last_en_subshort[y][w+4]>0),he[w]=fe[w]/N.nsPsy.last_en_subshort[y][w+4],de[0]+=fe[w];if(2==y)for(w=0;w<576;w++){var we,xe;we=$[0][w],xe=$[1][w],$[0][w]=we+xe,$[1][w]=we-xe}var Ce=$[1&y],_e=0;for(w=0;w<9;w++){for(var ke=_e+64,Se=1;_e<ke;_e++)Se<Math.abs(Ce[_e])&&(Se=Math.abs(Ce[_e]));N.nsPsy.last_en_subshort[y][w]=fe[w+3]=Se,de[1+w/3]+=Se,Se>fe[w+3-2]?(K(fe[w+3-2]>0),Se/=fe[w+3-2]):fe[w+3-2]>10*Se?(K(Se>0),Se=fe[w+3-2]/(10*Se)):Se=0,he[w+3]=Se}if(e.analysis){var Me=he[0];for(w=1;w<12;w++)Me<he[w]&&(Me=he[w]);N.pinfo.ers[o][y]=N.pinfo.ers_save[y],N.pinfo.ers_save[y]=Me}for(ce=3==y?N.nsPsy.attackthre_s:N.nsPsy.attackthre,w=0;w<12;w++)0==ge[w/3]&&he[w]>ce&&(ge[w/3]=w%3+1);for(w=1;w<4;w++){var Ee;de[w-1]>de[w]?(K(de[w]>0),Ee=de[w-1]/de[w]):(K(de[w-1]>0),Ee=de[w]/de[w-1]),Ee<1.7&&(ge[w]=0,1==w&&(ge[0]=0))}for(0!=ge[0]&&0!=N.nsPsy.lastAttacks[y]&&(ge[0]=0),3!=N.nsPsy.lastAttacks[y]&&ge[0]+ge[1]+ge[2]+ge[3]==0||(pe=0,0!=ge[1]&&0!=ge[0]&&(ge[1]=0),0!=ge[2]&&0!=ge[1]&&(ge[2]=0),0!=ge[3]&&0!=ge[2]&&(ge[3]=0)),y<2?J[y]=pe:0==pe&&(J[0]=J[1]=0),p[y]=N.tot_ener[y],g(e,ye,be,I,1&y,j,1&y,o,y,t,a),te(N,ye,U,me,ve),ne(N,me,ve,ae),S=0;S<3;S++){var Ne,Te;for(F(e,be,V,H,y,S),R(N,V,H,y,S),_=0;_<O.SBMAX_s;_++){if(Te=N.thm[y].s[_][S],Te*=l,ge[S]>=2||1==ge[S+1]){var Ie=0!=S?S-1:2;Se=z(N.thm[y].s[_][Ie],Te,c*M),Te=Math.min(Te,Se)}1==ge[S]?(Ie=0!=S?S-1:2,Se=z(N.thm[y].s[_][Ie],Te,f*M),Te=Math.min(Te,Se)):(0!=S&&3==ge[S-1]||0==S&&3==N.nsPsy.lastAttacks[y])&&(Ie=2!=S?S+1:0,Se=z(N.thm[y].s[_][Ie],Te,f*M),Te=Math.min(Te,Se)),Ne=fe[3*S+3]+fe[3*S+4]+fe[3*S+5],6*fe[3*S+5]<Ne&&(Te*=.5,6*fe[3*S+4]<Ne&&(Te*=.5)),N.thm[y].s[_][S]=Te}}for(N.nsPsy.lastAttacks[y]=ge[2],C=0,b=0;b<N.npart_l;b++){for(var je=N.s3ind[b][0],De=U[je]*k[ae[je]],Le=N.s3_ll[C++]*De;++je<=N.s3ind[b][1];)De=U[je]*k[ae[je]],Le=T(Le,N.s3_ll[C++]*De,je,je-b,N,0);Le*=.158489319246111,N.blocktype_old[1&y]==O.SHORT_TYPE?H[b]=Le:H[b]=z(Math.min(Le,Math.min(n*N.nb_1[y][b],r*N.nb_2[y][b])),Le,M),N.nb_2[y][b]=N.nb_1[y][b],N.nb_1[y][b]=Le}for(;b<=O.CBANDS;++b)U[b]=0,H[b]=0;P(N,U,H,y)}for(e.mode!=MPEGMode.STEREO&&e.mode!=MPEGMode.JOINT_STEREO||e.interChRatio>0&&D(e,e.interChRatio),e.mode==MPEGMode.JOINT_STEREO&&(L(N),E=e.msfix,Math.abs(E)>0&&A(N,E,e.ATHlower*N.ATH.adjust)),B(e,J,m,Y),y=0;y<v;y++){var Ae,Re,Pe,Oe=0;y>1?(Ae=d,Oe=-2,Re=O.NORM_TYPE,m[0]!=O.SHORT_TYPE&&m[1]!=O.SHORT_TYPE||(Re=O.SHORT_TYPE),Pe=s[o][y-2]):(Ae=u,Oe=0,Re=m[y],Pe=i[o][y]),Re==O.SHORT_TYPE?Ae[Oe+y]=Z(Pe,N.masking_lower):Ae[Oe+y]=ee(Pe,N.masking_lower),e.analysis&&(N.pinfo.pe[o][y]=Ae[Oe+y])}return 0};var se=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];function ue(e,t,n,r,a,o,i,s,u,l){for(var c=Q([2,576]),f=e.internal_flags,d=f.channels_out,p=e.mode==MPEGMode.JOINT_STEREO?4:d,m=0;m<d;m++){firbuf=t[m];var v=n+576-350-h+192;K(se.length==(h-1)/2);for(var g=0;g<576;g++){var y,b;y=firbuf[v+g+10],b=0;for(var w=0;w<(h-1)/2-1;w+=2)y+=se[w]*(firbuf[v+g+w]+firbuf[v+g+h-w]),b+=se[w+1]*(firbuf[v+g+w+1]+firbuf[v+g+h-w-1]);c[m][g]=y+b}a[r][m].en.assign(f.en[m]),a[r][m].thm.assign(f.thm[m]),p>2&&(o[r][m].en.assign(f.en[m+2]),o[r][m].thm.assign(f.thm[m+2]))}for(m=0;m<p;m++){var x=q(12),C=q(12),_=[0,0,0,0],k=c[1&m],S=0,M=3==m?f.nsPsy.attackthre_s:f.nsPsy.attackthre,E=1;if(2==m)for(g=0,w=576;w>0;++g,--w){var N=c[0][g],T=c[1][g];c[0][g]=N+T,c[1][g]=N-T}for(g=0;g<3;g++)C[g]=f.nsPsy.last_en_subshort[m][g+6],K(f.nsPsy.last_en_subshort[m][g+4]>0),x[g]=C[g]/f.nsPsy.last_en_subshort[m][g+4],_[0]+=C[g];for(g=0;g<9;g++){for(var I=S+64,j=1;S<I;S++)j<Math.abs(k[S])&&(j=Math.abs(k[S]));f.nsPsy.last_en_subshort[m][g]=C[g+3]=j,_[1+g/3]+=j,j>C[g+3-2]?(K(C[g+3-2]>0),j/=C[g+3-2]):C[g+3-2]>10*j?(K(j>0),j=C[g+3-2]/(10*j)):j=0,x[g+3]=j}for(g=0;g<3;++g){var D=C[3*g+3]+C[3*g+4]+C[3*g+5],L=1;6*C[3*g+5]<D&&(L*=.5,6*C[3*g+4]<D&&(L*=.5)),s[m][g]=L}if(e.analysis){var A=x[0];for(g=1;g<12;g++)A<x[g]&&(A=x[g]);f.pinfo.ers[r][m]=f.pinfo.ers_save[m],f.pinfo.ers_save[m]=A}for(g=0;g<12;g++)0==u[m][g/3]&&x[g]>M&&(u[m][g/3]=g%3+1);for(g=1;g<4;g++){var R=_[g-1],P=_[g];Math.max(R,P)<4e4&&R<1.7*P&&P<1.7*R&&(1==g&&u[m][0]<=u[m][g]&&(u[m][0]=0),u[m][g]=0)}u[m][0]<=f.nsPsy.lastAttacks[m]&&(u[m][0]=0),3!=f.nsPsy.lastAttacks[m]&&u[m][0]+u[m][1]+u[m][2]+u[m][3]==0||(E=0,0!=u[m][1]&&0!=u[m][0]&&(u[m][1]=0),0!=u[m][2]&&0!=u[m][1]&&(u[m][2]=0),0!=u[m][3]&&0!=u[m][2]&&(u[m][3]=0)),m<2?l[m]=E:0==E&&(l[0]=l[1]=0),i[m]=f.tot_ener[m]}}function le(e,t,n){if(0==n)for(var r=0;r<e.npart_s;r++)e.nb_s2[t][r]=e.nb_s1[t][r],e.nb_s1[t][r]=0}function ce(e,t){for(var n=0;n<e.npart_l;n++)e.nb_2[t][n]=e.nb_1[t][n],e.nb_1[t][n]=0}function fe(e,t,n,r){var a=k.length-1,o=0,i=n[o]+n[o+1];for(K(i>=0),i>0?((s=t[o])<t[o+1]&&(s=t[o+1]),K(e.numlines_s[o]+e.numlines_s[o+1]-1>0),(u=0|(i=20*(2*s-i)/(i*(e.numlines_s[o]+e.numlines_s[o+1]-1))))>a&&(u=a),r[o]=u):r[o]=0,o=1;o<e.npart_s-1;o++){var s,u;i=n[o-1]+n[o]+n[o+1],K(o+1<e.npart_s),K(i>=0),i>0?((s=t[o-1])<t[o]&&(s=t[o]),s<t[o+1]&&(s=t[o+1]),K(e.numlines_s[o-1]+e.numlines_s[o]+e.numlines_s[o+1]-1>0),(u=0|(i=20*(3*s-i)/(i*(e.numlines_s[o-1]+e.numlines_s[o]+e.numlines_s[o+1]-1))))>a&&(u=a),r[o]=u):r[o]=0}K(o>0),K(o==e.npart_s-1),i=n[o-1]+n[o],K(i>=0),i>0?((s=t[o-1])<t[o]&&(s=t[o]),K(e.numlines_s[o-1]+e.numlines_s[o]-1>0),(u=0|(i=20*(2*s-i)/(i*(e.numlines_s[o-1]+e.numlines_s[o]-1))))>a&&(u=a),r[o]=u):r[o]=0,K(o==e.npart_s-1)}function de(e,t,n,r,a,o){var i,s,u,l=e.internal_flags,c=new float[O.CBANDS],f=q(O.CBANDS),d=new int[O.CBANDS];for(u=s=0;u<l.npart_s;++u){var h=0,p=0,m=l.numlines_s[u];for(i=0;i<m;++i,++s){var v=t[o][s];h+=v,p<v&&(p=v)}n[u]=h,K(h>=0),c[u]=p,K(m>0),f[u]=h/m,K(f[u]>=0)}for(K(u==l.npart_s),K(129==s);u<O.CBANDS;++u)c[u]=0,f[u]=0;for(fe(l,c,f,d),s=u=0;u<l.npart_s;u++){var g,y,b,w,x,C=l.s3ind_s[u][0],_=l.s3ind_s[u][1];for(g=d[C],y=1,w=l.s3_ss[s]*n[C]*k[d[C]],++s,++C;C<=_;)g+=d[C],y+=1,w=j(w,b=l.s3_ss[s]*n[C]*k[d[C]],C-u),++s,++C;w*=x=.5*k[g=(1+2*g)/(2*y)],r[u]=w,l.nb_s2[a][u]=l.nb_s1[a][u],l.nb_s1[a][u]=w,b=c[u],b*=l.minval_s[u],b*=x,r[u]>b&&(r[u]=b),l.masking_lower>1&&(r[u]*=l.masking_lower),r[u]>n[u]&&(r[u]=n[u]),l.masking_lower<1&&(r[u]*=l.masking_lower),K(r[u]>=0)}for(;u<O.CBANDS;++u)n[u]=0,r[u]=0}function he(e,t,a,o,i){var s,u=q(O.CBANDS),l=q(O.CBANDS),c=X(O.CBANDS+2);te(e,t,a,u,l),ne(e,u,l,c);var d=0;for(s=0;s<e.npart_l;s++){var h,p,m,v=e.s3ind[s][0],g=e.s3ind[s][1],y=0,b=0;for(y=c[v],b+=1,p=e.s3_ll[d]*a[v]*k[c[v]],++d,++v;v<=g;)y+=c[v],b+=1,p=j(p,h=e.s3_ll[d]*a[v]*k[c[v]],v-s),++d,++v;if(p*=m=.5*k[y=(1+2*y)/(2*b)],e.blocktype_old[1&i]==O.SHORT_TYPE){var w=n*e.nb_1[i][s];o[s]=w>0?Math.min(p,w):Math.min(p,a[s]*f)}else{var x=r*e.nb_2[i][s],C=n*e.nb_1[i][s];x<=0&&(x=p),C<=0&&(C=p),w=e.blocktype_old[1&i]==O.NORM_TYPE?Math.min(C,x):C,o[s]=Math.min(p,w)}e.nb_2[i][s]=e.nb_1[i][s],e.nb_1[i][s]=p,h=u[s],h*=e.minval_l[s],h*=m,o[s]>h&&(o[s]=h),e.masking_lower>1&&(o[s]*=e.masking_lower),o[s]>a[s]&&(o[s]=a[s]),e.masking_lower<1&&(o[s]*=e.masking_lower),K(o[s]>=0)}for(;s<O.CBANDS;++s)a[s]=0,o[s]=0}function pe(e,t){var n=e.internal_flags;e.short_blocks!=H.short_block_coupled||0!=t[0]&&0!=t[1]||(t[0]=t[1]=0);for(var r=0;r<n.channels_out;r++)e.short_blocks==H.short_block_dispensed&&(t[r]=1),e.short_blocks==H.short_block_forced&&(t[r]=0)}function me(e,t,n){for(var r=e.internal_flags,a=0;a<r.channels_out;a++){var o=O.NORM_TYPE;0!=t[a]?(K(r.blocktype_old[a]!=O.START_TYPE),r.blocktype_old[a]==O.SHORT_TYPE&&(o=O.STOP_TYPE)):(o=O.SHORT_TYPE,r.blocktype_old[a]==O.NORM_TYPE&&(r.blocktype_old[a]=O.START_TYPE),r.blocktype_old[a]==O.STOP_TYPE&&(r.blocktype_old[a]=O.SHORT_TYPE)),n[a]=r.blocktype_old[a],r.blocktype_old[a]=o}}function ve(e,t,n,r,a,o,i){for(var s,u,l=2*o,c=o>0?Math.pow(10,a):1,f=0;f<i;++f){var d=e[2][f],h=e[3][f],p=t[0][f],m=t[1][f],v=t[2][f],g=t[3][f];if(p<=1.58*m&&m<=1.58*p){var y=n[f]*h,b=n[f]*d;u=Math.max(v,Math.min(g,y)),s=Math.max(g,Math.min(v,b))}else u=v,s=g;if(o>0){var w,x,C=r[f]*c;if(w=Math.min(Math.max(p,C),Math.max(m,C)),(x=(v=Math.max(u,C))+(g=Math.max(s,C)))>0&&w*l<x){var _=w*l/x;v*=_,g*=_,K(x>0)}u=Math.min(v,u),s=Math.min(g,s)}u>d&&(u=d),s>h&&(s=h),t[2][f]=u,t[3][f]=s}}function ge(e,t){var n;return(n=e>=0?27*-e:e*t)<=-72?0:Math.exp(n*p)}function ye(e){var t,n,r=0,a=0,o=0;for(o=0;ge(o,e)>1e-20;o-=1);for(t=o,n=0;Math.abs(n-t)>1e-12;)ge(o=(n+t)/2,e)>0?n=o:t=o;for(r=t,o=0,o=0;ge(o,e)>1e-20;o+=1);for(t=0,n=o;Math.abs(n-t)>1e-12;)ge(o=(n+t)/2,e)>0?t=o:n=o;a=n;var i,s=0,u=1e3;for(i=0;i<=u;++i)s+=ge(o=r+i*(a-r)/u,e);return(u+1)/(s*(a-r))}function be(e){var t,n,r,a;return t=e,n=(t*=t>=0?3:1.5)>=.5&&t<=2.5?8*((a=t-.5)*a-2*a):0,(r=15.811389+7.5*(t+=.474)-17.5*Math.sqrt(1+t*t))<=-60?0:(t=Math.exp((n+r)*p),t/=.6609193)}function we(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function xe(e,t,n,r,a,o,s,u,l,c,f,d){var h,p=q(O.CBANDS+1),m=u/(d>15?1152:384),v=X(O.HBLKSIZE);u/=l;var g=0,y=0;for(h=0;h<O.CBANDS;h++){var b;for(N=we(u*g),p[h]=u*g,b=g;we(u*b)-N<i&&b<=l/2;b++);for(e[h]=b-g,y=h+1;g<b;)K(g<O.HBLKSIZE),v[g++]=h;if(g>l/2){g=l/2,++h;break}}K(h<O.CBANDS),p[h]=u*g;for(var w=0;w<d;w++){var x,C,_,k,S;_=c[w],k=c[w+1],(x=0|Math.floor(.5+f*(_-.5)))<0&&(x=0),(C=0|Math.floor(.5+f*(k-.5)))>l/2&&(C=l/2),n[w]=(v[x]+v[C])/2,t[w]=v[C];var M=m*k;s[w]=(M-p[t[w]])/(p[t[w]+1]-p[t[w]]),s[w]<0?s[w]=0:s[w]>1&&(s[w]=1),S=we(u*c[w]*f),S=Math.min(S,15.5)/15.5,o[w]=Math.pow(10,1.25*(1-Math.cos(Math.PI*S))-2.5)}g=0;for(var E=0;E<y;E++){var N,T,I=e[E];N=we(u*g),T=we(u*(g+I-1)),r[E]=.5*(N+T),N=we(u*(g-.5)),T=we(u*(g+I-.5)),a[E]=T-N,g+=I}return y}function Ce(e,t,n,r,a,o){var i,s=Q([O.CBANDS,O.CBANDS]),u=0;if(o)for(var l=0;l<t;l++)for(i=0;i<t;i++){var c=be(n[l]-n[i])*r[i];s[l][i]=c*a[l]}else for(i=0;i<t;i++){var f=15+Math.min(21/n[i],12),d=ye(f);for(l=0;l<t;l++)c=d*ge(n[l]-n[i],f)*r[i],s[l][i]=c*a[l]}for(l=0;l<t;l++){for(i=0;i<t&&!(s[l][i]>0);i++);for(e[l][0]=i,i=t-1;i>0&&!(s[l][i]>0);i--);e[l][1]=i,u+=e[l][1]-e[l][0]+1}var h=q(u),p=0;for(l=0;l<t;l++)for(i=e[l][0];i<=e[l][1];i++)h[p++]=s[l][i];return h}function _e(e){var t=we(e);return t=Math.min(t,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*t))-2.5)}function ke(e,t){return e<-.3&&(e=3410),e/=1e3,e=Math.max(.1,e),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}this.L3psycho_anal_vbr=function(e,t,n,r,a,o,i,s,u,d){var h=e.internal_flags,p=q(O.HBLKSIZE),m=Q([3,O.HBLKSIZE_s]),v=Q([2,O.BLKSIZE]),g=Q([2,3,O.BLKSIZE_s]),y=Q([4,O.CBANDS]),b=Q([4,O.CBANDS]),w=Q([4,3]),x=.6,C=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],_=X(2),k=e.mode==MPEGMode.JOINT_STEREO?4:h.channels_out;ue(e,t,n,r,a,o,u,w,C,_),pe(e,_);for(var S=0;S<k;S++)ae(e,t,n,S,r,p,v,E=1&S),ie(e,r,S,p),0!=_[E]?he(h,p,y[S],b[S],S):ce(h,S);for(_[0]+_[1]==2&&e.mode==MPEGMode.JOINT_STEREO&&ve(y,b,h.mld_cb_l,h.ATH.cb_l,e.ATHlower*h.ATH.adjust,e.msfix,h.npart_l),S=0;S<k;S++)0!=_[E=1&S]&&P(h,y[S],b[S],S);for(var M=0;M<3;M++){for(S=0;S<k;++S)0!=_[E=1&S]?le(h,S,M):(oe(e,t,n,S,M,m,g,E),de(e,m,y[S],b[S],S,M));for(_[0]+_[1]==0&&e.mode==MPEGMode.JOINT_STEREO&&ve(y,b,h.mld_cb_s,h.ATH.cb_s,e.ATHlower*h.ATH.adjust,e.msfix,h.npart_s),S=0;S<k;++S)0==_[E=1&S]&&R(h,y[S],b[S],S,M)}for(S=0;S<k;S++){var E;if(0==_[E=1&S])for(var N=0;N<O.SBMAX_s;N++){var T=q(3);for(M=0;M<3;M++){var I=h.thm[S].s[N][M];if(I*=l,C[S][M]>=2||1==C[S][M+1]){var j=0!=M?M-1:2,D=z(h.thm[S].s[N][j],I,c*x);I=Math.min(I,D)}else 1==C[S][M]?(j=0!=M?M-1:2,D=z(h.thm[S].s[N][j],I,f*x),I=Math.min(I,D)):(0!=M&&3==C[S][M-1]||0==M&&3==h.nsPsy.lastAttacks[S])&&(j=2!=M?M+1:0,D=z(h.thm[S].s[N][j],I,f*x),I=Math.min(I,D));I*=w[S][M],T[M]=I}for(M=0;M<3;M++)h.thm[S].s[N][M]=T[M]}}for(S=0;S<k;S++)h.nsPsy.lastAttacks[S]=C[S][2];for(me(e,_,d),S=0;S<k;S++){var L,A,F,B;S>1?(L=s,A=-2,F=O.NORM_TYPE,d[0]!=O.SHORT_TYPE&&d[1]!=O.SHORT_TYPE||(F=O.SHORT_TYPE),B=o[r][S-2]):(L=i,A=0,F=d[S],B=a[r][S]),F==O.SHORT_TYPE?L[A+S]=Z(B,h.masking_lower):L[A+S]=ee(B,h.masking_lower),e.analysis&&(h.pinfo.pe[r][S]=L[A+S])}return 0},this.psymodel_init=function(n){var r,a,o=n.internal_flags,i=!0,s=13,l=24,c=0,f=0,h=-8.25,p=-4.5,m=q(O.CBANDS),v=q(O.CBANDS),g=q(O.CBANDS),y=n.out_samplerate;switch(n.experimentalZ){default:case 0:i=!0;break;case 1:i=n.VBR!=W.vbr_mtrh&&n.VBR!=W.vbr_mt;break;case 2:i=!1;break;case 3:s=8,c=-1.75,f=-.0125,h=-8.25,p=-2.25}for(o.ms_ener_ratio_old=.25,o.blocktype_old[0]=o.blocktype_old[1]=O.NORM_TYPE,r=0;r<4;++r){for(var b=0;b<O.CBANDS;++b)o.nb_1[r][b]=1e20,o.nb_2[r][b]=1e20,o.nb_s1[r][b]=o.nb_s2[r][b]=1;for(var w=0;w<O.SBMAX_l;w++)o.en[r].l[w]=1e20,o.thm[r].l[w]=1e20;for(b=0;b<3;++b){for(w=0;w<O.SBMAX_s;w++)o.en[r].s[w][b]=1e20,o.thm[r].s[w][b]=1e20;o.nsPsy.lastAttacks[r]=0}for(b=0;b<9;b++)o.nsPsy.last_en_subshort[r][b]=10}for(o.loudness_sq_save[0]=o.loudness_sq_save[1]=0,o.npart_l=xe(o.numlines_l,o.bo_l,o.bm_l,m,v,o.mld_l,o.PSY.bo_l_weight,y,O.BLKSIZE,o.scalefac_band.l,O.BLKSIZE/1152,O.SBMAX_l),K(o.npart_l<O.CBANDS),r=0;r<o.npart_l;r++){var x=c;m[r]>=s&&(x=f*(m[r]-s)/(l-s)+c*(l-m[r])/(l-s)),g[r]=Math.pow(10,x/10),o.numlines_l[r]>0?o.rnumlines_l[r]=1/o.numlines_l[r]:o.rnumlines_l[r]=0}for(o.s3_ll=Ce(o.s3ind,o.npart_l,m,v,g,i),b=0,r=0;r<o.npart_l;r++){k=V.MAX_VALUE;for(var C=0;C<o.numlines_l[r];C++,b++){var _=y*b/(1e3*O.BLKSIZE);M=this.ATHformula(1e3*_,n)-20,M=Math.pow(10,.1*M),k>(M*=o.numlines_l[r])&&(k=M)}o.ATH.cb_l[r]=k,(k=20*m[r]/10-20)>6&&(k=100),k<-15&&(k=-15),k-=8,o.minval_l[r]=Math.pow(10,k/10)*o.numlines_l[r]}for(o.npart_s=xe(o.numlines_s,o.bo_s,o.bm_s,m,v,o.mld_s,o.PSY.bo_s_weight,y,O.BLKSIZE_s,o.scalefac_band.s,O.BLKSIZE_s/384,O.SBMAX_s),K(o.npart_s<O.CBANDS),b=0,r=0;r<o.npart_s;r++){var k;for(x=h,m[r]>=s&&(x=p*(m[r]-s)/(l-s)+h*(l-m[r])/(l-s)),g[r]=Math.pow(10,x/10),k=V.MAX_VALUE,C=0;C<o.numlines_s[r];C++,b++){var M;_=y*b/(1e3*O.BLKSIZE_s),M=this.ATHformula(1e3*_,n)-20,M=Math.pow(10,.1*M),k>(M*=o.numlines_s[r])&&(k=M)}o.ATH.cb_s[r]=k,k=7*m[r]/12-7,m[r]>12&&(k*=1+3.1*Math.log(1+k)),m[r]<12&&(k*=1+2.3*Math.log(1-k)),k<-15&&(k=-15),k-=8,o.minval_s[r]=Math.pow(10,k/10)*o.numlines_s[r]}o.s3_ss=Ce(o.s3ind_s,o.npart_s,m,v,g,i),S(),e.init_fft(o),o.decay=Math.exp(-1*t/(u*y/192)),a=d,0!=(2&n.exp_nspsytune)&&(a=1),Math.abs(n.msfix)>0&&(a=n.msfix),n.msfix=a;for(var E=0;E<o.npart_l;E++)o.s3ind[E][1]>o.npart_l-1&&(o.s3ind[E][1]=o.npart_l-1);var N=576*o.mode_gr/y;if(o.ATH.decay=Math.pow(10,-1.2*N),o.ATH.adjust=.01,o.ATH.adjustLimit=1,K(o.bo_l[O.SBMAX_l-1]<=o.npart_l),K(o.bo_s[O.SBMAX_s-1]<=o.npart_s),-1!=n.ATHtype){var T=n.out_samplerate/O.BLKSIZE,I=0;for(_=0,r=0;r<O.BLKSIZE/2;++r)_+=T,o.ATH.eql_w[r]=1/Math.pow(10,this.ATHformula(_,n)/10),I+=o.ATH.eql_w[r];for(I=1/I,r=O.BLKSIZE/2;--r>=0;)o.ATH.eql_w[r]*=I}for(E=b=0;E<o.npart_s;++E)for(r=0;r<o.numlines_s[E];++r)++b;for(K(129==b),E=b=0;E<o.npart_l;++E)for(r=0;r<o.numlines_l[E];++r)++b;for(K(513==b),b=0,r=0;r<o.npart_l;r++)_=y*(b+o.numlines_l[r]/2)/(1*O.BLKSIZE),o.mld_cb_l[r]=_e(_),b+=o.numlines_l[r];for(;r<O.CBANDS;++r)o.mld_cb_l[r]=1;for(b=0,r=0;r<o.npart_s;r++)_=y*(b+o.numlines_s[r]/2)/(1*O.BLKSIZE_s),o.mld_cb_s[r]=_e(_),b+=o.numlines_s[r];for(;r<O.CBANDS;++r)o.mld_cb_s[r]=1;return 0},this.ATHformula=function(e,t){var n;switch(t.ATHtype){case 0:n=ke(e,9);break;case 1:n=ke(e,-1);break;case 2:default:n=ke(e,0);break;case 3:n=ke(e,1)+6;break;case 4:n=ke(e,t.ATHcurve)}return n}}var Z=J;function $(e){var t=e;this.ordinal=function(){return t}}$.STEREO=new $(0),$.JOINT_STEREO=new $(1),$.DUAL_CHANNEL=new $(2),$.MONO=new $(3),$.NOT_SET=new $(4);var ee=$;function te(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=ee.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var ne=te,re={};re.SFBMAX=3*O.SBMAX_s;var ae=re,oe=m.new_float,ie=m.new_int;function se(){this.xr=oe(576),this.l3_enc=ie(576),this.scalefac=ie(ae.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=ie(3),this.subblock_gain=ie(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=ie(ae.SFBMAX),this.window=ie(ae.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=ie(4),this.max_nonzero_coeff=0;var e=this;function t(e){return new Int32Array(e)}function n(e){return new Float32Array(e)}this.assign=function(r){e.xr=n(r.xr),e.l3_enc=t(r.l3_enc),e.scalefac=t(r.scalefac),e.xrpow_max=r.xrpow_max,e.part2_3_length=r.part2_3_length,e.big_values=r.big_values,e.count1=r.count1,e.global_gain=r.global_gain,e.scalefac_compress=r.scalefac_compress,e.block_type=r.block_type,e.mixed_block_flag=r.mixed_block_flag,e.table_select=t(r.table_select),e.subblock_gain=t(r.subblock_gain),e.region0_count=r.region0_count,e.region1_count=r.region1_count,e.preflag=r.preflag,e.scalefac_scale=r.scalefac_scale,e.count1table_select=r.count1table_select,e.part2_length=r.part2_length,e.sfb_lmax=r.sfb_lmax,e.sfb_smin=r.sfb_smin,e.psy_lmax=r.psy_lmax,e.sfbmax=r.sfbmax,e.psymax=r.psymax,e.sfbdivide=r.sfbdivide,e.width=t(r.width),e.window=t(r.window),e.count1bits=r.count1bits,e.sfb_partition_table=r.sfb_partition_table.slice(0),e.slen=t(r.slen),e.max_nonzero_coeff=r.max_nonzero_coeff}}var ue=se,le=m.new_int;function ce(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[le(4),le(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new ue}var fe=ce,de=m.System,he=m.new_int;function pe(e,t,n,r){this.l=he(1+O.SBMAX_l),this.s=he(1+O.SBMAX_s),this.psfb21=he(1+O.PSFB21),this.psfb12=he(1+O.PSFB12);var a=this.l,o=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],de.arraycopy(this.arrL,0,a,0,Math.min(this.arrL.length,this.l.length)),de.arraycopy(this.arrS,0,o,0,Math.min(this.arrS.length,this.s.length)),de.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),de.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var me=pe,ve=m.new_float,ge=m.new_float_n,ye=m.new_int;function be(){this.last_en_subshort=ge([4,9]),this.lastAttacks=ye(4),this.pefirbuf=ve(19),this.longfact=ve(O.SBMAX_l),this.shortfact=ve(O.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var we=be;function xe(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var Ce=xe,_e=m.new_byte,ke=m.new_double,Se=m.new_float,Me=m.new_float_n,Ee=m.new_int,Ne=m.new_int_n;function Te(){var e=40;function t(){this.write_timing=0,this.ptr=0,this.buf=_e(e)}this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Me([2,Te.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new fe,this.ms_ratio=Se(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Ee(2),this.CurrentStep=Ee(2),this.masking_lower=0,this.bv_scf=Ee(576),this.pseudohalf=Ee(ae.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*Te.BPC+1),this.itime=ke(2),this.sideinfo_len=0,this.sb_sample=Me([2,2,18,O.SBLIMIT]),this.amp_filter=Se(32),this.header=new Array(Te.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new me,this.minval_l=Se(O.CBANDS),this.minval_s=Se(O.CBANDS),this.nb_1=Me([4,O.CBANDS]),this.nb_2=Me([4,O.CBANDS]),this.nb_s1=Me([4,O.CBANDS]),this.nb_s2=Me([4,O.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=Se(4),this.loudness_sq=Me([2,2]),this.loudness_sq_save=Se(2),this.mld_l=Se(O.SBMAX_l),this.mld_s=Se(O.SBMAX_s),this.bm_l=Ee(O.SBMAX_l),this.bo_l=Ee(O.SBMAX_l),this.bm_s=Ee(O.SBMAX_s),this.bo_s=Ee(O.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Ne([O.CBANDS,2]),this.s3ind_s=Ne([O.CBANDS,2]),this.numlines_s=Ee(O.CBANDS),this.numlines_l=Ee(O.CBANDS),this.rnumlines_l=Se(O.CBANDS),this.mld_cb_l=Se(O.CBANDS),this.mld_cb_s=Se(O.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=Se(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Ee(2),this.nsPsy=new we,this.VBR_seek_table=new Ce,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Ne([16,5]),this.bitrate_blockType_Hist=Ne([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var n=0;n<this.en.length;n++)this.en[n]=new M;for(n=0;n<this.thm.length;n++)this.thm[n]=new M;for(n=0;n<this.header.length;n++)this.header[n]=new t}Te.MFSIZE=3456+O.ENCDELAY-O.MDCTDELAY,Te.MAX_HEADER_BUF=256,Te.MAX_BITS_PER_CHANNEL=4095,Te.MAX_BITS_PER_GRANULE=7680,Te.BPC=320;var Ie=Te,je=m.new_float;function De(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=je(O.SBMAX_l),this.s=je(O.SBMAX_s),this.psfb21=je(O.PSFB21),this.psfb12=je(O.PSFB12),this.cb_l=je(O.CBANDS),this.cb_s=je(O.CBANDS),this.eql_w=je(O.BLKSIZE/2)}var Le=De,Ae=m.System,Re=m.Arrays;function Pe(){var e=64.82,t=(Pe.YULE_ORDER,.95),n=(Pe.MAX_SAMP_FREQ,Pe.RMS_WINDOW_TIME_NUMERATOR),r=Pe.RMS_WINDOW_TIME_DENOMINATOR,a=(Pe.MAX_SAMPLES_PER_WINDOW,[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]]),o=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function i(e,t,n,r,a,o){for(;0!=a--;)n[r]=1e-10+e[t+0]*o[0]-n[r-1]*o[1]+e[t-1]*o[2]-n[r-2]*o[3]+e[t-2]*o[4]-n[r-3]*o[5]+e[t-3]*o[6]-n[r-4]*o[7]+e[t-4]*o[8]-n[r-5]*o[9]+e[t-5]*o[10]-n[r-6]*o[11]+e[t-6]*o[12]-n[r-7]*o[13]+e[t-7]*o[14]-n[r-8]*o[15]+e[t-8]*o[16]-n[r-9]*o[17]+e[t-9]*o[18]-n[r-10]*o[19]+e[t-10]*o[20],++r,++t}function s(e,t,n,r,a,o){for(;0!=a--;)n[r]=e[t+0]*o[0]-n[r-1]*o[1]+e[t-1]*o[2]-n[r-2]*o[3]+e[t-2]*o[4],++r,++t}function u(e,t){for(var a=0;a<MAX_ORDER;a++)e.linprebuf[a]=e.lstepbuf[a]=e.loutbuf[a]=e.rinprebuf[a]=e.rstepbuf[a]=e.routbuf[a]=0;switch(0|t){case 48e3:e.reqindex=0;break;case 44100:e.reqindex=1;break;case 32e3:e.reqindex=2;break;case 24e3:e.reqindex=3;break;case 22050:e.reqindex=4;break;case 16e3:e.reqindex=5;break;case 12e3:e.reqindex=6;break;case 11025:e.reqindex=7;break;case 8e3:e.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return e.sampleWindow=0|(t*n+r-1)/r,e.lsum=0,e.rsum=0,e.totsamp=0,Re.ill(e.A,0),INIT_GAIN_ANALYSIS_OK}function l(e){return e*e}function c(n,r){var a,o=0;for(a=0;a<r;a++)o+=n[a];if(0==o)return GAIN_NOT_ENOUGH_SAMPLES;var i=0|Math.ceil(o*(1-t));for(a=r;a-- >0&&!((i-=n[a])<=0););return e-a/Pe.STEPS_per_dB}this.InitGainAnalysis=function(e,t){return u(e,t)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(e.linpre=MAX_ORDER,e.rinpre=MAX_ORDER,e.lstep=MAX_ORDER,e.rstep=MAX_ORDER,e.lout=MAX_ORDER,e.rout=MAX_ORDER,Re.fill(e.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,n,r,u,c,f){var d,h,p,m,v,g,y;if(0==c)return GAIN_ANALYSIS_OK;switch(y=0,v=c,f){case 1:r=t,u=n;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(c<MAX_ORDER?(Ae.arraycopy(t,n,e.linprebuf,MAX_ORDER,c),Ae.arraycopy(r,u,e.rinprebuf,MAX_ORDER,c)):(Ae.arraycopy(t,n,e.linprebuf,MAX_ORDER,MAX_ORDER),Ae.arraycopy(r,u,e.rinprebuf,MAX_ORDER,MAX_ORDER));v>0;){g=v>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:v,y<MAX_ORDER?(d=e.linpre+y,h=e.linprebuf,p=e.rinpre+y,m=e.rinprebuf,g>MAX_ORDER-y&&(g=MAX_ORDER-y)):(d=n+y,h=t,p=u+y,m=r),i(h,d,e.lstepbuf,e.lstep+e.totsamp,g,a[e.reqindex]),i(m,p,e.rstepbuf,e.rstep+e.totsamp,g,a[e.reqindex]),s(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,g,o[e.reqindex]),s(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,g,o[e.reqindex]),d=e.lout+e.totsamp,h=e.loutbuf,p=e.rout+e.totsamp,m=e.routbuf;for(var b=g%8;0!=b--;)e.lsum+=l(h[d++]),e.rsum+=l(m[p++]);for(b=g/8;0!=b--;)e.lsum+=l(h[d+0])+l(h[d+1])+l(h[d+2])+l(h[d+3])+l(h[d+4])+l(h[d+5])+l(h[d+6])+l(h[d+7]),d+=8,e.rsum+=l(m[p+0])+l(m[p+1])+l(m[p+2])+l(m[p+3])+l(m[p+4])+l(m[p+5])+l(m[p+6])+l(m[p+7]),p+=8;if(v-=g,y+=g,e.totsamp+=g,e.totsamp==e.sampleWindow){var w=10*Pe.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37),x=w<=0?0:0|w;x>=e.A.length&&(x=e.A.length-1),e.A[x]++,e.lsum=e.rsum=0,Ae.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),Ae.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),Ae.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),Ae.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0}if(e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return c<MAX_ORDER?(Ae.arraycopy(e.linprebuf,c,e.linprebuf,0,MAX_ORDER-c),Ae.arraycopy(e.rinprebuf,c,e.rinprebuf,0,MAX_ORDER-c),Ae.arraycopy(t,n,e.linprebuf,MAX_ORDER-c,c),Ae.arraycopy(r,u,e.rinprebuf,MAX_ORDER-c,c)):(Ae.arraycopy(t,n+c-MAX_ORDER,e.linprebuf,0,MAX_ORDER),Ae.arraycopy(r,u+c-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){for(var t=c(e.A,e.A.length),n=0;n<e.A.length;n++)e.B[n]+=e.A[n],e.A[n]=0;for(n=0;n<MAX_ORDER;n++)e.linprebuf[n]=e.lstepbuf[n]=e.loutbuf[n]=e.rinprebuf[n]=e.rstepbuf[n]=e.routbuf[n]=0;return e.totsamp=0,e.lsum=e.rsum=0,t}}Pe.STEPS_per_dB=100,Pe.MAX_dB=120,Pe.GAIN_NOT_ENOUGH_SAMPLES=-24601,Pe.GAIN_ANALYSIS_ERROR=0,Pe.GAIN_ANALYSIS_OK=1,Pe.INIT_GAIN_ANALYSIS_ERROR=0,Pe.INIT_GAIN_ANALYSIS_OK=1,Pe.YULE_ORDER=10,Pe.MAX_ORDER=Pe.YULE_ORDER,Pe.MAX_SAMP_FREQ=48e3,Pe.RMS_WINDOW_TIME_NUMERATOR=1,Pe.RMS_WINDOW_TIME_DENOMINATOR=20,Pe.MAX_SAMPLES_PER_WINDOW=Pe.MAX_SAMP_FREQ*Pe.RMS_WINDOW_TIME_NUMERATOR/Pe.RMS_WINDOW_TIME_DENOMINATOR+1;var Oe=Pe,Fe=m.new_float,Be=m.new_int;function ze(){this.linprebuf=Fe(2*Oe.MAX_ORDER),this.linpre=0,this.lstepbuf=Fe(Oe.MAX_SAMPLES_PER_WINDOW+Oe.MAX_ORDER),this.lstep=0,this.loutbuf=Fe(Oe.MAX_SAMPLES_PER_WINDOW+Oe.MAX_ORDER),this.lout=0,this.rinprebuf=Fe(2*Oe.MAX_ORDER),this.rinpre=0,this.rstepbuf=Fe(Oe.MAX_SAMPLES_PER_WINDOW+Oe.MAX_ORDER),this.rstep=0,this.routbuf=Fe(Oe.MAX_SAMPLES_PER_WINDOW+Oe.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=Be(0|Oe.STEPS_per_dB*Oe.MAX_dB),this.B=Be(0|Oe.STEPS_per_dB*Oe.MAX_dB)}var Ue=ze;function We(e){this.bits=e}var Ve=We,He=m.new_float,Ye=m.new_int,Ge=m.assert;function qe(e){var t=e;this.quantize=t,this.iteration_loop=function(e,t,n,r){var a,o=e.internal_flags,i=He(ae.SFBMAX),s=He(576),u=Ye(2),l=0,c=o.l3_side,f=new Ve(l);this.quantize.rv.ResvFrameBegin(e,f),l=f.bits;for(var d=0;d<o.mode_gr;d++){a=this.quantize.qupvt.on_pe(e,t,u,l,d,d),o.mode_ext==O.MPG_MD_MS_LR&&(this.quantize.ms_convert(o.l3_side,d),this.quantize.qupvt.reduce_side(u,n[d],l,a));for(var h=0;h<o.channels_out;h++){var p,m,v=c.tt[d][h];v.block_type!=O.SHORT_TYPE?(p=0,m=o.PSY.mask_adjust-p):(p=0,m=o.PSY.mask_adjust_short-p),o.masking_lower=Math.pow(10,.1*m),this.quantize.init_outer_loop(o,v),this.quantize.init_xrpow(o,v,s)&&(this.quantize.qupvt.calc_xmin(e,r[d][h],v,i),this.quantize.outer_loop(e,v,i,s,h,u[h])),this.quantize.iteration_finish_one(o,d,h),Ge(v.part2_3_length<=Ie.MAX_BITS_PER_CHANNEL),Ge(v.part2_3_length<=u[h])}}this.quantize.rv.ResvFrameEnd(o,l)}}var Qe=qe;function Xe(e,t,n,r){this.xlen=e,this.linmax=t,this.table=n,this.hlen=r}var Ke={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};Ke.ht=[new Xe(0,0,null,null),new Xe(2,0,Ke.t1HB,Ke.t1l),new Xe(3,0,Ke.t2HB,Ke.t2l),new Xe(3,0,Ke.t3HB,Ke.t3l),new Xe(0,0,null,null),new Xe(4,0,Ke.t5HB,Ke.t5l),new Xe(4,0,Ke.t6HB,Ke.t6l),new Xe(6,0,Ke.t7HB,Ke.t7l),new Xe(6,0,Ke.t8HB,Ke.t8l),new Xe(6,0,Ke.t9HB,Ke.t9l),new Xe(8,0,Ke.t10HB,Ke.t10l),new Xe(8,0,Ke.t11HB,Ke.t11l),new Xe(8,0,Ke.t12HB,Ke.t12l),new Xe(16,0,Ke.t13HB,Ke.t13l),new Xe(0,0,null,Ke.t16_5l),new Xe(16,0,Ke.t15HB,Ke.t15l),new Xe(1,1,Ke.t16HB,Ke.t16l),new Xe(2,3,Ke.t16HB,Ke.t16l),new Xe(3,7,Ke.t16HB,Ke.t16l),new Xe(4,15,Ke.t16HB,Ke.t16l),new Xe(6,63,Ke.t16HB,Ke.t16l),new Xe(8,255,Ke.t16HB,Ke.t16l),new Xe(10,1023,Ke.t16HB,Ke.t16l),new Xe(13,8191,Ke.t16HB,Ke.t16l),new Xe(4,15,Ke.t24HB,Ke.t24l),new Xe(5,31,Ke.t24HB,Ke.t24l),new Xe(6,63,Ke.t24HB,Ke.t24l),new Xe(7,127,Ke.t24HB,Ke.t24l),new Xe(8,255,Ke.t24HB,Ke.t24l),new Xe(9,511,Ke.t24HB,Ke.t24l),new Xe(11,2047,Ke.t24HB,Ke.t24l),new Xe(13,8191,Ke.t24HB,Ke.t24l),new Xe(0,0,Ke.t32HB,Ke.t32l),new Xe(0,0,Ke.t33HB,Ke.t33l)],Ke.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],Ke.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],Ke.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],Ke.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],Ke.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],Ke.scfsi_band=[0,6,11,16,21];var Je=Ke,Ze=m.VbrMode,$e=m.Float,et=m.Util,tt=m.new_float,nt=m.new_int,rt=m.assert;function at(){var e=null,t=null,n=null;function r(e){return rt(0<=e+at.Q_MAX2&&e<at.Q_MAX),c[e+at.Q_MAX2]}this.setModules=function(r,a,o){e=r,t=a,n=o},this.IPOW20=function(e){return rt(0<=e&&e<at.Q_MAX),f[e]};var a=2220446049250313e-31,o=at.IXMAX_VAL+2,i=at.Q_MAX,s=at.Q_MAX2,u=(at.LARGE_BITS,100);this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var l=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=l,this.sfBandIndex=[new me([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new me([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var c=tt(i+s+1),f=tt(i),d=tt(o),h=tt(o);function p(e,t){var r=n.ATHformula(t,e);return r-=u,r=Math.pow(10,r/10+e.ATHlower)}function m(e){for(var t=e.internal_flags.ATH.l,n=e.internal_flags.ATH.psfb21,r=e.internal_flags.ATH.s,a=e.internal_flags.ATH.psfb12,o=e.internal_flags,i=e.out_samplerate,s=0;s<O.SBMAX_l;s++){var u=o.scalefac_band.l[s],l=o.scalefac_band.l[s+1];t[s]=$e.MAX_VALUE;for(var c=u;c<l;c++){var f=p(e,c*i/1152);t[s]=Math.min(t[s],f)}}for(s=0;s<O.PSFB21;s++)for(u=o.scalefac_band.psfb21[s],l=o.scalefac_band.psfb21[s+1],n[s]=$e.MAX_VALUE,c=u;c<l;c++)f=p(e,c*i/1152),n[s]=Math.min(n[s],f);for(s=0;s<O.SBMAX_s;s++){for(u=o.scalefac_band.s[s],l=o.scalefac_band.s[s+1],r[s]=$e.MAX_VALUE,c=u;c<l;c++)f=p(e,c*i/384),r[s]=Math.min(r[s],f);r[s]*=o.scalefac_band.s[s+1]-o.scalefac_band.s[s]}for(s=0;s<O.PSFB12;s++){for(u=o.scalefac_band.psfb12[s],l=o.scalefac_band.psfb12[s+1],a[s]=$e.MAX_VALUE,c=u;c<l;c++)f=p(e,c*i/384),a[s]=Math.min(a[s],f);a[s]*=o.scalefac_band.s[13]-o.scalefac_band.s[12]}if(e.noATH){for(s=0;s<O.SBMAX_l;s++)t[s]=1e-20;for(s=0;s<O.PSFB21;s++)n[s]=1e-20;for(s=0;s<O.SBMAX_s;s++)r[s]=1e-20;for(s=0;s<O.PSFB12;s++)a[s]=1e-20}o.ATH.floor=10*Math.log10(p(e,-1))}function v(e){this.s=e}this.adj43=h,this.iteration_init=function(t){var n,r=t.internal_flags,a=r.l3_side;if(0==r.iteration_init_init){for(r.iteration_init_init=1,a.main_data_begin=0,m(t),d[0]=0,n=1;n<o;n++)d[n]=Math.pow(n,4/3);for(n=0;n<o-1;n++)h[n]=n+1-Math.pow(.5*(d[n]+d[n+1]),.75);for(h[n]=.5,n=0;n<i;n++)f[n]=Math.pow(2,-.1875*(n-210));for(n=0;n<=i+s;n++)c[n]=Math.pow(2,.25*(n-210-s));var u,l,p,v;for(e.huffman_init(r),(n=t.exp_nspsytune>>2&63)>=32&&(n-=64),u=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>8&63)>=32&&(n-=64),l=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>14&63)>=32&&(n-=64),p=Math.pow(10,n/4/10),(n=t.exp_nspsytune>>20&63)>=32&&(n-=64),v=p*Math.pow(10,n/4/10),n=0;n<O.SBMAX_l;n++)g=n<=6?u:n<=13?l:n<=20?p:v,r.nsPsy.longfact[n]=g;for(n=0;n<O.SBMAX_s;n++){var g;g=n<=5?u:n<=10?l:n<=11?p:v,r.nsPsy.shortfact[n]=g}}},this.on_pe=function(e,n,r,a,o,i){var s,u,l=e.internal_flags,c=0,f=nt(2),d=new Ve(c),h=t.ResvMaxBits(e,a,d,i),p=(c=d.bits)+h;for(p>Ie.MAX_BITS_PER_GRANULE&&(p=Ie.MAX_BITS_PER_GRANULE),s=0,u=0;u<l.channels_out;++u)r[u]=Math.min(Ie.MAX_BITS_PER_CHANNEL,c/l.channels_out),f[u]=0|r[u]*n[o][u]/700-r[u],f[u]>3*a/4&&(f[u]=3*a/4),f[u]<0&&(f[u]=0),f[u]+r[u]>Ie.MAX_BITS_PER_CHANNEL&&(f[u]=Math.max(0,Ie.MAX_BITS_PER_CHANNEL-r[u])),s+=f[u];if(s>h)for(u=0;u<l.channels_out;++u)f[u]=h*f[u]/s;for(u=0;u<l.channels_out;++u)r[u]+=f[u],h-=f[u];for(s=0,u=0;u<l.channels_out;++u)s+=r[u];if(s>Ie.MAX_BITS_PER_GRANULE){var m=0;for(u=0;u<l.channels_out;++u)r[u]*=Ie.MAX_BITS_PER_GRANULE,r[u]/=s,m+=r[u];rt(m<=Ie.MAX_BITS_PER_GRANULE)}return p},this.reduce_side=function(e,t,n,r){rt(r<=Ie.MAX_BITS_PER_GRANULE),rt(e[0]+e[1]<=Ie.MAX_BITS_PER_GRANULE);var a=.33*(.5-t)/.5;a<0&&(a=0),a>.5&&(a=.5);var o=0|.5*a*(e[0]+e[1]);o>Ie.MAX_BITS_PER_CHANNEL-e[0]&&(o=Ie.MAX_BITS_PER_CHANNEL-e[0]),o<0&&(o=0),e[1]>=125&&(e[1]-o>125?(e[0]<n&&(e[0]+=o),e[1]-=o):(e[0]+=e[1]-125,e[1]=125)),(o=e[0]+e[1])>r&&(e[0]=r*e[0]/o,e[1]=r*e[1]/o),rt(e[0]<=Ie.MAX_BITS_PER_CHANNEL),rt(e[1]<=Ie.MAX_BITS_PER_CHANNEL),rt(e[0]+e[1]<=Ie.MAX_BITS_PER_GRANULE)},this.athAdjust=function(e,t,n){var r=90.30873362,a=94.82444863,o=et.FAST_LOG10_X(t,10),i=e*e,s=0;return o-=n,i>1e-20&&(s=1+et.FAST_LOG10_X(i,10/r)),s<0&&(s=0),o*=s,o+=n+r-a,Math.pow(10,.1*o)},this.calc_xmin=function(e,t,n,r){var o,i=0,s=e.internal_flags,u=0,l=0,c=s.ATH,f=n.xr,d=e.VBR==Ze.vbr_mtrh?1:0,h=s.masking_lower;for(e.VBR!=Ze.vbr_mtrh&&e.VBR!=Ze.vbr_mt||(h=1),o=0;o<n.psy_lmax;o++){x=(w=e.VBR==Ze.vbr_rh||e.VBR==Ze.vbr_mtrh?athAdjust(c.adjust,c.l[o],c.floor):c.adjust*c.l[o])/(g=n.width[o]),C=a,M=g>>1,S=0;do{S+=E=f[u]*f[u],C+=E<x?E:x,S+=N=f[++u]*f[u],C+=N<x?N:x,u++}while(--M>0);S>w&&l++,o==O.SBPSY_l&&C<(k=w*s.nsPsy.longfact[o])&&(C=k),0!=d&&(w=C),e.ATHonly||(_=t.en.l[o])>0&&(k=S*t.thm.l[o]*h/_,0!=d&&(k*=s.nsPsy.longfact[o]),w<k&&(w=k)),r[i++]=0!=d?w:w*s.nsPsy.longfact[o]}var p=575;if(n.block_type!=O.SHORT_TYPE)for(var m=576;0!=m--&&BitStream.EQ(f[m],0);)p=m;n.max_nonzero_coeff=p;for(var v=n.sfb_smin;o<n.psymax;v++,o+=3){var g,y,b;for(b=e.VBR==Ze.vbr_rh||e.VBR==Ze.vbr_mtrh?athAdjust(c.adjust,c.s[v],c.floor):c.adjust*c.s[v],g=n.width[o],y=0;y<3;y++){var w,x,C,_,k,S=0,M=g>>1;x=b/g,C=a;do{var E,N;S+=E=f[u]*f[u],C+=E<x?E:x,S+=N=f[++u]*f[u],C+=N<x?N:x,u++}while(--M>0);S>b&&l++,v==O.SBPSY_s&&C<(k=b*s.nsPsy.shortfact[v])&&(C=k),w=0!=d?C:b,e.ATHonly||e.ATHshort||(_=t.en.s[v][y])>0&&(k=S*t.thm.s[v][y]*h/_,0!=d&&(k*=s.nsPsy.shortfact[v]),w<k&&(w=k)),r[i++]=0!=d?w:w*s.nsPsy.shortfact[v]}e.useTemporal&&(r[i-3]>r[i-3+1]&&(r[i-3+1]+=(r[i-3]-r[i-3+1])*s.decay),r[i-3+1]>r[i-3+2]&&(r[i-3+2]+=(r[i-3+1]-r[i-3+2])*s.decay))}return l},this.calc_noise_core=function(e,t,n,r){var a=0,o=t.s,i=e.l3_enc;if(o>e.count1)for(;0!=n--;)u=e.xr[o],o++,a+=u*u,u=e.xr[o],o++,a+=u*u;else if(o>e.big_values){var s=tt(2);for(s[0]=0,s[1]=r;0!=n--;)u=Math.abs(e.xr[o])-s[i[o]],o++,a+=u*u,u=Math.abs(e.xr[o])-s[i[o]],o++,a+=u*u}else for(;0!=n--;){var u;u=Math.abs(e.xr[o])-d[i[o]]*r,o++,a+=u*u,u=Math.abs(e.xr[o])-d[i[o]]*r,o++,a+=u*u}return t.s=o,a},this.calc_noise=function(e,t,n,a,o){var i,s,u=0,c=0,f=0,d=0,h=0,p=-20,m=0,g=e.scalefac,y=0;for(a.over_SSD=0,i=0;i<e.psymax;i++){var b,w=e.global_gain-(g[y++]+(0!=e.preflag?l[i]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[i]],x=0;if(null!=o&&o.step[i]==w)x=o.noise[i],m+=e.width[i],n[u++]=x/t[c++],x=o.noise_log[i];else{var C,_=r(w);s=e.width[i]>>1,m+e.width[i]>e.max_nonzero_coeff&&(s=(C=e.max_nonzero_coeff-m+1)>0?C>>1:0);var k=new v(m);x=this.calc_noise_core(e,k,s,_),m=k.s,null!=o&&(o.step[i]=w,o.noise[i]=x),x=n[u++]=x/t[c++],x=et.FAST_LOG10(Math.max(x,1e-20)),null!=o&&(o.noise_log[i]=x)}null!=o&&(o.global_gain=e.global_gain),h+=x,x>0&&(b=Math.max(0|10*x+.5,1),a.over_SSD+=b*b,f++,d+=x),p=Math.max(p,x)}return a.over_count=f,a.tot_noise=h,a.over_noise=d,a.max_noise=p,f},this.set_pinfo=function(e,t,n,r,a){var o,i,s,u,c,f=e.internal_flags,d=0==t.scalefac_scale?.5:1,h=t.scalefac,p=tt(L3Side.SFBMAX),m=tt(L3Side.SFBMAX),v=new CalcNoiseResult;calc_xmin(e,n,t,p),calc_noise(t,p,m,v,null);var g=0;for(i=t.sfb_lmax,t.block_type!=O.SHORT_TYPE&&0==t.mixed_block_flag&&(i=22),o=0;o<i;o++){var y=f.scalefac_band.l[o],b=(w=f.scalefac_band.l[o+1])-y;for(u=0;g<w;g++)u+=t.xr[g]*t.xr[g];u/=b,c=1e15,f.pinfo.en[r][a][o]=c*u,f.pinfo.xfsf[r][a][o]=c*p[o]*m[o]/b,n.en.l[o]>0&&!e.ATHonly?u/=n.en.l[o]:u=0,f.pinfo.thr[r][a][o]=c*Math.max(u*n.thm.l[o],f.ATH.l[o]),f.pinfo.LAMEsfb[r][a][o]=0,0!=t.preflag&&o>=11&&(f.pinfo.LAMEsfb[r][a][o]=-d*l[o]),o<O.SBPSY_l&&(rt(h[o]>=0),f.pinfo.LAMEsfb[r][a][o]-=d*h[o])}if(t.block_type==O.SHORT_TYPE)for(i=o,o=t.sfb_smin;o<O.SBMAX_s;o++){y=f.scalefac_band.s[o],b=(w=f.scalefac_band.s[o+1])-y;for(var w,x=0;x<3;x++){for(u=0,s=y;s<w;s++)u+=t.xr[g]*t.xr[g],g++;u=Math.max(u/b,1e-20),c=1e15,f.pinfo.en_s[r][a][3*o+x]=c*u,f.pinfo.xfsf_s[r][a][3*o+x]=c*p[i]*m[i]/b,n.en.s[o][x]>0?u/=n.en.s[o][x]:u=0,(e.ATHonly||e.ATHshort)&&(u=0),f.pinfo.thr_s[r][a][3*o+x]=c*Math.max(u*n.thm.s[o][x],f.ATH.s[o]),f.pinfo.LAMEsfb_s[r][a][3*o+x]=-2*t.subblock_gain[x],o<O.SBPSY_s&&(f.pinfo.LAMEsfb_s[r][a][3*o+x]-=d*h[i]),i++}}f.pinfo.LAMEqss[r][a]=t.global_gain,f.pinfo.LAMEmainbits[r][a]=t.part2_3_length+t.part2_length,f.pinfo.LAMEsfbits[r][a]=t.part2_length,f.pinfo.over[r][a]=v.over_count,f.pinfo.max_noise[r][a]=10*v.max_noise,f.pinfo.over_noise[r][a]=10*v.over_noise,f.pinfo.tot_noise[r][a]=10*v.tot_noise,f.pinfo.over_SSD[r][a]=v.over_SSD}}at.Q_MAX=257,at.Q_MAX2=116,at.LARGE_BITS=1e5,at.IXMAX_VAL=8206;var ot=at,it=m.System,st=m.Arrays,ut=m.new_int,lt=m.assert;function ct(){var e=null;function t(e){this.bits=0|e}this.qupvt=null,this.setModules=function(t){this.qupvt=t,e=t};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function r(e,t,n,r,a,o){var i=.5946/t;for(lt(e>0),e>>=1;0!=e--;)a[o++]=i>n[r++]?0:1,a[o++]=i>n[r++]?0:1}function a(t,n,r,a,o,i){lt(t>0);var s=(t>>=1)%2;for(t>>=1;0!=t--;){var u,l,c,f,d,h,p,m;u=r[a++]*n,l=r[a++]*n,d=0|u,c=r[a++]*n,h=0|l,f=r[a++]*n,p=0|c,u+=e.adj43[d],m=0|f,l+=e.adj43[h],o[i++]=0|u,c+=e.adj43[p],o[i++]=0|l,f+=e.adj43[m],o[i++]=0|c,o[i++]=0|f}0!=s&&(d=0|(u=r[a++]*n),h=0|(l=r[a++]*n),u+=e.adj43[d],l+=e.adj43[h],o[i++]=0|u,o[i++]=0|l)}function o(t,n,o,i,s){var u,l,c,f=0,d=0,h=0,p=0,m=n,v=0,g=m,y=0,b=t,w=0;for(c=null!=s&&i.global_gain==s.global_gain,l=i.block_type==O.SHORT_TYPE?38:21,u=0;u<=l;u++){var x=-1;if((c||i.block_type==O.NORM_TYPE)&&(x=i.global_gain-(i.scalefac[u]+(0!=i.preflag?e.pretab[u]:0)<<i.scalefac_scale+1)-8*i.subblock_gain[i.window[u]]),lt(i.width[u]>=0),c&&s.step[u]==x)0!=d&&(a(d,o,b,w,g,y),d=0),0!=h&&(r(h,o,b,w,g,y),h=0);else{var C,_=i.width[u];if(f+i.width[u]>i.max_nonzero_coeff&&(C=i.max_nonzero_coeff-f+1,st.fill(n,i.max_nonzero_coeff,576,0),(_=C)<0&&(_=0),u=l+1),0==d&&0==h&&(g=m,y=v,b=t,w=p),null!=s&&s.sfb_count1>0&&u>=s.sfb_count1&&s.step[u]>0&&x>=s.step[u]?(0!=d&&(a(d,o,b,w,g,y),d=0,g=m,y=v,b=t,w=p),h+=_):(0!=h&&(r(h,o,b,w,g,y),h=0,g=m,y=v,b=t,w=p),d+=_),_<=0){0!=h&&(r(h,o,b,w,g,y),h=0),0!=d&&(a(d,o,b,w,g,y),d=0);break}}u<=l&&(v+=i.width[u],p+=i.width[u],f+=i.width[u])}0!=d&&(a(d,o,b,w,g,y),d=0),0!=h&&(r(h,o,b,w,g,y),h=0)}function i(e,t,n){var r=0,a=0;do{var o=e[t++],i=e[t++];r<o&&(r=o),a<i&&(a=i)}while(t<n);return r<a&&(r=a),r}function s(e,t,n,r,a,o){var i,s=65536*Je.ht[r].xlen+Je.ht[a].xlen,u=0;do{var l=e[t++],c=e[t++];0!=l&&(l>14&&(l=15,u+=s),l*=16),0!=c&&(c>14&&(c=15,u+=s),l+=c),u+=Je.largetbl[l]}while(t<n);return i=65535&u,(u>>=16)>i&&(u=i,r=a),o.bits+=u,r}function u(e,t,n,r){var a=0,o=Je.ht[1].hlen;do{var i=2*e[t+0]+e[t+1];t+=2,a+=o[i]}while(t<n);return r.bits+=a,1}function l(e,t,n,r,a){var o,i,s=0,u=Je.ht[r].xlen;i=2==r?Je.table23:Je.table56;do{var l=e[t+0]*u+e[t+1];t+=2,s+=i[l]}while(t<n);return o=65535&s,(s>>=16)>o&&(s=o,r++),a.bits+=s,r}function c(e,t,n,r,a){var o=0,i=0,s=0,u=Je.ht[r].xlen,l=Je.ht[r].hlen,c=Je.ht[r+1].hlen,f=Je.ht[r+2].hlen;do{var d=e[t+0]*u+e[t+1];t+=2,o+=l[d],i+=c[d],s+=f[d]}while(t<n);var h=r;return o>i&&(o=i,h++),o>s&&(o=s,h=r+2),a.bits+=o,h}var f=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function d(e,t,n,r){var a=i(e,t,n);switch(a){case 0:return a;case 1:return u(e,t,n,r);case 2:case 3:return l(e,t,n,f[a-1],r);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return c(e,t,n,f[a-1],r);default:if(a>ot.IXMAX_VAL)return r.bits=ot.LARGE_BITS,-1;var o,d;for(a-=15,o=24;o<32&&!(Je.ht[o].linmax>=a);o++);for(d=o-8;d<24&&!(Je.ht[d].linmax>=a);d++);return s(e,t,n,d,o,r)}}function h(e,n,r,a,o,i,s){for(var u=n.big_values,l=0;l<=22;l++)a[l]=ot.LARGE_BITS;for(l=0;l<16;l++){var c=e.scalefac_band.l[l+1];if(c>=u)break;var f=0,h=new t(f),p=d(r,0,c,h);f=h.bits;for(var m=0;m<8;m++){var v=e.scalefac_band.l[l+m+2];if(v>=u)break;var g=f,y=d(r,c,v,h=new t(g));g=h.bits,a[l+m]>g&&(a[l+m]=g,o[l+m]=l,i[l+m]=p,s[l+m]=y)}}}function p(e,n,r,a,o,i,s,u){for(var l=n.big_values,c=2;c<O.SBMAX_l+1;c++){var f=e.scalefac_band.l[c];if(f>=l)break;var h=o[c-2]+n.count1bits;if(r.part2_3_length<=h)break;var p=new t(h),m=d(a,f,l,p);h=p.bits,r.part2_3_length<=h||(r.assign(n),r.part2_3_length=h,r.region0_count=i[c-2],r.region1_count=c-2-i[c-2],r.table_select[0]=s[c-2],r.table_select[1]=u[c-2],r.table_select[2]=m)}}this.noquant_count_bits=function(e,n,r){var a=n.l3_enc,o=Math.min(576,n.max_nonzero_coeff+2>>1<<1);for(null!=r&&(r.sfb_count1=0);o>1&&0==(a[o-1]|a[o-2]);o-=2);n.count1=o;for(var i=0,s=0;o>3;o-=4){var u;if((2147483647&(a[o-1]|a[o-2]|a[o-3]|a[o-4]))>1)break;u=2*(2*(2*a[o-4]+a[o-3])+a[o-2])+a[o-1],i+=Je.t32l[u],s+=Je.t33l[u]}var l=i;if(n.count1table_select=0,i>s&&(l=s,n.count1table_select=1),n.count1bits=l,n.big_values=o,0==o)return l;if(n.block_type==O.SHORT_TYPE)(i=3*e.scalefac_band.s[3])>n.big_values&&(i=n.big_values),s=n.big_values;else if(n.block_type==O.NORM_TYPE){if(lt(o<=576),i=n.region0_count=e.bv_scf[o-2],s=n.region1_count=e.bv_scf[o-1],lt(i+s+2<O.SBPSY_l),s=e.scalefac_band.l[i+s+2],i=e.scalefac_band.l[i+1],s<o){var c=new t(l);n.table_select[2]=d(a,s,o,c),l=c.bits}}else n.region0_count=7,n.region1_count=O.SBMAX_l-1-7-1,(i=e.scalefac_band.l[8])>(s=o)&&(i=s);if(i=Math.min(i,o),s=Math.min(s,o),lt(i>=0),lt(s>=0),0<i&&(c=new t(l),n.table_select[0]=d(a,0,i,c),l=c.bits),i<s&&(c=new t(l),n.table_select[1]=d(a,i,s,c),l=c.bits),2==e.use_best_huffman&&(n.part2_3_length=l,best_huffman_divide(e,n),l=n.part2_3_length),null!=r&&n.block_type==O.NORM_TYPE){for(var f=0;e.scalefac_band.l[f]<n.big_values;)f++;r.sfb_count1=f}return l},this.count_bits=function(t,n,r,a){var i=r.l3_enc,s=ot.IXMAX_VAL/e.IPOW20(r.global_gain);if(r.xrpow_max>s)return ot.LARGE_BITS;if(o(n,i,e.IPOW20(r.global_gain),r,a),0!=(2&t.substep_shaping))for(var u=0,l=r.global_gain+r.scalefac_scale,c=.634521682242439/e.IPOW20(l),f=0;f<r.sfbmax;f++){var d,h=r.width[f];if(lt(h>=0),0==t.pseudohalf[f])u+=h;else for(d=u,u+=h;d<u;++d)i[d]=n[d]>=c?i[d]:0}return this.noquant_count_bits(t,r,a)},this.best_huffman_divide=function(e,n){var r=new ue,a=n.l3_enc,o=ut(23),i=ut(23),s=ut(23),u=ut(23);if(n.block_type!=O.SHORT_TYPE||1!=e.mode_gr){r.assign(n),n.block_type==O.NORM_TYPE&&(h(e,n,a,o,i,s,u),p(e,r,n,a,o,i,s,u));var l=r.big_values;if(!(0==l||(a[l-2]|a[l-1])>1)&&!((l=n.count1+2)>576)){r.assign(n),r.count1=l;var c=0,f=0;for(lt(l<=576);l>r.big_values;l-=4){var m=2*(2*(2*a[l-4]+a[l-3])+a[l-2])+a[l-1];c+=Je.t32l[m],f+=Je.t33l[m]}if(r.big_values=l,r.count1table_select=0,c>f&&(c=f,r.count1table_select=1),r.count1bits=c,r.block_type==O.NORM_TYPE)p(e,r,n,a,o,i,s,u);else{if(r.part2_3_length=c,(c=e.scalefac_band.l[8])>l&&(c=l),c>0){var v=new t(r.part2_3_length);r.table_select[0]=d(a,0,c,v),r.part2_3_length=v.bits}l>c&&(v=new t(r.part2_3_length),r.table_select[1]=d(a,c,l,v),r.part2_3_length=v.bits),n.part2_3_length>r.part2_3_length&&n.assign(r)}}}};var m=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],v=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],g=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],y=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];function b(e,t){for(var n,r=t.tt[1][e],a=t.tt[0][e],o=0;o<Je.scfsi_band.length-1;o++){for(n=Je.scfsi_band[o];n<Je.scfsi_band[o+1]&&!(a.scalefac[n]!=r.scalefac[n]&&r.scalefac[n]>=0);n++);if(n==Je.scfsi_band[o+1]){for(n=Je.scfsi_band[o];n<Je.scfsi_band[o+1];n++)r.scalefac[n]=-1;t.scfsi[e][o]=1}}var i=0,s=0;for(n=0;n<11;n++)-1!=r.scalefac[n]&&(s++,i<r.scalefac[n]&&(i=r.scalefac[n]));for(var u=0,l=0;n<O.SBPSY_l;n++)-1!=r.scalefac[n]&&(l++,u<r.scalefac[n]&&(u=r.scalefac[n]));for(o=0;o<16;o++)if(i<m[o]&&u<v[o]){var c=g[o]*s+y[o]*l;r.part2_length>c&&(r.part2_length=c,r.scalefac_compress=o)}}function w(e,t){for(var n=0;n<t;++n)if(e[n]<0)return!1;return!0}ct.slen1_tab=g,ct.slen2_tab=y,this.best_scalefac_store=function(t,n,r,a){var o,i,s,u,l=a.tt[n][r],c=0;for(s=0,o=0;o<l.sfbmax;o++){var f=l.width[o];for(lt(f>=0),s+=f,u=-f;u<0&&0==l.l3_enc[u+s];u++);0==u&&(l.scalefac[o]=c=-2)}if(0==l.scalefac_scale&&0==l.preflag){var d=0;for(o=0;o<l.sfbmax;o++)l.scalefac[o]>0&&(d|=l.scalefac[o]);if(0==(1&d)&&0!=d){for(o=0;o<l.sfbmax;o++)l.scalefac[o]>0&&(l.scalefac[o]>>=1);l.scalefac_scale=c=1}}if(0==l.preflag&&l.block_type!=O.SHORT_TYPE&&2==t.mode_gr){for(o=11;o<O.SBPSY_l&&!(l.scalefac[o]<e.pretab[o]&&-2!=l.scalefac[o]);o++);if(o==O.SBPSY_l){for(o=11;o<O.SBPSY_l;o++)l.scalefac[o]>0&&(l.scalefac[o]-=e.pretab[o]);l.preflag=c=1}}for(i=0;i<4;i++)a.scfsi[r][i]=0;for(2==t.mode_gr&&1==n&&a.tt[0][r].block_type!=O.SHORT_TYPE&&a.tt[1][r].block_type!=O.SHORT_TYPE&&(b(r,a),c=0),o=0;o<l.sfbmax;o++)-2==l.scalefac[o]&&(l.scalefac[o]=0);0!=c&&(2==t.mode_gr?this.scale_bitcount(l):this.scale_bitcount_lsf(t,l))};var x=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],C=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],_=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(t){var n,r,a,o=0,i=0,s=t.scalefac;if(lt(w(s,t.sfbmax)),t.block_type==O.SHORT_TYPE)a=x,0!=t.mixed_block_flag&&(a=C);else if(a=_,0==t.preflag){for(r=11;r<O.SBPSY_l&&!(s[r]<e.pretab[r]);r++);if(r==O.SBPSY_l)for(t.preflag=1,r=11;r<O.SBPSY_l;r++)s[r]-=e.pretab[r]}for(r=0;r<t.sfbdivide;r++)o<s[r]&&(o=s[r]);for(;r<t.sfbmax;r++)i<s[r]&&(i=s[r]);for(t.part2_length=ot.LARGE_BITS,n=0;n<16;n++)o<m[n]&&i<v[n]&&t.part2_length>a[n]&&(t.part2_length=a[n],t.scalefac_compress=n);return t.part2_length==ot.LARGE_BITS};var k=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(t,n){var r,a,o,i,s,u,l,c,f=ut(4),d=n.scalefac;for(r=0!=n.preflag?2:0,l=0;l<4;l++)f[l]=0;if(n.block_type==O.SHORT_TYPE){a=1;var h=e.nr_of_sfb_block[r][a];for(c=0,o=0;o<4;o++)for(i=h[o]/3,l=0;l<i;l++,c++)for(s=0;s<3;s++)d[3*c+s]>f[o]&&(f[o]=d[3*c+s])}else for(a=0,h=e.nr_of_sfb_block[r][a],c=0,o=0;o<4;o++)for(i=h[o],l=0;l<i;l++,c++)d[c]>f[o]&&(f[o]=d[c]);for(u=!1,o=0;o<4;o++)f[o]>k[r][o]&&(u=!0);if(!u){var p,m,v,g;for(n.sfb_partition_table=e.nr_of_sfb_block[r][a],o=0;o<4;o++)n.slen[o]=S[f[o]];switch(p=n.slen[0],m=n.slen[1],v=n.slen[2],g=n.slen[3],r){case 0:n.scalefac_compress=(5*p+m<<4)+(v<<2)+g;break;case 1:n.scalefac_compress=400+(5*p+m<<2)+v;break;case 2:n.scalefac_compress=500+3*p+m;break;default:it.err.printf("intensity stereo not implemented yet\n")}}if(!u)for(lt(null!=n.sfb_partition_table),n.part2_length=0,o=0;o<4;o++)n.part2_length+=n.slen[o]*n.sfb_partition_table[o];return u};var S=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var r,a=0;e.scalefac_band.l[++a]<t;);for(r=n[a][0];e.scalefac_band.l[r+1]>t;)r--;for(r<0&&(r=n[a][0]),e.bv_scf[t-2]=r,r=n[a][1];e.scalefac_band.l[r+e.bv_scf[t-2]+2]>t;)r--;r<0&&(r=n[a][1]),e.bv_scf[t-1]=r}}}var ft=ct,dt=m.System,ht=m.Arrays,pt=m.new_byte,mt=m.new_float_n,vt=m.new_int,gt=m.assert;function yt(){var e=this,t=32773,n=32,r=null,a=null,o=null,i=null;this.setModules=function(e,t,n,s){r=e,a=t,o=n,i=s};var s=null,u=0,l=0,c=0;function f(e){dt.arraycopy(e.header[e.w_ptr].buf,0,s,l,e.sideinfo_len),l+=e.sideinfo_len,u+=8*e.sideinfo_len,e.w_ptr=e.w_ptr+1&Ie.MAX_HEADER_BUF-1}function d(e,t,r){for(gt(r<n-2);r>0;){var a;0==c&&(c=8,l++,gt(l<Lame.LAME_MAXMP3BUFFER),gt(e.header[e.w_ptr].write_timing>=u),e.header[e.w_ptr].write_timing==u&&f(e),s[l]=0),a=Math.min(r,c),c-=a,gt((r-=a)<n),gt(c<n),s[l]|=t>>r<<c,u+=a}}function h(e,t,r){for(gt(r<n-2);r>0;){var a;0==c&&(c=8,l++,gt(l<Lame.LAME_MAXMP3BUFFER),s[l]=0),a=Math.min(r,c),c-=a,gt((r-=a)<n),gt(c<n),s[l]|=t>>r<<c,u+=a}}function p(e,t){var n,r=e.internal_flags;if(gt(t>=0),t>=8&&(d(r,76,8),t-=8),t>=8&&(d(r,65,8),t-=8),t>=8&&(d(r,77,8),t-=8),t>=8&&(d(r,69,8),t-=8),t>=32){var a=o.getLameShortVersion();if(t>=32)for(n=0;n<a.length&&t>=8;++n)t-=8,d(r,a.charAt(n),8)}for(;t>=1;t-=1)d(r,r.ancillary_flag,1),r.ancillary_flag^=e.disable_reservoir?0:1;gt(0==t)}function m(e,t,r){for(var a=e.header[e.h_ptr].ptr;r>0;){var o=Math.min(r,8-(7&a));gt((r-=o)<n),e.header[e.h_ptr].buf[a>>3]|=t>>r<<8-(7&a)-o,a+=o}e.header[e.h_ptr].ptr=a}function v(e,n){e<<=8;for(var r=0;r<8;r++)0!=(65536&((n<<=1)^(e<<=1)))&&(n^=t);return n}function g(e,t){var n,r,a,o=e.internal_flags;if(n=o.l3_side,o.header[o.h_ptr].ptr=0,ht.fill(o.header[o.h_ptr].buf,0,o.sideinfo_len,0),e.out_samplerate<16e3?m(o,4094,12):m(o,4095,12),m(o,e.version,1),m(o,1,2),m(o,e.error_protection?0:1,1),m(o,o.bitrate_index,4),m(o,o.samplerate_index,2),m(o,o.padding,1),m(o,e.extension,1),m(o,e.mode.ordinal(),2),m(o,o.mode_ext,2),m(o,e.copyright,1),m(o,e.original,1),m(o,e.emphasis,2),e.error_protection&&m(o,0,16),1==e.version){for(gt(n.main_data_begin>=0),m(o,n.main_data_begin,9),2==o.channels_out?m(o,n.private_bits,3):m(o,n.private_bits,5),a=0;a<o.channels_out;a++){var i;for(i=0;i<4;i++)m(o,n.scfsi[a][i],1)}for(r=0;r<2;r++)for(a=0;a<o.channels_out;a++)m(o,(s=n.tt[r][a]).part2_3_length+s.part2_length,12),m(o,s.big_values/2,9),m(o,s.global_gain,8),m(o,s.scalefac_compress,4),s.block_type!=O.NORM_TYPE?(m(o,1,1),m(o,s.block_type,2),m(o,s.mixed_block_flag,1),14==s.table_select[0]&&(s.table_select[0]=16),m(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),m(o,s.table_select[1],5),m(o,s.subblock_gain[0],3),m(o,s.subblock_gain[1],3),m(o,s.subblock_gain[2],3)):(m(o,0,1),14==s.table_select[0]&&(s.table_select[0]=16),m(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),m(o,s.table_select[1],5),14==s.table_select[2]&&(s.table_select[2]=16),m(o,s.table_select[2],5),gt(0<=s.region0_count&&s.region0_count<16),gt(0<=s.region1_count&&s.region1_count<8),m(o,s.region0_count,4),m(o,s.region1_count,3)),m(o,s.preflag,1),m(o,s.scalefac_scale,1),m(o,s.count1table_select,1)}else for(gt(n.main_data_begin>=0),m(o,n.main_data_begin,8),m(o,n.private_bits,o.channels_out),r=0,a=0;a<o.channels_out;a++){var s;m(o,(s=n.tt[r][a]).part2_3_length+s.part2_length,12),m(o,s.big_values/2,9),m(o,s.global_gain,8),m(o,s.scalefac_compress,9),s.block_type!=O.NORM_TYPE?(m(o,1,1),m(o,s.block_type,2),m(o,s.mixed_block_flag,1),14==s.table_select[0]&&(s.table_select[0]=16),m(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),m(o,s.table_select[1],5),m(o,s.subblock_gain[0],3),m(o,s.subblock_gain[1],3),m(o,s.subblock_gain[2],3)):(m(o,0,1),14==s.table_select[0]&&(s.table_select[0]=16),m(o,s.table_select[0],5),14==s.table_select[1]&&(s.table_select[1]=16),m(o,s.table_select[1],5),14==s.table_select[2]&&(s.table_select[2]=16),m(o,s.table_select[2],5),gt(0<=s.region0_count&&s.region0_count<16),gt(0<=s.region1_count&&s.region1_count<8),m(o,s.region0_count,4),m(o,s.region1_count,3)),m(o,s.scalefac_scale,1),m(o,s.count1table_select,1)}e.error_protection&&CRC_writeheader(o,o.header[o.h_ptr].buf);var u=o.h_ptr;gt(o.header[u].ptr==8*o.sideinfo_len),o.h_ptr=u+1&Ie.MAX_HEADER_BUF-1,o.header[o.h_ptr].write_timing=o.header[u].write_timing+t,o.h_ptr==o.w_ptr&&dt.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}function y(e,t){var n,r=Je.ht[t.count1table_select+32],a=0,o=t.big_values,i=t.big_values;for(gt(t.count1table_select<2),n=(t.count1-t.big_values)/4;n>0;--n){var s,u=0,l=0;0!=(s=t.l3_enc[o+0])&&(l+=8,t.xr[i+0]<0&&u++,gt(s<=1)),0!=(s=t.l3_enc[o+1])&&(l+=4,u*=2,t.xr[i+1]<0&&u++,gt(s<=1)),0!=(s=t.l3_enc[o+2])&&(l+=2,u*=2,t.xr[i+2]<0&&u++,gt(s<=1)),0!=(s=t.l3_enc[o+3])&&(l++,u*=2,t.xr[i+3]<0&&u++,gt(s<=1)),o+=4,i+=4,d(e,u+r.table[l],r.hlen[l]),a+=r.hlen[l]}return a}function b(e,t,r,a,o){var i=Je.ht[t],s=0;if(gt(t<32),0==t)return s;for(var u=r;u<a;u+=2){var l=0,c=0,f=i.xlen,h=i.xlen,p=0,m=o.l3_enc[u],v=o.l3_enc[u+1];if(0!=m&&(o.xr[u]<0&&p++,l--),t>15){if(m>14){var g=m-15;gt(g<=i.linmax),p|=g<<1,c=f,m=15}if(v>14){var y=v-15;gt(y<=i.linmax),p<<=f,p|=y,c+=f,v=15}h=16}0!=v&&(p<<=1,o.xr[u+1]<0&&p++,l--),gt((m|v)<16),m=m*h+v,c-=l,l+=i.hlen[m],gt(l<=n),gt(c<=n),d(e,i.table[m],l),d(e,p,c),s+=l+c}return s}function w(e,t){var n=3*e.scalefac_band.s[3];n>t.big_values&&(n=t.big_values);var r=b(e,t.table_select[0],0,n,t);return r+=b(e,t.table_select[1],n,t.big_values,t)}function x(e,t){var n,r,a,o;n=t.big_values,gt(0<=n&&n<=576);var i=t.region0_count+1;return gt(0<=i),gt(i<e.scalefac_band.l.length),a=e.scalefac_band.l[i],i+=t.region1_count+1,gt(0<=i),gt(i<e.scalefac_band.l.length),a>n&&(a=n),(o=e.scalefac_band.l[i])>n&&(o=n),r=b(e,t.table_select[0],0,a,t),r+=b(e,t.table_select[1],a,o,t),r+=b(e,t.table_select[2],o,n,t)}function C(e){var t,n,r,a,o=0,i=e.internal_flags,s=i.l3_side;if(1==e.version)for(t=0;t<2;t++)for(n=0;n<i.channels_out;n++){var u=s.tt[t][n],l=ft.slen1_tab[u.scalefac_compress],c=ft.slen2_tab[u.scalefac_compress];for(a=0,r=0;r<u.sfbdivide;r++)-1!=u.scalefac[r]&&(d(i,u.scalefac[r],l),a+=l);for(;r<u.sfbmax;r++)-1!=u.scalefac[r]&&(d(i,u.scalefac[r],c),a+=c);gt(a==u.part2_length),u.block_type==O.SHORT_TYPE?a+=w(i,u):a+=x(i,u),a+=y(i,u),gt(a==u.part2_3_length+u.part2_length),o+=a}else for(t=0,n=0;n<i.channels_out;n++){u=s.tt[t][n];var f,h,p=0;if(gt(null!=u.sfb_partition_table),a=0,r=0,h=0,u.block_type==O.SHORT_TYPE){for(;h<4;h++){var m=u.sfb_partition_table[h]/3,v=u.slen[h];for(f=0;f<m;f++,r++)d(i,Math.max(u.scalefac[3*r+0],0),v),d(i,Math.max(u.scalefac[3*r+1],0),v),d(i,Math.max(u.scalefac[3*r+2],0),v),p+=3*v}a+=w(i,u)}else{for(;h<4;h++)for(m=u.sfb_partition_table[h],v=u.slen[h],f=0;f<m;f++,r++)d(i,Math.max(u.scalefac[r],0),v),p+=v;a+=x(i,u)}a+=y(i,u),gt(a==u.part2_3_length),gt(p==u.part2_length),o+=p+a}return o}function _(){this.total=0}function k(t,n){var r,a,o,i,s,c=t.internal_flags;return s=c.w_ptr,-1==(i=c.h_ptr-1)&&(i=Ie.MAX_HEADER_BUF-1),r=c.header[i].write_timing-u,n.total=r,r>=0&&(a=1+i-s,i<s&&(a=1+i-s+Ie.MAX_HEADER_BUF),r-=8*a*c.sideinfo_len),r+=o=e.getframebits(t),n.total+=o,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=l+1,r<0&&dt.err.println("strange error flushing buffer ... \n"),r}this.getframebits=function(e){var t,n=e.internal_flags;return t=0!=n.bitrate_index?Je.bitrate_table[e.version][n.bitrate_index]:e.brate,gt(8<=t&&t<=640),8*(0|72e3*(e.version+1)*t/e.out_samplerate+n.padding)},this.CRC_writeheader=function(e,t){var n=65535;n=v(255&t[2],n),n=v(255&t[3],n);for(var r=6;r<e.sideinfo_len;r++)n=v(255&t[r],n);t[4]=byte(n>>8),t[5]=byte(255&n)},this.flush_bitstream=function(e){var t,n,a=e.internal_flags,o=a.h_ptr-1;if(-1==o&&(o=Ie.MAX_HEADER_BUF-1),t=a.l3_side,!((n=k(e,new _))<0)){if(p(e,n),gt(a.header[o].write_timing+this.getframebits(e)==u),a.ResvSize=0,t.main_data_begin=0,a.findReplayGain){var i=r.GetTitleGain(a.rgdata);gt(NEQ(i,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),a.RadioGain=0|Math.floor(10*i+.5)}a.findPeakSample&&(a.noclipGainChange=0|Math.ceil(20*Math.log10(a.PeakSample/32767)*10),a.noclipGainChange>0&&(EQ(e.scale,1)||EQ(e.scale,0))?a.noclipScale=Math.floor(32767/a.PeakSample*100)/100:a.noclipScale=-1)}},this.add_dummy_byte=function(e,t,n){for(var r,a=e.internal_flags;n-- >0;)for(h(a,t,8),r=0;r<Ie.MAX_HEADER_BUF;++r)a.header[r].write_timing+=8},this.format_bitstream=function(e){var t,n=e.internal_flags;t=n.l3_side;var r=this.getframebits(e);p(e,t.resvDrain_pre),g(e,r);var a=8*n.sideinfo_len;if(a+=C(e),p(e,t.resvDrain_post),a+=t.resvDrain_post,t.main_data_begin+=(r-a)/8,k(e,new _)!=n.ResvSize&&dt.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*t.main_data_begin!=n.ResvSize&&(dt.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*t.main_data_begin,n.ResvSize,t.resvDrain_post,t.resvDrain_pre,8*n.sideinfo_len,a-t.resvDrain_post-8*n.sideinfo_len,a,a%8,r),dt.err.println("This is a fatal error.  It has several possible causes:"),dt.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),dt.err.println(" 9%%  Your system is overclocked"),dt.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=8*t.main_data_begin),gt(u%8==0),u>1e9){var o;for(o=0;o<Ie.MAX_HEADER_BUF;++o)n.header[o].write_timing-=u;u=0}return 0},this.copy_buffer=function(e,t,n,o,u){var f=l+1;if(f<=0)return 0;if(0!=o&&f>o)return-1;if(dt.arraycopy(s,0,t,n,f),l=-1,c=0,0!=u){var d=vt(1);if(d[0]=e.nMusicCRC,i.updateMusicCRC(d,t,n,f),e.nMusicCRC=d[0],f>0&&(e.VBR_seek_table.nBytesWritten+=f),e.decode_on_the_fly)for(var h,p=mt([2,1152]),m=f,v=-1;0!=v;)if(v=a.hip_decode1_unclipped(e.hip,t,n,m,p[0],p[1]),m=0,-1==v&&(v=0),v>0){if(gt(v<=1152),e.findPeakSample){for(h=0;h<v;h++)p[0][h]>e.PeakSample?e.PeakSample=p[0][h]:-p[0][h]>e.PeakSample&&(e.PeakSample=-p[0][h]);if(e.channels_out>1)for(h=0;h<v;h++)p[1][h]>e.PeakSample?e.PeakSample=p[1][h]:-p[1][h]>e.PeakSample&&(e.PeakSample=-p[1][h])}if(e.findReplayGain&&r.AnalyzeSamples(e.rgdata,p[0],0,p[1],0,v,e.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}return f},this.init_bit_stream_w=function(e){s=pt(Lame.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,l=-1,c=0,u=0}}yt.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},yt.NEQ=function(e,t){return!yt.EQ(e,t)};var bt=yt,wt=m.System,xt=m.VbrMode,Ct=m.ShortBlock,_t=m.new_float,kt=m.new_int_n,St=m.new_short_n,Mt=m.assert;function Et(){var e=this,t=131072;Et.V9=410,Et.V8=420,Et.V7=430,Et.V6=440,Et.V5=450,Et.V4=460,Et.V3=470,Et.V2=480,Et.V1=490,Et.V0=500,Et.R3MIX=1e3,Et.STANDARD=1001,Et.EXTREME=1002,Et.INSANE=1003,Et.STANDARD_FAST=1004,Et.EXTREME_FAST=1005,Et.MEDIUM=1006,Et.MEDIUM_FAST=1007;var n,r,a,o,i,s=16384+t;Et.LAME_MAXMP3BUFFER=s;var u,l,c,f=new Z;function d(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=_t(O.SBMAX_l),this.bo_s_weight=_t(O.SBMAX_s)}function h(){this.lowerlimit=0}function p(e,t){this.lowpass=t}this.enc=new O,this.setModules=function(e,t,s,d,h,p,m,v,g){n=e,r=t,a=s,o=d,i=h,u=p,l=v,c=g,this.enc.setModules(r,f,o,u)};var m=4294479419;function v(e){var t;return e.class_id=m,t=e.internal_flags=new Ie,e.mode=MPEGMode.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=xt.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=O.ENCDELAY+O.POSTDELAY,e.encoder_padding=0,t.mf_size=O.ENCDELAY-O.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,0}function g(e){return e>1?0:e<=0?1:Math.cos(Math.PI/2*e)}function y(e,t){var n=44100;return t>=48e3?n=48e3:t>=44100?n=44100:t>=32e3?n=32e3:t>=24e3?n=24e3:t>=22050?n=22050:t>=16e3?n=16e3:t>=12e3?n=12e3:t>=11025?n=11025:t>=8e3&&(n=8e3),-1==e?n:(e<=15960&&(n=44100),e<=15250&&(n=32e3),e<=11220&&(n=24e3),e<=9970&&(n=22050),e<=7230&&(n=16e3),e<=5420&&(n=12e3),e<=4510&&(n=11025),e<=3970&&(n=8e3),t<n?t>44100?48e3:t>32e3?44100:t>24e3?32e3:t>22050?24e3:t>16e3?22050:t>12e3?16e3:t>11025?12e3:t>8e3?11025:8e3:n)}function b(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1,1;case 32e3:return t.version=1,2;case 22050:case 11025:return t.version=0,0;case 24e3:case 12e3:return t.version=0,1;case 16e3:case 8e3:return t.version=0,2;default:return t.version=0,-1}}function w(e,t,n){n<16e3&&(t=2);for(var r=Je.bitrate_table[t][1],a=2;a<=14;a++)Je.bitrate_table[t][a]>0&&Math.abs(Je.bitrate_table[t][a]-e)<Math.abs(r-e)&&(r=Je.bitrate_table[t][a]);return r}function x(e,t,n){n<16e3&&(t=2);for(var r=0;r<=14;r++)if(Je.bitrate_table[t][r]>0&&Je.bitrate_table[t][r]==e)return r;return-1}function C(t,n){var r=[new p(8,2e3),new p(16,3700),new p(24,3900),new p(32,5500),new p(40,7e3),new p(48,7500),new p(56,1e4),new p(64,11e3),new p(80,13500),new p(96,15100),new p(112,15600),new p(128,17e3),new p(160,17500),new p(192,18600),new p(224,19400),new p(256,19700),new p(320,20500)],a=e.nearestBitrateFullIndex(n);t.lowerlimit=r[a].lowpass}function _(e){var t=e.internal_flags,n=32,r=-1;if(t.lowpass1>0){for(var a=999,o=0;o<=31;o++)(l=o/31)>=t.lowpass2&&(n=Math.min(n,o)),t.lowpass1<l&&l<t.lowpass2&&(a=Math.min(a,o));t.lowpass1=999==a?(n-.75)/31:(a-.75)/31,t.lowpass2=n/31}if(t.highpass2>0&&t.highpass2<.75/31*.9&&(t.highpass1=0,t.highpass2=0,wt.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),t.highpass2>0){var i=-1;for(o=0;o<=31;o++)(l=o/31)<=t.highpass1&&(r=Math.max(r,o)),t.highpass1<l&&l<t.highpass2&&(i=Math.max(i,o));t.highpass1=r/31,t.highpass2=-1==i?(r+.75)/31:(i+.75)/31}for(o=0;o<32;o++){var s,u,l=o/31;s=t.highpass2>t.highpass1?g((t.highpass2-l)/(t.highpass2-t.highpass1+1e-20)):1,u=t.lowpass2>t.lowpass1?g((l-t.lowpass1)/(t.lowpass2-t.lowpass1+1e-20)):1,t.amp_filter[o]=s*u}}function k(e){var t=e.internal_flags;switch(e.quality){default:case 9:t.psymodel=0,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 8:e.quality=7;case 7:t.psymodel=1,t.noise_shaping=0,t.noise_shaping_amp=0,t.noise_shaping_stop=0,t.use_best_huffman=0,t.full_outer_loop=0;break;case 6:case 5:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=0,t.full_outer_loop=0;break;case 4:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=0,t.noise_shaping_stop=0,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 3:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 2:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=1,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0;break;case 1:case 0:t.psymodel=1,0==t.noise_shaping&&(t.noise_shaping=1),0==t.substep_shaping&&(t.substep_shaping=2),t.noise_shaping_amp=2,t.noise_shaping_stop=1,-1==t.subblock_gain&&(t.subblock_gain=1),t.use_best_huffman=1,t.full_outer_loop=0}}function S(e){var t=e.internal_flags;e.frameNum=0,e.write_id3tag_automatic&&l.id3tag_write_v2(e),t.bitrate_stereoMode_Hist=kt([16,5]),t.bitrate_blockType_Hist=kt([16,6]),t.PeakSample=0,e.bWriteVbrTag&&u.InitVbrTag(e)}function M(e,t){(null==e.in_buffer_0||e.in_buffer_nsamples<t)&&(e.in_buffer_0=_t(t),e.in_buffer_1=_t(t),e.in_buffer_nsamples=t)}function E(e){var t=O.BLKSIZE+e.framesize-O.FFTOFFSET;return t=Math.max(t,512+e.framesize-32),Mt(Ie.MFSIZE>=t),t}function N(e,t,a,o,i,s,u){var l,c,f,d,h,p=e.internal_flags,v=0,g=[null,null],y=[null,null];if(p.Class_ID!=m)return-3;if(0==o)return 0;if((h=r.copy_buffer(p,i,s,u,0))<0)return h;if(s+=h,v+=h,y[0]=t,y[1]=a,bt.NEQ(e.scale,0)&&bt.NEQ(e.scale,1))for(c=0;c<o;++c)y[0][c]*=e.scale,2==p.channels_out&&(y[1][c]*=e.scale);if(bt.NEQ(e.scale_left,0)&&bt.NEQ(e.scale_left,1))for(c=0;c<o;++c)y[0][c]*=e.scale_left;if(bt.NEQ(e.scale_right,0)&&bt.NEQ(e.scale_right,1))for(c=0;c<o;++c)y[1][c]*=e.scale_right;if(2==e.num_channels&&1==p.channels_out)for(c=0;c<o;++c)y[0][c]=.5*(y[0][c]+y[1][c]),y[1][c]=0;d=E(e),g[0]=p.mfbuf[0],g[1]=p.mfbuf[1];for(var b=0;o>0;){var w=[null,null],x=0,C=0;w[0]=y[0],w[1]=y[1];var _=new I;if(R(e,g,w,b,o,_),x=_.n_in,C=_.n_out,p.findReplayGain&&!p.decode_on_the_fly&&n.AnalyzeSamples(p.rgdata,g[0],p.mf_size,g[1],p.mf_size,C,p.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(o-=x,b+=x,p.channels_out,p.mf_size+=C,Mt(p.mf_size<=Ie.MFSIZE),p.mf_samples_to_encode<1&&(p.mf_samples_to_encode=O.ENCDELAY+O.POSTDELAY),p.mf_samples_to_encode+=C,p.mf_size>=d){var k=u-v;if(0==u&&(k=0),(l=T(e,g[0],g[1],i,s,k))<0)return l;for(s+=l,v+=l,p.mf_size-=e.framesize,p.mf_samples_to_encode-=e.framesize,f=0;f<p.channels_out;f++)for(c=0;c<p.mf_size;c++)g[f][c]=g[f][c+e.framesize]}}return Mt(0==o),v}function T(t,n,r,a,o,i){var s=e.enc.lame_encode_mp3_frame(t,n,r,a,o,i);return t.frameNum++,s}function I(){this.n_in=0,this.n_out=0}function j(){this.num_used=0}function D(e,t){return 0!=t?D(t,e%t):e}function L(e,t,n){var r=Math.PI*t;(e/=n)<0&&(e=0),e>1&&(e=1);var a=e-.5,o=.42-.5*Math.cos(2*e*Math.PI)+.08*Math.cos(4*e*Math.PI);return Math.abs(a)<1e-9?r/Math.PI:o*Math.sin(n*r*a)/(Math.PI*n*a)}function A(e,t,n,r,a,o,i,s,u){var l,c,f=e.internal_flags,d=0,h=e.out_samplerate/D(e.out_samplerate,e.in_samplerate);h>Ie.BPC&&(h=Ie.BPC);var p=Math.abs(f.resample_ratio-Math.floor(.5+f.resample_ratio))<1e-4?1:0,m=1/f.resample_ratio;m>1&&(m=1);var v=31;0==v%2&&--v;var g=(v+=p)+1;if(0==f.fill_buffer_resample_init){for(f.inbuf_old[0]=_t(g),f.inbuf_old[1]=_t(g),l=0;l<=2*h;++l)f.blackfilt[l]=_t(g);for(f.itime[0]=0,f.itime[1]=0,d=0;d<=2*h;d++){var y=0,b=(d-h)/(2*h);for(l=0;l<=v;l++)y+=f.blackfilt[d][l]=L(l-b,m,v);for(l=0;l<=v;l++)f.blackfilt[d][l]/=y}f.fill_buffer_resample_init=1}var w=f.inbuf_old[u];for(c=0;c<r;c++){var x,C;if(x=c*f.resample_ratio,v+(d=0|Math.floor(x-f.itime[u]))-v/2>=i)break;b=x-f.itime[u]-(d+v%2*.5),Mt(Math.abs(b)<=.501),C=0|Math.floor(2*b*h+h+.5);var _=0;for(l=0;l<=v;++l){var k=l+d-v/2;Mt(k<i),Mt(k+g>=0),_+=(k<0?w[g+k]:a[o+k])*f.blackfilt[C][l]}t[n+c]=_}if(s.num_used=Math.min(i,v+d-v/2),f.itime[u]+=s.num_used-c*f.resample_ratio,s.num_used>=g)for(l=0;l<g;l++)w[l]=a[o+s.num_used+l-g];else{var S=g-s.num_used;for(l=0;l<S;++l)w[l]=w[l+s.num_used];for(d=0;l<g;++l,++d)w[l]=a[o+d];Mt(d==s.num_used)}return c}function R(e,t,n,r,a,o){var i=e.internal_flags;if(i.resample_ratio<.9999||i.resample_ratio>1.0001)for(var s=0;s<i.channels_out;s++){var u=new j;o.n_out=A(e,t[s],i.mf_size,e.framesize,n[s],r,a,u,s),o.n_in=u.num_used}else{o.n_out=Math.min(e.framesize,a),o.n_in=o.n_out;for(var l=0;l<o.n_out;++l)t[0][i.mf_size+l]=n[0][r+l],2==i.channels_out&&(t[1][i.mf_size+l]=n[1][r+l])}}this.lame_init=function(){var e=new ne;return 0!=v(e)?null:(e.lame_allocated_gfp=1,e)},this.nearestBitrateFullIndex=function(e){var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],n=0,r=0,a=0,o=0;o=t[16],a=16,r=t[16],n=16;for(var i=0;i<16;i++)if(Math.max(e,t[i+1])!=e){o=t[i+1],a=i+1,r=t[i],n=i;break}return o-e>e-r?n:a},this.lame_init_params=function(e){var t=e.internal_flags;if(t.Class_ID=0,null==t.ATH&&(t.ATH=new Le),null==t.PSY&&(t.PSY=new d),null==t.rgdata&&(t.rgdata=new Ue),t.channels_in=e.num_channels,1==t.channels_in&&(e.mode=MPEGMode.MONO),t.channels_out=e.mode==MPEGMode.MONO?1:2,t.mode_ext=O.MPG_MD_MS_LR,e.mode==MPEGMode.MONO&&(e.force_ms=!1),e.VBR==xt.vbr_off&&128!=e.VBR_mean_bitrate_kbps&&0==e.brate&&(e.brate=e.VBR_mean_bitrate_kbps),e.VBR==xt.vbr_off||e.VBR==xt.vbr_mtrh||e.VBR==xt.vbr_mt||(e.free_format=!1),e.VBR==xt.vbr_off&&0==e.brate&&bt.EQ(e.compression_ratio,0)&&(e.compression_ratio=11.025),e.VBR==xt.vbr_off&&e.compression_ratio>0&&(0==e.out_samplerate&&(e.out_samplerate=map2MP3Frequency(int(.97*e.in_samplerate))),e.brate=0|16*e.out_samplerate*t.channels_out/(1e3*e.compression_ratio),t.samplerate_index=b(e.out_samplerate,e),e.free_format||(e.brate=w(e.brate,e.version,e.out_samplerate))),0!=e.out_samplerate&&(e.out_samplerate<16e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,64)):e.out_samplerate<32e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,160)):(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,32),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320))),0==e.lowpassfreq){var s=16e3;switch(e.VBR){case xt.vbr_off:C(u=new h,e.brate),s=u.lowerlimit;break;case xt.vbr_abr:var u;C(u=new h,e.VBR_mean_bitrate_kbps),s=u.lowerlimit;break;case xt.vbr_rh:var l=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=e.VBR_q&&e.VBR_q<=9){var p=l[e.VBR_q],v=l[e.VBR_q+1],g=e.VBR_q_frac;s=linear_int(p,v,g)}else s=19500;break;default:l=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],0<=e.VBR_q&&e.VBR_q<=9?(p=l[e.VBR_q],v=l[e.VBR_q+1],g=e.VBR_q_frac,s=linear_int(p,v,g)):s=19500}e.mode!=MPEGMode.MONO||e.VBR!=xt.vbr_off&&e.VBR!=xt.vbr_abr||(s*=1.5),e.lowpassfreq=0|s}if(0==e.out_samplerate&&(2*e.lowpassfreq>e.in_samplerate&&(e.lowpassfreq=e.in_samplerate/2),e.out_samplerate=y(0|e.lowpassfreq,e.in_samplerate)),e.lowpassfreq=Math.min(20500,e.lowpassfreq),e.lowpassfreq=Math.min(e.out_samplerate/2,e.lowpassfreq),e.VBR==xt.vbr_off&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)),e.VBR==xt.vbr_abr&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps)),e.bWriteVbrTag||(e.findReplayGain=!1,e.decode_on_the_fly=!1,t.findPeakSample=!1),t.findReplayGain=e.findReplayGain,t.decode_on_the_fly=e.decode_on_the_fly,t.decode_on_the_fly&&(t.findPeakSample=!0),t.findReplayGain&&n.InitGainAnalysis(t.rgdata,e.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return e.internal_flags=null,-6;switch(t.decode_on_the_fly&&!e.decode_only&&(null!=t.hip&&c.hip_decode_exit(t.hip),t.hip=c.hip_decode_init()),t.mode_gr=e.out_samplerate<=24e3?1:2,e.framesize=576*t.mode_gr,e.encoder_delay=O.ENCDELAY,t.resample_ratio=e.in_samplerate/e.out_samplerate,e.VBR){case xt.vbr_mt:case xt.vbr_rh:case xt.vbr_mtrh:var M=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];e.compression_ratio=M[e.VBR_q];break;case xt.vbr_abr:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps);break;default:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)}if(e.mode==MPEGMode.NOT_SET&&(e.mode=MPEGMode.JOINT_STEREO),e.highpassfreq>0?(t.highpass1=2*e.highpassfreq,e.highpasswidth>=0?t.highpass2=2*(e.highpassfreq+e.highpasswidth):t.highpass2=2*e.highpassfreq,t.highpass1/=e.out_samplerate,t.highpass2/=e.out_samplerate):(t.highpass1=0,t.highpass2=0),e.lowpassfreq>0?(t.lowpass2=2*e.lowpassfreq,e.lowpasswidth>=0?(t.lowpass1=2*(e.lowpassfreq-e.lowpasswidth),t.lowpass1<0&&(t.lowpass1=0)):t.lowpass1=2*e.lowpassfreq,t.lowpass1/=e.out_samplerate,t.lowpass2/=e.out_samplerate):(t.lowpass1=0,t.lowpass2=0),_(e),t.samplerate_index=b(e.out_samplerate,e),t.samplerate_index<0)return e.internal_flags=null,-1;if(e.VBR==xt.vbr_off){if(e.free_format)t.bitrate_index=0;else if(e.brate=w(e.brate,e.version,e.out_samplerate),t.bitrate_index=x(e.brate,e.version,e.out_samplerate),t.bitrate_index<=0)return e.internal_flags=null,-1}else t.bitrate_index=1;e.analysis&&(e.bWriteVbrTag=!1),null!=t.pinfo&&(e.bWriteVbrTag=!1),r.init_bit_stream_w(t);for(var E,N=t.samplerate_index+3*e.version+6*(e.out_samplerate<16e3?1:0),T=0;T<O.SBMAX_l+1;T++)t.scalefac_band.l[T]=o.sfBandIndex[N].l[T];for(T=0;T<O.PSFB21+1;T++){var I=(t.scalefac_band.l[22]-t.scalefac_band.l[21])/O.PSFB21,j=t.scalefac_band.l[21]+T*I;t.scalefac_band.psfb21[T]=j}for(t.scalefac_band.psfb21[O.PSFB21]=576,T=0;T<O.SBMAX_s+1;T++)t.scalefac_band.s[T]=o.sfBandIndex[N].s[T];for(T=0;T<O.PSFB12+1;T++)I=(t.scalefac_band.s[13]-t.scalefac_band.s[12])/O.PSFB12,j=t.scalefac_band.s[12]+T*I,t.scalefac_band.psfb12[T]=j;for(t.scalefac_band.psfb12[O.PSFB12]=192,1==e.version?t.sideinfo_len=1==t.channels_out?21:36:t.sideinfo_len=1==t.channels_out?13:21,e.error_protection&&(t.sideinfo_len+=2),S(e),t.Class_ID=m,E=0;E<19;E++)t.nsPsy.pefirbuf[E]=700*t.mode_gr*t.channels_out;switch(-1==e.ATHtype&&(e.ATHtype=4),Mt(e.VBR_q<=9),Mt(e.VBR_q>=0),e.VBR){case xt.vbr_mt:e.VBR=xt.vbr_mtrh;case xt.vbr_mtrh:null==e.useTemporal&&(e.useTemporal=!1),a.apply_preset(e,500-10*e.VBR_q,0),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),e.quality<5&&(e.quality=0),e.quality>5&&(e.quality=5),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=e.out_samplerate>44e3,t.iteration_loop=new VBRNewIterationLoop(i);break;case xt.vbr_rh:a.apply_preset(e,500-10*e.VBR_q,0),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,e.experimentalY?t.sfb21_extra=!1:t.sfb21_extra=e.out_samplerate>44e3,e.quality>6&&(e.quality=6),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),t.iteration_loop=new VBROldIterationLoop(i);break;default:var D;t.sfb21_extra=!1,e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),(D=e.VBR)==xt.vbr_off&&(e.VBR_mean_bitrate_kbps=e.brate),a.apply_preset(e,e.VBR_mean_bitrate_kbps,0),e.VBR=D,t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,D==xt.vbr_off?t.iteration_loop=new Qe(i):t.iteration_loop=new ABRIterationLoop(i)}if(Mt(e.scale>=0),e.VBR!=xt.vbr_off){if(t.VBR_min_bitrate=1,t.VBR_max_bitrate=14,e.out_samplerate<16e3&&(t.VBR_max_bitrate=8),0!=e.VBR_min_bitrate_kbps&&(e.VBR_min_bitrate_kbps=w(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate=x(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate<0))return-1;if(0!=e.VBR_max_bitrate_kbps&&(e.VBR_max_bitrate_kbps=w(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate=x(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate<0))return-1;e.VBR_min_bitrate_kbps=Je.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_max_bitrate_kbps=Je.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps=Math.min(Je.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps),e.VBR_mean_bitrate_kbps=Math.max(Je.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_mean_bitrate_kbps)}return e.tune&&(t.PSY.mask_adjust+=e.tune_value_a,t.PSY.mask_adjust_short+=e.tune_value_a),k(e),Mt(e.scale>=0),e.athaa_type<0?t.ATH.useAdjust=3:t.ATH.useAdjust=e.athaa_type,t.ATH.aaSensitivityP=Math.pow(10,e.athaa_sensitivity/-10),null==e.short_blocks&&(e.short_blocks=Ct.short_block_allowed),e.short_blocks!=Ct.short_block_allowed||e.mode!=MPEGMode.JOINT_STEREO&&e.mode!=MPEGMode.STEREO||(e.short_blocks=Ct.short_block_coupled),e.quant_comp<0&&(e.quant_comp=1),e.quant_comp_short<0&&(e.quant_comp_short=0),e.msfix<0&&(e.msfix=0),e.exp_nspsytune=1|e.exp_nspsytune,e.internal_flags.nsPsy.attackthre<0&&(e.internal_flags.nsPsy.attackthre=Z.NSATTACKTHRE),e.internal_flags.nsPsy.attackthre_s<0&&(e.internal_flags.nsPsy.attackthre_s=Z.NSATTACKTHRE_S),Mt(e.scale>=0),e.scale<0&&(e.scale=1),e.ATHtype<0&&(e.ATHtype=4),e.ATHcurve<0&&(e.ATHcurve=4),e.athaa_loudapprox<0&&(e.athaa_loudapprox=2),e.interChRatio<0&&(e.interChRatio=0),null==e.useTemporal&&(e.useTemporal=!0),t.slot_lag=t.frac_SpF=0,e.VBR==xt.vbr_off&&(t.slot_lag=t.frac_SpF=72e3*(e.version+1)*e.brate%e.out_samplerate|0),o.iteration_init(e),f.psymodel_init(e),Mt(e.scale>=0),0},this.lame_encode_flush=function(e,t,n,a){var o,i,s,u,c=e.internal_flags,f=St([2,1152]),d=0,h=c.mf_samples_to_encode-O.POSTDELAY,p=E(e);if(c.mf_samples_to_encode<1)return 0;for(o=0,e.in_samplerate!=e.out_samplerate&&(h+=16*e.out_samplerate/e.in_samplerate),(s=e.framesize-h%e.framesize)<576&&(s+=e.framesize),e.encoder_padding=s,u=(h+s)/e.framesize;u>0&&d>=0;){var m=p-c.mf_size,v=e.frameNum;m*=e.in_samplerate,(m/=e.out_samplerate)>1152&&(m=1152),m<1&&(m=1),i=a-o,0==a&&(i=0),n+=d=this.lame_encode_buffer(e,f[0],f[1],m,t,n,i),o+=d,u-=v!=e.frameNum?1:0}if(c.mf_samples_to_encode=0,d<0)return d;if(i=a-o,0==a&&(i=0),r.flush_bitstream(e),(d=r.copy_buffer(c,t,n,i,1))<0)return d;if(n+=d,i=a-(o+=d),0==a&&(i=0),e.write_id3tag_automatic){if(l.id3tag_write_v1(e),(d=r.copy_buffer(c,t,n,i,0))<0)return d;o+=d}return o},this.lame_encode_buffer=function(e,t,n,r,a,o,i){var s=e.internal_flags,u=[null,null];if(s.Class_ID!=m)return-3;if(0==r)return 0;M(s,r),u[0]=s.in_buffer_0,u[1]=s.in_buffer_1;for(var l=0;l<r;l++)u[0][l]=t[l],s.channels_in>1&&(u[1][l]=n[l]);return N(e,u[0],u[1],r,a,o,i)}}var Nt=Et,Tt=m.VbrMode;function It(){function e(e,t,n,r,a,o,i,s,u,l,c,f,d,h,p){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=n,this.expY=r,this.st_lrm=a,this.st_s=o,this.masking_adj=i,this.masking_adj_short=s,this.ath_lower=u,this.ath_curve=l,this.ath_sensitivity=c,this.interch=f,this.safejoint=d,this.sfb21mod=h,this.msfix=p}function t(e,t,n,r,a,o,i,s,u,l,c,f,d,h){this.quant_comp=t,this.quant_comp_s=n,this.safejoint=r,this.nsmsfix=a,this.st_lrm=o,this.st_s=i,this.nsbass=s,this.scale=u,this.masking_adj=l,this.ath_lower=c,this.ath_curve=f,this.interch=d,this.sfscale=h}var n;this.setModules=function(e){n=e};var r=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],a=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function o(e,t,n){var o=e.VBR==Tt.vbr_rh?r:a,i=e.VBR_q_frac,s=o[t],l=o[t+1],c=s;s.st_lrm=s.st_lrm+i*(l.st_lrm-s.st_lrm),s.st_s=s.st_s+i*(l.st_s-s.st_s),s.masking_adj=s.masking_adj+i*(l.masking_adj-s.masking_adj),s.masking_adj_short=s.masking_adj_short+i*(l.masking_adj_short-s.masking_adj_short),s.ath_lower=s.ath_lower+i*(l.ath_lower-s.ath_lower),s.ath_curve=s.ath_curve+i*(l.ath_curve-s.ath_curve),s.ath_sensitivity=s.ath_sensitivity+i*(l.ath_sensitivity-s.ath_sensitivity),s.interch=s.interch+i*(l.interch-s.interch),s.msfix=s.msfix+i*(l.msfix-s.msfix),u(e,c.vbr_q),0!=n?e.quant_comp=c.quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=c.quant_comp),0!=n?e.quant_comp_short=c.quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=c.quant_comp_s),0!=c.expY&&(e.experimentalY=0!=c.expY),0!=n?e.internal_flags.nsPsy.attackthre=c.st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=c.st_lrm),0!=n?e.internal_flags.nsPsy.attackthre_s=c.st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=c.st_s),0!=n?e.maskingadjust=c.masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=c.masking_adj),0!=n?e.maskingadjust_short=c.masking_adj_short:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=c.masking_adj_short),0!=n?e.ATHlower=-c.ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-c.ath_lower/10),0!=n?e.ATHcurve=c.ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=c.ath_curve),0!=n?e.athaa_sensitivity=c.ath_sensitivity:Math.abs(e.athaa_sensitivity- -1)>0||(e.athaa_sensitivity=c.ath_sensitivity),c.interch>0&&(0!=n?e.interChRatio=c.interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=c.interch)),c.safejoint>0&&(e.exp_nspsytune=e.exp_nspsytune|c.safejoint),c.sfb21mod>0&&(e.exp_nspsytune=e.exp_nspsytune|c.sfb21mod<<20),0!=n?e.msfix=c.msfix:Math.abs(e.msfix- -1)>0||(e.msfix=c.msfix),0==n&&(e.VBR_q=t,e.VBR_q_frac=i)}var i=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function s(e,t,r){var a=t,o=n.nearestBitrateFullIndex(t);if(e.VBR=Tt.vbr_abr,e.VBR_mean_bitrate_kbps=a,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,e.VBR_mean_bitrate_kbps>320&&(e.disable_reservoir=!0),i[o].safejoint>0&&(e.exp_nspsytune=2|e.exp_nspsytune),i[o].sfscale>0&&(e.internal_flags.noise_shaping=2),Math.abs(i[o].nsbass)>0){var s=int(4*i[o].nsbass);s<0&&(s+=64),e.exp_nspsytune=e.exp_nspsytune|s<<2}return 0!=r?e.quant_comp=i[o].quant_comp:Math.abs(e.quant_comp- -1)>0||(e.quant_comp=i[o].quant_comp),0!=r?e.quant_comp_short=i[o].quant_comp_s:Math.abs(e.quant_comp_short- -1)>0||(e.quant_comp_short=i[o].quant_comp_s),0!=r?e.msfix=i[o].nsmsfix:Math.abs(e.msfix- -1)>0||(e.msfix=i[o].nsmsfix),0!=r?e.internal_flags.nsPsy.attackthre=i[o].st_lrm:Math.abs(e.internal_flags.nsPsy.attackthre- -1)>0||(e.internal_flags.nsPsy.attackthre=i[o].st_lrm),0!=r?e.internal_flags.nsPsy.attackthre_s=i[o].st_s:Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)>0||(e.internal_flags.nsPsy.attackthre_s=i[o].st_s),0!=r?e.scale=i[o].scale:Math.abs(e.scale- -1)>0||(e.scale=i[o].scale),0!=r?e.maskingadjust=i[o].masking_adj:Math.abs(e.maskingadjust-0)>0||(e.maskingadjust=i[o].masking_adj),i[o].masking_adj>0?0!=r?e.maskingadjust_short=.9*i[o].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=.9*i[o].masking_adj):0!=r?e.maskingadjust_short=1.1*i[o].masking_adj:Math.abs(e.maskingadjust_short-0)>0||(e.maskingadjust_short=1.1*i[o].masking_adj),0!=r?e.ATHlower=-i[o].ath_lower/10:Math.abs(10*-e.ATHlower-0)>0||(e.ATHlower=-i[o].ath_lower/10),0!=r?e.ATHcurve=i[o].ath_curve:Math.abs(e.ATHcurve- -1)>0||(e.ATHcurve=i[o].ath_curve),0!=r?e.interChRatio=i[o].interch:Math.abs(e.interChRatio- -1)>0||(e.interChRatio=i[o].interch),t}function u(e,t){var n=0;return 0>t&&(n=-1,t=0),9<t&&(n=-1,t=9),e.VBR_q=t,e.VBR_q_frac=0,n}this.apply_preset=function(e,t,n){switch(t){case Lame.R3MIX:t=Lame.V3,e.VBR=Tt.vbr_mtrh;break;case Lame.MEDIUM:t=Lame.V4,e.VBR=Tt.vbr_rh;break;case Lame.MEDIUM_FAST:t=Lame.V4,e.VBR=Tt.vbr_mtrh;break;case Lame.STANDARD:t=Lame.V2,e.VBR=Tt.vbr_rh;break;case Lame.STANDARD_FAST:t=Lame.V2,e.VBR=Tt.vbr_mtrh;break;case Lame.EXTREME:t=Lame.V0,e.VBR=Tt.vbr_rh;break;case Lame.EXTREME_FAST:t=Lame.V0,e.VBR=Tt.vbr_mtrh;break;case Lame.INSANE:return t=320,e.preset=t,s(e,t,n),e.VBR=Tt.vbr_off,t}switch(e.preset=t,t){case Lame.V9:return o(e,9,n),t;case Lame.V8:return o(e,8,n),t;case Lame.V7:return o(e,7,n),t;case Lame.V6:return o(e,6,n),t;case Lame.V5:return o(e,5,n),t;case Lame.V4:return o(e,4,n),t;case Lame.V3:return o(e,3,n),t;case Lame.V2:return o(e,2,n),t;case Lame.V1:return o(e,1,n),t;case Lame.V0:return o(e,0,n),t}return 8<=t&&t<=320?s(e,t,n):(e.preset=0,t)}}var jt=It;function Dt(){this.setModules=function(e,t){}}var Lt=Dt;function At(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Rt=At,Pt=m.new_float,Ot=m.new_int;function Ft(){this.global_gain=0,this.sfb_count1=0,this.step=Ot(39),this.noise=Pt(39),this.noise_log=Pt(39)}var Bt=Ft,zt=m.System,Ut=m.VbrMode,Wt=m.Util,Vt=m.Arrays,Ht=m.new_float,Yt=m.assert;function Gt(){var e,t,n;this.rv=null,this.qupvt=null;var r,a=new Lt;function o(e,t,n,r){r=0;for(var a=0;a<=n;++a){var o=Math.abs(e.xr[a]);r+=o,t[a]=Math.sqrt(o*Math.sqrt(o)),t[a]>e.xrpow_max&&(e.xrpow_max=t[a])}return r}function i(e,t){var r=e.ATH,a=t.xr;if(t.block_type!=O.SHORT_TYPE)for(var o=!1,i=O.PSFB21-1;i>=0&&!o;i--){var s=e.scalefac_band.psfb21[i],u=e.scalefac_band.psfb21[i+1],l=n.athAdjust(r.adjust,r.psfb21[i],r.floor);e.nsPsy.longfact[21]>1e-12&&(l*=e.nsPsy.longfact[21]);for(var c=u-1;c>=s;c--){if(!(Math.abs(a[c])<l)){o=!0;break}a[c]=0}}else for(var f=0;f<3;f++)for(o=!1,i=O.PSFB12-1;i>=0&&!o;i--){u=(s=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*f+(e.scalefac_band.psfb12[i]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[i+1]-e.scalefac_band.psfb12[i]);var d=n.athAdjust(r.adjust,r.psfb12[i],r.floor);for(e.nsPsy.shortfact[12]>1e-12&&(d*=e.nsPsy.shortfact[12]),c=u-1;c>=s;c--){if(!(Math.abs(a[c])<d)){o=!0;break}a[c]=0}}}function s(e){this.ordinal=e}function u(e,t,n,a,o){var i,u=e.CurrentStep[a],l=!1,c=e.OldValue[a],f=s.BINSEARCH_NONE;for(t.global_gain=c,n-=t.part2_length,Yt(0!=u);;){var d;if(i=r.count_bits(e,o,t,null),1==u||i==n)break;i>n?(f==s.BINSEARCH_DOWN&&(l=!0),l&&(u/=2),f=s.BINSEARCH_UP,d=u):(f==s.BINSEARCH_UP&&(l=!0),l&&(u/=2),f=s.BINSEARCH_DOWN,d=-u),t.global_gain+=d,t.global_gain<0&&(t.global_gain=0,l=!0),t.global_gain>255&&(t.global_gain=255,l=!0)}for(Yt(t.global_gain>=0),Yt(t.global_gain<256);i>n&&t.global_gain<255;)t.global_gain++,i=r.count_bits(e,o,t,null);return e.CurrentStep[a]=c-t.global_gain>=4?4:2,e.OldValue[a]=t.global_gain,t.part2_3_length=i,i}function l(e){for(var t=0;t<e.sfbmax;t++)if(e.scalefac[t]+e.subblock_gain[e.window[t]]==0)return!1;return!0}function c(e){return Wt.FAST_LOG10(.368+.632*e*e*e)}function f(e,t){for(var n=1e-37,r=0;r<t.psymax;r++)n+=c(e[r]);return Math.max(1e-20,n)}function d(e,t,n,r,a){var o;switch(e){default:case 9:t.over_count>0?(o=n.over_SSD<=t.over_SSD,n.over_SSD==t.over_SSD&&(o=n.bits<t.bits)):o=n.max_noise<0&&10*n.max_noise+n.bits<=10*t.max_noise+t.bits;break;case 0:o=n.over_count<t.over_count||n.over_count==t.over_count&&n.over_noise<t.over_noise||n.over_count==t.over_count&&BitStream.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 8:n.max_noise=f(a,r);case 1:o=n.max_noise<t.max_noise;break;case 2:o=n.tot_noise<t.tot_noise;break;case 3:o=n.tot_noise<t.tot_noise&&n.max_noise<t.max_noise;break;case 4:o=n.max_noise<=0&&t.max_noise>.2||n.max_noise<=0&&t.max_noise<0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise||n.max_noise<=0&&t.max_noise>0&&t.max_noise>n.max_noise-.2&&n.tot_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.05&&t.max_noise>n.max_noise-.1&&n.tot_noise+n.over_noise<t.tot_noise+t.over_noise||n.max_noise>0&&t.max_noise>-.1&&t.max_noise>n.max_noise-.15&&n.tot_noise+n.over_noise+n.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:o=n.over_noise<t.over_noise||BitStream.EQ(n.over_noise,t.over_noise)&&n.tot_noise<t.tot_noise;break;case 6:o=n.over_noise<t.over_noise||BitStream.EQ(n.over_noise,t.over_noise)&&(n.max_noise<t.max_noise||BitStream.EQ(n.max_noise,t.max_noise)&&n.tot_noise<=t.tot_noise);break;case 7:o=n.over_count<t.over_count||n.over_noise<t.over_noise}return 0==t.over_count&&(o=o&&n.bits<t.bits),o}function h(e,t,n,r,a){var o,i=e.internal_flags;o=0==t.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var s=0,u=0;u<t.sfbmax;u++)s<n[u]&&(s=n[u]);var l=i.noise_shaping_amp;switch(3==l&&(l=a?2:1),l){case 2:break;case 1:s>1?s=Math.pow(s,.5):s*=.95;break;default:s>1?s=1:s*=.95}var c=0;for(u=0;u<t.sfbmax;u++){var f,d=t.width[u];if(c+=d,!(n[u]<s)){if(0!=(2&i.substep_shaping)&&(i.pseudohalf[u]=0==i.pseudohalf[u]?1:0,0==i.pseudohalf[u]&&2==i.noise_shaping_amp))return;for(t.scalefac[u]++,f=-d;f<0;f++)r[c+f]*=o,r[c+f]>t.xrpow_max&&(t.xrpow_max=r[c+f]);if(2==i.noise_shaping_amp)return}}}function p(e,t){for(var r=1.2968395546510096,a=0,o=0;o<e.sfbmax;o++){var i=e.width[o],s=e.scalefac[o];if(0!=e.preflag&&(s+=n.pretab[o]),a+=i,0!=(1&s)){s++;for(var u=-i;u<0;u++)t[a+u]*=r,t[a+u]>e.xrpow_max&&(e.xrpow_max=t[a+u])}e.scalefac[o]=s>>1}e.preflag=0,e.scalefac_scale=1}function m(e,t,r){var a,o=t.scalefac;for(a=0;a<t.sfb_lmax;a++)if(o[a]>=16)return!0;for(var i=0;i<3;i++){var s=0,u=0;for(a=t.sfb_lmax+i;a<t.sfbdivide;a+=3)s<o[a]&&(s=o[a]);for(;a<t.sfbmax;a+=3)u<o[a]&&(u=o[a]);if(!(s<16&&u<8)){if(t.subblock_gain[i]>=7)return!0;t.subblock_gain[i]++;var l=e.scalefac_band.l[t.sfb_lmax];for(a=t.sfb_lmax+i;a<t.sfbmax;a+=3){var c=t.width[a],f=o[a];if(Yt(f>=0),(f-=4>>t.scalefac_scale)>=0)o[a]=f,l+=3*c;else{o[a]=0;var d=210+(f<<t.scalefac_scale+1);p=n.IPOW20(d),l+=c*(i+1);for(var h=-c;h<0;h++)r[l+h]*=p,r[l+h]>t.xrpow_max&&(t.xrpow_max=r[l+h]);l+=c*(3-i-1)}}var p=n.IPOW20(202);for(l+=t.width[a]*(i+1),h=-t.width[a];h<0;h++)r[l+h]*=p,r[l+h]>t.xrpow_max&&(t.xrpow_max=r[l+h])}}return!1}function v(e,t,n,a,o){var i=e.internal_flags;h(e,t,n,a,o);var s=l(t);return!s&&(!(s=2==i.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(i,t))||(i.noise_shaping>1&&(Vt.fill(i.pseudohalf,0),0==t.scalefac_scale?(p(t,a),s=!1):t.block_type==O.SHORT_TYPE&&i.subblock_gain>0&&(s=m(i,t,a)||l(t))),s||(s=2==i.mode_gr?r.scale_bitcount(t):r.scale_bitcount_lsf(i,t)),!s))}this.setModules=function(o,i,s,u){e=o,t=i,this.rv=i,n=s,this.qupvt=s,r=u,a.setModules(n,r)},this.ms_convert=function(e,t){for(var n=0;n<576;++n){var r=e.tt[t][0].xr[n],a=e.tt[t][1].xr[n];e.tt[t][0].xr[n]=(r+a)*(.5*Wt.SQRT2),e.tt[t][1].xr[n]=(r-a)*(.5*Wt.SQRT2)}},this.init_xrpow=function(e,t,n){var r=0,a=0|t.max_nonzero_coeff;if(Yt(null!=n),t.xrpow_max=0,Yt(0<=a&&a<=575),Vt.fill(n,a,576,0),(r=o(t,n,a,r))>1e-20){var i=0;0!=(2&e.substep_shaping)&&(i=1);for(var s=0;s<t.psymax;s++)e.pseudohalf[s]=i;return!0}return Vt.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=O.SBPSY_l,t.sfb_smin=O.SBPSY_s,t.psy_lmax=e.sfb21_extra?O.SBMAX_l:O.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var r=0;r<O.SBMAX_l;r++)t.width[r]=e.scalefac_band.l[r+1]-e.scalefac_band.l[r],t.window[r]=3;if(t.block_type==O.SHORT_TYPE){var a=Ht(576);t.sfb_smin=0,t.sfb_lmax=0,0!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?O.SBMAX_s:O.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(O.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var o=e.scalefac_band.l[t.sfb_lmax];for(zt.arraycopy(t.xr,0,a,0,576),r=t.sfb_smin;r<O.SBMAX_s;r++)for(var s=e.scalefac_band.s[r],u=e.scalefac_band.s[r+1],l=0;l<3;l++)for(var c=s;c<u;c++)t.xr[o++]=a[3*c+l];var f=t.sfb_lmax;for(r=t.sfb_smin;r<O.SBMAX_s;r++)t.width[f]=t.width[f+1]=t.width[f+2]=e.scalefac_band.s[r+1]-e.scalefac_band.s[r],t.window[f]=0,t.window[f+1]=1,t.window[f+2]=2,f+=3}t.count1bits=0,t.sfb_partition_table=n.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,Vt.fill(t.scalefac,0),i(e,t)},s.BINSEARCH_NONE=new s(0),s.BINSEARCH_UP=new s(1),s.BINSEARCH_DOWN=new s(2),this.trancate_smallspectrums=function(e,t,a,o){var i=Ht(ae.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=O.SHORT_TYPE)&&0==(128&e.substep_shaping)){n.calc_noise(t,a,i,new Rt,null);for(var s=0;s<576;s++){var u=0;0!=t.l3_enc[s]&&(u=Math.abs(t.xr[s])),o[s]=u}s=0;var l=8;t.block_type==O.SHORT_TYPE&&(l=6);do{var c,f,d,h,p=t.width[l];if(s+=p,!(i[l]>=1)&&(Vt.sort(o,s-p,p),!BitStream.EQ(o[s-1],0))){c=(1-i[l])*a[l],f=0,h=0;do{var m;for(d=1;h+d<p&&!BitStream.NEQ(o[h+s-p],o[h+s+d-p]);d++);if(c<(m=o[h+s-p]*o[h+s-p]*d)){0!=h&&(f=o[h+s-p-1]);break}c-=m,h+=d}while(h<p);if(!BitStream.EQ(f,0))do{Math.abs(t.xr[s-p])<=f&&(t.l3_enc[s-p]=0)}while(--p>0)}}while(++l<t.psymax);t.part2_3_length=r.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,a,o,i,s){var l=e.internal_flags,c=new ue,f=Ht(576),h=Ht(ae.SFBMAX),p=new Rt,m=new Bt,g=9999999,y=!1,b=!1,w=0;if(u(l,t,s,i,o),0==l.noise_shaping)return 100;n.calc_noise(t,a,h,p,m),p.bits=t.part2_3_length,c.assign(t);var x=0;for(zt.arraycopy(o,0,f,0,576);!y;){do{var C,_=new Rt,k=255;if(C=0!=(2&l.substep_shaping)?20:3,l.sfb21_extra){if(h[c.sfbmax]>1)break;if(c.block_type==O.SHORT_TYPE&&(h[c.sfbmax+1]>1||h[c.sfbmax+2]>1))break}if(!v(e,c,h,o,b))break;0!=c.scalefac_scale&&(k=254);var S=s-c.part2_length;if(S<=0)break;for(;(c.part2_3_length=r.count_bits(l,o,c,m))>S&&c.global_gain<=k;)c.global_gain++;if(c.global_gain>k)break;if(0==p.over_count){for(;(c.part2_3_length=r.count_bits(l,o,c,m))>g&&c.global_gain<=k;)c.global_gain++;if(c.global_gain>k)break}if(n.calc_noise(c,a,h,_,m),_.bits=c.part2_3_length,0!=(d(t.block_type!=O.SHORT_TYPE?e.quant_comp:e.quant_comp_short,p,_,c,h)?1:0))g=t.part2_3_length,p=_,t.assign(c),x=0,zt.arraycopy(o,0,f,0,576);else if(0==l.full_outer_loop){if(++x>C&&0==p.over_count)break;if(3==l.noise_shaping_amp&&b&&x>30)break;if(3==l.noise_shaping_amp&&b&&c.global_gain-w>15)break}}while(c.global_gain+c.scalefac_scale<255);3==l.noise_shaping_amp?b?y=!0:(c.assign(t),zt.arraycopy(f,0,o,0,576),x=0,w=c.global_gain,b=!0):y=!0}return Yt(t.global_gain+t.scalefac_scale<=255),e.VBR==Ut.vbr_rh||e.VBR==Ut.vbr_mtrh?zt.arraycopy(f,0,o,0,576):0!=(1&l.substep_shaping)&&trancate_smallspectrums(l,t,a,o),p.over_count},this.iteration_finish_one=function(e,n,a){var o=e.l3_side,i=o.tt[n][a];r.best_scalefac_store(e,n,a,o),1==e.use_best_huffman&&r.best_huffman_divide(e,i),t.ResvAdjust(e,i)},this.VBR_encode_granule=function(e,t,n,r,a,o,i){var s,u=e.internal_flags,l=new ue,c=Ht(576),f=i,d=i+1,h=(i+o)/2,p=0,m=u.sfb21_extra;Yt(f<=LameInternalFlags.MAX_BITS_PER_CHANNEL),Vt.fill(l.l3_enc,0);do{Yt(h>=o),Yt(h<=i),Yt(o<=i),u.sfb21_extra=!(h>f-42)&&m,outer_loop(e,t,n,r,a,h)<=0?(p=1,d=t.part2_3_length,l.assign(t),zt.arraycopy(r,0,c,0,576),s=(i=d-32)-o,h=(i+o)/2):(s=i-(o=h+32),h=(i+o)/2,0!=p&&(p=2,t.assign(l),zt.arraycopy(c,0,r,0,576)))}while(s>12);u.sfb21_extra=m,2==p&&zt.arraycopy(l.l3_enc,0,t.l3_enc,0,576),Yt(t.part2_3_length<=f)},this.get_framebits=function(n,r){var a=n.internal_flags;a.bitrate_index=a.VBR_min_bitrate;var o=e.getframebits(n);a.bitrate_index=1,o=e.getframebits(n);for(var i=1;i<=a.VBR_max_bitrate;i++){a.bitrate_index=i;var s=new MeanBits(o);r[i]=t.ResvFrameBegin(n,s),o=s.bits}},this.VBR_old_prepare=function(e,r,a,o,i,s,u,l,c){var f,d=e.internal_flags,h=0,p=1,m=0;d.bitrate_index=d.VBR_max_bitrate;var v=t.ResvFrameBegin(e,new MeanBits(0))/d.mode_gr;get_framebits(e,s);for(var g=0;g<d.mode_gr;g++){var y=n.on_pe(e,r,l[g],v,g,0);d.mode_ext==O.MPG_MD_MS_LR&&(ms_convert(d.l3_side,g),n.reduce_side(l[g],a[g],v,y));for(var b=0;b<d.channels_out;++b){var w=d.l3_side.tt[g][b];w.block_type!=O.SHORT_TYPE?(h=1.28/(1+Math.exp(3.5-r[g][b]/300))-.05,f=d.PSY.mask_adjust-h):(h=2.56/(1+Math.exp(3.5-r[g][b]/300))-.14,f=d.PSY.mask_adjust_short-h),d.masking_lower=Math.pow(10,.1*f),init_outer_loop(d,w),c[g][b]=n.calc_xmin(e,o[g][b],w,i[g][b]),0!=c[g][b]&&(p=0),u[g][b]=126,m+=l[g][b]}}for(g=0;g<d.mode_gr;g++)for(b=0;b<d.channels_out;b++)m>s[d.VBR_max_bitrate]&&(l[g][b]*=s[d.VBR_max_bitrate],l[g][b]/=m),u[g][b]>l[g][b]&&(u[g][b]=l[g][b]);return p},this.bitpressure_strategy=function(e,t,n,r){for(var a=0;a<e.mode_gr;a++)for(var o=0;o<e.channels_out;o++){for(var i=e.l3_side.tt[a][o],s=t[a][o],u=0,l=0;l<i.psy_lmax;l++)s[u++]*=1+.029*l*l/O.SBMAX_l/O.SBMAX_l;if(i.block_type==O.SHORT_TYPE)for(l=i.sfb_smin;l<O.SBMAX_s;l++)s[u++]*=1+.029*l*l/O.SBMAX_s/O.SBMAX_s,s[u++]*=1+.029*l*l/O.SBMAX_s/O.SBMAX_s,s[u++]*=1+.029*l*l/O.SBMAX_s/O.SBMAX_s;r[a][o]=0|Math.max(n[a][o],.9*r[a][o])}},this.VBR_new_prepare=function(e,r,a,o,i,s){var u,l=e.internal_flags,c=1,f=0,d=0;if(e.free_format)l.bitrate_index=0,h=new MeanBits(f),u=t.ResvFrameBegin(e,h),f=h.bits,i[0]=u;else{l.bitrate_index=l.VBR_max_bitrate;var h=new MeanBits(f);t.ResvFrameBegin(e,h),f=h.bits,get_framebits(e,i),u=i[l.VBR_max_bitrate]}for(var p=0;p<l.mode_gr;p++){n.on_pe(e,r,s[p],f,p,0),l.mode_ext==O.MPG_MD_MS_LR&&ms_convert(l.l3_side,p);for(var m=0;m<l.channels_out;++m){var v=l.l3_side.tt[p][m];l.masking_lower=Math.pow(10,.1*l.PSY.mask_adjust),init_outer_loop(l,v),0!=n.calc_xmin(e,a[p][m],v,o[p][m])&&(c=0),d+=s[p][m]}}for(p=0;p<l.mode_gr;p++)for(m=0;m<l.channels_out;m++)d>u&&(s[p][m]*=u,s[p][m]/=d);return c},this.calc_target_bits=function(r,a,o,i,s,u){var l,c,f,d,h=r.internal_flags,p=h.l3_side,m=0;h.bitrate_index=h.VBR_max_bitrate;var v=new MeanBits(m);for(u[0]=t.ResvFrameBegin(r,v),m=v.bits,h.bitrate_index=1,m=e.getframebits(r)-8*h.sideinfo_len,s[0]=m/(h.mode_gr*h.channels_out),m=r.VBR_mean_bitrate_kbps*r.framesize*1e3,0!=(1&h.substep_shaping)&&(m*=1.09),m/=r.out_samplerate,m-=8*h.sideinfo_len,m/=h.mode_gr*h.channels_out,(l=.93+.07*(11-r.compression_ratio)/5.5)<.9&&(l=.9),l>1&&(l=1),c=0;c<h.mode_gr;c++){var g=0;for(f=0;f<h.channels_out;f++){if(i[c][f]=int(l*m),a[c][f]>700){var y=int((a[c][f]-700)/1.4),b=p.tt[c][f];i[c][f]=int(l*m),b.block_type==O.SHORT_TYPE&&y<m/2&&(y=m/2),y>3*m/2?y=3*m/2:y<0&&(y=0),i[c][f]+=y}i[c][f]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(i[c][f]=LameInternalFlags.MAX_BITS_PER_CHANNEL),g+=i[c][f]}if(g>LameInternalFlags.MAX_BITS_PER_GRANULE)for(f=0;f<h.channels_out;++f)i[c][f]*=LameInternalFlags.MAX_BITS_PER_GRANULE,i[c][f]/=g}if(h.mode_ext==O.MPG_MD_MS_LR)for(c=0;c<h.mode_gr;c++)n.reduce_side(i[c],o[c],m*h.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(d=0,c=0;c<h.mode_gr;c++)for(f=0;f<h.channels_out;f++)i[c][f]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(i[c][f]=LameInternalFlags.MAX_BITS_PER_CHANNEL),d+=i[c][f];if(d>u[0])for(c=0;c<h.mode_gr;c++)for(f=0;f<h.channels_out;f++)i[c][f]*=u[0],i[c][f]/=d}}var qt=Gt,Qt=m.assert;function Xt(){var e;this.setModules=function(t){e=t},this.ResvFrameBegin=function(t,n){var r,a=t.internal_flags,o=a.l3_side,i=e.getframebits(t);n.bits=(i-8*a.sideinfo_len)/a.mode_gr;var s=2048*a.mode_gr-8;t.brate>320?r=8*int(1e3*t.brate/(t.out_samplerate/1152)/8+.5):(r=11520,t.strict_ISO&&(r=8*int(32e4/(t.out_samplerate/1152)/8+.5))),a.ResvMax=r-i,a.ResvMax>s&&(a.ResvMax=s),(a.ResvMax<0||t.disable_reservoir)&&(a.ResvMax=0);var u=n.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax);return u>r&&(u=r),Qt(0==a.ResvMax%8),Qt(a.ResvMax>=0),o.resvDrain_pre=0,null!=a.pinfo&&(a.pinfo.mean_bits=n.bits/2,a.pinfo.resvsize=a.ResvSize),u},this.ResvMaxBits=function(e,t,n,r){var a,o=e.internal_flags,i=o.ResvSize,s=o.ResvMax;0!=r&&(i+=t),0!=(1&o.substep_shaping)&&(s*=.9),n.bits=t,10*i>9*s?(a=i-9*s/10,n.bits+=a,o.substep_shaping|=128):(a=0,o.substep_shaping&=127,e.disable_reservoir||0!=(1&o.substep_shaping)||(n.bits-=.1*t));var u=i<6*o.ResvMax/10?i:6*o.ResvMax/10;return(u-=a)<0&&(u=0),u},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var n,r=e.l3_side;e.ResvSize+=t*e.mode_gr;var a=0;r.resvDrain_post=0,r.resvDrain_pre=0,0!=(n=e.ResvSize%8)&&(a+=n),(n=e.ResvSize-a-e.ResvMax)>0&&(Qt(0==n%8),Qt(n>=0),a+=n);var o=Math.min(8*r.main_data_begin,a)/8;r.resvDrain_pre+=8*o,a-=8*o,e.ResvSize-=8*o,r.main_data_begin-=o,r.resvDrain_post+=a,e.ResvSize-=a}}var Kt=Xt;function Jt(){var e="http://www.mp3dev.org/",t=3,n=98,r=4,a=0,o=93;this.getLameVersion=function(){return t+"."+n+"."+r},this.getLameShortVersion=function(){return t+"."+n+"."+r},this.getLameVeryShortVersion=function(){return"LAME"+t+"."+n+"r"},this.getPsyVersion=function(){return a+"."+o},this.getLameUrl=function(){return e},this.getLameOsBitness=function(){return"32bits"}}var Zt=Jt,$t=m.System,en=m.VbrMode,tn=m.ShortBlock,nn=m.Arrays,rn=m.new_byte,an=m.assert;function on(){var e,t,n;this.setModules=function(r,a,o){e=r,t=a,n=o};var r=1,a=2,o=4,i=8,s=on.NUMTOCENTRIES,u=on.MAXFRAMESIZE,l=s+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,c=128,f=64,d=32,h=null,p="Xing",m="Info",v=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function g(e,t){if(e.nVbrNumFrames++,e.sum+=t,e.seen++,!(e.seen<e.want)&&(e.pos<e.size&&(e.bag[e.pos]=e.sum,e.pos++,e.seen=0),e.pos==e.size)){for(var n=1;n<e.size;n+=2)e.bag[n/2]=e.bag[n];e.want*=2,e.pos/=2}}function y(e,t){if(!(e.pos<=0))for(var n=1;n<s;++n){var r=n/s,a=0|Math.floor(r*e.pos);a>e.pos-1&&(a=e.pos-1);var o=0|256*e.bag[a]/e.sum;o>255&&(o=255),t[n]=255&o}}function b(e,t){var n=255&e[t+0];return n<<=8,n|=255&e[t+1],n<<=8,n|=255&e[t+2],n<<=8,n|=255&e[t+3]}function w(e,t,n){e[t+0]=255&n>>24,e[t+1]=255&n>>16,e[t+2]=255&n>>8,e[t+3]=255&n}function x(e,t,n){e[t+0]=255&n>>8,e[t+1]=255&n}function C(e,t){return new String(e,t,p.length(),h).equals(p)||new String(e,t,m.length(),h).equals(m)}function _(e,t,n){return 255&(e<<t|n&~(-1<<t))}function k(t,n){var r=t.internal_flags;n[0]=_(n[0],8,255),n[1]=_(n[1],3,7),n[1]=_(n[1],1,t.out_samplerate<16e3?0:1),n[1]=_(n[1],1,t.version),n[1]=_(n[1],2,1),n[1]=_(n[1],1,t.error_protection?0:1),n[2]=_(n[2],4,r.bitrate_index),n[2]=_(n[2],2,r.samplerate_index),n[2]=_(n[2],1,0),n[2]=_(n[2],1,t.extension),n[3]=_(n[3],2,t.mode.ordinal()),n[3]=_(n[3],2,r.mode_ext),n[3]=_(n[3],1,t.copyright),n[3]=_(n[3],1,t.original),n[3]=_(n[3],2,t.emphasis),n[0]=255;var a,o,i=241&n[1];a=1==t.version?c:t.out_samplerate<16e3?d:f,t.VBR==en.vbr_off&&(a=t.brate),o=t.free_format?0:255&16*e.BitrateIndex(a,t.version,t.out_samplerate),1==t.version?(n[1]=255&i|10,i=13&n[2],n[2]=255&(o|i)):(n[1]=255&i|2,i=13&n[2],n[2]=255&(o|i))}function S(e,t){return t=t>>8^v[255&(t^e)]}function M(e,t,r,a,o){var i,s,u=e.internal_flags,l=0,c=e.encoder_delay,f=e.encoder_padding,d=100-10*e.VBR_q-e.quality,h=n.getLameVeryShortVersion(),p=0,m=[1,5,3,2,4,0,3],v=0|(e.lowpassfreq/100+.5>255?255:e.lowpassfreq/100+.5),g=0,y=0,b=0,C=e.internal_flags.noise_shaping,_=0,k=0,M=0,E=0,N=0,T=0!=(1&e.exp_nspsytune),I=0!=(2&e.exp_nspsytune),j=!1,D=!1,L=e.internal_flags.nogap_total,A=e.internal_flags.nogap_current,R=e.ATHtype,P=0;switch(e.VBR){case vbr_abr:s=e.VBR_mean_bitrate_kbps;break;case vbr_off:s=e.brate;break;default:s=e.VBR_min_bitrate_kbps}switch(i=16*p+(e.VBR.ordinal()<m.length?m[e.VBR.ordinal()]:0),u.findReplayGain&&(u.RadioGain>510&&(u.RadioGain=510),u.RadioGain<-510&&(u.RadioGain=-510),y=8192,y|=3072,u.RadioGain>=0?y|=u.RadioGain:(y|=512,y|=-u.RadioGain)),u.findPeakSample&&(g=Math.abs(0|u.PeakSample/32767*Math.pow(2,23)+.5)),-1!=L&&(A>0&&(D=!0),A<L-1&&(j=!0)),P=R+((T?1:0)<<4)+((I?1:0)<<5)+((j?1:0)<<6)+((D?1:0)<<7),d<0&&(d=0),e.mode){case MONO:_=0;break;case STEREO:_=1;break;case DUAL_CHANNEL:_=2;break;case JOINT_STEREO:_=e.force_ms?4:3;break;case NOT_SET:default:_=7}M=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:e.in_samplerate>48e3?3:1,(e.short_blocks==tn.short_block_forced||e.short_blocks==tn.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==R||e.in_samplerate<=32e3)&&(k=1),E=C+(_<<2)+(k<<5)+(M<<6),N=u.nMusicCRC,w(r,a+l,d),l+=4;for(var O=0;O<9;O++)r[a+l+O]=255&h.charAt(O);r[a+(l+=9)]=255&i,r[a+ ++l]=255&v,w(r,a+ ++l,g),x(r,a+(l+=4),y),x(r,a+(l+=2),b),r[a+(l+=2)]=255&P,r[a+ ++l]=s>=255?255:255&s,r[a+ ++l]=255&c>>4,r[a+l+1]=255&(c<<4)+(f>>8),r[a+l+2]=255&f,r[a+(l+=3)]=255&E,l++,r[a+l++]=0,x(r,a+l,e.preset),w(r,a+(l+=2),t),x(r,a+(l+=4),N),l+=2;for(var F=0;F<l;F++)o=S(r[a+F],o);return x(r,a+l,o),l+=2}function E(e){e.seek(0);var t=rn(10);return e.readFully(t),new String(t,"ISO-8859-1").startsWith("ID3")?0:((127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9])+t.length}this.addVbrFrame=function(e){var t=e.internal_flags,n=Tables.bitrate_table[e.version][t.bitrate_index];an(null!=t.VBR_seek_table.bag),g(t.VBR_seek_table,n)},this.getVbrTag=function(e){var t=new VBRTagData,n=0;t.flags=0;var u=e[n+1]>>3&1,l=e[n+2]>>2&3,c=e[n+3]>>6&3,f=e[n+2]>>4&15;if(f=Tables.bitrate_table[u][f],e[n+1]>>4==14?t.samprate=Tables.samplerate_table[2][l]:t.samprate=Tables.samplerate_table[u][l],!C(e,n+=0!=u?3!=c?36:21:3!=c?21:13))return null;n+=4,t.hId=u;var d=t.flags=b(e,n);if(n+=4,0!=(d&r)&&(t.frames=b(e,n),n+=4),0!=(d&a)&&(t.bytes=b(e,n),n+=4),0!=(d&o)){if(null!=t.toc)for(var h=0;h<s;h++)t.toc[h]=e[n+h];n+=s}t.vbrScale=-1,0!=(d&i)&&(t.vbrScale=b(e,n),n+=4),t.headersize=72e3*(u+1)*f/t.samprate;var p=e[(n+=21)+0]<<4;p+=e[n+1]>>4;var m=(15&e[n+1])<<8;return(p<0||p>3e3)&&(p=-1),((m+=255&e[n+2])<0||m>3e3)&&(m=-1),t.encDelay=p,t.encPadding=m,t},this.InitVbrTag=function(e){var n,r=e.internal_flags;n=1==e.version?c:e.out_samplerate<16e3?d:f,e.VBR==en.vbr_off&&(n=e.brate);var a=72e3*(e.version+1)*n/e.out_samplerate,o=r.sideinfo_len+l;if(r.VBR_seek_table.TotalFrameSize=a,a<o||a>u)e.bWriteVbrTag=!1;else{r.VBR_seek_table.nVbrNumFrames=0,r.VBR_seek_table.nBytesWritten=0,r.VBR_seek_table.sum=0,r.VBR_seek_table.seen=0,r.VBR_seek_table.want=1,r.VBR_seek_table.pos=0,null==r.VBR_seek_table.bag&&(r.VBR_seek_table.bag=new int[400],r.VBR_seek_table.size=400);var i=rn(u);k(e,i);for(var s=r.VBR_seek_table.TotalFrameSize,h=0;h<s;++h)t.add_dummy_byte(e,255&i[h],1)}},this.updateMusicCRC=function(e,t,n,r){for(var a=0;a<r;++a)e[0]=S(t[n+a],e[0])},this.getLameTagFrame=function(e,n){var u=e.internal_flags;if(!e.bWriteVbrTag)return 0;if(u.Class_ID!=Lame.LAME_ID)return 0;if(u.VBR_seek_table.pos<=0)return 0;if(n.length<u.VBR_seek_table.TotalFrameSize)return u.VBR_seek_table.TotalFrameSize;nn.fill(n,0,u.VBR_seek_table.TotalFrameSize,0),k(e,n);var l=rn(s);if(e.free_format)for(var c=1;c<s;++c)l[c]=255&255*c/100;else y(u.VBR_seek_table,l);var f=u.sideinfo_len;e.error_protection&&(f-=2),e.VBR==en.vbr_off?(n[f++]=255&m.charAt(0),n[f++]=255&m.charAt(1),n[f++]=255&m.charAt(2),n[f++]=255&m.charAt(3)):(n[f++]=255&p.charAt(0),n[f++]=255&p.charAt(1),n[f++]=255&p.charAt(2),n[f++]=255&p.charAt(3)),w(n,f,r+a+o+i),w(n,f+=4,u.VBR_seek_table.nVbrNumFrames),f+=4;var d=u.VBR_seek_table.nBytesWritten+u.VBR_seek_table.TotalFrameSize;w(n,f,0|d),f+=4,$t.arraycopy(l,0,n,f,l.length),f+=l.length,e.error_protection&&t.CRC_writeheader(u,n);var h=0;for(c=0;c<f;c++)h=S(n[c],h);return f+=M(e,d,n,f,h),u.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,t){if(e.internal_flags.VBR_seek_table.pos<=0)return-1;if(t.seek(t.length()),0==t.length())return-1;var n=E(t);t.seek(n);var r=rn(u),a=getLameTagFrame(e,r);return a>r.length?-1:(a<1||t.write(r,0,a),0)}}on.NUMTOCENTRIES=100,on.MAXFRAMESIZE=2880;var sn=on,un=m.new_byte,ln=m.assert;function cn(){this.setModules=function(e,t){}}function fn(){this.setModules=function(e,t,n){}}function dn(){}function hn(){this.setModules=function(e,t){}}function pn(e,t,n){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),e=1,t=44100,n=128);var r=new Lame,a=new cn,o=new GainAnalysis,i=new BitStream,s=new Presets,u=new QuantizePVT,l=new Quantize,c=new sn,f=new Zt,d=new hn,h=new Reservoir,p=new Takehiro,m=new fn,v=new dn;r.setModules(o,i,s,u,l,c,f,d,v),i.setModules(o,v,f,c),d.setModules(i,f),s.setModules(r),l.setModules(i,h,u,p),u.setModules(p,h,r.enc.psy),h.setModules(i),p.setModules(u),c.setModules(r,i,f),a.setModules(m,v),m.setModules(f,d,s);var g=r.lame_init();g.num_channels=e,g.in_samplerate=t,g.brate=n,g.mode=MPEGMode.STEREO,g.quality=3,g.bWriteVbrTag=!1,g.disable_reservoir=!0,g.write_id3tag_automatic=!1;var y=r.lame_init_params(g);ln(0==y);var b=1152,w=0|1.25*b+7200,x=un(w);this.encodeBuffer=function(t,n){1==e&&(n=t),ln(t.length==n.length),t.length>b&&(b=t.length,x=un(w=0|1.25*b+7200));var a=r.lame_encode_buffer(g,t,n,t.length,x,0,w);return new Int8Array(x.subarray(0,a))},this.flush=function(){var e=r.lame_encode_flush(g,x,0,w);return new Int8Array(x.subarray(0,e))}}function mn(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function vn(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}Lame=Nt,Presets=jt,GainAnalysis=Oe,QuantizePVT=ot,Quantize=qt,Takehiro=ft,Reservoir=Kt,MPEGMode=ee,BitStream=bt,mn.RIFF=vn("RIFF"),mn.WAVE=vn("WAVE"),mn.fmt_=vn("fmt "),mn.data=vn("data"),mn.readHeader=function(e){var t=new mn,n=e.getUint32(0,!1);if(mn.RIFF==n&&(e.getUint32(4,!0),mn.WAVE==e.getUint32(8,!1)&&mn.fmt_==e.getUint32(12,!1))){var r=e.getUint32(16,!0),a=20;switch(r){case 16:case 18:t.channels=e.getUint16(a+2,!0),t.sampleRate=e.getUint32(a+4,!0);break;default:throw"extended fmt chunk not implemented"}a+=r;for(var o=mn.data,i=0;o!=n&&(n=e.getUint32(a,!1),i=e.getUint32(a+4,!0),o!=n);)a+=i+8;return t.dataLen=i,t.dataOffset=a+8,t}};var gn=pn,yn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},bn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wn=function(){function e(t){yn(this,e),this.config={sampleRate:44100,bitRate:128},Object.assign(this.config,t),this.mp3Encoder=new gn(1,this.config.sampleRate,this.config.bitRate),this.maxSamples=1152,this.samplesMono=null,this.clearBuffer()}return bn(e,[{key:"clearBuffer",value:function(){this.dataBuffer=[]}},{key:"appendToBuffer",value:function(e){this.dataBuffer.push(new Int8Array(e))}},{key:"floatTo16BitPCM",value:function(e,t){for(var n=0;n<e.length;n++){var r=Math.max(-1,Math.min(1,e[n]));t[n]=r<0?32768*r:32767*r}}},{key:"convertBuffer",value:function(e){var t=new Float32Array(e),n=new Int16Array(e.length);return this.floatTo16BitPCM(t,n),n}},{key:"encode",value:function(e){this.samplesMono=this.convertBuffer(e);for(var t=this.samplesMono.length,n=0;t>=0;n+=this.maxSamples){var r=this.samplesMono.subarray(n,n+this.maxSamples),a=this.mp3Encoder.encodeBuffer(r);this.appendToBuffer(a),t-=this.maxSamples}}},{key:"finish",value:function(){return this.appendToBuffer(this.mp3Encoder.flush()),this.dataBuffer}}]),e}();return function(){function e(t){yn(this,e),this.config={bitRate:128,startRecordingAt:300,deviceId:null},this.activeStream=null,this.context=null,this.microphone=null,this.processor=null,this.startTime=0,Object.assign(this.config,t)}return bn(e,[{key:"addMicrophoneListener",value:function(e){var t=this;this.activeStream=e,this.timerToStart=setTimeout((function(){delete t.timerToStart}),this.config.startRecordingAt),this.microphone=this.context.createMediaStreamSource(e),this.processor=this.context.createScriptProcessor(0,1,1),this.processor.onaudioprocess=function(e){t.timerToStart||t.lameEncoder.encode(e.inputBuffer.getChannelData(0))},this.microphone.connect(this.processor),this.processor.connect(this.context.destination)}},{key:"stop",value:function(){return this.processor&&this.microphone&&(this.microphone.disconnect(),this.processor.disconnect(),this.context&&"closed"!==this.context.state&&this.context.close(),this.processor.onaudioprocess=null,this.activeStream.getAudioTracks().forEach((function(e){return e.stop()}))),this}},{key:"start",value:function(){var e=this,t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.config.sampleRate=this.context.sampleRate,this.lameEncoder=new wn(this.config);var n=!this.config.deviceId||{deviceId:{exact:this.config.deviceId}};return new Promise((function(t,r){navigator.mediaDevices.getUserMedia({audio:n}).then((function(n){e.addMicrophoneListener(n),t(n)})).catch((function(e){r(e)}))}))}},{key:"getMp3",value:function(){var e=this,t=this.lameEncoder.finish();return new Promise((function(n,r){0===t.length?r(new Error("No buffer to send")):(n([t,new Blob(t,{type:"audio/mp3"})]),e.lameEncoder.clearBuffer())}))}}]),e}()}()},364:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const a=function(e,t,n){var a,o=r[e];return a="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function o(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var i={date:o({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:o({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:o({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var s={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function u(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var i=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[i]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;var i,s=o[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(u,(function(e){return e.test(s)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(u,(function(e){return e.test(s)}));return i=e.valueCallback?e.valueCallback(l):l,{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(s.length)}}}var c;const f={code:"en-US",formatDistance:a,formatLong:i,formatRelative:function(e,t,n,r){return s[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:u({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:u({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:u({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:u({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:u({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(c={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(c.matchPattern);if(!n)return null;var r=n[0],a=e.match(c.parsePattern);if(!a)return null;var o=c.valueCallback?c.valueCallback(a[0]):a[0];return{value:o=t.valueCallback?t.valueCallback(o):o,rest:e.slice(r.length)}}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},486:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5027),a=n(8726),o=n(6191);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.A)(t);return(0,r.default)(e,-n)}},537:(e,t,n)=>{"use strict";var r;var a=n(6545).F,o=a.ERR_MISSING_ARGS,i=a.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var c,f=function(e){return e.length?"function"!==typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var d=t.map((function(e,a){var o=a<t.length-1;return function(e,t,a,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(227)),r(e,{readable:t,writable:a},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void o(t||new i("pipe"))}}(e,o,a>0,(function(e){c||(c=e),e&&d.forEach(u),o||(d.forEach(u),f(c))}))}));return t.reduce(l)}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},618:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(888),a=n(6191),o=n(8726),i=n(8171);function s(e,t){var n,s,u,l,c,f,d,h;(0,o.A)(1,arguments);var p=(0,i.q)(),m=(0,a.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(f=c.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(d=p.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,r.default)(e),g=v.getDay(),y=(g<m?7:0)+g-m;return v.setDate(v.getDate()-y),v.setHours(0,0,0,0),v}},743:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getDay()}},745:()=>{},776:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);return n.setSeconds(i),n}},802:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2284);function a(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=(0,r.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},888:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(2284),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},917:(e,t,n)=>{"use strict";var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ZX=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(document.getElementById("react-confirm-alert-firm-svg"))return;var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var r=document.createElementNS(e,"svg");r.setAttribute("id","react-confirm-alert-firm-svg"),r.setAttribute("class","react-confirm-alert-svg"),r.appendChild(n),document.body.appendChild(r)}(),function(e){var t=document.getElementById(e.targetId||m);e.targetId&&!t&&console.error("React Confirm Alert:","Can not get element id (#"+e.targetId+")");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id=m,document.body.appendChild(t)),(p=(0,c.createRoot)(t)).render(u.default.createElement(h,e))}(e)};var s=n(5043),u=f(s),l=f(n(5173)),c=n(4391);function f(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClickButton=function(e){e.onClick&&e.onClick(),r.close()},r.handleClickOverlay=function(e){var t=r.props,n=t.closeOnClickOutside,a=t.onClickOutside,o=e.target===r.overlay;n&&o&&(a(),r.close()),e.stopPropagation()},r.close=function(){var e=r.props.afterClose;document.body.classList.remove("react-confirm-alert-body-element"),function(e){var t=document.getElementById(e.targetId||m);t&&p.unmount(t)}(r.props),function(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t);document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}(e)},r.keyboard=function(e){var t=r.props,n=t.closeOnEscape,a=t.onKeypressEscape,o=t.onkeyPress,i=t.keyCodeForClose,s=e.keyCode,u=27===s;i.includes(s)&&r.close(),n&&u&&(a(e),r.close()),o&&o()},r.componentDidMount=function(){document.addEventListener("keydown",r.keyboard,!1)},r.componentWillUnmount=function(){document.removeEventListener("keydown",r.keyboard,!1),r.props.willUnmount()},r.renderCustomUI=function(){var e=r.props,t=e.title,n=e.message,a=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:a,onClose:r.close})},d(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.message,a=t.buttons,i=t.childrenElement,s=t.customUI,l=t.overlayClassName;return u.default.createElement("div",{className:"react-confirm-alert-overlay "+l,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},u.default.createElement("div",{className:"react-confirm-alert"},s?this.renderCustomUI():u.default.createElement("div",{className:"react-confirm-alert-body"},n&&u.default.createElement("h1",null,n),r,i(),u.default.createElement("div",{className:"react-confirm-alert-button-group"},a.map((function(t,n){return u.default.createElement("button",o({key:n,className:t.className},t,{onClick:function(n){return e.handleClickButton(t)}}),t.label)}))))))}}]),t}(s.Component),r.propTypes={title:l.default.string,message:l.default.string,buttons:l.default.array.isRequired,childrenElement:l.default.func,customUI:l.default.func,closeOnClickOutside:l.default.bool,closeOnEscape:l.default.bool,keyCodeForClose:l.default.arrayOf(l.default.number),willUnmount:l.default.func,afterClose:l.default.func,onClickOutside:l.default.func,onKeypressEscape:l.default.func,onkeyPress:l.default.func,overlayClassName:l.default.string},r.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},a);var p=null,m="react-confirm-alert"},1153:(e,t,n)=>{"use strict";var r=n(5043),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},1185:(e,t,n)=>{e.exports=n(9392)},1209:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(888),a=n(7451),o=n(2637),i=n(8726),s=n(6191),u=n(8171);var l=6048e5;function c(e,t){(0,i.A)(1,arguments);var n=(0,r.default)(e),c=(0,a.A)(n,t).getTime()-function(e,t){var n,r,l,c,f,d,h,p;(0,i.A)(1,arguments);var m=(0,u.q)(),v=(0,s.A)(null!==(n=null!==(r=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(f=t.locale)||void 0===f||null===(d=f.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:m.firstWeekContainsDate)&&void 0!==r?r:null===(h=m.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1),g=(0,o.A)(e,t),y=new Date(0);return y.setUTCFullYear(g,0,v),y.setUTCHours(0,0,0,0),(0,a.A)(y,t)}(n,t).getTime();return Math.round(c/l)+1}},1218:e=>{var t,n,r,a,o,i,s,u,l,c,f,d,h,p,m,v=!1;function g(){if(!v){v=!0;var e=navigator.userAgent,g=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),y=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(d=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),c=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),f=!!/Win64/.exec(e),g){(t=g[1]?parseFloat(g[1]):g[5]?parseFloat(g[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);i=b?parseFloat(b[1])+4:t,n=g[2]?parseFloat(g[2]):NaN,r=g[3]?parseFloat(g[3]):NaN,(a=g[4]?parseFloat(g[4]):NaN)?(g=/(?:Chrome\/(\d+\.\d+))/.exec(e),o=g&&g[1]?parseFloat(g[1]):NaN):o=NaN}else t=n=r=o=a=NaN;if(y){if(y[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!w||parseFloat(w[1].replace("_","."))}else s=!1;u=!!y[2],l=!!y[3]}else s=u=l=!1}}var y={ie:function(){return g()||t},ieCompatibilityMode:function(){return g()||i>t},ie64:function(){return y.ie()&&f},firefox:function(){return g()||n},opera:function(){return g()||r},webkit:function(){return g()||a},safari:function(){return y.webkit()},chrome:function(){return g()||o},windows:function(){return g()||u},osx:function(){return g()||s},linux:function(){return g()||l},iphone:function(){return g()||d},mobile:function(){return g()||d||h||c||m},nativeApp:function(){return g()||p},android:function(){return g()||c},ipad:function(){return g()||h}};e.exports=y},1251:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(23,59,59,999),t}},1315:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(2312),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},1439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5043),s=v(n(5173)),u=m(n(1774)),l=v(n(2206)),c=m(n(6619)),f=m(n(4841)),d=n(8821),h=v(d),p=v(n(2959));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}n(6062);var g={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,r=e.ariaHideApp,a=e.htmlOpenClassName,o=e.bodyOpenClassName,i=e.parentSelector,s=i&&i().ownerDocument||document;o&&f.remove(s.body,o),a&&f.remove(s.getElementsByTagName("html")[0],a),r&&y>0&&0===(y-=1)&&c.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(u.returnFocus(n.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(u.setupScopedFocus(n.node),u.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,l.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var r="object"===("undefined"===typeof t?"undefined":a(t))?t:{base:g[e],afterOpen:g[e]+"--after-open",beforeClose:g[e]+"--before-close"},o=r.base;return n.state.afterOpen&&(o=o+" "+r.afterOpen),n.state.beforeClose&&(o=o+" "+r.beforeClose),"string"===typeof t&&t?o+" "+t:o},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,r){return n[e+"-"+r]=t[r],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,r=e.htmlOpenClassName,a=e.bodyOpenClassName,o=e.parentSelector,i=o&&o().ownerDocument||document;a&&f.add(i.body,a),r&&f.add(i.getElementsByTagName("html")[0],r),n&&(y+=1,c.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,a=e.overlayClassName,o=e.defaultStyles,i=e.children,s=n?{}:o.content,u=a?{}:o.overlay;if(this.shouldBeClosed())return null;var l={ref:this.setOverlayRef,className:this.buildClassName("overlay",a),style:r({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c=r({id:t,ref:this.setContentRef,style:r({},s,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",r({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),f=this.props.contentElement(c,i);return this.props.overlayElement(l,f)}}]),t}(i.Component);b.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},b.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(h.default),s.default.instanceOf(d.SafeHTMLCollection),s.default.instanceOf(d.SafeNodeList),s.default.arrayOf(s.default.instanceOf(h.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=b,e.exports=t.default},1497:(e,t,n)=>{"use strict";var r=n(3218);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},1551:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getMonth()}},1747:function(e,t,n){var r,a;e.exports=(r=n(6178),a=n(5043),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){e.exports=n(3)()},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";var r=n(4);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r,a,o,i,s;i=this,s=function(e){var t=!1,n=!1,r=!1,a=!1,o="escape years months weeks days hours minutes seconds milliseconds general".split(" "),i=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function s(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function u(e){for(var t="";e;)t+="0",e-=1;return t}function l(e,t){var n=e+"+"+y(M(t).sort(),(function(e){return e+":"+t[e]})).join(",");return l.cache[n]||(l.cache[n]=Intl.NumberFormat(e,t)),l.cache[n]}function c(e,t,o){var i,s,f,d=t.useToLocaleString,h=t.useGrouping,p=h&&t.grouping.slice(),m=t.maximumSignificantDigits,v=t.minimumIntegerDigits||1,g=t.fractionDigits||0,y=t.groupingSeparator,b=t.decimalSeparator;if(d&&o){var w,x={minimumIntegerDigits:v,useGrouping:h};return g&&(x.maximumFractionDigits=g,x.minimumFractionDigits=g),m&&e>0&&(x.maximumSignificantDigits=m),r?(a||((w=S({},t)).useGrouping=!1,w.decimalSeparator=".",e=parseFloat(c(e,w),10)),l(o,x).format(e)):(n||((w=S({},t)).useGrouping=!1,w.decimalSeparator=".",e=parseFloat(c(e,w),10)),e.toLocaleString(o,x))}var C=(m?e.toPrecision(m+1):e.toFixed(g+1)).split("e");f=C[1]||"",s=(C=C[0].split("."))[1]||"";var _=(i=C[0]||"").length,k=s.length,M=_+k,E=i+s;(m&&M===m+1||!m&&k===g+1)&&((E=function(e){for(var t=e.split("").reverse(),n=0,r=!0;r&&n<t.length;)n?"9"===t[n]?t[n]="0":(t[n]=(parseInt(t[n],10)+1).toString(),r=!1):(parseInt(t[n],10)<5&&(r=!1),t[n]="0"),n+=1;return r&&t.push("1"),t.reverse().join("")}(E)).length===M+1&&(_+=1),k&&(E=E.slice(0,-1)),i=E.slice(0,_),s=E.slice(_)),m&&(s=s.replace(/0*$/,""));var N=parseInt(f,10);N>0?s.length<=N?(i+=s+=u(N-s.length),s=""):(i+=s.slice(0,N),s=s.slice(N)):N<0&&(s=u(Math.abs(N)-i.length)+i+s,i="0"),m||((s=s.slice(0,g)).length<g&&(s+=u(g-s.length)),i.length<v&&(i=u(v-i.length)+i));var T,I="";if(h)for(C=i;C.length;)p.length&&(T=p.shift()),I&&(I=y+I),I=C.slice(-T)+I,C=C.slice(0,-T);else I=i;return s&&(I=I+b+s),I}function f(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}function d(e,t){var n=[];return g(M(t),(function(r){if("_durationLabels"===r.slice(0,15)){var a=r.slice(15).toLowerCase();g(M(t[r]),(function(o){o.slice(0,1)===e&&n.push({type:a,key:o,label:t[r][o]})}))}})),n}l.cache={};var h={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,n){return 1===t&&null===n?e:e+e}};function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function v(e,t){var n,r=0,a=e&&e.length||0;for("function"!=typeof t&&(n=t,t=function(e){return e===n});r<a;){if(t(e[r]))return e[r];r+=1}}function g(e,t){var n=0,r=e.length;if(e&&r)for(;n<r;){if(!1===t(e[n],n))return;n+=1}}function y(e,t){var n=0,r=e.length,a=[];if(!e||!r)return a;for(;n<r;)a[n]=t(e[n],n),n+=1;return a}function b(e,t){return y(e,(function(e){return e[t]}))}function w(e){var t=[];return g(e,(function(e){e&&t.push(e)})),t}function x(e){var t=[];return g(e,(function(e){v(t,e)||t.push(e)})),t}function C(e,t){var n=[];return g(e,(function(e){g(t,(function(t){e===t&&n.push(e)}))})),x(n)}function _(e,t){var n=[];return g(e,(function(r,a){if(!t(r))return n=e.slice(a),!1})),n}function k(e,t){return _(e.slice().reverse(),t).reverse()}function S(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function M(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function E(e,t){var n=0,r=e.length;if(!e||!r)return!1;for(;n<r;){if(!0===t(e[n],n))return!0;n+=1}return!1}function N(e){var t=[];return g(e,(function(e){t=t.concat(e)})),t}function T(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function I(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function j(){var e,t=[].slice.call(arguments),n={};if(g(t,(function(t,r){if(!r){if(!p(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?m(t)&&S(n,t):n.precision=t:n.template=t})),!e||!e.length)return[];n.returnMomentTypes=!0;var r=y(e,(function(e){return e.format(n)})),a=C(o,x(b(N(r),"type"))),i=n.largest;return i&&(a=a.slice(0,i)),n.returnMomentTypes=!1,n.outputTypes=a,y(e,(function(e){return e.format(n)}))}function D(){var n=[].slice.call(arguments),a=S({},this.format.defaults),u=this.asMilliseconds(),l=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(u=0,l=0);var N=u<0,T=e.duration(Math.abs(u),"milliseconds"),I=e.duration(Math.abs(l),"months");g(n,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?m(e)&&S(a,e):a.precision=e:a.template=e}));var j={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},D={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};a.types=o;var L=function(e){return v(o,(function(t){return D[t].test(e)}))},A=new RegExp(y(o,(function(e){return D[e].source})).join("|"),"g");a.duration=this;var R="function"==typeof a.template?a.template.apply(a):a.template,P=a.outputTypes,O=a.returnMomentTypes,F=a.largest,B=[];P||(p(a.stopTrim)&&(a.stopTrim=a.stopTrim.join("")),a.stopTrim&&g(a.stopTrim.match(A),(function(e){var t=L(e);"escape"!==t&&"general"!==t&&B.push(t)})));var z=e.localeData();z||(z={}),g(M(h),(function(e){"function"!=typeof h[e]?z["_"+e]||(z["_"+e]=h[e]):z[e]||(z[e]=h[e])})),g(M(z._durationTimeTemplates),(function(e){R=R.replace("_"+e+"_",z._durationTimeTemplates[e])}));var U=a.userLocale||e.locale(),W=a.useLeftUnits,V=a.usePlural,H=a.precision,Y=a.forceLength,G=a.useGrouping,q=a.trunc,Q=a.useSignificantDigits&&H>0,X=Q?a.precision:0,K=X,J=a.minValue,Z=!1,$=a.maxValue,ee=!1,te=a.useToLocaleString,ne=a.groupingSeparator,re=a.decimalSeparator,ae=a.grouping;te=te&&(t||r);var oe=a.trim;p(oe)&&(oe=oe.join(" ")),null===oe&&(F||$||Q)&&(oe="all"),null!==oe&&!0!==oe&&"left"!==oe&&"right"!==oe||(oe="large"),!1===oe&&(oe="");var ie=function(e){return e.test(oe)},se=/small/,ue=/both/,le=/mid/,ce=/^all|[^sm]all/,fe=/final/,de=F>0||E([/large/,ue,ce],ie),he=E([se,ue,ce],ie),pe=E([le,ce],ie),me=E([fe,ce],ie),ve=y(R.match(A),(function(e,t){var n=L(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==n&&"general"!==n&&B.push(n)),{index:t,length:e.length,text:"",token:"escape"===n?e.replace(D.escape,"$1"):e,type:"escape"===n||"general"===n?null:n}})),ge={index:0,length:0,token:"",text:"",type:null},ye=[];W&&ve.reverse(),g(ve,(function(e){if(e.type)return(ge.type||ge.text)&&ye.push(ge),void(ge=e);W?ge.text=e.token+ge.text:ge.text+=e.token})),(ge.type||ge.text)&&ye.push(ge),W&&ye.reverse();var be=C(o,x(w(b(ye,"type"))));if(!be.length)return b(ye,"text").join("");be=y(be,(function(e,t){var n,r=t+1===be.length,o=!t;n="years"===e||"months"===e?I.as(e):T.as(e);var i=Math.floor(n),s=n-i,u=v(ye,(function(t){return e===t.type}));return o&&$&&n>$&&(ee=!0),r&&J&&Math.abs(a.duration.as(e))<J&&(Z=!0),o&&null===Y&&u.length>1&&(Y=!0),T.subtract(i,e),I.subtract(i,e),{rawValue:n,wholeValue:i,decimalValue:r?s:0,isSmallest:r,isLargest:o,type:e,tokenLength:u.length}}));var we=q?Math.floor:Math.round,xe=function(e,t){var n=Math.pow(10,t);return we(e*n)/n},Ce=!1,_e=!1,ke=function(e,t){var n={useGrouping:G,groupingSeparator:ne,decimalSeparator:re,grouping:ae,useToLocaleString:te};return Q&&(X<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(n.maximumSignificantDigits=X,e.significantDigits=X)),ee&&!_e&&(e.isLargest?(e.wholeValue=$,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),Z&&!_e&&(e.isSmallest?(e.wholeValue=J,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?H<0?e.value=xe(e.wholeValue,H):0===H?e.value=we(e.wholeValue+e.decimalValue):Q?(e.value=q?xe(e.rawValue,X-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(X-=e.wholeValue.toString().length)):(n.fractionDigits=H,e.value=q?e.wholeValue+xe(e.decimalValue,H):e.wholeValue+e.decimalValue):Q&&e.wholeValue?(e.value=Math.round(xe(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),X-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&(Y||Ce)&&(n.minimumIntegerDigits=e.tokenLength,_e&&n.maximumSignificantDigits<e.tokenLength&&delete n.maximumSignificantDigits),!Ce&&(e.value>0||""===oe||v(B,e.type)||v(P,e.type))&&(Ce=!0),e.formattedValue=c(e.value,n,U),n.useGrouping=!1,n.decimalSeparator=".",e.formattedValueEn=c(e.value,n,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=c(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((be=w(be=y(be,ke))).length>1){var Se=function(e){return v(be,(function(t){return t.type===e}))},Me=function(e){var t=Se(e.type);t&&g(e.targets,(function(e){var n=Se(e.type);n&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,n.rawValue+=1,n.wholeValue+=1,n.decimalValue=0,n.formattedValueEn=n.wholeValue.toString(),_e=!0)}))};g(i,Me)}return _e&&(Ce=!1,X=K,be=w(be=y(be,ke))),!P||ee&&!a.trim?(de&&(be=_(be,(function(e){return!e.isSmallest&&!e.wholeValue&&!v(B,e.type)}))),F&&be.length&&(be=be.slice(0,F)),he&&be.length>1&&(be=k(be,(function(e){return!e.wholeValue&&!v(B,e.type)&&!e.isLargest}))),pe&&(be=w(be=y(be,(function(e,t){return t>0&&t<be.length-1&&!e.wholeValue?null:e})))),!me||1!==be.length||be[0].wholeValue||!q&&be[0].isSmallest&&be[0].rawValue<J||(be=[])):be=w(be=y(be,(function(e){return v(P,(function(t){return e.type===t}))?e:null}))),O?be:(g(ye,(function(e){var t=j[e.type],n=v(be,(function(t){return t.type===e.type}));if(t&&n){var r=n.formattedValueEn.split(".");r[0]=parseInt(r[0],10),r[1]?r[1]=parseFloat("0."+r[1],10):r[1]=null;var a=z.durationPluralKey(t,r[0],r[1]),o=d(t,z),i=!1,u={};g(z._durationLabelTypes,(function(t){var n=v(o,(function(e){return e.type===t.type&&e.key===a}));n&&(u[n.type]=n.label,s(e.text,t.string)&&(e.text=e.text.replace(t.string,n.label),i=!0))})),V&&!i&&(o.sort(f),g(o,(function(t){return u[t.type]===t.label?!s(e.text,t.label)&&void 0:s(e.text,t.label)?(e.text=e.text.replace(t.label,u[t.type]),!1):void 0})))}})),(ye=y(ye,(function(e){if(!e.type)return e.text;var t=v(be,(function(t){return t.type===e.type}));if(!t)return"";var n="";return W&&(n+=e.text),(N&&ee||!N&&Z)&&(n+="< ",ee=!1,Z=!1),(N&&Z||!N&&ee)&&(n+="> ",ee=!1,Z=!1),N&&(t.value>0||""===oe||v(B,t.type)||v(P,t.type))&&(n+="-",N=!1),"milliseconds"===e.type&&t.formattedValueMS?n+=t.formattedValueMS:n+=t.formattedValue,W||(n+=e.text),n}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function L(){var e=this.duration,t=function(t){return e._data[t]},n=v(this.types,t),r=function(e,t){for(var n=e.length;n-=1;)if(t(e[n]))return e[n]}(this.types,t);switch(n){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(n===r)return"d __";case"weeks":return n===r?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(n===r)return"M __";case"years":return n===r?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function A(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=j,e.duration.fn.format=D,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:L,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",h)}var R=function(e,t,n){return e.toLocaleString(t,n)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&I(R),n=t&&T(R);var P=function(e,t,n){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,n).format(e)};return r=I(P),a=r&&T(P),A(e),A},a=[n(1)],void 0===(o="function"==typeof(r=s)?r.apply(t,a):r)||(e.exports=o),i&&(i.momentDurationFormatSetup=i.moment?s(i.moment):s)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var r=n(2),a=n.n(r),o=n(0),i=n.n(o),s=n(1),u=n.n(s);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(5);var w=[i.a.string,i.a.number,i.a.array,i.a.object],x=[i.a.string,i.a.array],C=[i.a.object,i.a.bool],_=[i.a.string,i.a.bool],k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(n,e);var t=m(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),b(g(r=t.call(this,e)),"setTimer",(function(){var e=r.props.interval;r.clearTimer(),n.pooledTimer||0===e||(r.timer=setInterval((function(){r.update(r.props)}),e))})),b(g(r),"getTitle",(function(){var e=r.props.titleFormat,t=n.getDatetime(r.props),a=e||n.globalFormat;return t.format(a)})),b(g(r),"clearTimer",(function(){!n.pooledTimer&&r.timer&&(clearInterval(r.timer),r.timer=null),n.pooledTimer&&!r.timer&&n.removePooledElement(g(r))})),n.globalMoment||(n.globalMoment=u.a),r.state={content:""},r.timer=null,r}return h(n,null,[{key:"startPooledTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;n.clearPooledTimer(),n.pooledTimer=setInterval((function(){n.pooledElements.forEach((function(e){0!==e.props.interval&&e.update()}))}),e)}},{key:"clearPooledTimer",value:function(){n.pooledTimer&&(clearInterval(n.pooledTimer),n.pooledTimer=null,n.pooledElements=[])}},{key:"pushPooledElement",value:function(e){e instanceof n?-1===n.pooledElements.indexOf(e)&&n.pooledElements.push(e):console.error("Element not an instance of Moment.")}},{key:"removePooledElement",value:function(e){var t=n.pooledElements.indexOf(e);-1!==t&&n.pooledElements.splice(t,1)}},{key:"getDatetime",value:function(e){var t=e.utc,r=e.unix,a=e.date,o=e.locale,i=e.parse,s=e.tz,u=e.local;a=a||e.children,i=i||n.globalParse,u=u||n.globalLocal,s=s||n.globalTimezone,o=n.globalLocale?n.globalLocale:o||n.globalMoment.locale();var l=null;return l=t?n.globalMoment.utc(a,i,o):r?n.globalMoment(1e3*a,i,o):n.globalMoment(a,i,o),s?l=l.tz(s):u&&(l=l.local()),l}},{key:"getContent",value:function(e){var t=e.fromNow,r=e.fromNowDuring,a=e.from,o=e.add,i=e.subtract,s=e.toNow,l=e.to,c=e.ago,f=e.calendar,d=e.diff,h=e.duration,p=e.durationFromNow,m=e.unit,v=e.decimal,g=e.trim,y=e.format;y=y||n.globalFormat;var b=n.getDatetime(e);o&&b.add(o),i&&b.subtract(i);var w=Boolean(r)&&-b.diff(u()())<r,x="";return x=!y||w||p||h?a?b.from(a,c):t||w?b.fromNow(c):l?b.to(l,c):s?b.toNow(c):f?b.calendar(null,f):d?b.diff(d,m,v):h?b.diff(h):p?u()().diff(b):b.toString():b.format(y),(h||p)&&(x=(x=u.a.duration(x)).format(y,{trim:g})),(n.globalFilter||e.filter)(x)}}]),h(n,[{key:"componentDidMount",value:function(){this.setTimer(),n.pooledTimer&&n.pushPooledElement(this)}},{key:"componentDidUpdate",value:function(e){var t=this.props.interval;e.interval!==t&&this.setTimer()}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"update",value:function(e){var t=e||this.props,r=t.onChange,a=n.getContent(t);this.setState({content:a},(function(){r(a)}))}},{key:"render",value:function(){var e,t,r,o,i=this.props,s=i.withTitle,u=i.element,l=f(i,["withTitle","element"]),d=this.state.content,h=(e=l,t=n.propTypes,r=Object.keys(t),o=Object.assign({},e),Object.keys(o).filter((function(e){return-1!==r.indexOf(e)})).forEach((function(e){return delete o[e]})),o);return s&&(h.title=this.getTitle()),a.a.createElement(u||n.globalElement,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dateTime:n.getDatetime(this.props)},h),d)}}],[{key:"getDerivedStateFromProps",value:function(e){return{content:n.getContent(e)}}}]),n}(a.a.Component);b(k,"propTypes",{element:i.a.any,date:i.a.oneOfType(w),parse:i.a.oneOfType(x),format:i.a.string,add:i.a.object,subtract:i.a.object,ago:i.a.bool,fromNow:i.a.bool,fromNowDuring:i.a.number,from:i.a.oneOfType(w),toNow:i.a.bool,to:i.a.oneOfType(w),calendar:i.a.oneOfType(C),unix:i.a.bool,utc:i.a.bool,local:i.a.bool,tz:i.a.string,withTitle:i.a.bool,titleFormat:i.a.string,locale:i.a.string,interval:i.a.number,diff:i.a.oneOfType(w),duration:i.a.oneOfType(w),durationFromNow:i.a.bool,trim:i.a.oneOfType(_),unit:i.a.string,decimal:i.a.bool,filter:i.a.func,onChange:i.a.func}),b(k,"defaultProps",{element:null,fromNow:!1,toNow:!1,calendar:!1,ago:!1,unix:!1,utc:!1,local:!1,unit:null,withTitle:!1,trim:!1,decimal:!1,titleFormat:"",interval:6e4,filter:function(e){return e},onChange:function(){}}),b(k,"globalMoment",null),b(k,"globalLocale",null),b(k,"globalLocal",null),b(k,"globalFormat",null),b(k,"globalParse",null),b(k,"globalFilter",null),b(k,"globalElement","time"),b(k,"globalTimezone",null),b(k,"pooledElements",[]),b(k,"pooledTimer",null)}]))},1774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){i=[]},t.log=function(){0},t.handleBlur=l,t.handleFocus=c,t.markForFocusLater=function(){i.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==i.length&&(t=i.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){i.length>0&&i.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",l,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",l),document.attachEvent("onFocus",c))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",l),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",l),document.detachEvent("onFocus",c))};var r,a=n(4682),o=(r=a)&&r.__esModule?r:{default:r};var i=[],s=null,u=!1;function l(){u=!0}function c(){if(u){if(u=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,o.default)(s)[0]||s).focus()}),0)}}},1794:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rt});var r=n(2284);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}var i=n(364),s=n(4375),u=n(888);function l(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var c=n(8435),f=n(8539),d=n(2058),h=n(6191),p=n(8726);function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function w(e){var t=b();return function(){var n,a=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return function(e,t){if(t&&("object"==(0,r.A)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var C=n(816);function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,C.A)(r.key),r)}}function k(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var S=n(4467),M=function(){function e(){x(this,e),(0,S.A)(this,"priority",void 0),(0,S.A)(this,"subPriority",0)}return k(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),E=function(e){g(n,e);var t=w(n);function n(e,r,a,o,i){var s;return x(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=a,s.priority=o,i&&(s.subPriority=i),s}return k(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(M),N=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",10),(0,S.A)(m(e),"subPriority",-1),e}return k(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(M),T=function(){function e(){x(this,e),(0,S.A)(this,"incompatibleTokens",void 0),(0,S.A)(this,"priority",void 0),(0,S.A)(this,"subPriority",void 0)}return k(e,[{key:"run",value:function(e,t,n,r){var a=this.parse(e,t,n,r);return a?{setter:new E(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}]),e}(),I=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",140),(0,S.A)(m(e),"incompatibleTokens",["R","u","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(T),j=n(5126),D=/^(1[0-2]|0?\d)/,L=/^(3[0-1]|[0-2]?\d)/,A=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,R=/^(5[0-3]|[0-4]?\d)/,P=/^(2[0-3]|[0-1]?\d)/,O=/^(2[0-4]|[0-1]?\d)/,F=/^(1[0-1]|0?\d)/,B=/^(1[0-2]|0?\d)/,z=/^[0-5]?\d/,U=/^[0-5]?\d/,W=/^\d/,V=/^\d{1,2}/,H=/^\d{1,3}/,Y=/^\d{1,4}/,G=/^-?\d+/,q=/^-?\d/,Q=/^-?\d{1,2}/,X=/^-?\d{1,3}/,K=/^-?\d{1,4}/,J=/^([+-])(\d{2})(\d{2})?|Z/,Z=/^([+-])(\d{2})(\d{2})|Z/,$=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ee=/^([+-])(\d{2}):(\d{2})|Z/,te=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function ne(e,t){return e?{value:t(e.value),rest:e.rest}:e}function re(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function ae(e,t){var n=t.match(e);if(!n)return null;if("Z"===n[0])return{value:0,rest:t.slice(1)};var r="+"===n[1]?1:-1,a=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,i=n[5]?parseInt(n[5],10):0;return{value:r*(a*j.s0+o*j.Cg+i*j._m),rest:t.slice(n[0].length)}}function oe(e){return re(G,e)}function ie(e,t){switch(e){case 1:return re(W,t);case 2:return re(V,t);case 3:return re(H,t);case 4:return re(Y,t);default:return re(new RegExp("^\\d{1,"+e+"}"),t)}}function se(e,t){switch(e){case 1:return re(q,t);case 2:return re(Q,t);case 3:return re(X,t);case 4:return re(K,t);default:return re(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ue(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function le(e,t){var n,r=t>0,a=r?t:1-t;if(a<=50)n=e||100;else{var o=a+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function ce(e){return e%400===0||e%4===0&&e%100!==0}var fe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",130),(0,S.A)(m(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ne(ie(4,e),r);case"yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var a=le(n.year,r);return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(T),de=n(2637),he=n(7451),pe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",130),(0,S.A)(m(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ne(ie(4,e),r);case"Yo":return ne(n.ordinalNumber(e,{unit:"year"}),r);default:return ne(ie(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var a=(0,de.A)(e,r);if(n.isTwoDigitYear){var o=le(n.year,a);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}var i="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),(0,he.A)(e,r)}}]),n}(T),me=n(4960),ve=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",130),(0,S.A)(m(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t){return se("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),(0,me.A)(r)}}]),n}(T),ge=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",130),(0,S.A)(m(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t){return se("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}]),n}(T),ye=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",120),(0,S.A)(m(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return ie(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(T),be=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",120),(0,S.A)(m(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return ie(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}]),n}(T),we=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,S.A)(m(e),"priority",110),e}return k(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return ne(re(D,e),r);case"MM":return ne(ie(2,e),r);case"Mo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(T),xe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",110),(0,S.A)(m(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return ne(re(D,e),r);case"LL":return ne(ie(2,e),r);case"Lo":return ne(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}]),n}(T),Ce=n(1209);var _e=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",100),(0,S.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"w":return re(R,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return(0,he.A)(function(e,t,n){(0,p.A)(2,arguments);var r=(0,u.default)(e),a=(0,h.A)(t),o=(0,Ce.A)(r,n)-a;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}]),n}(T),ke=n(7532);var Se=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",100),(0,S.A)(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"I":return re(R,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return(0,me.A)(function(e,t){(0,p.A)(2,arguments);var n=(0,u.default)(e),r=(0,h.A)(t),a=(0,ke.A)(n)-r;return n.setUTCDate(n.getUTCDate()-7*a),n}(e,n))}}]),n}(T),Me=[31,28,31,30,31,30,31,31,30,31,30,31],Ee=[31,29,31,30,31,30,31,31,30,31,30,31],Ne=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"subPriority",1),(0,S.A)(m(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"d":return re(L,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){var n=ce(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=Ee[r]:t>=1&&t<=Me[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}]),n}(T),Te=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"subpriority",1),(0,S.A)(m(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return re(A,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return ce(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}]),n}(T),Ie=n(8171);function je(e,t,n){var r,a,o,i,s,l,c,f;(0,p.A)(2,arguments);var d=(0,Ie.q)(),m=(0,h.A)(null!==(r=null!==(a=null!==(o=null!==(i=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==i?i:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==a?a:null===(c=d.locale)||void 0===c||null===(f=c.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==r?r:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,u.default)(e),g=(0,h.A)(t),y=((g%7+7)%7<m?7:0)+g-v.getUTCDay();return v.setUTCDate(v.getUTCDate()+y),v}var De=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=je(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(T),Le=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ne(ie(t.length,e),a);case"eo":return ne(n.ordinalNumber(e,{unit:"day"}),a);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=je(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(T),Ae=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n,r){var a=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ne(ie(t.length,e),a);case"co":return ne(n.ordinalNumber(e,{unit:"day"}),a);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=je(e,n,r)).setUTCHours(0,0,0,0),e}}]),n}(T);var Re=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",90),(0,S.A)(m(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ie(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ne(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return ne(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ne(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return ne(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){(0,p.A)(2,arguments);var n=(0,h.A)(t);n%7===0&&(n-=7);var r=(0,u.default)(e),a=((n%7+7)%7<1?7:0)+n-r.getUTCDay();return r.setUTCDate(r.getUTCDate()+a),r}(e,n),e.setUTCHours(0,0,0,0),e}}]),n}(T),Pe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",80),(0,S.A)(m(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(T),Oe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",80),(0,S.A)(m(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(T),Fe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",80),(0,S.A)(m(e),"incompatibleTokens",["a","b","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(ue(n),0,0,0),e}}]),n}(T),Be=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",70),(0,S.A)(m(e),"incompatibleTokens",["H","K","k","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"h":return re(B,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}]),n}(T),ze=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",70),(0,S.A)(m(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"H":return re(P,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}]),n}(T),Ue=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",70),(0,S.A)(m(e),"incompatibleTokens",["h","H","k","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"K":return re(F,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}]),n}(T),We=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",70),(0,S.A)(m(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"k":return re(O,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}]),n}(T),Ve=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",60),(0,S.A)(m(e),"incompatibleTokens",["t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"m":return re(z,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}]),n}(T),He=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",50),(0,S.A)(m(e),"incompatibleTokens",["t","T"]),e}return k(n,[{key:"parse",value:function(e,t,n){switch(t){case"s":return re(U,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return ie(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}]),n}(T),Ye=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",30),(0,S.A)(m(e),"incompatibleTokens",["t","T"]),e}return k(n,[{key:"parse",value:function(e,t){return ne(ie(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}]),n}(T),Ge=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",10),(0,S.A)(m(e),"incompatibleTokens",["t","T","x"]),e}return k(n,[{key:"parse",value:function(e,t){switch(t){case"X":return ae(J,e);case"XX":return ae(Z,e);case"XXXX":return ae($,e);case"XXXXX":return ae(te,e);default:return ae(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(T),qe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",10),(0,S.A)(m(e),"incompatibleTokens",["t","T","X"]),e}return k(n,[{key:"parse",value:function(e,t){switch(t){case"x":return ae(J,e);case"xx":return ae(Z,e);case"xxxx":return ae($,e);case"xxxxx":return ae(te,e);default:return ae(ee,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}]),n}(T),Qe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",40),(0,S.A)(m(e),"incompatibleTokens","*"),e}return k(n,[{key:"parse",value:function(e){return oe(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}]),n}(T),Xe=function(e){g(n,e);var t=w(n);function n(){var e;x(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,S.A)(m(e),"priority",20),(0,S.A)(m(e),"incompatibleTokens","*"),e}return k(n,[{key:"parse",value:function(e){return oe(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}]),n}(T),Ke={G:new I,y:new fe,Y:new pe,R:new ve,u:new ge,Q:new ye,q:new be,M:new we,L:new xe,w:new _e,I:new Se,d:new Ne,D:new Te,E:new De,e:new Le,c:new Ae,i:new Re,a:new Pe,b:new Oe,B:new Fe,h:new Be,H:new ze,K:new Ue,k:new We,m:new Ve,s:new He,S:new Ye,X:new Ge,x:new qe,t:new Qe,T:new Xe},Je=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ze=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$e=/^'([^]*?)'?$/,et=/''/g,tt=/\S/,nt=/[a-zA-Z]/;function rt(e,t,n,a){var m,v,g,y,b,w,x,C,_,k,S,M,E,T,I,j,D,L;(0,p.A)(3,arguments);var A=String(e),R=String(t),P=(0,Ie.q)(),O=null!==(m=null!==(v=null===a||void 0===a?void 0:a.locale)&&void 0!==v?v:P.locale)&&void 0!==m?m:i.A;if(!O.match)throw new RangeError("locale must contain match property");var F=(0,h.A)(null!==(g=null!==(y=null!==(b=null!==(w=null===a||void 0===a?void 0:a.firstWeekContainsDate)&&void 0!==w?w:null===a||void 0===a||null===(x=a.locale)||void 0===x||null===(C=x.options)||void 0===C?void 0:C.firstWeekContainsDate)&&void 0!==b?b:P.firstWeekContainsDate)&&void 0!==y?y:null===(_=P.locale)||void 0===_||null===(k=_.options)||void 0===k?void 0:k.firstWeekContainsDate)&&void 0!==g?g:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=(0,h.A)(null!==(S=null!==(M=null!==(E=null!==(T=null===a||void 0===a?void 0:a.weekStartsOn)&&void 0!==T?T:null===a||void 0===a||null===(I=a.locale)||void 0===I||null===(j=I.options)||void 0===j?void 0:j.weekStartsOn)&&void 0!==E?E:P.weekStartsOn)&&void 0!==M?M:null===(D=P.locale)||void 0===D||null===(L=D.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==S?S:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===R)return""===A?(0,u.default)(n):new Date(NaN);var z,U={firstWeekContainsDate:F,weekStartsOn:B,locale:O},W=[new N],V=R.match(Ze).map((function(e){var t=e[0];return t in c.A?(0,c.A[t])(e,O.formatLong):e})).join("").match(Je),H=[],Y=o(V);try{var G=function(){var t=z.value;null!==a&&void 0!==a&&a.useAdditionalWeekYearTokens||!(0,d.xM)(t)||(0,d.lJ)(t,R,e),null!==a&&void 0!==a&&a.useAdditionalDayOfYearTokens||!(0,d.ef)(t)||(0,d.lJ)(t,R,e);var n=t[0],r=Ke[n];if(r){var o=r.incompatibleTokens;if(Array.isArray(o)){var i=H.find((function(e){return o.includes(e.token)||e.token===n}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&H.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));H.push({token:n,fullToken:t});var s=r.run(A,t,O.match,U);if(!s)return{v:new Date(NaN)};W.push(s.setter),A=s.rest}else{if(n.match(nt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match($e)[1].replace(et,"'")),0!==A.indexOf(t))return{v:new Date(NaN)};A=A.slice(t.length)}};for(Y.s();!(z=Y.n()).done;){var q=G();if("object"===(0,r.A)(q))return q.v}}catch(ne){Y.e(ne)}finally{Y.f()}if(A.length>0&&tt.test(A))return new Date(NaN);var Q=W.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return W.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),X=(0,u.default)(n);if(isNaN(X.getTime()))return new Date(NaN);var K,J=(0,s.A)(X,(0,f.A)(X)),Z={},$=o(Q);try{for($.s();!(K=$.n()).done;){var ee=K.value;if(!ee.validate(J,U))return new Date(NaN);var te=ee.set(J,Z,U);Array.isArray(te)?(J=te[0],l(Z,te[1])):J=te}}catch(ne){$.e(ne)}finally{$.f()}return J}},1806:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(6265),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.default)(e,-n)}},1845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e);return Math.floor(t.getMonth()/3)+1}},1899:function(e,t,n){!function(e,t,n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C,_,k,S,M,E,N,T,I,j,D,L,A,R,P,O,F,B,z,U,W,V,H,Y,G,q,Q,X,K,J,Z,$,ee,te,ne,re,ae,oe,ie,se,ue,le){"use strict";function ce(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var fe=ce(t),de=ce(r),he=ce(a),pe=ce(o),me=ce(i),ve=ce(s),ge=ce(u),ye=ce(l),be=ce(c),we=ce(f),xe=ce(d),Ce=ce(h),_e=ce(p),ke=ce(m),Se=ce(v),Me=ce(g),Ee=ce(y),Ne=ce(b),Te=ce(w),Ie=ce(x),je=ce(C),De=ce(_),Le=ce(k),Ae=ce(S),Re=ce(M),Pe=ce(E),Oe=ce(N),Fe=ce(T),Be=ce(I),ze=ce(j),Ue=ce(D),We=ce(L),Ve=ce(A),He=ce(R),Ye=ce(P),Ge=ce(O),qe=ce(F),Qe=ce(B),Xe=ce(z),Ke=ce(U),Je=ce(W),Ze=ce(V),$e=ce(H),et=ce(Y),tt=ce(q),nt=ce(Q),rt=ce(X),at=ce(K),ot=ce(J),it=ce(Z),st=ce($),ut=ce(ee),lt=ce(te),ct=ce(ne),ft=ce(re),dt=ce(ae),ht=ce(oe),pt=ce(ie),mt=ce(se),vt=ce(le);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function Ct(e,t,n){return t&&xt(e.prototype,t),n&&xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _t(e,t,n){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kt.apply(this,arguments)}function St(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var a=Mt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nt(e)}(this,n)}}function It(e){return function(e){if(Array.isArray(e))return jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Lt=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},At=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Rt={p:At,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],a=r[1],o=r[2];if(!o)return Lt(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Lt(a,t)).replace("{{time}}",At(o,t))}},Pt=12,Ot=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Ft(e){var t=e?"string"==typeof e||e instanceof String?ht.default(e):ft.default(e):new Date;return Bt(t)?t:null}function Bt(e,t){return t=t||new Date("1/1/1000"),pe.default(e)&&!lt.default(e,t)}function zt(e,t,n){if("en"===n)return me.default(e,t,{awareOfUnicodeTokens:!0});var r=tn(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&en()&&tn(en())&&(r=tn(en())),me.default(e,t,{locale:r||null,awareOfUnicodeTokens:!0})}function Ut(e,t){var n=t.dateFormat,r=t.locale;return e&&zt(e,Array.isArray(n)?n[0]:n,r)||""}function Wt(e,t){var n=t.hour,r=void 0===n?0:n,a=t.minute,o=void 0===a?0:a,i=t.second,s=void 0===i?0:i;return ze.default(Be.default(Fe.default(e,s),o),r)}function Vt(e,t,n){var r=tn(t||en());return Ke.default(e,{locale:r,weekStartsOn:n})}function Ht(e){return Je.default(e)}function Yt(e){return $e.default(e)}function Gt(e){return Ze.default(e)}function qt(){return Xe.default(Ft())}function Qt(e,t){return e&&t?it.default(e,t):!e&&!t}function Xt(e,t){return e&&t?ot.default(e,t):!e&&!t}function Kt(e,t){return e&&t?st.default(e,t):!e&&!t}function Jt(e,t){return e&&t?at.default(e,t):!e&&!t}function Zt(e,t){return e&&t?rt.default(e,t):!e&&!t}function $t(e,t,n){var r,a=Xe.default(t),o=et.default(n);try{r=ct.default(e,{start:a,end:o})}catch(e){r=!1}return r}function en(){return("undefined"!=typeof window?window:globalThis).__localeId__}function tn(e){if("string"==typeof e){var t="undefined"!=typeof window?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}return e}function nn(e,t){return zt(Ue.default(Ft(),e),"LLLL",t)}function rn(e,t){return zt(Ue.default(Ft(),e),"LLL",t)}function an(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,o=t.excludeDateIntervals,i=t.includeDates,s=t.includeDateIntervals,u=t.filterDate;return hn(e,{minDate:n,maxDate:r})||a&&a.some((function(t){return Jt(e,t)}))||o&&o.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})}))||i&&!i.some((function(t){return Jt(e,t)}))||s&&!s.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})}))||u&&!u(Ft(e))||!1}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var n=t.start,r=t.end;return ct.default(e,{start:n,end:r})})):n&&n.some((function(t){return Jt(e,t)}))||!1}function sn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,o=t.includeDates,i=t.filterDate;return hn(e,{minDate:Je.default(n),maxDate:tt.default(r)})||a&&a.some((function(t){return Xt(e,t)}))||o&&!o.some((function(t){return Xt(e,t)}))||i&&!i(Ft(e))||!1}function un(e,t,n,r){var a=Pe.default(e),o=Ae.default(e),i=Pe.default(t),s=Ae.default(t),u=Pe.default(r);return a===i&&a===u?o<=n&&n<=s:a<i?u===a&&o<=n||u===i&&s>=n||u<i&&u>a:void 0}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,o=t.includeDates,i=t.filterDate;return hn(e,{minDate:n,maxDate:r})||a&&a.some((function(t){return Kt(e,t)}))||o&&!o.some((function(t){return Kt(e,t)}))||i&&!i(Ft(e))||!1}function cn(e,t,n){if(!pe.default(t)||!pe.default(n))return!1;var r=Pe.default(t),a=Pe.default(n);return r<=e&&a>=e}function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,o=t.includeDates,i=t.filterDate,s=new Date(e,0,1);return hn(s,{minDate:$e.default(n),maxDate:nt.default(r)})||a&&a.some((function(e){return Qt(s,e)}))||o&&!o.some((function(e){return Qt(s,e)}))||i&&!i(Ft(s))||!1}function dn(e,t,n,r){var a=Pe.default(e),o=Re.default(e),i=Pe.default(t),s=Re.default(t),u=Pe.default(r);return a===i&&a===u?o<=n&&n<=s:a<i?u===a&&o<=n||u===i&&s>=n||u<i&&u>a:void 0}function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&Ge.default(e,n)<0||r&&Ge.default(e,r)>0}function pn(e,t){return t.some((function(t){return Ie.default(t)===Ie.default(e)&&Te.default(t)===Te.default(e)}))}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,a=t.filterTime;return n&&pn(e,n)||r&&!pn(e,r)||a&&!a(e)||!1}function vn(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var a,o=Ft(),i=ze.default(Be.default(o,Te.default(e)),Ie.default(e)),s=ze.default(Be.default(o,Te.default(n)),Ie.default(n)),u=ze.default(Be.default(o,Te.default(r)),Ie.default(r));try{a=!ct.default(i,{start:s,end:u})}catch(e){a=!1}return a}function gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,a=Se.default(e,1);return n&&qe.default(n,a)>0||r&&r.every((function(e){return qe.default(e,a)>0}))||!1}function yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,a=we.default(e,1);return n&&qe.default(a,n)>0||r&&r.every((function(e){return qe.default(a,e)>0}))||!1}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.includeDates,a=Ee.default(e,1);return n&&Qe.default(n,a)>0||r&&r.every((function(e){return Qe.default(e,a)>0}))||!1}function wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.includeDates,a=Ce.default(e,1);return n&&Qe.default(a,n)>0||r&&r.every((function(e){return Qe.default(a,e)>0}))||!1}function xn(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)>=0}));return He.default(r)}return n?He.default(n):t}function Cn(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter((function(e){return Ge.default(e,t)<=0}));return Ye.default(r)}return n?Ye.default(n):t}function _n(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,a=e.length;r<a;r++){var o=e[r];if(he.default(o)){var i=zt(o,"MM.dd.yyyy"),s=n.get(i)||[];s.includes(t)||(s.push(t),n.set(i,s))}else if("object"===bt(o)){var u=Object.keys(o),l=u[0],c=o[u[0]];if("string"==typeof l&&c.constructor===Array)for(var f=0,d=c.length;f<d;f++){var h=zt(c[f],"MM.dd.yyyy"),p=n.get(h)||[];p.includes(l)||(p.push(l),n.set(h,p))}}}return n}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach((function(e){var r=e.date,a=e.holidayName;if(he.default(r)){var o=zt(r,"MM.dd.yyyy"),i=n.get(o)||{};if(!("className"in i)||i.className!==t||(s=i.holidayNames,u=[a],s.length!==u.length||!s.every((function(e,t){return e===u[t]})))){var s,u;i.className=t;var l=i.holidayNames;i.holidayNames=l?[].concat(It(l),[a]):[a],n.set(o,i)}}})),n}function Sn(e,t,n,r,a){for(var o=a.length,i=[],s=0;s<o;s++){var u=ve.default(ge.default(e,Ie.default(a[s])),Te.default(a[s])),l=ve.default(e,(n+1)*r);ut.default(u,t)&&lt.default(u,l)&&i.push(a[s])}return i}function Mn(e){return e<10?"0".concat(e):"".concat(e)}function En(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt,n=Math.ceil(Pe.default(e)/t)*t;return{startPeriod:n-(t-1),endPeriod:n}}function Nn(e){var t=e.getSeconds(),n=e.getMilliseconds();return ft.default(e.getTime()-1e3*t-n)}function Tn(e,t,n,r){for(var a=[],o=0;o<2*t+1;o++){var i=e+t-o,s=!0;n&&(s=Pe.default(n)<=i),r&&s&&(s=Pe.default(r)>=i),s&&a.push(i)}return a}var In=function(e){St(r,e);var n=Tt(r);function r(e){var a;wt(this,r),_t(Nt(a=n.call(this,e)),"renderOptions",(function(){var e=a.props.year,t=a.state.yearsList.map((function(t){return fe.default.createElement("div",{className:e===t?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:t,onClick:a.onChange.bind(Nt(a),t),"aria-selected":e===t?"true":void 0},e===t?fe.default.createElement("span",{className:"react-datepicker__year-option--selected"},"\u2713"):"",t)})),n=a.props.minDate?Pe.default(a.props.minDate):null,r=a.props.maxDate?Pe.default(a.props.maxDate):null;return r&&a.state.yearsList.find((function(e){return e===r}))||t.unshift(fe.default.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:a.incrementYears},fe.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),n&&a.state.yearsList.find((function(e){return e===n}))||t.push(fe.default.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:a.decrementYears},fe.default.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),t})),_t(Nt(a),"onChange",(function(e){a.props.onChange(e)})),_t(Nt(a),"handleClickOutside",(function(){a.props.onCancel()})),_t(Nt(a),"shiftYears",(function(e){var t=a.state.yearsList.map((function(t){return t+e}));a.setState({yearsList:t})})),_t(Nt(a),"incrementYears",(function(){return a.shiftYears(1)})),_t(Nt(a),"decrementYears",(function(){return a.shiftYears(-1)}));var o=e.yearDropdownItemNumber,i=e.scrollableYearDropdown,s=o||(i?10:5);return a.state={yearsList:Tn(a.props.year,s,a.props.minDate,a.props.maxDate)},a.dropdownRef=t.createRef(),a}return Ct(r,[{key:"componentDidMount",value:function(){var e=this.dropdownRef.current;if(e){var t=e.children?Array.from(e.children):null,n=t?t.find((function(e){return e.ariaSelected})):null;e.scrollTop=n?n.offsetTop+(n.clientHeight-e.clientHeight)/2:(e.scrollHeight-e.clientHeight)/2}}},{key:"render",value:function(){var e=de.default({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return fe.default.createElement("div",{className:e,ref:this.dropdownRef},this.renderOptions())}}]),r}(fe.default.Component),jn=pt.default(In),Dn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),_t(Nt(e),"renderSelectOptions",(function(){for(var t=e.props.minDate?Pe.default(e.props.minDate):1900,n=e.props.maxDate?Pe.default(e.props.maxDate):2100,r=[],a=t;a<=n;a++)r.push(fe.default.createElement("option",{key:a,value:a},a));return r})),_t(Nt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),_t(Nt(e),"renderSelectMode",(function(){return fe.default.createElement("select",{value:e.props.year,className:"react-datepicker__year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),_t(Nt(e),"renderReadView",(function(t){return fe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(t){return e.toggleDropdown(t)}},fe.default.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),fe.default.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},e.props.year))})),_t(Nt(e),"renderDropdown",(function(){return fe.default.createElement(jn,{key:"dropdown",year:e.props.year,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableYearDropdown:e.props.scrollableYearDropdown,yearDropdownItemNumber:e.props.yearDropdownItemNumber})})),_t(Nt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),_t(Nt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.year&&e.props.onChange(t)})),_t(Nt(e),"toggleDropdown",(function(t){e.setState({dropdownVisible:!e.state.dropdownVisible},(function(){e.props.adjustDateOnChange&&e.handleYearChange(e.props.date,t)}))})),_t(Nt(e),"handleYearChange",(function(t,n){e.onSelect(t,n),e.setOpen()})),_t(Nt(e),"onSelect",(function(t,n){e.props.onSelect&&e.props.onSelect(t,n)})),_t(Nt(e),"setOpen",(function(){e.props.setOpen&&e.props.setOpen(!0)})),e}return Ct(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return fe.default.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(fe.default.Component),Ln=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"isSelectedMonth",(function(t){return e.props.month===t})),_t(Nt(e),"renderOptions",(function(){return e.props.monthNames.map((function(t,n){return fe.default.createElement("div",{className:e.isSelectedMonth(n)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:t,onClick:e.onChange.bind(Nt(e),n),"aria-selected":e.isSelectedMonth(n)?"true":void 0},e.isSelectedMonth(n)?fe.default.createElement("span",{className:"react-datepicker__month-option--selected"},"\u2713"):"",t)}))})),_t(Nt(e),"onChange",(function(t){return e.props.onChange(t)})),_t(Nt(e),"handleClickOutside",(function(){return e.props.onCancel()})),e}return Ct(n,[{key:"render",value:function(){return fe.default.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}(fe.default.Component),An=pt.default(Ln),Rn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),_t(Nt(e),"renderSelectOptions",(function(e){return e.map((function(e,t){return fe.default.createElement("option",{key:t,value:t},e)}))})),_t(Nt(e),"renderSelectMode",(function(t){return fe.default.createElement("select",{value:e.props.month,className:"react-datepicker__month-select",onChange:function(t){return e.onChange(t.target.value)}},e.renderSelectOptions(t))})),_t(Nt(e),"renderReadView",(function(t,n){return fe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:e.toggleDropdown},fe.default.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),fe.default.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},n[e.props.month]))})),_t(Nt(e),"renderDropdown",(function(t){return fe.default.createElement(An,{key:"dropdown",month:e.props.month,monthNames:t,onChange:e.onChange,onCancel:e.toggleDropdown})})),_t(Nt(e),"renderScrollMode",(function(t){var n=e.state.dropdownVisible,r=[e.renderReadView(!n,t)];return n&&r.unshift(e.renderDropdown(t)),r})),_t(Nt(e),"onChange",(function(t){e.toggleDropdown(),t!==e.props.month&&e.props.onChange(t)})),_t(Nt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ct(n,[{key:"render",value:function(){var e,t=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(e){return rn(e,t.props.locale)}:function(e){return nn(e,t.props.locale)});switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode(n);break;case"select":e=this.renderSelectMode(n)}return fe.default.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(fe.default.Component);function Pn(e,t){for(var n=[],r=Ht(e),a=Ht(t);!ut.default(r,a);)n.push(Ft(r)),r=we.default(r,1);return n}var On=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"renderOptions",(function(){return r.state.monthYearsList.map((function(e){var t=Oe.default(e),n=Qt(r.props.date,e)&&Xt(r.props.date,e);return fe.default.createElement("div",{className:n?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:t,onClick:r.onChange.bind(Nt(r),t),"aria-selected":n?"true":void 0},n?fe.default.createElement("span",{className:"react-datepicker__month-year-option--selected"},"\u2713"):"",zt(e,r.props.dateFormat,r.props.locale))}))})),_t(Nt(r),"onChange",(function(e){return r.props.onChange(e)})),_t(Nt(r),"handleClickOutside",(function(){r.props.onCancel()})),r.state={monthYearsList:Pn(r.props.minDate,r.props.maxDate)},r}return Ct(n,[{key:"render",value:function(){var e=de.default({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return fe.default.createElement("div",{className:e},this.renderOptions())}}]),n}(fe.default.Component),Fn=pt.default(On),Bn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"state",{dropdownVisible:!1}),_t(Nt(e),"renderSelectOptions",(function(){for(var t=Ht(e.props.minDate),n=Ht(e.props.maxDate),r=[];!ut.default(t,n);){var a=Oe.default(t);r.push(fe.default.createElement("option",{key:a,value:a},zt(t,e.props.dateFormat,e.props.locale))),t=we.default(t,1)}return r})),_t(Nt(e),"onSelectChange",(function(t){e.onChange(t.target.value)})),_t(Nt(e),"renderSelectMode",(function(){return fe.default.createElement("select",{value:Oe.default(Ht(e.props.date)),className:"react-datepicker__month-year-select",onChange:e.onSelectChange},e.renderSelectOptions())})),_t(Nt(e),"renderReadView",(function(t){var n=zt(e.props.date,e.props.dateFormat,e.props.locale);return fe.default.createElement("div",{key:"read",style:{visibility:t?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(t){return e.toggleDropdown(t)}},fe.default.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),fe.default.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},n))})),_t(Nt(e),"renderDropdown",(function(){return fe.default.createElement(Fn,{key:"dropdown",date:e.props.date,dateFormat:e.props.dateFormat,onChange:e.onChange,onCancel:e.toggleDropdown,minDate:e.props.minDate,maxDate:e.props.maxDate,scrollableMonthYearDropdown:e.props.scrollableMonthYearDropdown,locale:e.props.locale})})),_t(Nt(e),"renderScrollMode",(function(){var t=e.state.dropdownVisible,n=[e.renderReadView(!t)];return t&&n.unshift(e.renderDropdown()),n})),_t(Nt(e),"onChange",(function(t){e.toggleDropdown();var n=Ft(parseInt(t));Qt(e.props.date,n)&&Xt(e.props.date,n)||e.props.onChange(n)})),_t(Nt(e),"toggleDropdown",(function(){return e.setState({dropdownVisible:!e.state.dropdownVisible})})),e}return Ct(n,[{key:"render",value:function(){var e;switch(this.props.dropdownMode){case"scroll":e=this.renderScrollMode();break;case"select":e=this.renderSelectMode()}return fe.default.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},e)}}]),n}(fe.default.Component),zn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"dayEl",fe.default.createRef()),_t(Nt(e),"handleClick",(function(t){!e.isDisabled()&&e.props.onClick&&e.props.onClick(t)})),_t(Nt(e),"handleMouseEnter",(function(t){!e.isDisabled()&&e.props.onMouseEnter&&e.props.onMouseEnter(t)})),_t(Nt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),_t(Nt(e),"isSameDay",(function(t){return Jt(e.props.day,t)})),_t(Nt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!(e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected))&&(e.isSameDay(e.props.preSelection)||e.isSameWeek(e.props.preSelection))})),_t(Nt(e),"isDisabled",(function(){return an(e.props.day,e.props)})),_t(Nt(e),"isExcluded",(function(){return on(e.props.day,e.props)})),_t(Nt(e),"isStartOfWeek",(function(){return Jt(e.props.day,Vt(e.props.day,e.props.locale,e.props.calendarStartDay))})),_t(Nt(e),"isSameWeek",(function(t){return e.props.showWeekPicker&&Jt(t,Vt(e.props.day,e.props.locale,e.props.calendarStartDay))})),_t(Nt(e),"getHighLightedClass",(function(){var t=e.props,n=t.day,r=t.highlightDates;if(!r)return!1;var a=zt(n,"MM.dd.yyyy");return r.get(a)})),_t(Nt(e),"getHolidaysClass",(function(){var t=e.props,n=t.day,r=t.holidays;if(!r)return!1;var a=zt(n,"MM.dd.yyyy");return r.has(a)?[r.get(a).className]:void 0})),_t(Nt(e),"isInRange",(function(){var t=e.props,n=t.day,r=t.startDate,a=t.endDate;return!(!r||!a)&&$t(n,r,a)})),_t(Nt(e),"isInSelectingRange",(function(){var t,n=e.props,r=n.day,a=n.selectsStart,o=n.selectsEnd,i=n.selectsRange,s=n.selectsDisabledDaysInRange,u=n.startDate,l=n.endDate,c=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return!(!(a||o||i)||!c||!s&&e.isDisabled())&&(a&&l&&(lt.default(c,l)||Zt(c,l))?$t(r,c,l):(o&&u&&(ut.default(c,u)||Zt(c,u))||!(!i||!u||l||!ut.default(c,u)&&!Zt(c,u)))&&$t(r,u,c))})),_t(Nt(e),"isSelectingRangeStart",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,a=n.startDate,o=n.selectsStart,i=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Jt(r,o?i:a)})),_t(Nt(e),"isSelectingRangeEnd",(function(){var t;if(!e.isInSelectingRange())return!1;var n=e.props,r=n.day,a=n.endDate,o=n.selectsEnd,i=n.selectsRange,s=null!==(t=e.props.selectingDate)&&void 0!==t?t:e.props.preSelection;return Jt(r,o||i?s:a)})),_t(Nt(e),"isRangeStart",(function(){var t=e.props,n=t.day,r=t.startDate,a=t.endDate;return!(!r||!a)&&Jt(r,n)})),_t(Nt(e),"isRangeEnd",(function(){var t=e.props,n=t.day,r=t.startDate,a=t.endDate;return!(!r||!a)&&Jt(a,n)})),_t(Nt(e),"isWeekend",(function(){var t=je.default(e.props.day);return 0===t||6===t})),_t(Nt(e),"isAfterMonth",(function(){return void 0!==e.props.month&&(e.props.month+1)%12===Ae.default(e.props.day)})),_t(Nt(e),"isBeforeMonth",(function(){return void 0!==e.props.month&&(Ae.default(e.props.day)+1)%12===e.props.month})),_t(Nt(e),"isCurrentDay",(function(){return e.isSameDay(Ft())})),_t(Nt(e),"isSelected",(function(){return e.isSameDay(e.props.selected)||e.isSameWeek(e.props.selected)})),_t(Nt(e),"getClassNames",(function(t){var n,r=e.props.dayClassName?e.props.dayClassName(t):void 0;return de.default("react-datepicker__day",r,"react-datepicker__day--"+zt(e.props.day,"ddd",n),{"react-datepicker__day--disabled":e.isDisabled(),"react-datepicker__day--excluded":e.isExcluded(),"react-datepicker__day--selected":e.isSelected(),"react-datepicker__day--keyboard-selected":e.isKeyboardSelected(),"react-datepicker__day--range-start":e.isRangeStart(),"react-datepicker__day--range-end":e.isRangeEnd(),"react-datepicker__day--in-range":e.isInRange(),"react-datepicker__day--in-selecting-range":e.isInSelectingRange(),"react-datepicker__day--selecting-range-start":e.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":e.isSelectingRangeEnd(),"react-datepicker__day--today":e.isCurrentDay(),"react-datepicker__day--weekend":e.isWeekend(),"react-datepicker__day--outside-month":e.isAfterMonth()||e.isBeforeMonth()},e.getHighLightedClass("react-datepicker__day--highlighted"),e.getHolidaysClass())})),_t(Nt(e),"getAriaLabel",(function(){var t=e.props,n=t.day,r=t.ariaLabelPrefixWhenEnabled,a=void 0===r?"Choose":r,o=t.ariaLabelPrefixWhenDisabled,i=void 0===o?"Not available":o,s=e.isDisabled()||e.isExcluded()?i:a;return"".concat(s," ").concat(zt(n,"PPPP",e.props.locale))})),_t(Nt(e),"getTitle",(function(){var t=e.props,n=t.day,r=t.holidays,a=void 0===r?new Map:r,o=zt(n,"MM.dd.yyyy");return a.has(o)&&a.get(o).holidayNames.length>0?a.get(o).holidayNames.join(", "):""})),_t(Nt(e),"getTabIndex",(function(t,n){var r=t||e.props.selected,a=n||e.props.preSelection;return(!e.props.showWeekPicker||!e.props.showWeekNumber&&e.isStartOfWeek())&&(e.isKeyboardSelected()||e.isSameDay(r)&&Jt(a,r))?0:-1})),_t(Nt(e),"handleFocusDay",(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!1;0===e.getTabIndex()&&!n.isInputFocused&&e.isSameDay(e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(r=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(r=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(r=!0),e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()&&(r=!1),e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()&&(r=!1)),r&&(null===(t=e.dayEl.current)||void 0===t||t.focus({preventScroll:!0}))})),_t(Nt(e),"renderDayContents",(function(){return e.props.monthShowsDuplicateDaysEnd&&e.isAfterMonth()||e.props.monthShowsDuplicateDaysStart&&e.isBeforeMonth()?null:e.props.renderDayContents?e.props.renderDayContents(De.default(e.props.day),e.props.day):De.default(e.props.day)})),_t(Nt(e),"render",(function(){return fe.default.createElement("div",{ref:e.dayEl,className:e.getClassNames(e.props.day),onKeyDown:e.handleOnKeyDown,onClick:e.handleClick,onMouseEnter:e.handleMouseEnter,tabIndex:e.getTabIndex(),"aria-label":e.getAriaLabel(),role:"option",title:e.getTitle(),"aria-disabled":e.isDisabled(),"aria-current":e.isCurrentDay()?"date":void 0,"aria-selected":e.isSelected()||e.isInRange()},e.renderDayContents(),""!==e.getTitle()&&fe.default.createElement("span",{className:"holiday-overlay"},e.getTitle()))})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(e){this.handleFocusDay(e)}}]),n}(fe.default.Component),Un=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"weekNumberEl",fe.default.createRef()),_t(Nt(e),"handleClick",(function(t){e.props.onClick&&e.props.onClick(t)})),_t(Nt(e),"handleOnKeyDown",(function(t){" "===t.key&&(t.preventDefault(),t.key="Enter"),e.props.handleOnKeyDown(t)})),_t(Nt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Jt(e.props.date,e.props.selected)&&Jt(e.props.date,e.props.preSelection)})),_t(Nt(e),"getTabIndex",(function(){return e.props.showWeekPicker&&e.props.showWeekNumber&&(e.isKeyboardSelected()||Jt(e.props.date,e.props.selected)&&Jt(e.props.preSelection,e.props.selected))?0:-1})),_t(Nt(e),"handleFocusWeekNumber",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!1;0===e.getTabIndex()&&!t.isInputFocused&&Jt(e.props.date,e.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(n=!0),e.props.inline&&!e.props.shouldFocusDayInline&&(n=!1),e.props.containerRef&&e.props.containerRef.current&&e.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(n=!0)),n&&e.weekNumberEl.current&&e.weekNumberEl.current.focus({preventScroll:!0})})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(e){this.handleFocusWeekNumber(e)}},{key:"render",value:function(){var e=this.props,t=e.weekNumber,n=e.ariaLabelPrefix,r=void 0===n?"week ":n,a={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!e.onClick,"react-datepicker__week-number--selected":Jt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return fe.default.createElement("div",{ref:this.weekNumberEl,className:de.default(a),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(fe.default.Component),Wn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n)})),_t(Nt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),_t(Nt(e),"handleWeekClick",(function(t,n,r){if("function"==typeof e.props.onWeekSelect&&e.props.onWeekSelect(t,n,r),e.props.showWeekPicker){var a=Vt(t,e.props.locale,e.props.calendarStartDay);e.handleDayClick(a,r)}e.props.shouldCloseOnSelect&&e.props.setOpen(!1)})),_t(Nt(e),"formatWeekNumber",(function(t){return e.props.formatWeekNumber?e.props.formatWeekNumber(t):function(e,t){var n=t&&tn(t)||en()&&tn(en());return Le.default(e,n?{locale:n}:null)}(t)})),_t(Nt(e),"renderDays",(function(){var t=Vt(e.props.day,e.props.locale,e.props.calendarStartDay),n=[],r=e.formatWeekNumber(t);if(e.props.showWeekNumber){var a=e.props.onWeekSelect||e.props.showWeekPicker?e.handleWeekClick.bind(Nt(e),t,r):void 0;n.push(fe.default.createElement(Un,{key:"W",weekNumber:r,date:t,onClick:a,selected:e.props.selected,preSelection:e.props.preSelection,ariaLabelPrefix:e.props.ariaLabelPrefix,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef}))}return n.concat([0,1,2,3,4,5,6].map((function(n){var r=ye.default(t,n);return fe.default.createElement(zn,{ariaLabelPrefixWhenEnabled:e.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:e.props.disabledDayAriaLabelPrefix,key:r.valueOf(),day:r,month:e.props.month,onClick:e.handleDayClick.bind(Nt(e),r),onMouseEnter:e.handleDayMouseEnter.bind(Nt(e),r),minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,showWeekPicker:e.props.showWeekPicker,showWeekNumber:e.props.showWeekNumber,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,renderDayContents:e.props.renderDayContents,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart,locale:e.props.locale})})))})),_t(Nt(e),"startOfWeek",(function(){return Vt(e.props.day,e.props.locale,e.props.calendarStartDay)})),_t(Nt(e),"isKeyboardSelected",(function(){return!e.props.disabledKeyboardNavigation&&!Jt(e.startOfWeek(),e.props.selected)&&Jt(e.startOfWeek(),e.props.preSelection)})),e}return Ct(n,[{key:"render",value:function(){var e={"react-datepicker__week":!0,"react-datepicker__week--selected":Jt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return fe.default.createElement("div",{className:de.default(e)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(fe.default.Component),Vn="two_columns",Hn="three_columns",Yn="four_columns",Gn=_t(_t(_t({},Vn,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Hn,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Yn,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function qn(e,t){return e?Yn:t?Vn:Hn}var Qn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"MONTH_REFS",It(Array(12)).map((function(){return fe.default.createRef()}))),_t(Nt(e),"QUARTER_REFS",It(Array(4)).map((function(){return fe.default.createRef()}))),_t(Nt(e),"isDisabled",(function(t){return an(t,e.props)})),_t(Nt(e),"isExcluded",(function(t){return on(t,e.props)})),_t(Nt(e),"handleDayClick",(function(t,n){e.props.onDayClick&&e.props.onDayClick(t,n,e.props.orderInDisplay)})),_t(Nt(e),"handleDayMouseEnter",(function(t){e.props.onDayMouseEnter&&e.props.onDayMouseEnter(t)})),_t(Nt(e),"handleMouseLeave",(function(){e.props.onMouseLeave&&e.props.onMouseLeave()})),_t(Nt(e),"isRangeStartMonth",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate;return!(!a||!o)&&Xt(Ue.default(r,t),a)})),_t(Nt(e),"isRangeStartQuarter",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate;return!(!a||!o)&&Kt(We.default(r,t),a)})),_t(Nt(e),"isRangeEndMonth",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate;return!(!a||!o)&&Xt(Ue.default(r,t),o)})),_t(Nt(e),"isRangeEndQuarter",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate;return!(!a||!o)&&Kt(We.default(r,t),o)})),_t(Nt(e),"isInSelectingRangeMonth",(function(t){var n,r=e.props,a=r.day,o=r.selectsStart,i=r.selectsEnd,s=r.selectsRange,u=r.startDate,l=r.endDate,c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(o||i||s)||!c)&&(o&&l?un(c,l,t,a):(i&&u||!(!s||!u||l))&&un(u,c,t,a))})),_t(Nt(e),"isSelectingMonthRangeStart",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,a=r.day,o=r.startDate,i=r.selectsStart,s=Ue.default(a,t),u=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return Xt(s,i?u:o)})),_t(Nt(e),"isSelectingMonthRangeEnd",(function(t){var n;if(!e.isInSelectingRangeMonth(t))return!1;var r=e.props,a=r.day,o=r.endDate,i=r.selectsEnd,s=r.selectsRange,u=Ue.default(a,t),l=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return Xt(u,i||s?l:o)})),_t(Nt(e),"isInSelectingRangeQuarter",(function(t){var n,r=e.props,a=r.day,o=r.selectsStart,i=r.selectsEnd,s=r.selectsRange,u=r.startDate,l=r.endDate,c=null!==(n=e.props.selectingDate)&&void 0!==n?n:e.props.preSelection;return!(!(o||i||s)||!c)&&(o&&l?dn(c,l,t,a):(i&&u||!(!s||!u||l))&&dn(u,c,t,a))})),_t(Nt(e),"isWeekInMonth",(function(t){var n=e.props.day,r=ye.default(t,6);return Xt(t,n)||Xt(r,n)})),_t(Nt(e),"isCurrentMonth",(function(e,t){return Pe.default(e)===Pe.default(Ft())&&t===Ae.default(Ft())})),_t(Nt(e),"isCurrentQuarter",(function(e,t){return Pe.default(e)===Pe.default(Ft())&&t===Re.default(Ft())})),_t(Nt(e),"isSelectedMonth",(function(e,t,n){return Ae.default(n)===t&&Pe.default(e)===Pe.default(n)})),_t(Nt(e),"isSelectedQuarter",(function(e,t,n){return Re.default(e)===t&&Pe.default(e)===Pe.default(n)})),_t(Nt(e),"renderWeeks",(function(){for(var t=[],n=e.props.fixedHeight,r=0,a=!1,o=Vt(Ht(e.props.day),e.props.locale,e.props.calendarStartDay);t.push(fe.default.createElement(Wn,{ariaLabelPrefix:e.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:e.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:e.props.disabledDayAriaLabelPrefix,key:r,day:o,month:Ae.default(e.props.day),onDayClick:e.handleDayClick,onDayMouseEnter:e.handleDayMouseEnter,onWeekSelect:e.props.onWeekSelect,formatWeekNumber:e.props.formatWeekNumber,locale:e.props.locale,minDate:e.props.minDate,maxDate:e.props.maxDate,excludeDates:e.props.excludeDates,excludeDateIntervals:e.props.excludeDateIntervals,includeDates:e.props.includeDates,includeDateIntervals:e.props.includeDateIntervals,inline:e.props.inline,shouldFocusDayInline:e.props.shouldFocusDayInline,highlightDates:e.props.highlightDates,holidays:e.props.holidays,selectingDate:e.props.selectingDate,filterDate:e.props.filterDate,preSelection:e.props.preSelection,selected:e.props.selected,selectsStart:e.props.selectsStart,selectsEnd:e.props.selectsEnd,selectsRange:e.props.selectsRange,selectsDisabledDaysInRange:e.props.selectsDisabledDaysInRange,showWeekNumber:e.props.showWeekNumbers,showWeekPicker:e.props.showWeekPicker,startDate:e.props.startDate,endDate:e.props.endDate,dayClassName:e.props.dayClassName,setOpen:e.props.setOpen,shouldCloseOnSelect:e.props.shouldCloseOnSelect,disabledKeyboardNavigation:e.props.disabledKeyboardNavigation,renderDayContents:e.props.renderDayContents,handleOnKeyDown:e.props.handleOnKeyDown,isInputFocused:e.props.isInputFocused,containerRef:e.props.containerRef,calendarStartDay:e.props.calendarStartDay,monthShowsDuplicateDaysEnd:e.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:e.props.monthShowsDuplicateDaysStart})),!a;){r++,o=be.default(o,1);var i=n&&r>=6,s=!n&&!e.isWeekInMonth(o);if(i||s){if(!e.props.peekNextMonth)break;a=!0}}return t})),_t(Nt(e),"onMonthClick",(function(t,n){e.handleDayClick(Ht(Ue.default(e.props.day,n)),t)})),_t(Nt(e),"onMonthMouseEnter",(function(t){e.handleDayMouseEnter(Ht(Ue.default(e.props.day,t)))})),_t(Nt(e),"handleMonthNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.MONTH_REFS[t].current&&e.MONTH_REFS[t].current.focus())})),_t(Nt(e),"onMonthKeyDown",(function(t,n){var r=e.props,a=r.selected,o=r.preSelection,i=r.disabledKeyboardNavigation,s=r.showTwoColumnMonthYearPicker,u=r.showFourColumnMonthYearPicker,l=r.setPreSelection,c=t.key;if("Tab"!==c&&t.preventDefault(),!i){var f=qn(u,s),d=Gn[f].verticalNavigationOffset,h=Gn[f].grid;switch(c){case"Enter":e.onMonthClick(t,n),l(a);break;case"ArrowRight":e.handleMonthNavigation(11===n?0:n+1,we.default(o,1));break;case"ArrowLeft":e.handleMonthNavigation(0===n?11:n-1,Se.default(o,1));break;case"ArrowUp":e.handleMonthNavigation(h[0].includes(n)?n+12-d:n-d,Se.default(o,d));break;case"ArrowDown":e.handleMonthNavigation(h[h.length-1].includes(n)?n-12+d:n+d,we.default(o,d))}}})),_t(Nt(e),"onQuarterClick",(function(t,n){e.handleDayClick(Gt(We.default(e.props.day,n)),t)})),_t(Nt(e),"onQuarterMouseEnter",(function(t){e.handleDayMouseEnter(Gt(We.default(e.props.day,t)))})),_t(Nt(e),"handleQuarterNavigation",(function(t,n){e.isDisabled(n)||e.isExcluded(n)||(e.props.setPreSelection(n),e.QUARTER_REFS[t-1].current&&e.QUARTER_REFS[t-1].current.focus())})),_t(Nt(e),"onQuarterKeyDown",(function(t,n){var r=t.key;if(!e.props.disabledKeyboardNavigation)switch(r){case"Enter":e.onQuarterClick(t,n),e.props.setPreSelection(e.props.selected);break;case"ArrowRight":e.handleQuarterNavigation(4===n?1:n+1,xe.default(e.props.preSelection,1));break;case"ArrowLeft":e.handleQuarterNavigation(1===n?4:n-1,Me.default(e.props.preSelection,1))}})),_t(Nt(e),"getMonthClassNames",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate,i=n.selected,s=n.minDate,u=n.maxDate,l=n.preSelection,c=n.monthClassName,f=n.excludeDates,d=n.includeDates,h=c?c(Ue.default(r,t)):void 0,p=Ue.default(r,t);return de.default("react-datepicker__month-text","react-datepicker__month-".concat(t),h,{"react-datepicker__month-text--disabled":(s||u||f||d)&&sn(p,e.props),"react-datepicker__month-text--selected":e.isSelectedMonth(r,t,i),"react-datepicker__month-text--keyboard-selected":!e.props.disabledKeyboardNavigation&&Ae.default(l)===t,"react-datepicker__month-text--in-selecting-range":e.isInSelectingRangeMonth(t),"react-datepicker__month-text--in-range":un(a,o,t,r),"react-datepicker__month-text--range-start":e.isRangeStartMonth(t),"react-datepicker__month-text--range-end":e.isRangeEndMonth(t),"react-datepicker__month-text--selecting-range-start":e.isSelectingMonthRangeStart(t),"react-datepicker__month-text--selecting-range-end":e.isSelectingMonthRangeEnd(t),"react-datepicker__month-text--today":e.isCurrentMonth(r,t)})})),_t(Nt(e),"getTabIndex",(function(t){var n=Ae.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),_t(Nt(e),"getQuarterTabIndex",(function(t){var n=Re.default(e.props.preSelection);return e.props.disabledKeyboardNavigation||t!==n?"-1":"0"})),_t(Nt(e),"getAriaLabel",(function(t){var n=e.props,r=n.chooseDayAriaLabelPrefix,a=void 0===r?"Choose":r,o=n.disabledDayAriaLabelPrefix,i=void 0===o?"Not available":o,s=n.day,u=Ue.default(s,t),l=e.isDisabled(u)||e.isExcluded(u)?i:a;return"".concat(l," ").concat(zt(u,"MMMM yyyy"))})),_t(Nt(e),"getQuarterClassNames",(function(t){var n=e.props,r=n.day,a=n.startDate,o=n.endDate,i=n.selected,s=n.minDate,u=n.maxDate,l=n.preSelection,c=n.disabledKeyboardNavigation;return de.default("react-datepicker__quarter-text","react-datepicker__quarter-".concat(t),{"react-datepicker__quarter-text--disabled":(s||u)&&ln(We.default(r,t),e.props),"react-datepicker__quarter-text--selected":e.isSelectedQuarter(r,t,i),"react-datepicker__quarter-text--keyboard-selected":!c&&Re.default(l)===t,"react-datepicker__quarter-text--in-selecting-range":e.isInSelectingRangeQuarter(t),"react-datepicker__quarter-text--in-range":dn(a,o,t,r),"react-datepicker__quarter-text--range-start":e.isRangeStartQuarter(t),"react-datepicker__quarter-text--range-end":e.isRangeEndQuarter(t)})})),_t(Nt(e),"getMonthContent",(function(t){var n=e.props,r=n.showFullMonthYearPicker,a=n.renderMonthContent,o=n.locale,i=n.day,s=rn(t,o),u=nn(t,o);return a?a(t,s,u,i):r?u:s})),_t(Nt(e),"getQuarterContent",(function(t){var n=e.props,r=n.renderQuarterContent,a=function(e,t){return zt(We.default(Ft(),e),"QQQ",t)}(t,n.locale);return r?r(t,a):a})),_t(Nt(e),"renderMonths",(function(){var t=e.props,n=t.showTwoColumnMonthYearPicker,r=t.showFourColumnMonthYearPicker,a=t.day,o=t.selected;return Gn[qn(r,n)].grid.map((function(t,n){return fe.default.createElement("div",{className:"react-datepicker__month-wrapper",key:n},t.map((function(t,n){return fe.default.createElement("div",{ref:e.MONTH_REFS[t],key:n,onClick:function(n){e.onMonthClick(n,t)},onKeyDown:function(n){e.onMonthKeyDown(n,t)},onMouseEnter:function(){return e.onMonthMouseEnter(t)},tabIndex:e.getTabIndex(t),className:e.getMonthClassNames(t),role:"option","aria-label":e.getAriaLabel(t),"aria-current":e.isCurrentMonth(a,t)?"date":void 0,"aria-selected":e.isSelectedMonth(a,t,o)},e.getMonthContent(t))})))}))})),_t(Nt(e),"renderQuarters",(function(){var t=e.props,n=t.day,r=t.selected;return fe.default.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(t,a){return fe.default.createElement("div",{key:a,ref:e.QUARTER_REFS[a],role:"option",onClick:function(n){e.onQuarterClick(n,t)},onKeyDown:function(n){e.onQuarterKeyDown(n,t)},onMouseEnter:function(){return e.onQuarterMouseEnter(t)},className:e.getQuarterClassNames(t),"aria-selected":e.isSelectedQuarter(n,t,r),tabIndex:e.getQuarterTabIndex(t),"aria-current":e.isCurrentQuarter(n,t)?"date":void 0},e.getQuarterContent(t))})))})),_t(Nt(e),"getClassNames",(function(){var t=e.props,n=t.selectingDate,r=t.selectsStart,a=t.selectsEnd,o=t.showMonthYearPicker,i=t.showQuarterYearPicker,s=t.showWeekPicker;return de.default("react-datepicker__month",{"react-datepicker__month--selecting-range":n&&(r||a)},{"react-datepicker__monthPicker":o},{"react-datepicker__quarterPicker":i},{"react-datepicker__weekPicker":s})})),e}return Ct(n,[{key:"render",value:function(){var e=this.props,t=e.showMonthYearPicker,n=e.showQuarterYearPicker,r=e.day,a=e.ariaLabelPrefix,o=void 0===a?"month ":a;return fe.default.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(o," ").concat(zt(r,"yyyy-MM")),role:"listbox"},t?this.renderMonths():n?this.renderQuarters():this.renderWeeks())}}]),n}(fe.default.Component),Xn=function(e){St(n,e);var t=Tt(n);function n(){var e;wt(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return _t(Nt(e=t.call.apply(t,[this].concat(a))),"state",{height:null}),_t(Nt(e),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){e.list&&(e.list.scrollTop=e.centerLi&&n.calcCenterPosition(e.props.monthRef?e.props.monthRef.clientHeight-e.header.clientHeight:e.list.clientHeight,e.centerLi))}))})),_t(Nt(e),"handleClick",(function(t){(e.props.minTime||e.props.maxTime)&&vn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)||e.props.onChange(t)})),_t(Nt(e),"isSelectedTime",(function(t){return e.props.selected&&(n=t,Nn(e.props.selected).getTime()===Nn(n).getTime());var n})),_t(Nt(e),"isDisabledTime",(function(t){return(e.props.minTime||e.props.maxTime)&&vn(t,e.props)||(e.props.excludeTimes||e.props.includeTimes||e.props.filterTime)&&mn(t,e.props)})),_t(Nt(e),"liClasses",(function(t){var n=["react-datepicker__time-list-item",e.props.timeClassName?e.props.timeClassName(t):void 0];return e.isSelectedTime(t)&&n.push("react-datepicker__time-list-item--selected"),e.isDisabledTime(t)&&n.push("react-datepicker__time-list-item--disabled"),e.props.injectTimes&&(60*Ie.default(t)+Te.default(t))%e.props.intervals!=0&&n.push("react-datepicker__time-list-item--injected"),n.join(" ")})),_t(Nt(e),"handleOnKeyDown",(function(t,n){" "===t.key&&(t.preventDefault(),t.key="Enter"),"ArrowUp"!==t.key&&"ArrowLeft"!==t.key||!t.target.previousSibling||(t.preventDefault(),t.target.previousSibling.focus()),"ArrowDown"!==t.key&&"ArrowRight"!==t.key||!t.target.nextSibling||(t.preventDefault(),t.target.nextSibling.focus()),"Enter"===t.key&&e.handleClick(n),e.props.handleOnKeyDown(t)})),_t(Nt(e),"renderTimes",(function(){for(var t,n=[],r=e.props.format?e.props.format:"p",a=e.props.intervals,o=e.props.selected||e.props.openToDate||Ft(),i=(t=o,Xe.default(t)),s=e.props.injectTimes&&e.props.injectTimes.sort((function(e,t){return e-t})),u=60*function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}(o),l=u/a,c=0;c<l;c++){var f=ve.default(i,c*a);if(n.push(f),s){var d=Sn(i,f,c,a,s);n=n.concat(d)}}var h=n.reduce((function(e,t){return t.getTime()<=o.getTime()?t:e}),n[0]);return n.map((function(t,n){return fe.default.createElement("li",{key:n,onClick:e.handleClick.bind(Nt(e),t),className:e.liClasses(t),ref:function(n){t===h&&(e.centerLi=n)},onKeyDown:function(n){e.handleOnKeyDown(n,t)},tabIndex:t===h?0:-1,role:"option","aria-selected":e.isSelectedTime(t)?"true":void 0,"aria-disabled":e.isDisabledTime(t)?"true":void 0},zt(t,r,e.props.locale))}))})),e}return Ct(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var e=this,t=this.state.height;return fe.default.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},fe.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(t){e.header=t}},fe.default.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),fe.default.createElement("div",{className:"react-datepicker__time"},fe.default.createElement("div",{className:"react-datepicker__time-box"},fe.default.createElement("ul",{className:"react-datepicker__time-list",ref:function(t){e.list=t},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}(fe.default.Component);_t(Xn,"calcCenterPosition",(function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)}));var Kn=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"YEAR_REFS",It(Array(r.props.yearItemNumber)).map((function(){return fe.default.createRef()}))),_t(Nt(r),"isDisabled",(function(e){return an(e,r.props)})),_t(Nt(r),"isExcluded",(function(e){return on(e,r.props)})),_t(Nt(r),"selectingDate",(function(){var e;return null!==(e=r.props.selectingDate)&&void 0!==e?e:r.props.preSelection})),_t(Nt(r),"updateFocusOnPaginate",(function(e){var t=function(){this.YEAR_REFS[e].current.focus()}.bind(Nt(r));window.requestAnimationFrame(t)})),_t(Nt(r),"handleYearClick",(function(e,t){r.props.onDayClick&&r.props.onDayClick(e,t)})),_t(Nt(r),"handleYearNavigation",(function(e,t){var n=r.props,a=n.date,o=n.yearItemNumber,i=En(a,o).startPeriod;r.isDisabled(t)||r.isExcluded(t)||(r.props.setPreSelection(t),e-i==-1?r.updateFocusOnPaginate(o-1):e-i===o?r.updateFocusOnPaginate(0):r.YEAR_REFS[e-i].current.focus())})),_t(Nt(r),"isSameDay",(function(e,t){return Jt(e,t)})),_t(Nt(r),"isCurrentYear",(function(e){return e===Pe.default(Ft())})),_t(Nt(r),"isRangeStart",(function(e){return r.props.startDate&&r.props.endDate&&Qt(Ve.default(Ft(),e),r.props.startDate)})),_t(Nt(r),"isRangeEnd",(function(e){return r.props.startDate&&r.props.endDate&&Qt(Ve.default(Ft(),e),r.props.endDate)})),_t(Nt(r),"isInRange",(function(e){return cn(e,r.props.startDate,r.props.endDate)})),_t(Nt(r),"isInSelectingRange",(function(e){var t=r.props,n=t.selectsStart,a=t.selectsEnd,o=t.selectsRange,i=t.startDate,s=t.endDate;return!(!(n||a||o)||!r.selectingDate())&&(n&&s?cn(e,r.selectingDate(),s):(a&&i||!(!o||!i||s))&&cn(e,i,r.selectingDate()))})),_t(Nt(r),"isSelectingRangeStart",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.startDate,a=t.selectsStart;return Qt(Ve.default(Ft(),e),a?r.selectingDate():n)})),_t(Nt(r),"isSelectingRangeEnd",(function(e){if(!r.isInSelectingRange(e))return!1;var t=r.props,n=t.endDate,a=t.selectsEnd,o=t.selectsRange;return Qt(Ve.default(Ft(),e),a||o?r.selectingDate():n)})),_t(Nt(r),"isKeyboardSelected",(function(e){var t=Yt(Ve.default(r.props.date,e));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Jt(t,Yt(r.props.selected))&&Jt(t,Yt(r.props.preSelection))})),_t(Nt(r),"onYearClick",(function(e,t){var n=r.props.date;r.handleYearClick(Yt(Ve.default(n,t)),e)})),_t(Nt(r),"onYearKeyDown",(function(e,t){var n=e.key;if(!r.props.disabledKeyboardNavigation)switch(n){case"Enter":r.onYearClick(e,t),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(t+1,Ce.default(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(t-1,Ee.default(r.props.preSelection,1))}})),_t(Nt(r),"getYearClassNames",(function(e){var t=r.props,n=t.minDate,a=t.maxDate,o=t.selected,i=t.excludeDates,s=t.includeDates,u=t.filterDate;return de.default("react-datepicker__year-text",{"react-datepicker__year-text--selected":e===Pe.default(o),"react-datepicker__year-text--disabled":(n||a||i||s||u)&&fn(e,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(e),"react-datepicker__year-text--range-start":r.isRangeStart(e),"react-datepicker__year-text--range-end":r.isRangeEnd(e),"react-datepicker__year-text--in-range":r.isInRange(e),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(e),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(e),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(e),"react-datepicker__year-text--today":r.isCurrentYear(e)})})),_t(Nt(r),"getYearTabIndex",(function(e){return r.props.disabledKeyboardNavigation?"-1":e===Pe.default(r.props.preSelection)?"0":"-1"})),_t(Nt(r),"getYearContainerClassNames",(function(){var e=r.props,t=e.selectingDate,n=e.selectsStart,a=e.selectsEnd,o=e.selectsRange;return de.default("react-datepicker__year",{"react-datepicker__year--selecting-range":t&&(n||a||o)})})),_t(Nt(r),"getYearContent",(function(e){return r.props.renderYearContent?r.props.renderYearContent(e):e})),r}return Ct(n,[{key:"render",value:function(){for(var e=this,t=[],n=this.props,r=n.date,a=n.yearItemNumber,o=n.onYearMouseEnter,i=n.onYearMouseLeave,s=En(r,a),u=s.startPeriod,l=s.endPeriod,c=function(n){t.push(fe.default.createElement("div",{ref:e.YEAR_REFS[n-u],onClick:function(t){e.onYearClick(t,n)},onKeyDown:function(t){e.onYearKeyDown(t,n)},tabIndex:e.getYearTabIndex(n),className:e.getYearClassNames(n),onMouseEnter:function(e){return o(e,n)},onMouseLeave:function(e){return i(e,n)},key:n,"aria-current":e.isCurrentYear(n)?"date":void 0},e.getYearContent(n)))},f=u;f<=l;f++)c(f);return fe.default.createElement("div",{className:this.getYearContainerClassNames()},fe.default.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),n}(fe.default.Component),Jn=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"onTimeChange",(function(e){r.setState({time:e});var t=r.props.date,n=t instanceof Date&&!isNaN(t)?t:new Date;n.setHours(e.split(":")[0]),n.setMinutes(e.split(":")[1]),r.props.onChange(n)})),_t(Nt(r),"renderTimeInput",(function(){var e=r.state.time,t=r.props,n=t.date,a=t.timeString,o=t.customTimeInput;return o?fe.default.cloneElement(o,{date:n,value:e,onChange:r.onTimeChange}):fe.default.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:e,onChange:function(e){r.onTimeChange(e.target.value||a)}})})),r.state={time:r.props.timeString},r}return Ct(n,[{key:"render",value:function(){return fe.default.createElement("div",{className:"react-datepicker__input-time-container"},fe.default.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),fe.default.createElement("div",{className:"react-datepicker-time__input-container"},fe.default.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.timeString!==t.time?{time:e.timeString}:null}}]),n}(fe.default.Component);function Zn(e){var t=e.className,n=e.children,r=e.showPopperArrow,a=e.arrowProps,o=void 0===a?{}:a;return fe.default.createElement("div",{className:t},r&&fe.default.createElement("div",kt({className:"react-datepicker__triangle"},o)),n)}var $n=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],er=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"handleClickOutside",(function(e){r.props.onClickOutside(e)})),_t(Nt(r),"setClickOutsideRef",(function(){return r.containerRef.current})),_t(Nt(r),"handleDropdownFocus",(function(e){(function(){var e=((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className||"").split(/\s+/);return $n.some((function(t){return e.indexOf(t)>=0}))})(e.target)&&r.props.onDropdownFocus()})),_t(Nt(r),"getDateInView",(function(){var e=r.props,t=e.preSelection,n=e.selected,a=e.openToDate,o=xn(r.props),i=Cn(r.props),s=Ft();return a||n||t||(o&&lt.default(s,o)?o:i&&ut.default(s,i)?i:s)})),_t(Nt(r),"increaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:we.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),_t(Nt(r),"decreaseMonth",(function(){r.setState((function(e){var t=e.date;return{date:Se.default(t,1)}}),(function(){return r.handleMonthChange(r.state.date)}))})),_t(Nt(r),"handleDayClick",(function(e,t,n){r.props.onSelect(e,t,n),r.props.setPreSelection&&r.props.setPreSelection(e)})),_t(Nt(r),"handleDayMouseEnter",(function(e){r.setState({selectingDate:e}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(e)})),_t(Nt(r),"handleMonthMouseLeave",(function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()})),_t(Nt(r),"handleYearMouseEnter",(function(e,t){r.setState({selectingDate:Ve.default(Ft(),t)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(e,t)})),_t(Nt(r),"handleYearMouseLeave",(function(e,t){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(e,t)})),_t(Nt(r),"handleYearChange",(function(e){r.props.onYearChange&&(r.props.onYearChange(e),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),_t(Nt(r),"handleMonthChange",(function(e){r.handleCustomMonthChange(e),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(e),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(e)})),_t(Nt(r),"handleCustomMonthChange",(function(e){r.props.onMonthChange&&(r.props.onMonthChange(e),r.setState({isRenderAriaLiveMessage:!0}))})),_t(Nt(r),"handleMonthYearChange",(function(e){r.handleYearChange(e),r.handleMonthChange(e)})),_t(Nt(r),"changeYear",(function(e){r.setState((function(t){var n=t.date;return{date:Ve.default(n,e)}}),(function(){return r.handleYearChange(r.state.date)}))})),_t(Nt(r),"changeMonth",(function(e){r.setState((function(t){var n=t.date;return{date:Ue.default(n,e)}}),(function(){return r.handleMonthChange(r.state.date)}))})),_t(Nt(r),"changeMonthYear",(function(e){r.setState((function(t){var n=t.date;return{date:Ve.default(Ue.default(n,Ae.default(e)),Pe.default(e))}}),(function(){return r.handleMonthYearChange(r.state.date)}))})),_t(Nt(r),"header",(function(){var e=Vt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,r.props.locale,r.props.calendarStartDay),t=[];return r.props.showWeekNumbers&&t.push(fe.default.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),t.concat([0,1,2,3,4,5,6].map((function(t){var n=ye.default(e,t),a=r.formatWeekday(n,r.props.locale),o=r.props.weekDayClassName?r.props.weekDayClassName(n):void 0;return fe.default.createElement("div",{key:t,className:de.default("react-datepicker__day-name",o)},a)})))})),_t(Nt(r),"formatWeekday",(function(e,t){return r.props.formatWeekDay?function(e,t,n){return t(zt(e,"EEEE",n))}(e,r.props.formatWeekDay,t):r.props.useWeekdaysShort?function(e,t){return zt(e,"EEE",t)}(e,t):function(e,t){return zt(e,"EEEEEE",t)}(e,t)})),_t(Nt(r),"decreaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ee.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),_t(Nt(r),"clearSelectingDate",(function(){r.setState({selectingDate:null})})),_t(Nt(r),"renderPreviousButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=bn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,a=void 0===r?Pt:r,o=En(Yt(Ee.default(e,a)),a).endPeriod,i=n&&Pe.default(n);return i&&i>o||!1}(r.state.date,r.props);break;default:e=gn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--previous"],n=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.decreaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--previous--disabled"),n=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,i=o.previousMonthButtonLabel,s=o.previousYearButtonLabel,u=r.props,l=u.previousMonthAriaLabel,c=void 0===l?"string"==typeof i?i:"Previous Month":l,f=u.previousYearAriaLabel,d=void 0===f?"string"==typeof s?s:"Previous Year":f;return fe.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?d:c},fe.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},a?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}})),_t(Nt(r),"increaseYear",(function(){r.setState((function(e){var t=e.date;return{date:Ce.default(t,r.props.showYearPicker?r.props.yearItemNumber:1)}}),(function(){return r.handleYearChange(r.state.date)}))})),_t(Nt(r),"renderNextButton",(function(){if(!r.props.renderCustomHeader){var e;switch(!0){case r.props.showMonthYearPicker:e=wn(r.state.date,r.props);break;case r.props.showYearPicker:e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,a=void 0===r?Pt:r,o=En(Ce.default(e,a),a).startPeriod,i=n&&Pe.default(n);return i&&i<o||!1}(r.state.date,r.props);break;default:e=yn(r.state.date,r.props)}if((r.props.forceShowMonthNavigation||r.props.showDisabledMonthNavigation||!e)&&!r.props.showTimeSelectOnly){var t=["react-datepicker__navigation","react-datepicker__navigation--next"];r.props.showTimeSelect&&t.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&t.push("react-datepicker__navigation--next--with-today-button");var n=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(n=r.increaseYear),e&&r.props.showDisabledMonthNavigation&&(t.push("react-datepicker__navigation--next--disabled"),n=null);var a=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,o=r.props,i=o.nextMonthButtonLabel,s=o.nextYearButtonLabel,u=r.props,l=u.nextMonthAriaLabel,c=void 0===l?"string"==typeof i?i:"Next Month":l,f=u.nextYearAriaLabel,d=void 0===f?"string"==typeof s?s:"Next Year":f;return fe.default.createElement("button",{type:"button",className:t.join(" "),onClick:n,onKeyDown:r.props.handleOnKeyDown,"aria-label":a?d:c},fe.default.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},a?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}})),_t(Nt(r),"renderCurrentMonth",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.state.date,t=["react-datepicker__current-month"];return r.props.showYearDropdown&&t.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&t.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&t.push("react-datepicker__current-month--hasMonthYearDropdown"),fe.default.createElement("div",{className:t.join(" ")},zt(e,r.props.dateFormat,r.props.locale))})),_t(Nt(r),"renderYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showYearDropdown&&!e)return fe.default.createElement(Dn,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:Pe.default(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),_t(Nt(r),"renderMonthDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthDropdown&&!e)return fe.default.createElement(Rn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:Ae.default(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})})),_t(Nt(r),"renderMonthYearDropdown",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.props.showMonthYearDropdown&&!e)return fe.default.createElement(Bn,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})})),_t(Nt(r),"handleTodayButtonClick",(function(e){r.props.onSelect(qt(),e),r.props.setPreSelection&&r.props.setPreSelection(qt())})),_t(Nt(r),"renderTodayButton",(function(){if(r.props.todayButton&&!r.props.showTimeSelectOnly)return fe.default.createElement("div",{className:"react-datepicker__today-button",onClick:function(e){return r.handleTodayButtonClick(e)}},r.props.todayButton)})),_t(Nt(r),"renderDefaultHeader",(function(e){var t=e.monthDate,n=e.i;return fe.default.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(t),fe.default.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(0!==n),r.renderMonthYearDropdown(0!==n),r.renderYearDropdown(0!==n)),fe.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),_t(Nt(r),"renderCustomHeader",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.monthDate,n=e.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var a=gn(r.state.date,r.props),o=yn(r.state.date,r.props),i=bn(r.state.date,r.props),s=wn(r.state.date,r.props),u=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return fe.default.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(yt(yt({},r.state),{},{customHeaderCount:n,monthDate:t,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:a,nextMonthButtonDisabled:o,prevYearButtonDisabled:i,nextYearButtonDisabled:s})),u&&fe.default.createElement("div",{className:"react-datepicker__day-names"},r.header(t)))})),_t(Nt(r),"renderYearHeader",(function(){var e=r.state.date,t=r.props,n=t.showYearPicker,a=En(e,t.yearItemNumber),o=a.startPeriod,i=a.endPeriod;return fe.default.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},n?"".concat(o," - ").concat(i):Pe.default(e))})),_t(Nt(r),"renderHeader",(function(e){switch(!0){case void 0!==r.props.renderCustomHeader:return r.renderCustomHeader(e);case r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker:return r.renderYearHeader(e);default:return r.renderDefaultHeader(e)}})),_t(Nt(r),"renderMonths",(function(){var e;if(!r.props.showTimeSelectOnly&&!r.props.showYearPicker){for(var t=[],n=r.props.showPreviousMonths?r.props.monthsShown-1:0,a=Se.default(r.state.date,n),o=null!==(e=r.props.monthSelectedIn)&&void 0!==e?e:n,i=0;i<r.props.monthsShown;++i){var s=i-o+n,u=we.default(a,s),l="month-".concat(i),c=i<r.props.monthsShown-1,f=i>0;t.push(fe.default.createElement("div",{key:l,ref:function(e){r.monthContainer=e},className:"react-datepicker__month-container"},r.renderHeader({monthDate:u,i:i}),fe.default.createElement(Qn,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:u,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:i,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:c,monthShowsDuplicateDaysStart:f})))}return t}})),_t(Nt(r),"renderYears",(function(){if(!r.props.showTimeSelectOnly)return r.props.showYearPicker?fe.default.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader(),fe.default.createElement(Kn,kt({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave}))):void 0})),_t(Nt(r),"renderTimeSection",(function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return fe.default.createElement(Xn,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})})),_t(Nt(r),"renderInputTimeSection",(function(){var e=new Date(r.props.selected),t=Bt(e)&&Boolean(r.props.selected)?"".concat(Mn(e.getHours()),":").concat(Mn(e.getMinutes())):"";if(r.props.showTimeInput)return fe.default.createElement(Jn,{date:e,timeString:t,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})})),_t(Nt(r),"renderAriaLiveRegion",(function(){var e,t=En(r.state.date,r.props.yearItemNumber),n=t.startPeriod,a=t.endPeriod;return e=r.props.showYearPicker?"".concat(n," - ").concat(a):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Pe.default(r.state.date):"".concat(nn(Ae.default(r.state.date),r.props.locale)," ").concat(Pe.default(r.state.date)),fe.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&e)})),_t(Nt(r),"renderChildren",(function(){if(r.props.children)return fe.default.createElement("div",{className:"react-datepicker__children-container"},r.props.children)})),r.containerRef=fe.default.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return Ct(n,[{key:"componentDidMount",value:function(){var e=this;this.props.showTimeSelect&&(this.assignMonthContainer=void e.setState({monthContainer:e.monthContainer}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.preSelection||Jt(this.props.preSelection,e.preSelection)&&this.props.monthSelectedIn===e.monthSelectedIn)this.props.openToDate&&!Jt(this.props.openToDate,e.openToDate)&&this.setState({date:this.props.openToDate});else{var n=!Xt(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return n&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var e=this.props.container||Zn;return fe.default.createElement("div",{style:{display:"contents"},ref:this.containerRef},fe.default.createElement(e,{className:de.default("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Pt}}}]),n}(fe.default.Component),tr=function(e){var t=e.icon,n=e.className,r=void 0===n?"":n,a=e.onClick,o="react-datepicker__calendar-icon";return fe.default.isValidElement(t)?fe.default.cloneElement(t,{className:"".concat(t.props.className||""," ").concat(o," ").concat(r),onClick:function(e){"function"==typeof t.props.onClick&&t.props.onClick(e),"function"==typeof a&&a(e)}}):"string"==typeof t?fe.default.createElement("i",{className:"".concat(o," ").concat(t," ").concat(r),"aria-hidden":"true",onClick:a}):fe.default.createElement("svg",{className:"".concat(o," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:a},fe.default.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},nr=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),(r=t.call(this,e)).el=document.createElement("div"),r}return Ct(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return mt.default.createPortal(this.props.children,this.el)}}]),n}(fe.default.Component),rr=function(e){return!e.disabled&&-1!==e.tabIndex},ar=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"getTabChildren",(function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(rr)})),_t(Nt(r),"handleFocusStart",(function(){var e=r.getTabChildren();e&&e.length>1&&e[e.length-1].focus()})),_t(Nt(r),"handleFocusEnd",(function(){var e=r.getTabChildren();e&&e.length>1&&e[0].focus()})),r.tabLoopRef=fe.default.createRef(),r}return Ct(n,[{key:"render",value:function(){return this.props.enableTabLoop?fe.default.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},fe.default.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,fe.default.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(fe.default.Component),or=function(e){St(n,e);var t=Tt(n);function n(){return wt(this,n),t.apply(this,arguments)}return Ct(n,[{key:"render",value:function(){var e,t=this.props,n=t.className,r=t.wrapperClassName,a=t.hidePopper,o=t.popperComponent,i=t.popperModifiers,s=t.popperPlacement,u=t.popperProps,l=t.targetComponent,c=t.enableTabLoop,f=t.popperOnKeyDown,d=t.portalId,h=t.portalHost;if(!a){var p=de.default("react-datepicker-popper",n);e=fe.default.createElement(ue.Popper,kt({modifiers:i,placement:s},u),(function(e){var t=e.ref,n=e.style,r=e.placement,a=e.arrowProps;return fe.default.createElement(ar,{enableTabLoop:c},fe.default.createElement("div",{ref:t,style:n,className:p,"data-placement":r,onKeyDown:f},fe.default.cloneElement(o,{arrowProps:a})))}))}this.props.popperContainer&&(e=fe.default.createElement(this.props.popperContainer,{},e)),d&&!a&&(e=fe.default.createElement(nr,{portalId:d,portalHost:h},e));var m=de.default("react-datepicker-wrapper",r);return fe.default.createElement(ue.Manager,{className:"react-datepicker-manager"},fe.default.createElement(ue.Reference,null,(function(e){var t=e.ref;return fe.default.createElement("div",{ref:t,className:m},l)})),e)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(fe.default.Component),ir="react-datepicker-ignore-onclickoutside",sr=pt.default(er),ur="Date input not valid.",lr=function(e){St(n,e);var t=Tt(n);function n(e){var r;return wt(this,n),_t(Nt(r=t.call(this,e)),"getPreSelection",(function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Ft()})),_t(Nt(r),"modifyHolidays",(function(){var e;return null===(e=r.props.holidays)||void 0===e?void 0:e.reduce((function(e,t){var n=new Date(t.date);return pe.default(n)?[].concat(It(e),[yt(yt({},t),{},{date:n})]):e}),[])})),_t(Nt(r),"calcInitialState",(function(){var e,t=r.getPreSelection(),n=xn(r.props),a=Cn(r.props),o=n&&lt.default(t,Xe.default(n))?n:a&&ut.default(t,et.default(a))?a:t;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:null!==(e=r.props.selectsRange?r.props.startDate:r.props.selected)&&void 0!==e?e:o,highlightDates:_n(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),_t(Nt(r),"clearPreventFocusTimeout",(function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)})),_t(Nt(r),"setFocus",(function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})})),_t(Nt(r),"setBlur",(function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()})),_t(Nt(r),"setOpen",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.setState({open:e,preSelection:e&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:fr},(function(){e||r.setState((function(e){return{focused:!!t&&e.focused}}),(function(){!t&&r.setBlur(),r.setState({inputValue:null})}))}))})),_t(Nt(r),"inputOk",(function(){return he.default(r.state.preSelection)})),_t(Nt(r),"isCalendarOpen",(function(){return void 0===r.props.open?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open})),_t(Nt(r),"handleFocus",(function(e){r.state.preventFocus||(r.props.onFocus(e),r.props.preventOpenOnFocus||r.props.readOnly||r.setOpen(!0)),r.setState({focused:!0})})),_t(Nt(r),"sendFocusBackToInput",(function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},(function(){r.preventFocusTimeout=setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))}))})),_t(Nt(r),"cancelFocusInput",(function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null})),_t(Nt(r),"deferFocusInput",(function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout((function(){return r.setFocus()}),1)})),_t(Nt(r),"handleDropdownFocus",(function(){r.cancelFocusInput()})),_t(Nt(r),"handleBlur",(function(e){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(e),r.setState({focused:!1})})),_t(Nt(r),"handleCalendarClickOutside",(function(e){r.props.inline||r.setOpen(!1),r.props.onClickOutside(e),r.props.withPortal&&e.preventDefault()})),_t(Nt(r),"handleChange",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0];if(!r.props.onChangeRaw||(r.props.onChangeRaw.apply(Nt(r),t),"function"==typeof a.isDefaultPrevented&&!a.isDefaultPrevented())){r.setState({inputValue:a.target.value,lastPreSelectChange:cr});var o,i,s,u,l,c,f,d,h=(o=a.target.value,i=r.props.dateFormat,s=r.props.locale,u=r.props.strictParsing,l=r.props.minDate,c=null,f=tn(s)||tn(en()),d=!0,Array.isArray(i)?(i.forEach((function(e){var t=dt.default(o,e,new Date,{locale:f});u&&(d=Bt(t,l)&&o===zt(t,e,s)),Bt(t,l)&&d&&(c=t)})),c):(c=dt.default(o,i,new Date,{locale:f}),u?d=Bt(c)&&o===zt(c,i,s):Bt(c)||(i=i.match(Ot).map((function(e){var t=e[0];return"p"===t||"P"===t?f?(0,Rt[t])(e,f.formatLong):t:e})).join(""),o.length>0&&(c=dt.default(o,i.slice(0,o.length),new Date)),Bt(c)||(c=new Date(o))),Bt(c)&&d?c:null));r.props.showTimeSelectOnly&&r.props.selected&&h&&!Jt(h,r.props.selected)&&(h=vt.default(r.props.selected,{hours:Ie.default(h),minutes:Te.default(h),seconds:Ne.default(h)})),!h&&a.target.value||(r.props.showWeekPicker&&(h=Vt(h,r.props.locale,r.props.calendarStartDay)),r.setSelected(h,a,!0))}})),_t(Nt(r),"handleSelect",(function(e,t,n){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(t),r.props.showWeekPicker&&(e=Vt(e,r.props.locale,r.props.calendarStartDay)),r.setSelected(e,t,!1,n),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(e);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var a=r.props,o=a.startDate,i=a.endDate;!o||i||lt.default(e,o)||r.setOpen(!1)}})),_t(Nt(r),"setSelected",(function(e,t,n,a){var o=e;if(r.props.showYearPicker){if(null!==o&&fn(Pe.default(o),r.props))return}else if(r.props.showMonthYearPicker){if(null!==o&&sn(o,r.props))return}else if(null!==o&&an(o,r.props))return;var i=r.props,s=i.onChange,u=i.selectsRange,l=i.startDate,c=i.endDate;if(!Zt(r.props.selected,o)||r.props.allowSameDay||u)if(null!==o&&(!r.props.selected||n&&(r.props.showTimeSelect||r.props.showTimeSelectOnly||r.props.showTimeInput)||(o=Wt(o,{hour:Ie.default(r.props.selected),minute:Te.default(r.props.selected),second:Ne.default(r.props.selected)})),r.props.inline||r.setState({preSelection:o}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:a})),u){var f=l&&c;l||c?l&&!c&&(lt.default(o,l)?s([o,null],t):s([l,o],t)):s([o,null],t),f&&s([o,null],t)}else s(o,t);n||(r.props.onSelect(o,t),r.setState({inputValue:null}))})),_t(Nt(r),"setPreSelection",(function(e){var t=void 0!==r.props.minDate,n=void 0!==r.props.maxDate,a=!0;if(e){r.props.showWeekPicker&&(e=Vt(e,r.props.locale,r.props.calendarStartDay));var o=Xe.default(e);if(t&&n)a=$t(e,r.props.minDate,r.props.maxDate);else if(t){var i=Xe.default(r.props.minDate);a=ut.default(e,i)||Zt(o,i)}else if(n){var s=et.default(r.props.maxDate);a=lt.default(e,s)||Zt(o,s)}}a&&r.setState({preSelection:e})})),_t(Nt(r),"toggleCalendar",(function(){r.setOpen(!r.state.open)})),_t(Nt(r),"handleTimeChange",(function(e){var t=r.props.selected?r.props.selected:r.getPreSelection(),n=r.props.selected?e:Wt(t,{hour:Ie.default(e),minute:Te.default(e)});r.setState({preSelection:n}),r.props.onChange(n),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})})),_t(Nt(r),"onInputClick",(function(){r.props.disabled||r.props.readOnly||r.setOpen(!0),r.props.onInputClick()})),_t(Nt(r),"onInputKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key;if(r.state.open||r.props.inline||r.props.preventOpenOnFocus){if(r.state.open){if("ArrowDown"===t||"ArrowUp"===t){e.preventDefault();var n=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',a=r.calendar.componentNode&&r.calendar.componentNode.querySelector(n);return void(a&&a.focus({preventScroll:!0}))}var o=Ft(r.state.preSelection);"Enter"===t?(e.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===fr?(r.handleSelect(o,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(o)):r.setOpen(!1)):"Escape"===t?(e.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):"Tab"===t&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ur})}}else"ArrowDown"!==t&&"ArrowUp"!==t&&"Enter"!==t||r.onInputClick()})),_t(Nt(r),"onPortalKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.setState({preventFocus:!0},(function(){r.setOpen(!1),setTimeout((function(){r.setFocus(),r.setState({preventFocus:!1})}))})))})),_t(Nt(r),"onDayKeyDown",(function(e){r.props.onKeyDown(e);var t=e.key,n=Ft(r.state.preSelection);if("Enter"===t)e.preventDefault(),r.handleSelect(n,e),!r.props.shouldCloseOnSelect&&r.setPreSelection(n);else if("Escape"===t)e.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:ur});else if(!r.props.disabledKeyboardNavigation){var a;switch(t){case"ArrowLeft":a=r.props.showWeekPicker?ke.default(n,1):_e.default(n,1);break;case"ArrowRight":a=r.props.showWeekPicker?be.default(n,1):ye.default(n,1);break;case"ArrowUp":a=ke.default(n,1);break;case"ArrowDown":a=be.default(n,1);break;case"PageUp":a=Se.default(n,1);break;case"PageDown":a=we.default(n,1);break;case"Home":a=Ee.default(n,1);break;case"End":a=Ce.default(n,1);break;default:a=null}if(!a)return void(r.props.onInputError&&r.props.onInputError({code:1,msg:ur}));if(e.preventDefault(),r.setState({lastPreSelectChange:fr}),r.props.adjustDateOnChange&&r.setSelected(a),r.setPreSelection(a),r.props.inline){var o=Ae.default(n),i=Ae.default(a),s=Pe.default(n),u=Pe.default(a);o!==i||s!==u?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}})),_t(Nt(r),"onPopperKeyDown",(function(e){"Escape"===e.key&&(e.preventDefault(),r.sendFocusBackToInput())})),_t(Nt(r),"onClearClick",(function(e){e&&e.preventDefault&&e.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],e):r.props.onChange(null,e),r.setState({inputValue:null})})),_t(Nt(r),"clear",(function(){r.onClearClick()})),_t(Nt(r),"onScroll",(function(e){"boolean"==typeof r.props.closeOnScroll&&r.props.closeOnScroll?e.target!==document&&e.target!==document.documentElement&&e.target!==document.body||r.setOpen(!1):"function"==typeof r.props.closeOnScroll&&r.props.closeOnScroll(e)&&r.setOpen(!1)})),_t(Nt(r),"renderCalendar",(function(){return r.props.inline||r.isCalendarOpen()?fe.default.createElement(sr,{ref:function(e){r.calendar=e},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:kn(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:ir,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,showPopperArrow:r.props.showPopperArrow,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection},r.props.children):null})),_t(Nt(r),"renderAriaLiveRegion",(function(){var e,t=r.props,n=t.dateFormat,a=t.locale,o=r.props.showTimeInput||r.props.showTimeSelect?"PPPPp":"PPPP";return e=r.props.selectsRange?"Selected start date: ".concat(Ut(r.props.startDate,{dateFormat:o,locale:a}),". ").concat(r.props.endDate?"End date: "+Ut(r.props.endDate,{dateFormat:o,locale:a}):""):r.props.showTimeSelectOnly?"Selected time: ".concat(Ut(r.props.selected,{dateFormat:n,locale:a})):r.props.showYearPicker?"Selected year: ".concat(Ut(r.props.selected,{dateFormat:"yyyy",locale:a})):r.props.showMonthYearPicker?"Selected month: ".concat(Ut(r.props.selected,{dateFormat:"MMMM yyyy",locale:a})):r.props.showQuarterYearPicker?"Selected quarter: ".concat(Ut(r.props.selected,{dateFormat:"yyyy, QQQ",locale:a})):"Selected date: ".concat(Ut(r.props.selected,{dateFormat:o,locale:a})),fe.default.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},e)})),_t(Nt(r),"renderDateInput",(function(){var e,t=de.default(r.props.className,_t({},ir,r.state.open)),n=r.props.customInput||fe.default.createElement("input",{type:"text"}),a=r.props.customInputRef||"ref",o="string"==typeof r.props.value?r.props.value:"string"==typeof r.state.inputValue?r.state.inputValue:r.props.selectsRange?function(e,t,n){if(!e)return"";var r=Ut(e,n),a=t?Ut(t,n):"";return"".concat(r," - ").concat(a)}(r.props.startDate,r.props.endDate,r.props):Ut(r.props.selected,r.props);return fe.default.cloneElement(n,(_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(e={},a,(function(e){r.input=e})),"value",o),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(e,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",de.default(n.props.className,t)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),_t(_t(_t(e,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))})),_t(Nt(r),"renderClearButton",(function(){var e=r.props,t=e.isClearable,n=e.disabled,a=e.selected,o=e.startDate,i=e.endDate,s=e.clearButtonTitle,u=e.clearButtonClassName,l=void 0===u?"":u,c=e.ariaLabelClose,f=void 0===c?"Close":c;return!t||null==a&&null==o&&null==i?null:fe.default.createElement("button",{type:"button",className:de.default("react-datepicker__close-icon",l,{"react-datepicker__close-icon--disabled":n}),disabled:n,"aria-label":f,onClick:r.onClearClick,title:s,tabIndex:-1})})),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return Ct(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(e,t){var n,r;e.inline&&(n=e.selected,r=this.props.selected,n&&r?Ae.default(n)!==Ae.default(r)||Pe.default(n)!==Pe.default(r):n!==r)&&this.setPreSelection(this.props.selected),void 0!==this.state.monthSelectedIn&&e.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),e.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:_n(this.props.highlightDates)}),t.focused||Zt(e.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(!1===t.open&&!0===this.state.open&&this.props.onCalendarOpen(),!0===t.open&&!1===this.state.open&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var e=this.props,t=e.showIcon,n=e.icon,r=e.calendarIconClassname,a=e.toggleCalendarOnIconClick,o=this.state.open;return fe.default.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&fe.default.createElement(tr,kt({icon:n,className:"".concat(r," ").concat(o&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var e=this.renderCalendar();if(this.props.inline)return e;if(this.props.withPortal){var t=this.state.open?fe.default.createElement(ar,{enableTabLoop:this.props.enableTabLoop},fe.default.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},e)):null;return this.state.open&&this.props.portalId&&(t=fe.default.createElement(nr,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),fe.default.createElement("div",null,this.renderInputContainer(),t)}return fe.default.createElement(or,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:e,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Pt,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(fe.default.Component),cr="input",fr="navigate";e.CalendarContainer=Zn,e.default=lr,e.getDefaultLocale=en,e.registerLocale=function(e,t){var n="undefined"!=typeof window?window:globalThis;n.__localeData__||(n.__localeData__={}),n.__localeData__[e]=t},e.setDefaultLocale=function(e){("undefined"!=typeof window?window:globalThis).__localeId__=e},Object.defineProperty(e,"__esModule",{value:!0})}(t,n(5043),n(5173),n(8139),n(9713),n(97),n(4860),n(9333),n(7487),n(5027),n(6265),n(2215),n(6337),n(8926),n(486),n(1806),n(5622),n(9436),n(8885),n(6340),n(7124),n(3306),n(743),n(9855),n(216),n(1551),n(1845),n(4974),n(8170),n(776),n(9952),n(7566),n(8224),n(8673),n(9730),n(9563),n(4489),n(9352),n(2672),n(7815),n(2312),n(618),n(7660),n(9566),n(3035),n(1251),n(2039),n(147),n(802),n(3515),n(1315),n(8643),n(6194),n(4561),n(9977),n(3274),n(2763),n(888),n(1794),n(4161),n(2547),n(7950),n(7099),n(2431))},2013:(e,t,n)=>{"use strict";e.exports=c;var r=n(6545).F,a=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(6779);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new i;return e.push(null)}n(6329)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new a("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},2039:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(8171),a=n(888),o=n(6191),i=n(8726);function s(e,t){var n,s,u,l,c,f,d,h;(0,i.A)(1,arguments);var p=(0,r.q)(),m=(0,o.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(f=c.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(d=p.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,a.default)(e),g=v.getDay(),y=6+(g<m?-7:0)-(g-m);return v.setDate(v.getDate()+y),v.setHours(23,59,59,999),v}},2058:(e,t,n)=>{"use strict";n.d(t,{ef:()=>o,lJ:()=>s,xM:()=>i});var r=["D","DD"],a=["YY","YYYY"];function o(e){return-1!==r.indexOf(e)}function i(e){return-1!==a.indexOf(e)}function s(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},2206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.default)(e);if(!n.length)return void t.preventDefault();var r=void 0,a=t.shiftKey,s=n[0],u=n[n.length-1],l=i();if(e===l){if(!a)return;r=u}u!==l||a||(r=s);s===l&&a&&(r=u);if(r)return t.preventDefault(),void r.focus();var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==c||"Chrome"==c[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var f=n.indexOf(l);f>-1&&(f+=a?-1:1);if("undefined"===typeof(r=n[f]))return t.preventDefault(),void(r=a?u:s).focus();t.preventDefault(),r.focus()};var r,a=n(4682),o=(r=a)&&r.__esModule?r:{default:r};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?i(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},2215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var s=n.getDate(),u=new Date(n.getTime());return u.setMonth(n.getMonth()+i+1,0),s>=u.getDate()?u:(n.setFullYear(u.getFullYear(),u.getMonth(),s),n)}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2285:e=>{var t,n,r=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,u=[],l=!1,c=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):c=-1,u.length&&d())}function d(){if(!l){var e=i(f);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||i(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},2312:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e);return t.setHours(0,0,0,0),t}},2330:(e,t,n)=>{"use strict";var r=n(5043);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),a=r[0].inst,c=r[1];return s((function(){a.value=n,a.getSnapshot=t,l(a)&&c({inst:a})}),[e,n,t]),i((function(){return l(a)&&c({inst:a}),e((function(){l(a)&&c({inst:a})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2390:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(r){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},2431:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(2284),a=n(888),o=n(8224),i=n(6191),s=n(8726);function u(e,t){if((0,s.A)(2,arguments),"object"!==(0,r.A)(t)||null===t)throw new RangeError("values parameter must be an object");var n=(0,a.default)(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=(0,o.default)(n,t.month)),null!=t.date&&n.setDate((0,i.A)(t.date)),null!=t.hours&&n.setHours((0,i.A)(t.hours)),null!=t.minutes&&n.setMinutes((0,i.A)(t.minutes)),null!=t.seconds&&n.setSeconds((0,i.A)(t.seconds)),null!=t.milliseconds&&n.setMilliseconds((0,i.A)(t.milliseconds)),n)}},2547:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IGNORE_CLASS_NAME:()=>p,default:()=>v});var r=n(5043),a=n(7950);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n))}var u,l,c=(void 0===u&&(u=0),function(){return++u}),f={},d={},h=["touchstart","touchmove"],p="ignore-react-onclickoutside";function m(e,t){var n={};return-1!==h.indexOf(t)&&l&&(n.passive=!e.props.preventDefault),n}const v=function(e,t){var n,u,h=e.displayName||e.name||"Component";return u=n=function(n){var u,p;function v(e){var r;return(r=n.call(this,e)||this).__outsideClickHandler=function(e){if("function"!==typeof r.__clickOutsideHandlerProp){var t=r.getInstance();if("function"!==typeof t.props.handleClickOutside){if("function"!==typeof t.handleClickOutside)throw new Error("WrappedComponent: "+h+" lacks a handleClickOutside(event) function for processing outside click events.");t.handleClickOutside(e)}else t.props.handleClickOutside(e)}else r.__clickOutsideHandlerProp(e)},r.__getComponentNode=function(){var e=r.getInstance();return t&&"function"===typeof t.setClickOutsideRef?t.setClickOutsideRef()(e):"function"===typeof e.setClickOutsideRef?e.setClickOutsideRef():(0,a.findDOMNode)(e)},r.enableOnClickOutside=function(){if("undefined"!==typeof document&&!d[r._uid]){"undefined"===typeof l&&(l=function(){if("undefined"!==typeof window&&"function"===typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};return window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),e}}()),d[r._uid]=!0;var e=r.props.eventTypes;e.forEach||(e=[e]),f[r._uid]=function(e){var t;null!==r.componentNode&&(r.initTimeStamp>e.timeStamp||(r.props.preventDefault&&e.preventDefault(),r.props.stopPropagation&&e.stopPropagation(),r.props.excludeScrollbar&&(t=e,document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY)||function(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&s(e,t,n))return!0;e=e.parentNode||e.host}return e}(e.composed&&e.composedPath&&e.composedPath().shift()||e.target,r.componentNode,r.props.outsideClickIgnoreClass)===document&&r.__outsideClickHandler(e)))},e.forEach((function(e){document.addEventListener(e,f[r._uid],m(i(r),e))}))}},r.disableOnClickOutside=function(){delete d[r._uid];var e=f[r._uid];if(e&&"undefined"!==typeof document){var t=r.props.eventTypes;t.forEach||(t=[t]),t.forEach((function(t){return document.removeEventListener(t,e,m(i(r),t))})),delete f[r._uid]}},r.getRef=function(e){return r.instanceRef=e},r._uid=c(),r.initTimeStamp=performance.now(),r}p=n,(u=v).prototype=Object.create(p.prototype),u.prototype.constructor=u,o(u,p);var g=v.prototype;return g.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t},g.componentDidMount=function(){if("undefined"!==typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"===typeof t.handleClickOutside&&(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!==typeof this.__clickOutsideHandlerProp))throw new Error("WrappedComponent: "+h+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),this.props.disableOnClickOutside||this.enableOnClickOutside()}},g.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},g.componentWillUnmount=function(){this.disableOnClickOutside()},g.render=function(){var t=this.props;t.excludeScrollbar;var n=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,(0,r.createElement)(e,n)},v}(r.Component),n.displayName="OnClickOutside("+h+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:p,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},u}},2550:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e).getTime(),i=(0,r.A)(t);return new Date(n+i)}},2637:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(888),a=n(8726),o=n(7451),i=n(6191),s=n(8171);function u(e,t){var n,u,l,c,f,d,h,p;(0,a.A)(1,arguments);var m=(0,r.default)(e),v=m.getUTCFullYear(),g=(0,s.q)(),y=(0,i.A)(null!==(n=null!==(u=null!==(l=null!==(c=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==c?c:null===t||void 0===t||null===(f=t.locale)||void 0===f||null===(d=f.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:g.firstWeekContainsDate)&&void 0!==u?u:null===(h=g.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(v+1,0,y),b.setUTCHours(0,0,0,0);var w=(0,o.A)(b,t),x=new Date(0);x.setUTCFullYear(v,0,y),x.setUTCHours(0,0,0,0);var C=(0,o.A)(x,t);return m.getTime()>=w.getTime()?v+1:m.getTime()>=C.getTime()?v:v-1}},2672:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}},2706:(e,t,n)=>{"use strict";n(7358)},2730:(e,t,n)=>{"use strict";var r=n(5043),a=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),C=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var A=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var P,O=Object.assign;function F(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var u="\n"+a[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case C:return"Portal";case S:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,_e=null,ke=null;function Se(e){if(e=ba(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=xa(t),Ce(e.stateNode,e.type,t))}}function Me(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ee(){if(_e){var e=_e,t=ke;if(ke=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ne(e,t){return e(t)}function Te(){}var Ie=!1;function je(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ne(e,t,n)}finally{Ie=!1,(null!==_e||null!==ke)&&(Te(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Le=!1;if(c)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(ce){Le=!1}function Re(e,t,n,r,a,o,i,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Pe=!1,Oe=null,Fe=!1,Be=null,ze={onError:function(e){Pe=!0,Oe=e}};function Ue(e,t,n,r,a,o,i,s,u){Pe=!1,Oe=null,Re.apply(ze,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(o(188))}function Ye(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return He(a),e;if(i===r)return He(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Ke=a.unstable_requestPaint,Je=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=ft(s):0!==(o&=i)&&(r=ft(o))}else 0!==(i=n&~a)?r=ft(i):0!==o&&(r=ft(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Ct,_t,kt,St,Mt=!1,Et=[],Nt=null,Tt=null,It=null,jt=new Map,Dt=new Map,Lt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Pt(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ot(e){var t=ya(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Mt=!1,null!==Nt&&Ft(Nt)&&(Nt=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),jt.forEach(Bt),Dt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Ut(Nt,e),null!==Tt&&Ut(Tt,e),null!==It&&Ut(It,e),jt.forEach(t),Dt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Lt.shift()}var Vt=w.ReactCurrentBatchConfig,Ht=!0;function Yt(e,t,n,r){var a=bt,o=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Vt.transition=o}}function Gt(e,t,n,r){var a=bt,o=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Vt.transition=o}}function qt(e,t,n,r){if(Ht){var a=Xt(e,t,n,r);if(null===a)Hr(e,t,r,Qt,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Nt=Pt(Nt,e,t,n,r,a),!0;case"dragenter":return Tt=Pt(Tt,e,t,n,r,a),!0;case"mouseover":return It=Pt(It,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return jt.set(o,Pt(jt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Dt.set(o,Pt(Dt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&xt(o),null===(o=Xt(e,t,n,r))&&Hr(e,t,r,Qt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=ya(e=xe(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=O({},ln,{view:0,detail:0}),dn=an(fn),hn=O({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(O({},hn,{dataTransfer:0})),vn=an(O({},fn,{relatedTarget:0})),gn=an(O({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(O({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return kn}var Mn=O({},fn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Mn),Nn=an(O({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(O({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=an(O({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=O({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(jn),Ln=[9,13,27,32],An=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Pn=c&&"TextEvent"in window&&!Rn,On=c&&(!An||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Yn(e,t,n,r){Me(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,qn=null;function Qn(e){Fr(e,0)}function Xn(e){if(q(wa(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),qn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Yn(t,qn,e,xe(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function or(e,t){if("click"===e)return Xn(t)}function ir(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=cr(n,o);var i=cr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},kr={};function Sr(e){if(_r[e])return _r[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return _r[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Mr=Sr("animationend"),Er=Sr("animationiteration"),Nr=Sr("animationstart"),Tr=Sr("transitionend"),Ir=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),u(t,[e])}for(var Lr=0;Lr<jr.length;Lr++){var Ar=jr[Lr];Dr(Ar.toLowerCase(),"on"+(Ar[0].toUpperCase()+Ar.slice(1)))}Dr(Mr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Nr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Tr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,l){if(Ue.apply(this,arguments),Pe){if(!Pe)throw Error(o(198));var c=Oe;Pe=!1,Oe=null,Fe||(Fe=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&a.isPropagationStopped())break e;Or(a,s,l),o=u}else for(i=0;i<r.length;i++){if(u=(s=r[i]).instance,l=s.currentTarget,s=s.listener,u!==o&&a.isPropagationStopped())break e;Or(a,s,l),o=u}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(t){"selectionchange"!==t&&(Pr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var a=Yt;break;case 4:a=Gt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ya(s)))return;if(5===(u=i.tag)||6===u){r=o=i;continue e}s=s.parentNode}}r=r.return}je((function(){var r=o,a=xe(n),i=[];e:{var s=Ir.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case Mr:case Er:case Nr:u=gn;break;case Tr:u=In;break;case"scroll":u=dn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Nn}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=De(p,d))&&c.push(Yr(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,a),i.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(f=We(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:wa(u),h=null==l?s:wa(l),(s=new c(m,p+"leave",u,n,a)).target=f,s.relatedTarget=h,m=null,ya(a)===r&&((c=new c(d,p+"enter",l,n,a)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=qr(h))p++;for(h=0,m=d;m;m=qr(m))h++;for(;0<p-h;)c=qr(c),p--;for(;0<h-p;)d=qr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=qr(c),d=qr(d)}c=null}else c=null;null!==u&&Qr(i,s,u,c,!1),null!==l&&null!==f&&Qr(i,f,l,c,!0)}if("select"===(u=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Kn;else if(Hn(s))if(Jn)v=ir;else{v=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=or);switch(v&&(v=v(e,r))?Yn(i,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?wa(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(An)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Zt="value"in(Jt=a)?Jt.value:Jt.textContent,Wn=!0)),0<(g=Gr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:g}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Pn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!An&&zn(e,t)?(e=en(),$t=Zt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Fr(i,t)}))}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=De(e,n))&&r.unshift(Yr(e,o,a)),null!=(o=De(e,t))&&r.push(Yr(e,o,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=De(n,o))&&i.unshift(Yr(n,u,s)):a||null!=(u=De(n,o))&&i.push(Yr(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Kr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Wt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,ha="__reactProps$"+fa,pa="__reactContainer$"+fa,ma="__reactEvents$"+fa,va="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ya(e){var t=e[da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[da]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[da])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[da]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xa(e){return e[ha]||null}var Ca=[],_a=-1;function ka(e){return{current:e}}function Sa(e){0>_a||(e.current=Ca[_a],Ca[_a]=null,_a--)}function Ma(e,t){_a++,Ca[_a]=e.current,e.current=t}var Ea={},Na=ka(Ea),Ta=ka(!1),Ia=Ea;function ja(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){Sa(Ta),Sa(Na)}function Aa(e,t,n){if(Na.current!==Ea)throw Error(o(168));Ma(Na,t),Ma(Ta,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,V(e)||"Unknown",a));return O({},n,r)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ia=Na.current,Ma(Na,e),Ma(Ta,Ta.current),!0}function Oa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ra(e,t,Ia),r.__reactInternalMemoizedMergedChildContext=e,Sa(Ta),Sa(Na),Ma(Na,e)):Sa(Ta),Ma(Ta,n)}var Fa=null,Ba=!1,za=!1;function Ua(e){null===Fa?Fa=[e]:Fa.push(e)}function Wa(){if(!za&&null!==Fa){za=!0;var e=0,t=bt;try{var n=Fa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ba=!1}catch(a){throw null!==Fa&&(Fa=Fa.slice(e+1)),qe($e,Wa),a}finally{bt=t,za=!1}}return null}var Va=[],Ha=0,Ya=null,Ga=0,qa=[],Qa=0,Xa=null,Ka=1,Ja="";function Za(e,t){Va[Ha++]=Ga,Va[Ha++]=Ya,Ya=e,Ga=t}function $a(e,t,n){qa[Qa++]=Ka,qa[Qa++]=Ja,qa[Qa++]=Xa,Xa=e;var r=Ka;e=Ja;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ka=1<<32-it(t)+a|n<<a|r,Ja=o+e}else Ka=1<<o|n<<a|r,Ja=e}function eo(e){null!==e.return&&(Za(e,1),$a(e,1,0))}function to(e){for(;e===Ya;)Ya=Va[--Ha],Va[Ha]=null,Ga=Va[--Ha],Va[Ha]=null;for(;e===Xa;)Xa=qa[--Qa],qa[Qa]=null,Ja=qa[--Qa],qa[Qa]=null,Ka=qa[--Qa],qa[Qa]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=jl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xa?{id:Ka,overflow:Ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=la(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!ao)return co(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw ho(),Error(o(418));for(;t;)io(e,t),t=la(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?la(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=la(e.nextSibling)}function po(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var vo=w.ReactCurrentBatchConfig;function go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ll(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ol(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&bo(o)===t.type)?((r=a(t,n.props)).ref=go(e,t,n),r.return=e,r):((r=Al(n.type,n.key,n.props,null,e.mode,r)).ref=go(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Rl(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ol(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Al(t.type,t.key,t.props,null,e.mode,n)).ref=go(e,null,t),n.return=e,n;case C:return(t=Fl(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rl(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?l(e,t,n,r):null;case C:return n.key===a?c(e,t,n,r):null;case D:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:f(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case C:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case D:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,a,null);yo(t,r)}return null}function m(a,o,s,u){for(var l=null,c=null,f=o,m=o=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=h(a,f,s[m],u);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(a,f),o=i(g,o,m),null===c?l=g:c.sibling=g,c=g,f=v}if(m===s.length)return n(a,f),ao&&Za(a,m),l;if(null===f){for(;m<s.length;m++)null!==(f=d(a,s[m],u))&&(o=i(f,o,m),null===c?l=f:c.sibling=f,c=f);return ao&&Za(a,m),l}for(f=r(a,f);m<s.length;m++)null!==(v=p(f,a,m,s[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=i(v,o,m),null===c?l=v:c.sibling=v,c=v);return e&&f.forEach((function(e){return t(a,e)})),ao&&Za(a,m),l}function v(a,s,u,l){var c=R(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var f=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=h(a,m,y.value,l);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,v),null===f?c=b:f.sibling=b,f=b,m=g}if(y.done)return n(a,m),ao&&Za(a,v),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=d(a,y.value,l))&&(s=i(y,s,v),null===f?c=y:f.sibling=y,f=y);return ao&&Za(a,v),c}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=p(m,a,v,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=i(y,s,v),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(a,e)})),ao&&Za(a,v),c}return function e(r,o,i,u){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var l=i.key,c=o;null!==c;){if(c.key===l){if((l=i.type)===_){if(7===c.tag){n(r,c.sibling),(o=a(c,i.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&bo(l)===c.type){n(r,c.sibling),(o=a(c,i.props)).ref=go(r,c,i),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}i.type===_?((o=Rl(i.props.children,r.mode,u,i.key)).return=r,r=o):((u=Al(i.type,i.key,i.props,null,r.mode,u)).ref=go(r,o,i),u.return=r,r=u)}return s(r);case C:e:{for(c=i.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fl(i,r.mode,u)).return=r,r=o}return s(r);case D:return e(r,o,(c=i._init)(i._payload),u)}if(te(i))return m(r,o,i,u);if(R(i))return v(r,o,i,u);yo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Ol(i,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var xo=wo(!0),Co=wo(!1),_o=ka(null),ko=null,So=null,Mo=null;function Eo(){Mo=So=ko=null}function No(e){var t=_o.current;Sa(_o),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){ko=e,Mo=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function jo(e){var t=e._currentValue;if(Mo!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===ko)throw Error(o(308));So=e,ko.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Do=null;function Lo(e){null===Do?Do=[e]:Do.push(e)}function Ao(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Lo(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Po=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ro(e,n)}return null===(a=r.interleaved)?(t.next=t,Lo(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ro(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,r){var a=e.updateQueue;Po=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===i?o=l:i.next=l,i=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var f=a.baseState;for(i=0,c=l=u=null,s=o;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,h=n,m.tag){case 1:if("function"===typeof(p=m.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(h,f,d):p)||void 0===d)break e;f=O({},f,d);break e;case 2:Po=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=f):c=c.next=h,i|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(d=s).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===c&&(u=f),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Pu|=i,e.lanes=i,e.memoizedState=f}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Yo={},Go=ka(Yo),qo=ka(Yo),Qo=ka(Yo);function Xo(e){if(e===Yo)throw Error(o(174));return e}function Ko(e,t){switch(Ma(Qo,t),Ma(qo,e),Ma(Go,Yo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sa(Go),Ma(Go,t)}function Jo(){Sa(Go),Sa(qo),Sa(Qo)}function Zo(e){Xo(Qo.current);var t=Xo(Go.current),n=ue(t,e.type);t!==n&&(Ma(qo,e),Ma(Go,n))}function $o(e){qo.current===e&&(Sa(Go),Sa(qo))}var ei=ka(0);function ti(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function ri(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var ai=w.ReactCurrentDispatcher,oi=w.ReactCurrentBatchConfig,ii=0,si=null,ui=null,li=null,ci=!1,fi=!1,di=0,hi=0;function pi(){throw Error(o(321))}function mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function vi(e,t,n,r,a,i){if(ii=i,si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?$i:es,e=n(r,a),fi){i=0;do{if(fi=!1,di=0,25<=i)throw Error(o(301));i+=1,li=ui=null,t.updateQueue=null,ai.current=ts,e=n(r,a)}while(fi)}if(ai.current=Zi,t=null!==ui&&null!==ui.next,ii=0,li=ui=si=null,ci=!1,t)throw Error(o(300));return e}function gi(){var e=0!==di;return di=0,e}function yi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?si.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===ui){var e=si.alternate;e=null!==e?e.memoizedState:null}else e=ui.next;var t=null===li?si.memoizedState:li.next;if(null!==t)li=t,ui=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ui=e).memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},null===li?si.memoizedState=li=e:li=li.next=e}return li}function wi(e,t){return"function"===typeof t?t(e):t}function xi(e){var t=bi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ui,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var u=s=null,l=null,c=i;do{var f=c.lane;if((ii&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,si.lanes|=f,Pu|=f}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,si.lanes|=i,Pu|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ci(e){var t=bi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(bs=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(){}function ki(e,t){var n=si,r=bi(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,bs=!0),r=r.queue,Pi(Ei.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,ji(9,Mi.bind(null,n,r,a,t),void 0,null),null===Tu)throw Error(o(349));0!==(30&ii)||Si(n,t,a)}return a}function Si(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mi(e,t,n,r){t.value=n,t.getSnapshot=r,Ni(t)&&Ti(e)}function Ei(e,t,n){return n((function(){Ni(t)&&Ti(e)}))}function Ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ti(e){var t=Ro(e,1);null!==t&&nl(t,e,1,-1)}function Ii(e){var t=yi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},t.queue=e,e=e.dispatch=Qi.bind(null,si,e),[t.memoizedState,e]}function ji(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=si.updateQueue)?(t={lastEffect:null,stores:null},si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Di(){return bi().memoizedState}function Li(e,t,n,r){var a=yi();si.flags|=e,a.memoizedState=ji(1|t,n,void 0,void 0===r?null:r)}function Ai(e,t,n,r){var a=bi();r=void 0===r?null:r;var o=void 0;if(null!==ui){var i=ui.memoizedState;if(o=i.destroy,null!==r&&mi(r,i.deps))return void(a.memoizedState=ji(t,n,o,r))}si.flags|=e,a.memoizedState=ji(1|t,n,o,r)}function Ri(e,t){return Li(8390656,8,e,t)}function Pi(e,t){return Ai(2048,8,e,t)}function Oi(e,t){return Ai(4,2,e,t)}function Fi(e,t){return Ai(4,4,e,t)}function Bi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ai(4,4,Bi.bind(null,t,e),n)}function Ui(){}function Wi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vi(e,t){var n=bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hi(e,t,n){return 0===(21&ii)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),si.lanes|=n,Pu|=n,e.baseState=!0),t)}function Yi(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{bt=n,oi.transition=r}}function Gi(){return bi().memoizedState}function qi(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xi(e))Ki(t,n);else if(null!==(n=Ao(e,t,n,r))){nl(n,e,r,el()),Ji(n,t,r)}}function Qi(e,t,n){var r=tl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))Ki(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var u=t.interleaved;return null===u?(a.next=a,Lo(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(l){}null!==(n=Ao(e,t,a,r))&&(nl(n,e,r,a=el()),Ji(n,t,r))}}function Xi(e){var t=e.alternate;return e===si||null!==t&&t===si}function Ki(e,t){fi=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zi={readContext:jo,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},$i={readContext:jo,useCallback:function(e,t){return yi().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Li(4194308,4,Bi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=yi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qi.bind(null,si,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yi().memoizedState=e},useState:Ii,useDebugValue:Ui,useDeferredValue:function(e){return yi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Yi.bind(null,e[1]),yi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=si,a=yi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tu)throw Error(o(349));0!==(30&ii)||Si(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Ri(Ei.bind(null,r,i,e),[e]),r.flags|=2048,ji(9,Mi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=yi(),t=Tu.identifierPrefix;if(ao){var n=Ja;t=":"+t+"R"+(n=(Ka&~(1<<32-it(Ka)-1)).toString(32)+n),0<(n=di++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:jo,useCallback:Wi,useContext:jo,useEffect:Pi,useImperativeHandle:zi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Vi,useReducer:xi,useRef:Di,useState:function(){return xi(wi)},useDebugValue:Ui,useDeferredValue:function(e){return Hi(bi(),ui.memoizedState,e)},useTransition:function(){return[xi(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:Gi,unstable_isNewReconciler:!1},ts={readContext:jo,useCallback:Wi,useContext:jo,useEffect:Pi,useImperativeHandle:zi,useInsertionEffect:Oi,useLayoutEffect:Fi,useMemo:Vi,useReducer:Ci,useRef:Di,useState:function(){return Ci(wi)},useDebugValue:Ui,useDeferredValue:function(e){var t=bi();return null===ui?t.memoizedState=e:Hi(t,ui.memoizedState,e)},useTransition:function(){return[Ci(wi)[0],bi().memoizedState]},useMutableSource:_i,useSyncExternalStore:ki,useId:Gi,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),o=Bo(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,a))&&(nl(t,e,a,r),Uo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),o=Bo(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=zo(e,o,a))&&(nl(t,e,a,r),Uo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),a=Bo(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zo(e,a,r))&&(nl(t,e,r,n),Uo(t,e,r))}};function os(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,o))}function is(e,t,n){var r=!1,a=Ea,o=t.contextType;return"object"===typeof o&&null!==o?o=jo(o):(a=Da(t)?Ia:Na.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ja(e,a):Ea),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function us(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=jo(o):(o=Da(t)?Ia:Na.current,a.context=ja(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),Vo(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Yu=r),fs(0,t)},n}function ps(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,zo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var ys=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Co(t,null,n,r):xo(t,e.child,n,r)}function xs(e,t,n,r,a){n=n.render;var o=t.ref;return Io(t,a),r=vi(e,t,n,r,o,a),n=gi(),null===e||bs?(ao&&n&&eo(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Cs(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Dl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Al(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(i,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Ll(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(bs=!0)}}return Ms(e,t,n,r,a)}function ks(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ma(Lu,Du),Du|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ma(Lu,Du),Du|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ma(Lu,Du),Du|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ma(Lu,Du),Du|=r;return ws(e,t,a,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ms(e,t,n,r,a){var o=Da(n)?Ia:Na.current;return o=ja(t,o),Io(t,a),n=vi(e,t,n,r,o,a),r=gi(),null===e||bs?(ao&&r&&eo(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Es(e,t,n,r,a){if(Da(n)){var o=!0;Pa(t)}else o=!1;if(Io(t,a),null===t.stateNode)Vs(e,t),is(t,n,r),us(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,l=n.contextType;"object"===typeof l&&null!==l?l=jo(l):l=ja(t,l=Da(n)?Ia:Na.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;f||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||u!==l)&&ss(t,i,r,l),Po=!1;var d=t.memoizedState;i.state=d,Vo(t,r,i,a),u=t.memoizedState,s!==r||d!==u||Ta.current||Po?("function"===typeof c&&(rs(t,n,c,r),u=t.memoizedState),(s=Po||os(t,n,s,r,d,u,l))?(f||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=l,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Fo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),i.props=l,f=t.pendingProps,d=i.context,"object"===typeof(u=n.contextType)&&null!==u?u=jo(u):u=ja(t,u=Da(n)?Ia:Na.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==f||d!==u)&&ss(t,i,r,u),Po=!1,d=t.memoizedState,i.state=d,Vo(t,r,i,a);var p=t.memoizedState;s!==f||d!==p||Ta.current||Po?("function"===typeof h&&(rs(t,n,h,r),p=t.memoizedState),(l=Po||os(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=u,r=l):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,o,a)}function Ns(e,t,n,r,a,o){Ss(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Oa(t,n,!1),Hs(e,t,o);r=t.stateNode,ys.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,a&&Oa(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Aa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Aa(0,t.context,!1),Ko(e,t.containerInfo)}function Is(e,t,n,r,a){return po(),mo(a),t.flags|=256,ws(e,t,n,r),t.child}var js,Ds,Ls,As,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,a=t.pendingProps,i=ei.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ma(ei,1&i),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,s?(a=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Pl(u,a,0,null),e=Rl(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Rs,e):Fs(t,u));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=cs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Pl({mode:"visible",children:r.children},a,0,null),(i=Rl(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=Ps(s),t.memoizedState=Rs,i);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=cs(i=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Tu)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ro(e,a),nl(r,e,a,-1))}return ml(),Bs(e,t,s,r=cs(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=El.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=la(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(qa[Qa++]=Ka,qa[Qa++]=Ja,qa[Qa++]=Xa,Ka=e.id,Ja=e.overflow,Xa=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,a,r,i,n);if(s){s=a.fallback,u=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null):(a=Ll(i,l)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Ll(r,s):(s=Rl(s,u,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,u=null===(u=e.child.memoizedState)?Ps(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,a}return e=(s=e.child).sibling,a=Ll(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=Pl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Us(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Ws(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ei.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ma(ei,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ti(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ti(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ll(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ll(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Da(t.type)&&La(),Gs(t),null;case 3:return r=t.stateNode,Jo(),Sa(Ta),Sa(Na),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(il(oo),oo=null))),Ds(e,t),Gs(t),null;case 5:$o(t);var a=Xo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ls(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Xo(Go.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[da]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Br(Rr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":K(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":ae(r,i),Br("invalid",r)}for(var u in ye(n,i),a=null,i)if(i.hasOwnProperty(u)){var l=i[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":G(r),$(r,i,!0);break;case"textarea":G(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[da]=t,e[ha]=r,js(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Br(Rr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":K(e,r),a=X(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=O({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(i in ye(n,a),l=a)if(l.hasOwnProperty(i)){var c=l[i];"style"===i?ve(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===i?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Br("scroll",e):null!=c&&b(e,i,c,u))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)As(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Xo(Qo.current),Xo(Go.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[da]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[da]=t,t.stateNode=r}return Gs(t),null;case 13:if(Sa(ei),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,i=!1;else if(i=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[da]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else null!==oo&&(il(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ei.current)?0===Au&&(Au=3):ml())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Jo(),Ds(e,t),null===e&&Wr(t.stateNode.containerInfo),Gs(t),null;case 10:return No(t.type._context),Gs(t),null;case 19:if(Sa(ei),null===(i=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=i.rendering))if(r)Ys(i,!1);else{if(0!==Au||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ti(e))){for(t.flags|=128,Ys(i,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(u=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,e=u.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ma(ei,1&ei.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Wu&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ti(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!ao)return Gs(t),null}else 2*Je()-i.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=i.last)?n.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=ei.current,Ma(ei,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Du)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qs(e,t){switch(to(t),t.tag){case 1:return Da(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Sa(Ta),Sa(Na),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Sa(ei),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sa(ei),null;case 4:return Jo(),null;case 10:return No(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}js=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(){},Ls=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Xo(Go.current);var o,i=null;switch(n){case"input":a=X(e,a),r=X(e,r),i=[];break;case"select":a=O({},a,{value:void 0}),r=O({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(i=i||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(i=i||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),i||u===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},As=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Ks=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){kl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&eu(t,n,o)}a=a.next}while(a!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[da],delete t[ha],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iu(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||iu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,fu=!1;function du(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ks||$s(n,t);case 6:var r=cu,a=fu;cu=null,du(e,t,n),fu=a,null!==(cu=r)&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Wt(e)):ua(cu,n.stateNode));break;case 4:r=cu,a=fu,cu=n.stateNode.containerInfo,fu=!0,du(e,t,n),cu=r,fu=a;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&eu(n,t,i),a=a.next}while(a!==r)}du(e,t,n);break;case 1:if(!Ks&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kl(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,du(e,t,n),Ks=r):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,fu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===cu)throw Error(o(160));hu(i,s,a),cu=null,fu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){kl(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(v){kl(e,e.return,v)}try{nu(5,e,e.return)}catch(v){kl(e,e.return,v)}}break;case 1:mu(t,e),gu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(mu(t,e),gu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(v){kl(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===i.type&&null!=i.name&&J(a,i),be(u,s);var c=be(u,i);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];"style"===f?ve(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(u){case"input":Z(a,i);break;case"textarea":oe(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(v){kl(e,e.return,v)}}break;case 6:if(mu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){kl(e,e.return,v)}}break;case 3:if(mu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(v){kl(e,e.return,v)}break;case 4:default:mu(t,e),gu(e);break;case 13:mu(t,e),gu(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Uu=Je())),4&r&&pu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(c=Ks)||f,mu(t,e),Ks=c):mu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(d=Zs=f;null!==Zs;){switch(p=(h=Zs).child,h.tag){case 0:case 11:case 14:case 15:nu(4,h,h.return);break;case 1:$s(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){kl(r,n,v)}}break;case 5:$s(h,h.return);break;case 22:if(null!==h.memoizedState){xu(d);continue}}null!==p?(p.return=h,Zs=p):xu(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(v){kl(e,e.return,v)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){kl(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(iu(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),lu(e,su(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;uu(e,su(e),i);break;default:throw Error(o(161))}}catch(s){kl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Zs=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var a=Zs,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Xs;if(!i){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ks;s=Xs;var l=Ks;if(Xs=i,(Ks=u)&&!l)for(Zs=a;null!==Zs;)u=(i=Zs).child,22===i.tag&&null!==i.memoizedState?Cu(a):null!==u?(u.return=i,Zs=u):Cu(a);for(;null!==o;)Zs=o,bu(o,t,n),o=o.sibling;Zs=a,Xs=s,Ks=l}wu(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Zs=o):wu(e)}}function wu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ho(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&au(t)}catch(h){kl(t,t.return,h)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Cu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){kl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){kl(t,a,u)}}var o=t.return;try{au(t)}catch(u){kl(t,o,u)}break;case 5:var i=t.return;try{au(t)}catch(u){kl(t,i,u)}}}catch(u){kl(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var _u,ku=Math.ceil,Su=w.ReactCurrentDispatcher,Mu=w.ReactCurrentOwner,Eu=w.ReactCurrentBatchConfig,Nu=0,Tu=null,Iu=null,ju=0,Du=0,Lu=ka(0),Au=0,Ru=null,Pu=0,Ou=0,Fu=0,Bu=null,zu=null,Uu=0,Wu=1/0,Vu=null,Hu=!1,Yu=null,Gu=null,qu=!1,Qu=null,Xu=0,Ku=0,Ju=null,Zu=-1,$u=0;function el(){return 0!==(6&Nu)?Je():-1!==Zu?Zu:Zu=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==ju?ju&-ju:null!==vo.transition?(0===$u&&($u=mt()),$u):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nl(e,t,n,r){if(50<Ku)throw Ku=0,Ju=null,Error(o(185));gt(e,n,r),0!==(2&Nu)&&e===Tu||(e===Tu&&(0===(2&Nu)&&(Ou|=n),4===Au&&sl(e,ju)),rl(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(Wu=Je()+500,Ba&&Wa()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,u=a[i];-1===u?0!==(s&n)&&0===(s&r)||(a[i]=ht(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Tu?ju:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ba=!0,Ua(e)}(ul.bind(null,e)):Ua(ul.bind(null,e)),ia((function(){0===(6&Nu)&&Wa()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Zu=-1,$u=0,0!==(6&Nu))throw Error(o(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=dt(e,e===Tu?ju:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var a=Nu;Nu|=2;var i=pl();for(Tu===e&&ju===t||(Vu=null,Wu=Je()+500,dl(e,t));;)try{yl();break}catch(u){hl(e,u)}Eo(),Su.current=i,Nu=a,null!==Iu?t=0:(Tu=null,ju=0,t=Au)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ol(e,a))),1===t)throw n=Ru,dl(e,0),sl(e,r),rl(e,Je()),n;if(6===t)sl(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vl(e,r))&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t))throw n=Ru,dl(e,0),sl(e,r),rl(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xl(e,zu,Vu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Uu+500-Je())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xl.bind(null,e,zu,Vu),t);break}xl(e,zu,Vu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ra(xl.bind(null,e,zu,Vu),r);break}xl(e,zu,Vu);break;default:throw Error(o(329))}}}return rl(e,Je()),e.callbackNode===n?al.bind(null,e):null}function ol(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zu,zu=n,null!==t&&il(t)),e}function il(e){null===zu?zu=e:zu.push.apply(zu,e)}function sl(e,t){for(t&=~Fu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Nu))throw Error(o(327));Cl();var t=dt(e,0);if(0===(1&t))return rl(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Ru,dl(e,0),sl(e,t),rl(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,zu,Vu),rl(e,Je()),null}function ll(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(Wu=Je()+500,Ba&&Wa())}}function cl(e){null!==Qu&&0===Qu.tag&&0===(6&Nu)&&Cl();var t=Nu;Nu|=1;var n=Eu.transition,r=bt;try{if(Eu.transition=null,bt=1,e)return e()}finally{bt=r,Eu.transition=n,0===(6&(Nu=t))&&Wa()}}function fl(){Du=Lu.current,Sa(Lu)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Iu)for(n=Iu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&La();break;case 3:Jo(),Sa(Ta),Sa(Na),ri();break;case 5:$o(r);break;case 4:Jo();break;case 13:case 19:Sa(ei);break;case 10:No(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Tu=e,Iu=e=Ll(e.current,null),ju=Du=t,Au=0,Ru=null,Fu=Ou=Pu=0,zu=Bu=null,null!==Do){for(t=0;t<Do.length;t++)if(null!==(r=(n=Do[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}Do=null}return e}function hl(e,t){for(;;){var n=Iu;try{if(Eo(),ai.current=Zi,ci){for(var r=si.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ci=!1}if(ii=0,li=ui=si=null,fi=!1,di=0,Mu.current=null,null===n||null===n.return){Au=1,Ru=t,Iu=null;break}e:{var i=e,s=n.return,u=n,l=t;if(t=ju,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ms(i,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(l),t.updateQueue=v}else m.add(l);break e}if(0===(1&t)){ms(i,c,t),ml();break e}l=Error(o(426))}else if(ao&&1&u.mode){var g=vs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),gs(g,s,u,0,t),mo(ls(l,u));break e}}i=l=ls(l,u),4!==Au&&(Au=2),null===Bu?Bu=[i]:Bu.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,hs(0,l,t));break e;case 1:u=l;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Wo(i,ps(i,u,t));break e}}i=i.return}while(null!==i)}wl(n)}catch(w){t=w,Iu===n&&null!==n&&(Iu=n=n.return);continue}break}}function pl(){var e=Su.current;return Su.current=Zi,null===e?Zi:e}function ml(){0!==Au&&3!==Au&&2!==Au||(Au=4),null===Tu||0===(268435455&Pu)&&0===(268435455&Ou)||sl(Tu,ju)}function vl(e,t){var n=Nu;Nu|=2;var r=pl();for(Tu===e&&ju===t||(Vu=null,dl(e,t));;)try{gl();break}catch(a){hl(e,a)}if(Eo(),Nu=n,Su.current=r,null!==Iu)throw Error(o(261));return Tu=null,ju=0,Au}function gl(){for(;null!==Iu;)bl(Iu)}function yl(){for(;null!==Iu&&!Xe();)bl(Iu)}function bl(e){var t=_u(e.alternate,e,Du);e.memoizedProps=e.pendingProps,null===t?wl(e):Iu=t,Mu.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Du)))return void(Iu=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Iu=n);if(null===e)return Au=6,void(Iu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Iu=t);Iu=t=e}while(null!==t);0===Au&&(Au=5)}function xl(e,t,n){var r=bt,a=Eu.transition;try{Eu.transition=null,bt=1,function(e,t,n,r){do{Cl()}while(null!==Qu);if(0!==(6&Nu))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Tu&&(Iu=Tu=null,ju=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Tl(tt,(function(){return Cl(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Eu.transition,Eu.transition=null;var s=bt;bt=1;var u=Nu;Nu|=4,Mu.current=null,function(e,t){if(ea=Ht,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(u=s+a),d!==i||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(u=s),h===i&&++f===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ns(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){kl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tu,tu=!1}(e,n),vu(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,yu(n,e,a),Ke(),Nu=u,bt=s,Eu.transition=i}else e.current=n;if(qu&&(qu=!1,Qu=e,Xu=a),i=e.pendingLanes,0===i&&(Gu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Hu)throw Hu=!1,e=Yu,Yu=null,e;0!==(1&Xu)&&0!==e.tag&&Cl(),i=e.pendingLanes,0!==(1&i)?e===Ju?Ku++:(Ku=0,Ju=e):Ku=0,Wa()}(e,t,n,r)}finally{Eu.transition=a,bt=r}return null}function Cl(){if(null!==Qu){var e=wt(Xu),t=Eu.transition,n=bt;try{if(Eu.transition=null,bt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Xu=0,0!==(6&Nu))throw Error(o(331));var a=Nu;for(Nu|=4,Zs=e.current;null!==Zs;){var i=Zs,s=i.child;if(0!==(16&Zs.flags)){var u=i.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:nu(8,f,i)}var d=f.child;if(null!==d)d.return=f,Zs=d;else for(;null!==Zs;){var h=(f=Zs).sibling,p=f.return;if(ou(f),f===c){Zs=null;break}if(null!==h){h.return=p,Zs=h;break}Zs=p}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Zs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(i=Zs).flags))switch(i.tag){case 0:case 11:case 15:nu(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Zs=y;break e}Zs=i.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(C){kl(u,u.return,C)}if(u===s){Zs=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Zs=x;break e}Zs=u.return}}if(Nu=a,Wa(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(C){}r=!0}return r}finally{bt=n,Eu.transition=t}}return!1}function _l(e,t,n){e=zo(e,t=hs(0,t=ls(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function kl(e,t,n){if(3===e.tag)_l(e,e,n);else for(;null!==t;){if(3===t.tag){_l(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){t=zo(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Tu===e&&(ju&n)===n&&(4===Au||3===Au&&(130023424&ju)===ju&&500>Je()-Uu?dl(e,0):Fu|=n),rl(e,t)}function Ml(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ro(e,t))&&(gt(e,t,n),rl(e,n))}function El(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ml(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ml(e,n)}function Tl(e,t){return qe(e,t)}function Il(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,n,r){return new Il(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ll(e,t){var n=e.alternate;return null===n?((n=jl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Al(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Dl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Rl(n.children,a,i,t);case k:s=8,a|=8;break;case S:return(e=jl(12,n,t,2|a)).elementType=S,e.lanes=i,e;case T:return(e=jl(13,n,t,a)).elementType=T,e.lanes=i,e;case I:return(e=jl(19,n,t,a)).elementType=I,e.lanes=i,e;case L:return Pl(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case M:s=10;break e;case E:s=9;break e;case N:s=11;break e;case j:s=14;break e;case D:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jl(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Rl(e,t,n,r){return(e=jl(7,e,r,t)).lanes=n,e}function Pl(e,t,n,r){return(e=jl(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return(e=jl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=jl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,a,o,i,s,u){return e=new Bl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Ul(e){if(!e)return Ea;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Da(n))return Ra(e,n,t)}return t}function Wl(e,t,n,r,a,o,i,s,u){return(e=zl(n,r,!0,e,0,o,0,s,u)).context=Ul(null),n=e.current,(o=Bo(r=el(),a=tl(n))).callback=void 0!==t&&null!==t?t:null,zo(n,o,a),e.current.lanes=a,gt(e,a,r),rl(e,r),e}function Vl(e,t,n,r){var a=t.current,o=el(),i=tl(a);return n=Ul(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zo(a,t,i))&&(nl(e,a,i,o),Uo(e,a,i)),i}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),po();break;case 5:Zo(t);break;case 1:Da(t.type)&&Pa(t);break;case 4:Ko(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ma(_o,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ma(ei,1&ei.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Ma(ei,1&ei.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ma(ei,1&ei.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ma(ei,ei.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ao&&0!==(1048576&t.flags)&&$a(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var a=ja(t,Na.current);Io(t,n),a=vi(null,t,r,e,a,n);var i=gi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(r)?(i=!0,Pa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Oo(t),a.updater=as,t.stateNode=a,a._reactInternals=t,us(t,r,e,n),t=Ns(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===j)return 14}return 2}(r),e=ns(r,e),a){case 0:t=Ms(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Cs(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ms(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 1:return r=t.type,a=t.pendingProps,Es(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 3:e:{if(Ts(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Fo(e,t),Vo(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Is(e,t,r,n,a=ls(Error(o(423)),t));break e}if(r!==a){t=Is(e,t,r,n,a=ls(Error(o(424)),t));break e}for(ro=la(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=Co(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===a){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&lo(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),Ss(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Os(e,t,n);case 4:return Ko(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xs(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Ma(_o,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ta.current){t=Hs(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var u=i.dependencies;if(null!==u){s=i.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=Bo(-1,n&-n)).tag=2;var c=i.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),To(i.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),To(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Io(t,n),r=r(a=jo(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=ns(r=t.type,t.pendingProps),Cs(e,t,r,a=ns(r.type,a),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ns(r,a),Vs(e,t),t.tag=1,Da(r)?(e=!0,Pa(t)):e=!1,Io(t,n),is(t,r,a),us(t,r,a,n),Ns(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return ks(e,t,n)}throw Error(o(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Xl(e){this._internalRoot=e}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function $l(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Hl(i);s.call(e)}}Vl(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Hl(i);o.call(e)}}var i=Wl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=i,e[pa]=i.current,Wr(8===e.nodeType?e.parentNode:e),cl(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pa]=u.current,Wr(8===e.nodeType?e.parentNode:e),cl((function(){Vl(t,u,n,r)})),u}(n,t,e,a,r);return Hl(i)}Xl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vl(e,t,null,null)},Xl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Vl(null,e,null,null)})),t[pa]=null}},Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ot(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Je()),0===(6&Nu)&&(Wu=Je()+500,Wa()))}break;case 13:cl((function(){var t=Ro(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},Ct=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},_t=function(e){if(13===e.tag){var t=tl(e),n=Ro(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},kt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ce=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(o(90));q(r),Z(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=ll,Te=cl;var ec={usingClientEntryPoint:!1,Events:[ba,wa,xa,Me,Ee,ll]},tc={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ye(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{at=rc.inject(nc),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kl(e))throw Error(o(299));var n=!1,r="",a=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ye(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(o(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kl(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wl(t,null,e,1,null!=n?n:null,a,0,i,s),e[pa]=t.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(o(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(o(40));return!!e._reactRootContainer&&(cl((function(){$l(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2763:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e).getTime(),o=(0,r.default)(t.start).getTime(),i=(0,r.default)(t.end).getTime();if(!(o<=i))throw new RangeError("Invalid interval");return n>=o&&n<=i}},2902:(e,t,n)=>{e.exports=n(7284).EventEmitter},2959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(r.openInstances.length),r.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){r=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},r=new n;t.default=r},2963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(5765),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default,e.exports=t.default},3035:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3274:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()<o.getTime()}},3306:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getHours()}},3350:(e,t,n)=>{(t=e.exports=n(6153)).Stream=t,t.Readable=t,t.Writable=n(9001),t.Duplex=n(6779),t.Transform=n(2013),t.PassThrough=n(5559),t.finished=n(227),t.pipeline=n(537)},3367:()=>{},3515:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},4161:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5126),a=n(8726),o=n(6191);function i(e,t){var n;(0,a.A)(1,arguments);var i=(0,o.A)(null!==(n=null===t||void 0===t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==i&&1!==i&&0!==i)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var m,v=function(e){var t,n={},r=e.split(s.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],s.timeZoneDelimiter.test(n.date)&&(n.date=e.split(s.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var a=s.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}(e);if(v.date){var g=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?a:100*o,restDateString:e.slice((r[1]||r[2]).length)}}(v.date,i);m=function(e,t){if(null===t)return new Date(NaN);var n=e.match(u);if(!n)return new Date(NaN);var r=!!n[4],a=f(n[1]),o=f(n[2])-1,i=f(n[3]),s=f(n[4]),l=f(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,s,l)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,o=7*(t-1)+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}(t,s,l):new Date(NaN);var c=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(h[t]||(p(e)?29:28))}(t,o,i)&&function(e,t){return t>=1&&t<=(p(e)?366:365)}(t,a)?(c.setUTCFullYear(t,o,Math.max(a,i)),c):new Date(NaN)}(g.restDateString,g.year)}if(!m||isNaN(m.getTime()))return new Date(NaN);var y,b=m.getTime(),w=0;if(v.time&&(w=function(e){var t=e.match(l);if(!t)return NaN;var n=d(t[1]),a=d(t[2]),o=d(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,a,o))return NaN;return n*r.s0+a*r.Cg+1e3*o}(v.time),isNaN(w)))return new Date(NaN);if(!v.timezone){var x=new Date(b+w),C=new Date(0);return C.setFullYear(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()),C.setHours(x.getUTCHours(),x.getUTCMinutes(),x.getUTCSeconds(),x.getUTCMilliseconds()),C}return y=function(e){if("Z"===e)return 0;var t=e.match(c);if(!t)return 0;var n="+"===t[1]?-1:1,a=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,o))return NaN;return n*(a*r.s0+o*r.Cg)}(v.timezone),isNaN(y)?new Date(NaN):new Date(b+w+y)}var s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},u=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f(e){return e?parseInt(e):1}function d(e){return e&&parseFloat(e.replace(",","."))||0}var h=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400===0||e%4===0&&e%100!==0}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var x=Array.isArray,C=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)C.call(t,a)&&!k.hasOwnProperty(a)&&(o[a]=t[a]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===o[a]&&(o[a]=u[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:_.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return i=i(u=e),e=""===o?"."+N(u,0):o,x(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",(function(e){return e}))):null!=i&&(M(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(u=0,o=""===o?".":o+":",x(e))for(var l=0;l<e.length;l++){var c=o+N(s=e[l],l);u+=T(s,t,a,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=T(s=s.value,t,a,c=o+N(s,l++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},L={transition:null},A={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:_};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)C.call(t,l)&&!k.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4275:(e,t,n)=>{let r;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:n.g):e=>(r||(r=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},4375:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2550),a=n(8726),o=n(6191);function i(e,t){(0,a.A)(2,arguments);var n=(0,o.A)(t);return(0,r.A)(e,-n)}},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),i=o[0],u=o[1],l=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,u)),c=0,f=u>0?i-4:i;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,o=[],i=16383,s=0,l=r-a;s<l;s+=i)o.push(u(e,s,s+i>l?l:s+i));1===a?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=o[i],r[o.charCodeAt(i)]=i;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var a,o,i=[],s=t;s<r;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(o=a)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},4467:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(816);function a(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4489:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),a=n(888),o=n(8726);function i(e){var t,n;if((0,o.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,a.default)(e);(void 0===n||n<t||isNaN(Number(t)))&&(n=t)})),n||new Date(NaN)}},4561:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(9566),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()===o.getTime()}},4682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(s)};var n="none",r="contents",a=/^(input|select|textarea|button|object|iframe)$/;function o(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var a=window.getComputedStyle(e),o=a.getPropertyValue("display");return t?o!==r&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,a):o===n}catch(i){return console.warn("Failed to inspect element style"),!1}}function i(e,t){var n=e.nodeName.toLowerCase();return(a.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),o(t))return!1;t=t.parentNode}return!0}(e)}function s(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&i(e,!n)}e.exports=t.default},4823:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(a){r.message=e.message,r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));return t(new n,r)}}},4841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)a(e,n[t]);var o=document.body;for(var i in r)a(o,r[i]);n={},r={}},t.log=function(){0};var n={},r={};function a(e,t){e.classList.remove(t)}t.add=function(e,t){return a=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(o,e),a.add(e)}));var a,o},t.remove=function(e,t){return a=e.classList,o="html"==e.nodeName.toLowerCase()?n:r,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(o,e),0===o[e]&&a.remove(e)}));var a,o}},4860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(97),a=n(4375),o=n(888),i=n(8726);var s=n(7532),u=n(7780),l=n(1209),c=n(2637);function f(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const d={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return f("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):f(n+1,2)},d:function(e,t){return f(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return f(e.getUTCHours()%12||12,t.length)},H:function(e,t){return f(e.getUTCHours(),t.length)},m:function(e,t){return f(e.getUTCMinutes(),t.length)},s:function(e,t){return f(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return f(Math.floor(r*Math.pow(10,n-3)),t.length)}};var h="midnight",p="noon",m="morning",v="afternoon",g="evening",y="night";function b(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),o=r%60;if(0===o)return n+String(a);var i=t||"";return n+String(a)+i+f(o,2)}function w(e,t){return e%60===0?(e>0?"-":"+")+f(Math.abs(e)/60,2):x(e,t)}function x(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+f(Math.floor(a/60),2)+n+f(a%60,2)}const C={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return d.y(e,t)},Y:function(e,t,n,r){var a=(0,c.A)(e,r),o=a>0?a:1-a;return"YY"===t?f(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):f(o,t.length)},R:function(e,t){return f((0,u.A)(e),t.length)},u:function(e,t){return f(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return f(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return f(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return d.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return f(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=(0,l.A)(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):f(a,t.length)},I:function(e,t,n){var r=(0,s.A)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):f(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):d.d(e,t)},D:function(e,t,n){var r=function(e){(0,i.A)(1,arguments);var t=(0,o.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=n-t.getTime();return Math.floor(r/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):f(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return f(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return f(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return f(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?p:0===a?h:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?g:a>=12?v:a>=4?m:y,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return d.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):d.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):f(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):f(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):d.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):d.s(e,t)},S:function(e,t){return d.S(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return w(a);case"XXXX":case"XX":return x(a);default:return x(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return w(a);case"xxxx":case"xx":return x(a);default:return x(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+b(a,":");default:return"GMT"+x(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+b(a,":");default:return"GMT"+x(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return f(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return f((r._originalDate||e).getTime(),t.length)}};var _=n(8435),k=n(8539),S=n(2058),M=n(6191),E=n(8171),N=n(364),T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,I=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,j=/^'([^]*?)'?$/,D=/''/g,L=/[a-zA-Z]/;function A(e,t,n){var s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,A,R,P;(0,i.A)(2,arguments);var O=String(t),F=(0,E.q)(),B=null!==(s=null!==(u=null===n||void 0===n?void 0:n.locale)&&void 0!==u?u:F.locale)&&void 0!==s?s:N.A,z=(0,M.A)(null!==(l=null!==(c=null!==(f=null!==(d=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==d?d:null===n||void 0===n||null===(h=n.locale)||void 0===h||null===(p=h.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==f?f:F.firstWeekContainsDate)&&void 0!==c?c:null===(m=F.locale)||void 0===m||null===(v=m.options)||void 0===v?void 0:v.firstWeekContainsDate)&&void 0!==l?l:1);if(!(z>=1&&z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=(0,M.A)(null!==(g=null!==(y=null!==(b=null!==(w=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==w?w:null===n||void 0===n||null===(x=n.locale)||void 0===x||null===(A=x.options)||void 0===A?void 0:A.weekStartsOn)&&void 0!==b?b:F.weekStartsOn)&&void 0!==y?y:null===(R=F.locale)||void 0===R||null===(P=R.options)||void 0===P?void 0:P.weekStartsOn)&&void 0!==g?g:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var W=(0,o.default)(e);if(!(0,r.default)(W))throw new RangeError("Invalid time value");var V=(0,k.A)(W),H=(0,a.A)(W,V),Y={firstWeekContainsDate:z,weekStartsOn:U,locale:B,_originalDate:W};return O.match(I).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,_.A[t])(e,B.formatLong):e})).join("").match(T).map((function(r){if("''"===r)return"'";var a=r[0];if("'"===a)return function(e){var t=e.match(j);if(!t)return e;return t[1].replace(D,"'")}(r);var o=C[a];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,S.xM)(r)||(0,S.lJ)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,S.ef)(r)||(0,S.lJ)(r,t,String(e)),o(H,r,B.localize,Y);if(a.match(L))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return r})).join("")}},4872:function(e,t,n){e.exports=function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),a=n(t);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};for(var n,r={},a=Object.keys(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,r,a=c(t);return!(r=n?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?h(this):r}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return new Promise((function(n,r){var a,o=new Image;o.onload=function(){return n(o)},o.onerror=r,0==(null!==(a=e)&&!!a.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@/?%\s]*\s*$/i))&&t&&(o.crossOrigin=t),o.src=e}))}var b,w=!("undefined"==typeof window||"undefined"==typeof navigator||!("ontouchstart"in window||0<navigator.msMaxTouchPoints)),x="undefined"!=typeof File,C={touch:{react:{down:"onTouchStart",mouseDown:"onMouseDown",drag:"onTouchMove",move:"onTouchMove",mouseMove:"onMouseMove",up:"onTouchEnd",mouseUp:"onMouseUp"},native:{down:"touchstart",mouseDown:"mousedown",drag:"touchmove",move:"touchmove",mouseMove:"mousemove",up:"touchend",mouseUp:"mouseup"}},desktop:{react:{down:"onMouseDown",drag:"onDragOver",move:"onMouseMove",up:"onMouseUp"},native:{down:"mousedown",drag:"dragStart",move:"mousemove",up:"mouseup"}}},_=w?C.touch:C.desktop,k="undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1,S={x:.5,y:.5},M=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,a.default.Component);var e,t,n,r=p(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i(h(t=r.call(this,e)),"state",{drag:!1,my:null,mx:null,image:S}),i(h(t),"handleImageReady",(function(e){var n=t.getInitialSize(e.width,e.height);n.resource=e,n.x=.5,n.y=.5,n.backgroundColor=t.props.backgroundColor,t.setState({drag:!1,image:n},t.props.onImageReady),t.props.onLoadSuccess(n)})),i(h(t),"clearImage",(function(){t.canvas.getContext("2d").clearRect(0,0,t.canvas.width,t.canvas.height),t.setState({image:S})})),i(h(t),"handleMouseDown",(function(e){(e=e||window.event).preventDefault(),t.setState({drag:!0,mx:null,my:null})})),i(h(t),"handleMouseUp",(function(){t.state.drag&&(t.setState({drag:!1}),t.props.onMouseUp())})),i(h(t),"handleMouseMove",(function(e){var n,r,a,o,i,s,u,c,f,d,h,p,m,v,g,y;e=e||window.event,!1!==t.state.drag&&(e.preventDefault(),a={mx:n=e.targetTouches?e.targetTouches[0].pageX:e.clientX,my:r=e.targetTouches?e.targetTouches[0].pageY:e.clientY},y=t.props.rotate,y=(y%=360)<0?y+360:y,t.state.mx&&t.state.my&&(o=t.state.mx-n,i=t.state.my-r,s=t.state.image.width*t.props.scale,u=t.state.image.height*t.props.scale,f=(c=t.getCroppingRect()).x,d=c.y,f*=s,d*=u,h=function(e){return e*(Math.PI/180)},p=Math.cos(h(y)),v=d+-o*(m=Math.sin(h(y)))+i*p,g={x:(f+o*p+i*m)/s+1/t.props.scale*t.getXScale()/2,y:v/u+1/t.props.scale*t.getYScale()/2},t.props.onPositionChange(g),a.image=l(l({},t.state.image),g)),t.setState(a),t.props.onMouseMove(e))})),i(h(t),"setCanvas",(function(e){t.canvas=e})),t.canvas=null,t}return e=u,(t=[{key:"componentDidMount",value:function(){this.props.disableHiDPIScaling&&(k=1);var e,t,n=this.canvas.getContext("2d");this.props.image&&this.loadImage(this.props.image),this.paint(n),document&&(e=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},t=_.native,document.addEventListener(t.move,this.handleMouseMove,e),document.addEventListener(t.up,this.handleMouseUp,e),w&&(document.addEventListener(t.mouseMove,this.handleMouseMove,e),document.addEventListener(t.mouseUp,this.handleMouseUp,e)))}},{key:"componentDidUpdate",value:function(e,t){this.props.image&&this.props.image!==e.image||this.props.width!==e.width||this.props.height!==e.height||this.props.backgroundColor!==e.backgroundColor?this.loadImage(this.props.image):this.props.image||t.image===S||this.clearImage();var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),this.paint(n),this.paintImage(n,this.state.image,this.props.border),e.image===this.props.image&&e.width===this.props.width&&e.height===this.props.height&&e.position===this.props.position&&e.scale===this.props.scale&&e.rotate===this.props.rotate&&t.my===this.state.my&&t.mx===this.state.mx&&t.image.x===this.state.image.x&&t.image.y===this.state.image.y&&t.backgroundColor===this.state.backgroundColor||this.props.onImageChange()}},{key:"componentWillUnmount",value:function(){var e;document&&(e=_.native,document.removeEventListener(e.move,this.handleMouseMove,!1),document.removeEventListener(e.up,this.handleMouseUp,!1),w&&(document.removeEventListener(e.mouseMove,this.handleMouseMove,!1),document.removeEventListener(e.mouseUp,this.handleMouseUp,!1)))}},{key:"isVertical",value:function(){return!this.props.disableCanvasRotation&&this.props.rotate%180!=0}},{key:"getBorders",value:function(e){var t=0<arguments.length&&void 0!==e?e:this.props.border;return Array.isArray(t)?t:[t,t]}},{key:"getDimensions",value:function(){var e=this.props,t=e.width,n=e.height,r=e.rotate,a=e.border,o={},i=m(this.getBorders(a),2),s=i[0],u=i[1],l=t,c=n;return this.isVertical()?(o.width=c,o.height=l):(o.width=l,o.height=c),o.width+=2*s,o.height+=2*u,{canvas:o,rotate:r,width:t,height:n,border:a}}},{key:"getImage",value:function(){var e=this.getCroppingRect(),t=this.state.image;e.x*=t.resource.width,e.y*=t.resource.height,e.width*=t.resource.width,e.height*=t.resource.height;var n=document.createElement("canvas");this.isVertical()?(n.width=e.height,n.height=e.width):(n.width=e.width,n.height=e.height);var r=n.getContext("2d");return r.translate(n.width/2,n.height/2),r.rotate(this.props.rotate*Math.PI/180),r.translate(-n.width/2,-n.height/2),this.isVertical()&&r.translate((n.width-n.height)/2,(n.height-n.width)/2),t.backgroundColor&&(r.fillStyle=t.backgroundColor,r.fillRect(-e.x,-e.y,t.resource.width,t.resource.height)),r.drawImage(t.resource,-e.x,-e.y),n}},{key:"getImageScaledToCanvas",value:function(){var e=this.getDimensions(),t=e.width,n=e.height,r=document.createElement("canvas");return this.isVertical()?(r.width=n,r.height=t):(r.width=t,r.height=n),this.paintImage(r.getContext("2d"),this.state.image,0,1),r}},{key:"getXScale",value:function(){var e=this.props.width/this.props.height,t=this.state.image.width/this.state.image.height;return Math.min(1,e/t)}},{key:"getYScale",value:function(){var e=this.props.height/this.props.width,t=this.state.image.height/this.state.image.width;return Math.min(1,e/t)}},{key:"getCroppingRect",value:function(){var e=this.props.position||{x:this.state.image.x,y:this.state.image.y},t=1/this.props.scale*this.getXScale(),n=1/this.props.scale*this.getYScale(),r={x:e.x-t/2,y:e.y-n/2,width:t,height:n},a=0,o=1-r.width,i=0,s=1-r.height;return(this.props.disableBoundaryChecks||1<t||1<n)&&(a=-r.width,i=-r.height,s=o=1),l(l({},r),{},{x:Math.max(a,Math.min(r.x,o)),y:Math.max(i,Math.min(r.y,s))})}},{key:"loadImage",value:function(e){var t;x&&e instanceof File?this.loadingImage=(t=e,new Promise((function(e,n){var r=new FileReader;r.onload=function(t){try{var r=y(t.target.result);e(r)}catch(t){n(t)}},r.readAsDataURL(t)})).then(this.handleImageReady).catch(this.props.onLoadFailure)):"string"==typeof e&&(this.loadingImage=y(e,this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure))}},{key:"getInitialSize",value:function(e,t){var n,r,a=this.getDimensions();return t/e<a.height/a.width?r=e*((n=this.getDimensions().height)/t):n=t*((r=this.getDimensions().width)/e),{height:n,width:r}}},{key:"paintImage",value:function(e,t,n,r){var a,o=3<arguments.length&&void 0!==r?r:k;t.resource&&(a=this.calculatePosition(t,n),e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(this.props.rotate*Math.PI/180),e.translate(-e.canvas.width/2,-e.canvas.height/2),this.isVertical()&&e.translate((e.canvas.width-e.canvas.height)/2,(e.canvas.height-e.canvas.width)/2),e.scale(o,o),e.globalCompositeOperation="destination-over",e.drawImage(t.resource,a.x,a.y,a.width,a.height),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(a.x,a.y,a.width,a.height)),e.restore())}},{key:"calculatePosition",value:function(e,t){e=e||this.state.image;var n=m(this.getBorders(t),2),r=n[0],a=n[1],o=this.getCroppingRect(),i=e.width*this.props.scale,s=e.height*this.props.scale,u=-o.x*i,l=-o.y*s;return this.isVertical()?(u+=a,l+=r):(u+=r,l+=a),{x:u,y:l,height:s,width:i}}},{key:"paint",value:function(e){e.save(),e.scale(k,k),e.translate(0,0),e.fillStyle="rgba("+this.props.color.slice(0,4).join(",")+")";var t,n,r,a,o,i,s,u,l=this.props.borderRadius,c=this.getDimensions(),f=m(this.getBorders(c.border),2),d=f[0],h=f[1],p=c.canvas.height,v=c.canvas.width;l=Math.max(l,0),l=Math.min(l,v/2-d,p/2-h),e.beginPath(),t=e,a=v-2*(n=d),o=p-2*(r=h),0===(i=l)?t.rect(n,r,a,o):(s=a-i,u=o-i,t.translate(n,r),t.arc(i,i,i,Math.PI,1.5*Math.PI),t.lineTo(s,0),t.arc(s,i,i,1.5*Math.PI,2*Math.PI),t.lineTo(a,u),t.arc(s,u,i,2*Math.PI,.5*Math.PI),t.lineTo(i,o),t.arc(i,u,i,.5*Math.PI,Math.PI),t.translate(-n,-r)),e.rect(v,0,-v,p),e.fill("evenodd"),e.restore()}},{key:"render",value:function(){var e=this.props,t=(e.scale,e.rotate,e.image,e.border,e.borderRadius,e.width,e.height,e.position,e.color,e.backgroundColor,e.style),n=(e.crossOrigin,e.onLoadFailure,e.onLoadSuccess,e.onImageReady,e.onImageChange,e.onMouseUp,e.onMouseMove,e.onPositionChange,e.disableBoundaryChecks,e.disableHiDPIScaling,e.disableCanvasRotation,d(e,["scale","rotate","image","border","borderRadius","width","height","position","color","backgroundColor","style","crossOrigin","onLoadFailure","onLoadSuccess","onImageReady","onImageChange","onMouseUp","onMouseMove","onPositionChange","disableBoundaryChecks","disableHiDPIScaling","disableCanvasRotation"])),r=this.getDimensions(),o={width:r.canvas.width,height:r.canvas.height,cursor:this.state.drag?"grabbing":"grab",touchAction:"none"},i={width:r.canvas.width*k,height:r.canvas.height*k,style:l(l({},o),t)};return i[_.react.down]=this.handleMouseDown,w&&(i[_.react.mouseDown]=this.handleMouseDown),a.default.createElement("canvas",s({ref:this.setCanvas},i,n))}}])&&o(e.prototype,t),n&&o(e,n),u}();return i(M,"propTypes",{scale:r.default.number,rotate:r.default.number,image:r.default.oneOfType([r.default.string].concat(function(e){if(Array.isArray(e))return g(e)}(b=x?[r.default.instanceOf(File)]:[])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(b)||v(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),border:r.default.oneOfType([r.default.number,r.default.arrayOf(r.default.number)]),borderRadius:r.default.number,width:r.default.number,height:r.default.number,position:r.default.shape({x:r.default.number,y:r.default.number}),color:r.default.arrayOf(r.default.number),backgroundColor:r.default.string,crossOrigin:r.default.oneOf(["","anonymous","use-credentials"]),onLoadFailure:r.default.func,onLoadSuccess:r.default.func,onImageReady:r.default.func,onImageChange:r.default.func,onMouseUp:r.default.func,onMouseMove:r.default.func,onPositionChange:r.default.func,disableBoundaryChecks:r.default.bool,disableHiDPIScaling:r.default.bool,disableCanvasRotation:r.default.bool}),i(M,"defaultProps",{scale:1,rotate:0,border:25,borderRadius:0,width:200,height:200,color:[0,0,0,.5],onLoadFailure:function(){},onLoadSuccess:function(){},onImageReady:function(){},onImageChange:function(){},onMouseUp:function(){},onMouseMove:function(){},onPositionChange:function(){},disableBoundaryChecks:!1,disableHiDPIScaling:!1,disableCanvasRotation:!0}),M}(n(5173),n(5043))},4960:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay(),o=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-o),t.setUTCHours(0,0,0,0),t}},4974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getFullYear()}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case o:case s:case i:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case v:case m:case u:return e;default:return t}}case a:return t}}}function C(e){return x(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=i,t.Suspense=h,t.isAsyncMode=function(e){return C(e)||x(e)===c},t.isConcurrentMode=C,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===v},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===a},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===i},t.isSuspense=function(e){return x(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===s||e===i||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===g)},t.typeOf=x},5027:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5126:(e,t,n)=>{"use strict";n.d(t,{Cg:()=>r,_m:()=>o,s0:()=>a});Math.pow(10,8);var r=6e4,a=36e5,o=1e3},5173:(e,t,n)=>{e.exports=n(1497)()},5237:(e,t,n)=>{e.exports=function(e){function t(e){let n,a,o,i=null;function s(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];if(!s.enabled)return;const o=s,i=Number(new Date),u=i-(n||i);o.diff=u,o.prev=n,o.curr=i,n=i,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let l=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";l++;const a=t.formatters[n];if("function"===typeof a){const t=r[l];e=a.call(o,t),r.splice(l,1),l--}return e})),t.formatArgs.call(o,r);(o.log||t.log).apply(o,r)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(a!==t.namespaces&&(a=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"===typeof t.init&&t.init(s),s}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function a(e,t){let n=0,r=0,a=-1,o=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(a=r,o=n,r++):(n++,r++);else{if(-1===a)return!1;r=a+1,o++,n=o}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(a(e,n))return!1;for(const n of t.names)if(a(e,n))return!0;return!1},t.humanize=n(7340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},5340:()=>{},5484:(e,t,n)=>{"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,s=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?s="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==s){var u=e.displayName||e.name,l="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}n.r(t),n.d(t,{polyfill:()=>i}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},5559:(e,t,n)=>{"use strict";e.exports=a;var r=n(2013);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}n(6329)(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},5622:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(2215),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.default)(e,-n)}},5765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5043),i=p(o),s=p(n(7950)),u=p(n(5173)),l=p(n(1439)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(6619)),f=n(8821),d=p(f),h=n(5484);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var v=t.portalClassName="ReactModalPortal",g=t.bodyOpenClassName="ReactModal__Body--open",y=f.canUseDOM&&void 0!==s.default.createPortal,b=function(e){return document.createElement(e)},w=function(){return y?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function x(e){return e()}var C=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return n=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.removePortal=function(){!y&&s.default.unmountComponentAtNode(a.node);var e=x(a.props.parentSelector);e&&e.contains(a.node)?e.removeChild(a.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},a.portalRef=function(e){a.portal=e},a.renderPortal=function(e){var n=w()(a,i.default.createElement(l.default,r({defaultStyles:t.defaultStyles},e)),a.node);a.portalRef(n)},m(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){f.canUseDOM&&(y||(this.node=b("div")),this.node.className=this.props.portalClassName,x(this.props.parentSelector).appendChild(this.node),!y&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:x(e.parentSelector),nextParent:x(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(f.canUseDOM){var r=this.props,a=r.isOpen,o=r.portalClassName;e.portalClassName!==o&&(this.node.className=o);var i=n.prevParent,s=n.nextParent;s!==i&&(i.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||a)&&!y&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(f.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return f.canUseDOM&&y?(!this.node&&y&&(this.node=b("div")),w()(i.default.createElement(l.default,r({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){c.setElement(e)}}]),t}(o.Component);C.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.oneOfType([u.default.instanceOf(d.default),u.default.instanceOf(f.SafeHTMLCollection),u.default.instanceOf(f.SafeNodeList),u.default.arrayOf(u.default.instanceOf(d.default))]),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},C.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:g,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return i.default.createElement("div",e,t)},contentElement:function(e,t){return i.default.createElement("div",e,t)}},C.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,h.polyfill)(C),t.default=C},5838:(e,t,n)=>{"use strict";var r=65536,a=4294967295;var o=n(9966).Buffer,i=n.g.crypto||n.g.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(e);if(e>0)if(e>r)for(var s=0;s<e;s+=r)i.getRandomValues(n.slice(s,s+r));else i.getRandomValues(n);if("function"===typeof t)return process.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},6062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[i,s],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}i=s=null,u=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(u.length);for(var e=[i,s],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var r,a=n(2959),o=(r=a)&&r.__esModule?r:{default:r};var i=void 0,s=void 0,u=[];function l(){0!==u.length&&u[u.length-1].focusContent()}o.default.subscribe((function(e,t){i||s||((i=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),i.style.position="absolute",i.style.opacity="0",i.setAttribute("tabindex","0"),i.addEventListener("focus",l),(s=i.cloneNode()).addEventListener("focus",l)),(u=t).length>0?(document.body.firstChild!==i&&document.body.insertBefore(i,document.body.firstChild),document.body.lastChild!==s&&document.body.appendChild(s)):(i.parentElement&&i.parentElement.removeChild(i),s.parentElement&&s.parentElement.removeChild(s))}))},6153:(e,t,n)=>{"use strict";var r;e.exports=k,k.ReadableState=_;n(7284).EventEmitter;var a=function(e,t){return e.listeners(t).length},o=n(2902),i=n(6382).Buffer,s=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var u,l=n(9838);u=l&&l.debuglog?l.debuglog("stream"):function(){};var c,f,d,h=n(7044),p=n(6725),m=n(8550).getHighWaterMark,v=n(6545).F,g=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,b=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(6329)(k,o);var x=p.errorOrDestroy,C=["error","close","destroy","pause","resume"];function _(e,t,a){r=r||n(6779),e=e||{},"boolean"!==typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",a),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=n(8694).I),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function k(e){if(r=r||n(6779),!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function S(e,t,n,r,a){u("readableAddChunk",t);var o,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}(e,l);else if(a||(o=function(e,t){var n;r=t,i.isBuffer(r)||r instanceof s||"string"===typeof t||void 0===t||e.objectMode||(n=new g("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(l,t)),o)x(e,o);else if(l.objectMode||t&&t.length>0)if("string"===typeof t||l.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),r)l.endEmitted?x(e,new w):M(e,l,t,!0);else if(l.ended)x(e,new y);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?M(e,l,t,!1):j(e,l)):M(e,l,t,!1)}else r||(l.reading=!1,j(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function M(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),j(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=p.destroy,k.prototype._undestroy=p.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},k.prototype.unshift=function(e){return S(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){c||(c=n(8694).I);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,a="";null!==r;)a+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var E=1073741824;function N(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(I,e))}function I(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,P(e)}function j(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){u("readable nexttick read 0"),e.read(0)}function R(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function O(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function z(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):T(this),null;if(0===(e=N(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,a=t.needReadable;return u("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",a=!0),t.ended||t.reading?u("reading or ended",a=!1):a&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=N(n,t))),null===(r=e>0?O(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){x(this,new b("_read()"))},k.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,u("pipe count=%d opts=%j",r.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?s:m;function i(t,a){u("onunpipe"),t===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,u("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",i),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",f),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}r.endEmitted?process.nextTick(o):n.once("end",o),e.on("unpipe",i);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",l);var c=!1;function f(t){u("ondata");var a=e.write(t);u("dest.write",a),!1===a&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==z(r.pipes,e))&&!c&&(u("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(t){u("onerror",t),m(),e.removeListener("error",d),0===a(e,"error")&&x(e,t)}function h(){e.removeListener("finish",p),m()}function p(){u("onfinish"),e.removeListener("close",h),m()}function m(){u("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",h),e.once("finish",p),e.emit("pipe",n),r.flowing||(u("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var i=z(t.pipes,e);return-1===i||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,u("on readable",r.length,r.reading),r.length?T(this):r.reading||process.nextTick(A,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(L,this),n},k.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(L,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(R,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){(u("wrapped data"),n.decoder&&(a=n.decoder.write(a)),!n.objectMode||null!==a&&void 0!==a)&&((n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause())))})),e)void 0===this[a]&&"function"===typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var o=0;o<C.length;o++)e.on(C[o],this.emit.bind(this,C[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"===typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=n(7312)),f(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=O,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(k.from=function(e,t){return void 0===d&&(d=n(7462)),d(k,e,t)})},6178:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function a(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function l(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function f(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,r=[],a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function h(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Qn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function v(e){return null==e._pf&&(e._pf=m()),e._pf}function g(e){var t=null,r=!1,a=e._d&&!isNaN(e._d.getTime());return a&&(t=v(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?a:(e._isValid=a,e._isValid)}function y(e){var t=p(NaN);return null!=e?h(v(t),e):v(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],w=!1;function x(e,t){var n,r,a,o=b.length;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=v(t)),l(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)l(a=t[r=b[n]])||(e[r]=a);return e}function C(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function _(e){return e instanceof C||null!=e&&null!=e._isAMomentObject}function k(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var a,o,i,u=[],l=arguments.length;for(o=0;o<l;o++){if(a="","object"===typeof arguments[o]){for(i in a+="\n["+o+"] ",arguments[0])s(arguments[0],i)&&(a+=i+": "+arguments[0][i]+", ");a=a.slice(0,-2)}else a=arguments[o];u.push(a)}k(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var M,E={};function N(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),E[e]||(k(t),E[e]=!0)}function T(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e){var t,n;for(n in e)s(e,n)&&(T(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(e,t){var n,r=h({},e);for(n in t)s(t,n)&&(i(e[n])&&i(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&i(e[n])&&(r[n]=h({},r[n]));return r}function D(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var L={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function A(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return T(r)?r.call(t,n):r}function R(e,t,n){var r=""+Math.abs(e),a=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},B={};function z(e,t,n,r){var a=r;"string"===typeof r&&(a=function(){return this[r]()}),e&&(B[e]=a),t&&(B[t[0]]=function(){return R(a.apply(this,arguments),t[1],t[2])}),n&&(B[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t,n,r=e.match(P);for(t=0,n=r.length;t<n;t++)B[r[t]]?r[t]=B[r[t]]:r[t]=U(r[t]);return function(t){var a,o="";for(a=0;a<n;a++)o+=T(r[a])?r[a].call(t,e):r[a];return o}}function V(e,t){return e.isValid()?(t=H(t,e.localeData()),F[t]=F[t]||W(t),F[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(O.lastIndex=0;n>=0&&O.test(e);)e=e.replace(O,r),O.lastIndex=0,n-=1;return e}var Y={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(P).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var q="Invalid date";function Q(){return this._invalidDate}var X="%d",K=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,n,r){var a=this._relativeTime[n];return T(a)?a(e,t,n,r):a.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return T(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)s(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ae={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function oe(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var ie,se=/\d/,ue=/\d\d/,le=/\d{3}/,ce=/\d{4}/,fe=/[+-]?\d{6}/,de=/\d\d?/,he=/\d\d\d\d?/,pe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ve=/\d{1,4}/,ge=/[+-]?\d{1,6}/,ye=/\d+/,be=/[+-]?\d+/,we=/Z|[+-]\d\d:?\d\d/gi,xe=/Z|[+-]\d\d(?::?\d\d)?/gi,Ce=/[+-]?\d+(\.\d{1,3})?/,_e=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ke=/^[1-9]\d?/,Se=/^([1-9]\d|\d)/;function Me(e,t,n){ie[e]=T(t)?t:function(e,r){return e&&n?n:t}}function Ee(e,t){return s(ie,e)?ie[e](t._strict,t._locale):new RegExp(Ne(e))}function Ne(e){return Te(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,a){return t||n||r||a})))}function Te(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ie(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function je(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Ie(t)),n}ie={};var De={};function Le(e,t){var n,r,a=t;for("string"===typeof e&&(e=[e]),c(t)&&(a=function(e,n){n[t]=je(e)}),r=e.length,n=0;n<r;n++)De[e[n]]=a}function Ae(e,t){Le(e,(function(e,n,r,a){r._w=r._w||{},t(e,r._w,r,a)}))}function Re(e,t,n){null!=t&&s(De,e)&&De[e](t,n._a,n,e)}function Pe(e){return e%4===0&&e%100!==0||e%400===0}var Oe=0,Fe=1,Be=2,ze=3,Ue=4,We=5,Ve=6,He=7,Ye=8;function Ge(e){return Pe(e)?366:365}z("Y",0,0,(function(){var e=this.year();return e<=9999?R(e,4):"+"+e})),z(0,["YY",2],0,(function(){return this.year()%100})),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),Me("Y",be),Me("YY",de,ue),Me("YYYY",ve,ce),Me("YYYYY",ge,fe),Me("YYYYYY",ge,fe),Le(["YYYYY","YYYYYY"],Oe),Le("YYYY",(function(e,t){t[Oe]=2===e.length?r.parseTwoDigitYear(e):je(e)})),Le("YY",(function(e,t){t[Oe]=r.parseTwoDigitYear(e)})),Le("Y",(function(e,t){t[Oe]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return je(e)+(je(e)>68?1900:2e3)};var qe,Qe=Ke("FullYear",!0);function Xe(){return Pe(this.year())}function Ke(e,t){return function(n){return null!=n?(Ze(this,e,n),r.updateOffset(this,t),this):Je(this,e)}}function Je(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Ze(e,t,n){var r,a,o,i,s;if(e.isValid()&&!isNaN(n)){switch(r=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(a?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(a?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(a?r.setUTCHours(n):r.setHours(n));case"Date":return void(a?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,i=e.month(),s=29!==(s=e.date())||1!==i||Pe(o)?s:28,a?r.setUTCFullYear(o,i,s):r.setFullYear(o,i,s)}}function $e(e){return T(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=oe(e=re(e)),a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(T(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Pe(e)?29:28:31-n%7%2}qe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},z("M",["MM",2],"Mo",(function(){return this.month()+1})),z("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),z("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),Me("M",de,ke),Me("MM",de,ue),Me("MMM",(function(e,t){return t.monthsShortRegex(e)})),Me("MMMM",(function(e,t){return t.monthsRegex(e)})),Le(["M","MM"],(function(e,t){t[Fe]=je(e)-1})),Le(["MMM","MMMM"],(function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[Fe]=a:v(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),at="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ot=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,it=_e,st=_e;function ut(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ot).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function lt(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ot.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(e,t,n){var r,a,o,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(a=qe.call(this._shortMonthsParse,i))?a:null:-1!==(a=qe.call(this._longMonthsParse,i))?a:null:"MMM"===t?-1!==(a=qe.call(this._shortMonthsParse,i))||-1!==(a=qe.call(this._longMonthsParse,i))?a:null:-1!==(a=qe.call(this._longMonthsParse,i))||-1!==(a=qe.call(this._shortMonthsParse,i))?a:null}function ft(e,t,n){var r,a,o;if(this._monthsParseExact)return ct.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function dt(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=je(t);else if(!c(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ht(e){return null!=e?(dt(this,e),r.updateOffset(this,!0),this):Je(this,"Month")}function pt(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=it),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||gt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=st),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gt(){function e(e,t){return t.length-e.length}var t,n,r,a,o=[],i=[],s=[];for(t=0;t<12;t++)n=p([2e3,t]),r=Te(this.monthsShort(n,"")),a=Te(this.months(n,"")),o.push(r),i.push(a),s.push(a),s.push(r);o.sort(e),i.sort(e),s.sort(e),this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function yt(e,t,n,r,a,o,i){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,a,o,i),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,a,o,i),s}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function xt(e,t,n,r,a){var o,i,s=1+7*(t-1)+(7+n-r)%7+wt(e,r,a);return s<=0?i=Ge(o=e-1)+s:s>Ge(e)?(o=e+1,i=s-Ge(e)):(o=e,i=s),{year:o,dayOfYear:i}}function Ct(e,t,n){var r,a,o=wt(e.year(),t,n),i=Math.floor((e.dayOfYear()-o-1)/7)+1;return i<1?r=i+_t(a=e.year()-1,t,n):i>_t(e.year(),t,n)?(r=i-_t(e.year(),t,n),a=e.year()+1):(a=e.year(),r=i),{week:r,year:a}}function _t(e,t,n){var r=wt(e,t,n),a=wt(e+1,t,n);return(Ge(e)-r+a)/7}function kt(e){return Ct(e,this._week.dow,this._week.doy).week}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),Me("w",de,ke),Me("ww",de,ue),Me("W",de,ke),Me("WW",de,ue),Ae(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=je(e)}));var St={dow:0,doy:6};function Mt(){return this._week.dow}function Et(){return this._week.doy}function Nt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Tt(e){var t=Ct(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function It(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function jt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}z("d",0,"do","day"),z("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),z("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),z("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),Me("d",de),Me("e",de),Me("E",de),Me("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Me("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Me("dddd",(function(e,t){return t.weekdaysRegex(e)})),Ae(["dd","ddd","dddd"],(function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);null!=a?t.d=a:v(n).invalidWeekday=e})),Ae(["d","e","E"],(function(e,t,n,r){t[r]=je(e)}));var Lt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),At="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pt=_e,Ot=_e,Ft=_e;function Bt(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function zt(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ut(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Wt(e,t,n){var r,a,o,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(a=qe.call(this._weekdaysParse,i))?a:null:"ddd"===t?-1!==(a=qe.call(this._shortWeekdaysParse,i))?a:null:-1!==(a=qe.call(this._minWeekdaysParse,i))?a:null:"dddd"===t?-1!==(a=qe.call(this._weekdaysParse,i))||-1!==(a=qe.call(this._shortWeekdaysParse,i))||-1!==(a=qe.call(this._minWeekdaysParse,i))?a:null:"ddd"===t?-1!==(a=qe.call(this._shortWeekdaysParse,i))||-1!==(a=qe.call(this._weekdaysParse,i))||-1!==(a=qe.call(this._minWeekdaysParse,i))?a:null:-1!==(a=qe.call(this._minWeekdaysParse,i))||-1!==(a=qe.call(this._weekdaysParse,i))||-1!==(a=qe.call(this._shortWeekdaysParse,i))?a:null}function Vt(e,t,n){var r,a,o;if(this._weekdaysParseExact)return Wt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=Je(this,"Day");return null!=e?(e=It(e,this.localeData()),this.add(e-t,"d")):t}function Yt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=jt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Pt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ot),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Kt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Kt(){function e(e,t){return t.length-e.length}var t,n,r,a,o,i=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Te(this.weekdaysMin(n,"")),a=Te(this.weekdaysShort(n,"")),o=Te(this.weekdays(n,"")),i.push(r),s.push(a),u.push(o),l.push(r),l.push(a),l.push(o);i.sort(e),s.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Zt(){return this.hours()||24}function $t(e,t){z(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Jt),z("k",["kk",2],0,Zt),z("hmm",0,0,(function(){return""+Jt.apply(this)+R(this.minutes(),2)})),z("hmmss",0,0,(function(){return""+Jt.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),z("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),z("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),$t("a",!0),$t("A",!1),Me("a",en),Me("A",en),Me("H",de,Se),Me("h",de,ke),Me("k",de,ke),Me("HH",de,ue),Me("hh",de,ue),Me("kk",de,ue),Me("hmm",he),Me("hmmss",pe),Me("Hmm",he),Me("Hmmss",pe),Le(["H","HH"],ze),Le(["k","kk"],(function(e,t,n){var r=je(e);t[ze]=24===r?0:r})),Le(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Le(["h","hh"],(function(e,t,n){t[ze]=je(e),v(n).bigHour=!0})),Le("hmm",(function(e,t,n){var r=e.length-2;t[ze]=je(e.substr(0,r)),t[Ue]=je(e.substr(r)),v(n).bigHour=!0})),Le("hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[ze]=je(e.substr(0,r)),t[Ue]=je(e.substr(r,2)),t[We]=je(e.substr(a)),v(n).bigHour=!0})),Le("Hmm",(function(e,t,n){var r=e.length-2;t[ze]=je(e.substr(0,r)),t[Ue]=je(e.substr(r))})),Le("Hmmss",(function(e,t,n){var r=e.length-4,a=e.length-2;t[ze]=je(e.substr(0,r)),t[Ue]=je(e.substr(r,2)),t[We]=je(e.substr(a))}));var nn=/[ap]\.?m?\.?/i,rn=Ke("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,sn={calendar:L,longDateFormat:Y,invalidDate:q,ordinal:X,dayOfMonthOrdinalParse:K,relativeTime:Z,months:rt,monthsShort:at,week:St,weekdays:Lt,weekdaysMin:Rt,weekdaysShort:At,meridiemParse:nn},un={},ln={};function cn(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function fn(e){return e?e.toLowerCase().replace("_","-"):e}function dn(e){for(var t,n,r,a,o=0;o<e.length;){for(t=(a=fn(e[o]).split("-")).length,n=(n=fn(e[o+1]))?n.split("-"):null;t>0;){if(r=pn(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&cn(a,n)>=t-1)break;t--}o++}return on}function hn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&hn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){un[t]=null}return un[t]}function mn(e,t){var n;return e&&((n=l(t)?yn(e):vn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function vn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=un[e])N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new D(j(r,t)),ln[e]&&ln[e].forEach((function(e){vn(e.name,e.config)})),mn(e),un[e]}return delete un[e],null}function gn(e,t){if(null!=t){var n,r,a=sn;null!=un[e]&&null!=un[e].parentLocale?un[e].set(j(un[e]._config,t)):(null!=(r=pn(e))&&(a=r._config),t=j(a,t),null==r&&(t.abbr=e),(n=new D(t)).parentLocale=un[e],un[e]=n),mn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===mn()&&mn(e)):null!=un[e]&&delete un[e]);return un[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!o(e)){if(t=pn(e))return t;e=[e]}return dn(e)}function bn(){return M(un)}function wn(e){var t,n=e._a;return n&&-2===v(e).overflow&&(t=n[Fe]<0||n[Fe]>11?Fe:n[Be]<1||n[Be]>nt(n[Oe],n[Fe])?Be:n[ze]<0||n[ze]>24||24===n[ze]&&(0!==n[Ue]||0!==n[We]||0!==n[Ve])?ze:n[Ue]<0||n[Ue]>59?Ue:n[We]<0||n[We]>59?We:n[Ve]<0||n[Ve]>999?Ve:-1,v(e)._overflowDayOfYear&&(t<Oe||t>Be)&&(t=Be),v(e)._overflowWeeks&&-1===t&&(t=He),v(e)._overflowWeekday&&-1===t&&(t=Ye),v(e).overflow=t),e}var xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_n=/Z|[+-]\d\d(?::?\d\d)?/,kn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mn=/^\/?Date\((-?\d+)/i,En=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Nn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Tn(e){var t,n,r,a,o,i,s=e._i,u=xn.exec(s)||Cn.exec(s),l=kn.length,c=Sn.length;if(u){for(v(e).iso=!0,t=0,n=l;t<n;t++)if(kn[t][1].exec(u[1])){a=kn[t][0],r=!1!==kn[t][2];break}if(null==a)return void(e._isValid=!1);if(u[3]){for(t=0,n=c;t<n;t++)if(Sn[t][1].exec(u[3])){o=(u[2]||" ")+Sn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!_n.exec(u[4]))return void(e._isValid=!1);i="Z"}e._f=a+(o||"")+(i||""),Un(e)}else e._isValid=!1}function In(e,t,n,r,a,o){var i=[jn(e),at.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return o&&i.push(parseInt(o,10)),i}function jn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ln(e,t,n){return!e||At.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(v(n).weekdayMismatch=!0,n._isValid=!1,!1)}function An(e,t,n){if(e)return Nn[e];if(t)return 0;var r=parseInt(n,10),a=r%100;return(r-a)/100*60+a}function Rn(e){var t,n=En.exec(Dn(e._i));if(n){if(t=In(n[4],n[3],n[2],n[5],n[6],n[7]),!Ln(n[1],t,e))return;e._a=t,e._tzm=An(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function Pn(e){var t=Mn.exec(e._i);null===t?(Tn(e),!1===e._isValid&&(delete e._isValid,Rn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function On(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Bn(e){var t,n,r,a,o,i=[];if(!e._d){for(r=Fn(e),e._w&&null==e._a[Be]&&null==e._a[Fe]&&zn(e),null!=e._dayOfYear&&(o=On(e._a[Oe],r[Oe]),(e._dayOfYear>Ge(o)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=bt(o,0,e._dayOfYear),e._a[Fe]=n.getUTCMonth(),e._a[Be]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ze]&&0===e._a[Ue]&&0===e._a[We]&&0===e._a[Ve]&&(e._nextDay=!0,e._a[ze]=0),e._d=(e._useUTC?bt:yt).apply(null,i),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ze]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==a&&(v(e).weekdayMismatch=!0)}}function zn(e){var t,n,r,a,o,i,s,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,i=4,n=On(t.GG,e._a[Oe],Ct(Xn(),1,4).year),r=On(t.W,1),((a=On(t.E,1))<1||a>7)&&(u=!0)):(o=e._locale._week.dow,i=e._locale._week.doy,l=Ct(Xn(),o,i),n=On(t.gg,e._a[Oe],l.year),r=On(t.w,l.week),null!=t.d?((a=t.d)<0||a>6)&&(u=!0):null!=t.e?(a=t.e+o,(t.e<0||t.e>6)&&(u=!0)):a=o),r<1||r>_t(n,o,i)?v(e)._overflowWeeks=!0:null!=u?v(e)._overflowWeekday=!0:(s=xt(n,r,a,o,i),e._a[Oe]=s.year,e._dayOfYear=s.dayOfYear)}function Un(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],v(e).empty=!0;var t,n,a,o,i,s,u,l=""+e._i,c=l.length,f=0;for(u=(a=H(e._f,e._locale).match(P)||[]).length,t=0;t<u;t++)o=a[t],(n=(l.match(Ee(o,e))||[])[0])&&((i=l.substr(0,l.indexOf(n))).length>0&&v(e).unusedInput.push(i),l=l.slice(l.indexOf(n)+n.length),f+=n.length),B[o]?(n?v(e).empty=!1:v(e).unusedTokens.push(o),Re(o,n,e)):e._strict&&!n&&v(e).unusedTokens.push(o);v(e).charsLeftOver=c-f,l.length>0&&v(e).unusedInput.push(l),e._a[ze]<=12&&!0===v(e).bigHour&&e._a[ze]>0&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[ze]=Wn(e._locale,e._a[ze],e._meridiem),null!==(s=v(e).era)&&(e._a[Oe]=e._locale.erasConvertYear(s,e._a[Oe])),Bn(e),wn(e)}else Rn(e);else Tn(e)}function Wn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Vn(e){var t,n,r,a,o,i,s=!1,u=e._f.length;if(0===u)return v(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<u;a++)o=0,i=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],Un(t),g(t)&&(i=!0),o+=v(t).charsLeftOver,o+=10*v(t).unusedTokens.length,v(t).score=o,s?o<r&&(r=o,n=t):(null==r||o<r||i)&&(r=o,n=t,i&&(s=!0));h(e,n||t)}function Hn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Bn(e)}}function Yn(e){var t=new C(wn(Gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),_(t)?new C(wn(t)):(f(t)?e._d=t:o(n)?Vn(e):n?Un(e):qn(e),g(e)||(e._d=null),e))}function qn(e){var t=e._i;l(t)?e._d=new Date(r.now()):f(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Pn(e):o(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Bn(e)):i(t)?Hn(e):c(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Qn(e,t,n,r,a){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(i(e)&&u(e)||o(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=a,s._l=n,s._i=e,s._f=t,s._strict=r,Yn(s)}function Xn(e,t,n,r){return Qn(e,t,n,r,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Kn=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Xn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Jn=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Xn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Zn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Xn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function $n(){return Zn("isBefore",[].slice.call(arguments,0))}function er(){return Zn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,a=nr.length;for(t in e)if(s(e,t)&&(-1===qe.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<a;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==je(e[nr[n]])&&(r=!0)}return!0}function ar(){return this._isValid}function or(){return Nr(NaN)}function ir(e){var t=re(e),n=t.year||0,r=t.quarter||0,a=t.month||0,o=t.week||t.isoWeek||0,i=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+i+7*o,this._months=+a+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function sr(e){return e instanceof ir}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function lr(e,t,n){var r,a=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),i=0;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&je(e[r])!==je(t[r]))&&i++;return i+o}function cr(e,t){z(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)}))}cr("Z",":"),cr("ZZ",""),Me("Z",xe),Me("ZZ",xe),Le(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=dr(xe,e)}));var fr=/([\+\-]|\d\d)/gi;function dr(e,t){var n,r,a=(t||"").match(e);return null===a?null:0===(r=60*(n=((a[a.length-1]||[])+"").match(fr)||["-",0,0])[1]+je(n[2]))?0:"+"===n[0]?r:-r}function hr(e,t){var n,a;return t._isUTC?(n=t.clone(),a=(_(e)||f(e)?e.valueOf():Xn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+a),r.updateOffset(n,!1),n):Xn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var a,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=dr(xe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(a=pr(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),o!==e&&(!t||this._changeInProgress?Lr(this,Nr(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pr(this)}function vr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=dr(we,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wr(e){return!!this.isValid()&&(e=e?Xn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function xr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Cr(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Gn(t))._a?(e=t._isUTC?p(t._a):Xn(t._a),this._isDSTShifted=this.isValid()&&lr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function _r(){return!!this.isValid()&&!this._isUTC}function kr(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Mr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Er=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Nr(e,t){var n,r,a,o=e,i=null;return sr(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(i=Mr.exec(e))?(n="-"===i[1]?-1:1,o={y:0,d:je(i[Be])*n,h:je(i[ze])*n,m:je(i[Ue])*n,s:je(i[We])*n,ms:je(ur(1e3*i[Ve]))*n}):(i=Er.exec(e))?(n="-"===i[1]?-1:1,o={y:Tr(i[2],n),M:Tr(i[3],n),w:Tr(i[4],n),d:Tr(i[5],n),h:Tr(i[6],n),m:Tr(i[7],n),s:Tr(i[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(a=jr(Xn(o.from),Xn(o.to)),(o={}).ms=a.milliseconds,o.M=a.months),r=new ir(o),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Tr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ir(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function jr(e,t){var n;return e.isValid()&&t.isValid()?(t=hr(t,e),e.isBefore(t)?n=Ir(e,t):((n=Ir(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dr(e,t){return function(n,r){var a;return null===r||isNaN(+r)||(N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=n,n=r,r=a),Lr(this,Nr(n,r),e),this}}function Lr(e,t,n,a){var o=t._milliseconds,i=ur(t._days),s=ur(t._months);e.isValid()&&(a=null==a||a,s&&dt(e,Je(e,"Month")+s*n),i&&Ze(e,"Date",Je(e,"Date")+i*n),o&&e._d.setTime(e._d.valueOf()+o*n),a&&r.updateOffset(e,i||s))}Nr.fn=ir.prototype,Nr.invalid=or;var Ar=Dr(1,"add"),Rr=Dr(-1,"subtract");function Pr(e){return"string"===typeof e||e instanceof String}function Or(e){return _(e)||f(e)||Pr(e)||c(e)||Br(e)||Fr(e)||null===e||void 0===e}function Fr(e){var t,n,r=i(e)&&!u(e),a=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],l=o.length;for(t=0;t<l;t+=1)n=o[t],a=a||s(e,n);return r&&a}function Br(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&Pr(e)})).length),t&&n}function zr(e){var t,n,r=i(e)&&!u(e),a=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],a=a||s(e,n);return r&&a}function Ur(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Wr(e,t){1===arguments.length&&(arguments[0]?Or(arguments[0])?(e=arguments[0],t=void 0):zr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Xn(),a=hr(n,this).startOf("day"),o=r.calendarFormat(this,a)||"sameElse",i=t&&(T(t[o])?t[o].call(this,n):t[o]);return this.format(i||this.localeData().calendar(o,this,Xn(n)))}function Vr(){return new C(this)}function Hr(e,t){var n=_(e)?e:Xn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Yr(e,t){var n=_(e)?e:Xn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gr(e,t,n,r){var a=_(e)?e:Xn(e),o=_(t)?t:Xn(t);return!!(this.isValid()&&a.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(a,n):!this.isBefore(a,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function qr(e,t){var n,r=_(e)?e:Xn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Kr(e,t,n){var r,a,o;if(!this.isValid())return NaN;if(!(r=hr(e,this)).isValid())return NaN;switch(a=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":o=Jr(this,r)/12;break;case"month":o=Jr(this,r);break;case"quarter":o=Jr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-a)/864e5;break;case"week":o=(this-r-a)/6048e5;break;default:o=this-r}return n?o:Ie(o)}function Jr(e,t){if(e.date()<t.date())return-Jr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Zr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $r(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?V(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(n,"Z")):V(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ea(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,a="moment",o="";return this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+a+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ta(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=V(this,e);return this.localeData().postformat(t)}function na(e,t){return this.isValid()&&(_(e)&&e.isValid()||Xn(e).isValid())?Nr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ra(e){return this.from(Xn(),e)}function aa(e,t){return this.isValid()&&(_(e)&&e.isValid()||Xn(e).isValid())?Nr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oa(e){return this.to(Xn(),e)}function ia(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sa=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ua(){return this._locale}var la=1e3,ca=60*la,fa=60*ca,da=3506328*fa;function ha(e,t){return(e%t+t)%t}function pa(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-da:new Date(e,t,n).valueOf()}function ma(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-da:Date.UTC(e,t,n)}function va(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?ma:pa,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ha(t+(this._isUTC?0:this.utcOffset()*ca),fa);break;case"minute":t=this._d.valueOf(),t-=ha(t,ca);break;case"second":t=this._d.valueOf(),t-=ha(t,la)}return this._d.setTime(t),r.updateOffset(this,!0),this}function ga(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?ma:pa,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fa-ha(t+(this._isUTC?0:this.utcOffset()*ca),fa)-1;break;case"minute":t=this._d.valueOf(),t+=ca-ha(t,ca)-1;break;case"second":t=this._d.valueOf(),t+=la-ha(t,la)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function ya(){return this._d.valueOf()-6e4*(this._offset||0)}function ba(){return Math.floor(this.valueOf()/1e3)}function wa(){return new Date(this.valueOf())}function xa(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ca(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function _a(){return this.isValid()?this.toISOString():null}function ka(){return g(this)}function Sa(){return h({},v(this))}function Ma(){return v(this).overflow}function Ea(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Na(e,t){var n,a,o,i=this._eras||yn("en")._eras;for(n=0,a=i.length;n<a;++n)switch("string"===typeof i[n].since&&(o=r(i[n].since).startOf("day"),i[n].since=o.valueOf()),typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":o=r(i[n].until).startOf("day").valueOf(),i[n].until=o.valueOf()}return i}function Ta(e,t,n){var r,a,o,i,s,u=this.eras();for(e=e.toUpperCase(),r=0,a=u.length;r<a;++r)if(o=u[r].name.toUpperCase(),i=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(i===e)return u[r];break;case"NNNN":if(o===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([o,i,s].indexOf(e)>=0)return u[r]}function Ia(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function ja(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Da(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function La(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Aa(){var e,t,n,a,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,a=this.clone().startOf("day").valueOf(),o[e].since<=a&&a<=o[e].until||o[e].until<=a&&a<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Ra(e){return s(this,"_erasNameRegex")||Wa.call(this),e?this._erasNameRegex:this._erasRegex}function Pa(e){return s(this,"_erasAbbrRegex")||Wa.call(this),e?this._erasAbbrRegex:this._erasRegex}function Oa(e){return s(this,"_erasNarrowRegex")||Wa.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fa(e,t){return t.erasAbbrRegex(e)}function Ba(e,t){return t.erasNameRegex(e)}function za(e,t){return t.erasNarrowRegex(e)}function Ua(e,t){return t._eraYearOrdinalRegex||ye}function Wa(){var e,t,n,r,a,o=[],i=[],s=[],u=[],l=this.eras();for(e=0,t=l.length;e<t;++e)n=Te(l[e].name),r=Te(l[e].abbr),a=Te(l[e].narrow),i.push(n),o.push(r),s.push(a),u.push(n),u.push(r),u.push(a);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+i.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function Va(e,t){z(0,[e,e.length],0,t)}function Ha(e){return Ka.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ya(e){return Ka.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ga(){return _t(this.year(),1,4)}function qa(){return _t(this.isoWeekYear(),1,4)}function Qa(){var e=this.localeData()._week;return _t(this.year(),e.dow,e.doy)}function Xa(){var e=this.localeData()._week;return _t(this.weekYear(),e.dow,e.doy)}function Ka(e,t,n,r,a){var o;return null==e?Ct(this,r,a).year:(t>(o=_t(e,r,a))&&(t=o),Ja.call(this,e,t,n,r,a))}function Ja(e,t,n,r,a){var o=xt(e,t,n,r,a),i=bt(o.year,0,o.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}function Za(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}z("N",0,0,"eraAbbr"),z("NN",0,0,"eraAbbr"),z("NNN",0,0,"eraAbbr"),z("NNNN",0,0,"eraName"),z("NNNNN",0,0,"eraNarrow"),z("y",["y",1],"yo","eraYear"),z("y",["yy",2],0,"eraYear"),z("y",["yyy",3],0,"eraYear"),z("y",["yyyy",4],0,"eraYear"),Me("N",Fa),Me("NN",Fa),Me("NNN",Fa),Me("NNNN",Ba),Me("NNNNN",za),Le(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var a=n._locale.erasParse(e,r,n._strict);a?v(n).era=a:v(n).invalidEra=e})),Me("y",ye),Me("yy",ye),Me("yyy",ye),Me("yyyy",ye),Me("yo",Ua),Le(["y","yy","yyy","yyyy"],Oe),Le(["yo"],(function(e,t,n,r){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Oe]=n._locale.eraYearOrdinalParse(e,a):t[Oe]=parseInt(e,10)})),z(0,["gg",2],0,(function(){return this.weekYear()%100})),z(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Va("gggg","weekYear"),Va("ggggg","weekYear"),Va("GGGG","isoWeekYear"),Va("GGGGG","isoWeekYear"),Me("G",be),Me("g",be),Me("GG",de,ue),Me("gg",de,ue),Me("GGGG",ve,ce),Me("gggg",ve,ce),Me("GGGGG",ge,fe),Me("ggggg",ge,fe),Ae(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=je(e)})),Ae(["gg","GG"],(function(e,t,n,a){t[a]=r.parseTwoDigitYear(e)})),z("Q",0,"Qo","quarter"),Me("Q",se),Le("Q",(function(e,t){t[Fe]=3*(je(e)-1)})),z("D",["DD",2],"Do","date"),Me("D",de,ke),Me("DD",de,ue),Me("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Le(["D","DD"],Be),Le("Do",(function(e,t){t[Be]=je(e.match(de)[0])}));var $a=Ke("Date",!0);function eo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}z("DDD",["DDDD",3],"DDDo","dayOfYear"),Me("DDD",me),Me("DDDD",le),Le(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=je(e)})),z("m",["mm",2],0,"minute"),Me("m",de,Se),Me("mm",de,ue),Le(["m","mm"],Ue);var to=Ke("Minutes",!1);z("s",["ss",2],0,"second"),Me("s",de,Se),Me("ss",de,ue),Le(["s","ss"],We);var no,ro,ao=Ke("Seconds",!1);for(z("S",0,0,(function(){return~~(this.millisecond()/100)})),z(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),z(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),z(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),z(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),z(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),z(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Me("S",me,se),Me("SS",me,ue),Me("SSS",me,le),no="SSSS";no.length<=9;no+="S")Me(no,ye);function oo(e,t){t[Ve]=je(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")Le(no,oo);function io(){return this._isUTC?"UTC":""}function so(){return this._isUTC?"Coordinated Universal Time":""}ro=Ke("Milliseconds",!1),z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var uo=C.prototype;function lo(e){return Xn(1e3*e)}function co(){return Xn.apply(null,arguments).parseZone()}function fo(e){return e}uo.add=Ar,uo.calendar=Wr,uo.clone=Vr,uo.diff=Kr,uo.endOf=ga,uo.format=ta,uo.from=na,uo.fromNow=ra,uo.to=aa,uo.toNow=oa,uo.get=$e,uo.invalidAt=Ma,uo.isAfter=Hr,uo.isBefore=Yr,uo.isBetween=Gr,uo.isSame=qr,uo.isSameOrAfter=Qr,uo.isSameOrBefore=Xr,uo.isValid=ka,uo.lang=sa,uo.locale=ia,uo.localeData=ua,uo.max=Jn,uo.min=Kn,uo.parsingFlags=Sa,uo.set=et,uo.startOf=va,uo.subtract=Rr,uo.toArray=xa,uo.toObject=Ca,uo.toDate=wa,uo.toISOString=$r,uo.inspect=ea,"undefined"!==typeof Symbol&&null!=Symbol.for&&(uo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),uo.toJSON=_a,uo.toString=Zr,uo.unix=ba,uo.valueOf=ya,uo.creationData=Ea,uo.eraName=ja,uo.eraNarrow=Da,uo.eraAbbr=La,uo.eraYear=Aa,uo.year=Qe,uo.isLeapYear=Xe,uo.weekYear=Ha,uo.isoWeekYear=Ya,uo.quarter=uo.quarters=Za,uo.month=ht,uo.daysInMonth=pt,uo.week=uo.weeks=Nt,uo.isoWeek=uo.isoWeeks=Tt,uo.weeksInYear=Qa,uo.weeksInWeekYear=Xa,uo.isoWeeksInYear=Ga,uo.isoWeeksInISOWeekYear=qa,uo.date=$a,uo.day=uo.days=Ht,uo.weekday=Yt,uo.isoWeekday=Gt,uo.dayOfYear=eo,uo.hour=uo.hours=rn,uo.minute=uo.minutes=to,uo.second=uo.seconds=ao,uo.millisecond=uo.milliseconds=ro,uo.utcOffset=mr,uo.utc=gr,uo.local=yr,uo.parseZone=br,uo.hasAlignedHourOffset=wr,uo.isDST=xr,uo.isLocal=_r,uo.isUtcOffset=kr,uo.isUtc=Sr,uo.isUTC=Sr,uo.zoneAbbr=io,uo.zoneName=so,uo.dates=S("dates accessor is deprecated. Use date instead.",$a),uo.months=S("months accessor is deprecated. Use month instead",ht),uo.years=S("years accessor is deprecated. Use year instead",Qe),uo.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vr),uo.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Cr);var ho=D.prototype;function po(e,t,n,r){var a=yn(),o=p().set(r,t);return a[n](o,e)}function mo(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return po(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=po(e,r,n,"month");return a}function vo(e,t,n,r){"boolean"===typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var a,o=yn(),i=e?o._week.dow:0,s=[];if(null!=n)return po(t,(n+i)%7,r,"day");for(a=0;a<7;a++)s[a]=po(t,(a+i)%7,r,"day");return s}function go(e,t){return mo(e,t,"months")}function yo(e,t){return mo(e,t,"monthsShort")}function bo(e,t,n){return vo(e,t,n,"weekdays")}function wo(e,t,n){return vo(e,t,n,"weekdaysShort")}function xo(e,t,n){return vo(e,t,n,"weekdaysMin")}ho.calendar=A,ho.longDateFormat=G,ho.invalidDate=Q,ho.ordinal=J,ho.preparse=fo,ho.postformat=fo,ho.relativeTime=$,ho.pastFuture=ee,ho.set=I,ho.eras=Na,ho.erasParse=Ta,ho.erasConvertYear=Ia,ho.erasAbbrRegex=Pa,ho.erasNameRegex=Ra,ho.erasNarrowRegex=Oa,ho.months=ut,ho.monthsShort=lt,ho.monthsParse=ft,ho.monthsRegex=vt,ho.monthsShortRegex=mt,ho.week=kt,ho.firstDayOfYear=Et,ho.firstDayOfWeek=Mt,ho.weekdays=Bt,ho.weekdaysMin=Ut,ho.weekdaysShort=zt,ho.weekdaysParse=Vt,ho.weekdaysRegex=qt,ho.weekdaysShortRegex=Qt,ho.weekdaysMinRegex=Xt,ho.isPM=tn,ho.meridiem=an,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===je(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",yn);var Co=Math.abs;function _o(){var e=this._data;return this._milliseconds=Co(this._milliseconds),this._days=Co(this._days),this._months=Co(this._months),e.milliseconds=Co(e.milliseconds),e.seconds=Co(e.seconds),e.minutes=Co(e.minutes),e.hours=Co(e.hours),e.months=Co(e.months),e.years=Co(e.years),this}function ko(e,t,n,r){var a=Nr(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function So(e,t){return ko(this,e,t,1)}function Mo(e,t){return ko(this,e,t,-1)}function Eo(e){return e<0?Math.floor(e):Math.ceil(e)}function No(){var e,t,n,r,a,o=this._milliseconds,i=this._days,s=this._months,u=this._data;return o>=0&&i>=0&&s>=0||o<=0&&i<=0&&s<=0||(o+=864e5*Eo(Io(s)+i),i=0,s=0),u.milliseconds=o%1e3,e=Ie(o/1e3),u.seconds=e%60,t=Ie(e/60),u.minutes=t%60,n=Ie(t/60),u.hours=n%24,i+=Ie(n/24),s+=a=Ie(To(i)),i-=Eo(Io(a)),r=Ie(s/12),s%=12,u.days=i,u.months=s,u.years=r,this}function To(e){return 4800*e/146097}function Io(e){return 146097*e/4800}function jo(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+To(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Io(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Do(e){return function(){return this.as(e)}}var Lo=Do("ms"),Ao=Do("s"),Ro=Do("m"),Po=Do("h"),Oo=Do("d"),Fo=Do("w"),Bo=Do("M"),zo=Do("Q"),Uo=Do("y"),Wo=Lo;function Vo(){return Nr(this)}function Ho(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Yo(e){return function(){return this.isValid()?this._data[e]:NaN}}var Go=Yo("milliseconds"),qo=Yo("seconds"),Qo=Yo("minutes"),Xo=Yo("hours"),Ko=Yo("days"),Jo=Yo("months"),Zo=Yo("years");function $o(){return Ie(this.days()/7)}var ei=Math.round,ti={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ni(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function ri(e,t,n,r){var a=Nr(e).abs(),o=ei(a.as("s")),i=ei(a.as("m")),s=ei(a.as("h")),u=ei(a.as("d")),l=ei(a.as("M")),c=ei(a.as("w")),f=ei(a.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||i<=1&&["m"]||i<n.m&&["mm",i]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),(d=d||l<=1&&["M"]||l<n.M&&["MM",l]||f<=1&&["y"]||["yy",f])[2]=t,d[3]=+e>0,d[4]=r,ni.apply(null,d)}function ai(e){return void 0===e?ei:"function"===typeof e&&(ei=e,!0)}function oi(e,t){return void 0!==ti[e]&&(void 0===t?ti[e]:(ti[e]=t,"s"===e&&(ti.ss=t-1),!0))}function ii(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,a=!1,o=ti;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(a=e),"object"===typeof t&&(o=Object.assign({},ti,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=ri(this,!a,o,n=this.localeData()),a&&(r=n.pastFuture(+this,r)),n.postformat(r)}var si=Math.abs;function ui(e){return(e>0)-(e<0)||+e}function li(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,a,o,i,s,u=si(this._milliseconds)/1e3,l=si(this._days),c=si(this._months),f=this.asSeconds();return f?(e=Ie(u/60),t=Ie(e/60),u%=60,e%=60,n=Ie(c/12),c%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",a=f<0?"-":"",o=ui(this._months)!==ui(f)?"-":"",i=ui(this._days)!==ui(f)?"-":"",s=ui(this._milliseconds)!==ui(f)?"-":"",a+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(l?i+l+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var ci=ir.prototype;return ci.isValid=ar,ci.abs=_o,ci.add=So,ci.subtract=Mo,ci.as=jo,ci.asMilliseconds=Lo,ci.asSeconds=Ao,ci.asMinutes=Ro,ci.asHours=Po,ci.asDays=Oo,ci.asWeeks=Fo,ci.asMonths=Bo,ci.asQuarters=zo,ci.asYears=Uo,ci.valueOf=Wo,ci._bubble=No,ci.clone=Vo,ci.get=Ho,ci.milliseconds=Go,ci.seconds=qo,ci.minutes=Qo,ci.hours=Xo,ci.days=Ko,ci.weeks=$o,ci.months=Jo,ci.years=Zo,ci.humanize=ii,ci.toISOString=li,ci.toString=li,ci.toJSON=li,ci.locale=ia,ci.localeData=ua,ci.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",li),ci.lang=sa,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Me("x",be),Me("X",Ce),Le("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Le("x",(function(e,t,n){n._d=new Date(je(e))})),r.version="2.30.1",a(Xn),r.fn=uo,r.min=$n,r.max=er,r.now=tr,r.utc=p,r.unix=lo,r.months=go,r.isDate=f,r.locale=mn,r.invalid=y,r.duration=Nr,r.isMoment=_,r.weekdays=bo,r.parseZone=co,r.localeData=yn,r.isDuration=sr,r.monthsShort=yo,r.weekdaysMin=xo,r.defineLocale=vn,r.updateLocale=gn,r.locales=bn,r.weekdaysShort=wo,r.normalizeUnits=ne,r.relativeTimeRounding=ai,r.relativeTimeThreshold=oi,r.calendarFormat=Ur,r.prototype=uo,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},6191:(e,t,n)=>{"use strict";function r(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>r})},6194:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()===o.getFullYear()}},6265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(5027),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=7*(0,r.A)(t);return(0,a.default)(e,n)}},6329:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6337:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(2215),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=3*(0,r.A)(t);return(0,a.default)(e,n)}},6340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getSeconds()}},6366:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function o(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var s,u,l,c;if(Array.isArray(e)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(!o(e[u],i[u]))return!1;return!0}if(n&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!i.has(u.value[0]))return!1;for(c=e.entries();!(u=c.next()).done;)if(!o(u.value[1],i.get(u.value[0])))return!1;return!0}if(r&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!i.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((s=e.length)!=i.length)return!1;for(u=s;0!==u--;)if(e[u]!==i[u])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof i.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof i.toString)return e.toString()===i.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(i,l[u]))return!1;if(t&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==l[u]&&"__v"!==l[u]&&"__o"!==l[u]||!e.$$typeof)&&!o(e[l[u]],i[l[u]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return o(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},6382:(e,t,n)=>{"use strict";const r=n(4445),a=n(6900),o="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,n)}function l(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=s(n);const a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return u.from(r,t,n);const a=function(e){if(u.isBuffer(e)){const t=0|p(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||K(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(a)return a;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),s(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,u.prototype),r}function p(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(a)return r?-1:G(e).length;t=(""+t).toLowerCase(),a=!0}}function v(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,a){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"===typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,a);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,a){let o,i=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(a){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*i}else-1!==r&&(o-=o-r),r=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){let n=!0;for(let r=0;r<u;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;const o=t.length;let i;for(r>o/2&&(r=o/2),i=0;i<r;++i){const r=parseInt(t.substr(2*i,2),16);if(K(r))return i;e[n+i]=r}return i}function x(e,t,n,r){return Q(G(t,e.length-n),e,n,r)}function C(e,t,n,r){return Q(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return Q(q(t),e,n,r)}function k(e,t,n,r){return Q(function(e,t){let n,r,a;const o=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);const r=[];let a=t;for(;a<n;){const t=e[a];let o=null,i=t>239?4:t>223?3:t>191?2:1;if(a+i<=n){let n,r,s,u;switch(i){case 1:t<128&&(o=t);break;case 2:n=e[a+1],128===(192&n)&&(u=(31&t)<<6|63&n,u>127&&(o=u));break;case 3:n=e[a+1],r=e[a+2],128===(192&n)&&128===(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:n=e[a+1],r=e[a+2],s=e[a+3],128===(192&n)&&128===(192&r)&&128===(192&s)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=i}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return function(e,t,n){return c(e),e<=0?s(e):void 0!==t?"string"===typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=u.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))a+t.length>r.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(r,a)):Uint8Array.prototype.set.call(r,t,a);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,a)}a+=t.length}return r},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?M(this,0,e):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,a){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(a>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0);const s=Math.min(o,i),l=this.slice(r,a),c=e.slice(t,n);for(let u=0;u<s;++u)if(l[u]!==c[u]){o=l[u],i=c[u];break}return o<i?-1:i<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":case"latin1":case"binary":return C(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function N(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function I(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let a="";for(let o=t;o<n;++o)a+=J[e[o]];return a}function j(e,t,n){const r=e.slice(t,n);let a="";for(let o=0;o<r.length-1;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,a,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,a){W(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function R(e,t,n,r,a){W(t,r,a,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function P(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,4),a.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,8),a.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],a=1;for(;t>0&&(a*=256);)r+=this[e+--t]*a;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,a=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(a)<<BigInt(32))})),u.prototype.readBigUInt64BE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],a=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(a)})),u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],a=1,o=0;for(;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,a=1,o=this[e+--r];for(;r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=Z((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),a.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),a.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),a.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),a.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){L(this,e,t,n,Math.pow(2,8*n)-1,0)}let a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=Z((function(e){return A(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=Z((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let a=0,o=1,i=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===i&&0!==this[t+a-1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let a=n-1,o=1,i=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===i&&0!==this[t+a+1]&&(i=1),this[t+a]=(e/o|0)-i&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=Z((function(e){return A(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=Z((function(e){return R(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const a=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),a},u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{const o=u.isBuffer(e)?e:u.from(e,r),i=o.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%i]}return this};const B={};function z(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function W(e,t,n,r,a,o){if(e>n||e<t){const r="bigint"===typeof t?"n":"";let a;throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(r," and < 2").concat(r," ** ").concat(8*(o+1)).concat(r):">= -(2".concat(r," ** ").concat(8*(o+1)-1).concat(r,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(r):">= ".concat(t).concat(r," and <= ").concat(n).concat(r),new B.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(r,a,o)}function V(e,t){if("number"!==typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),z("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),z("ERR_OUT_OF_RANGE",(function(e,t,n){let r='The value of "'.concat(e,'" is out of range.'),a=n;return Number.isInteger(n)&&Math.abs(n)>2**32?a=U(String(n)):"bigint"===typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=U(a)),a+="n"),r+=" It must be ".concat(t,". Received ").concat(a),r}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let a=null;const o=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Q(e,t,n,r){let a;for(a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!==e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let a=0;a<16;++a)t[r+a]=e[n]+e[a]}return t}();function Z(e){return"undefined"===typeof BigInt?$:e}function $(){throw new Error("BigInt not supported")}},6440:e=>{"use strict";var t=function(){};e.exports=t},6496:(e,t,n)=>{"use strict";var r,a=n(9989);a.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!a.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var i=document.createElement("div");i.setAttribute(n,"return;"),o="function"===typeof i[n]}return!o&&r&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},6522:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,a=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(a=r))})),t.splice(a,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BUN_VERSION:"latest",REACT_APP_LIVE_SERVER_ADDR:"https://connectbd.onrender.com",REACT_APP_PORT:"3000",REACT_APP_SERVER_ADDR:"https://connectbd.onrender.com",REACT_APP_URL:"https://programmerikram.com/ics/"}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(5237)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},6545:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var a=function(e){var t,r;function a(t,r,a){return e.call(this,function(e,t,r){return"string"===typeof n?n:n(e,t,r)}(t,r,a))||this}return r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,a}(r);a.prototype.name=r.name,a.prototype.code=e,t[e]=a}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var a,o,i,s;if("string"===typeof t&&(o="not ",t.substr(!i||i<0?0:+i,o.length)===o)?(a="must not be",t=t.replace(/^not /,"")):a="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(a," ").concat(r(t,"type"));else{var u=function(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(a," ").concat(r(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},6593:(e,t,n)=>{const r=n(6522)("simple-peer"),a=n(7919),o=n(5838),i=n(3350),s=n(4275),u=n(4823),{Buffer:l}=n(6382),c=65536;function f(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class d extends i.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||d.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},d.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"===typeof e.wrtc?e.wrtc:a(),!this._wrtc)throw"undefined"===typeof window?u(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):u(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void this.destroy(u(t,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc="number"===typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},"object"===typeof this._pc.peerIdentity&&this._pc.peerIdentity.catch((e=>{this.destroy(u(e,"ERR_PC_PEER_IDENTITY"))})),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach((e=>{this.addStream(e)})),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"===typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((()=>{this.destroyed||(this._pendingCandidates.forEach((e=>{this._addIceCandidate(e)})),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())})).catch((e=>{this.destroy(u(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch((e=>{var n;!t.address||t.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):this.destroy(u(e,"ERR_ADD_ICE_CANDIDATE"))}))}send(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(n){this.destroy(u(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((t=>{this.addTrack(t,e)}))}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(e)||new Map;let r=n.get(t);if(r)throw r.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");r=this._pc.addTrack(e,t),n.set(t,r),this._senderMap.set(e,n),this._needsNegotiation()}replaceTrack(e,t,n){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const r=this._senderMap.get(e),a=r?r.get(n):null;if(!a)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,r),null!=a.replaceTrack?a.replaceTrack(t):this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(e),r=n?n.get(t):null;if(!r)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{r.removed=!0,this._pc.removeTrack(r)}catch(a){"NS_ERROR_UNEXPECTED"===a.name?this._sendersAwaitingStable.push(r):this.destroy(u(a,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((t=>{this.removeTrack(t,e)}))}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,s((()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1})))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((()=>{this._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,(()=>{}))}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),s((()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()})))}_setupData(e){if(!e.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"===typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=c),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{const t=e.error instanceof Error?e.error:new Error("Datachannel error: ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));this.destroy(u(t,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval((()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1}),5e3)}_read(){}_write(e,t,n){if(this.destroyed)return n(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(r){return this.destroy(u(r,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>c?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout((()=>this.destroy()),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))}),this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=f(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})};this._pc.setLocalDescription(e).then((()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(u(e,"ERR_CREATE_OFFER"))}))}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach((e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))}))}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then((e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=f(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()};this._pc.setLocalDescription(e).then((()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))})).catch((e=>{this.destroy(u(e,"ERR_SET_LOCAL_DESCRIPTION"))}))})).catch((e=>{this.destroy(u(e,"ERR_CREATE_ANSWER"))}))}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((t=>{Object.assign(e,t)})),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((n=>{const r=[];n.forEach((e=>{r.push(t(e))})),e(null,r)}),(t=>e(t))):this._pc.getStats.length>0?this._pc.getStats((n=>{if(this.destroyed)return;const r=[];n.result().forEach((e=>{const n={};e.names().forEach((t=>{n[t]=e.stat(t)})),n.id=e.id,n.type=e.type,n.timestamp=e.timestamp,r.push(t(n))})),e(null,r)}),(t=>e(t))):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats(((t,n)=>{if(this.destroyed)return;t&&(n=[]);const r={},a={},o={};let i=!1;n.forEach((e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(a[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(o[e.id]=e)}));const s=e=>{i=!0;let t=a[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"===typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let n=r[e.remoteCandidateId];n&&(n.ip||n.address)?(this.remoteAddress=n.ip||n.address,this.remotePort=Number(n.port)):n&&n.ipAddress?(this.remoteAddress=n.ipAddress,this.remotePort=Number(n.portNumber)):"string"===typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),this.remoteAddress=n[0],this.remotePort=Number(n[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach((e=>{"transport"===e.type&&e.selectedCandidatePairId&&s(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)})),i||Object.keys(o).length&&!Object.keys(a).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(u(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const e=this._cb;this._cb=null,e(null)}"number"!==typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval((()=>this._onInterval()),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)}))};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>c||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=l.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach((t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some((e=>e.id===t.id))||(this._remoteStreams.push(t),s((()=>{this._debug("on stream"),this.emit("stream",t)})))}))}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}d.WEBRTC_SUPPORT=!!a(),d.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},d.channelConfig={},e.exports=d},6619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){s&&(s.removeAttribute?s.removeAttribute("aria-hidden"):null!=s.length?s.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(s).forEach((function(e){return e.removeAttribute("aria-hidden")})));s=null},t.log=function(){0},t.assertNodeList=u,t.setElement=function(e){var t=e;if("string"===typeof t&&i.canUseDOM){var n=document.querySelectorAll(t);u(n,t),t=n}return s=t||s},t.validateElement=l,t.hide=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=l(e)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.show=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=l(e)[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){a.value.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}},t.documentNotReadyOrSSRTesting=function(){s=null};var r,a=n(6440),o=(r=a)&&r.__esModule?r:{default:r},i=n(8821);var s=null;function u(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function l(e){var t=e||s;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},6725:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var o=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!a&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):a?(process.nextTick(n,o),a(e)):process.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},6779:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var a=n(6153),o=n(9001);n(6329)(l,a);for(var i=r(o.prototype),s=0;s<i.length;s++){var u=i[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||process.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},6900:(e,t)=>{t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?a-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(i=o&(1<<-c)-1,o>>=-c,c+=r;c>0;i=256*i+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),o-=l}return(h?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,u,l=8*o-a-1,c=(1<<l)-1,f=c>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(i++,u/=2),i+f>=c?(s=0,i=c):i+f>=1?(s=(t*u-1)*Math.pow(2,a),i+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),i=0));a>=8;e[n+h]=255&s,h+=p,s/=256,a-=8);for(i=i<<a|s,l+=a;l>0;e[n+h]=255&i,h+=p,i/=256,l-=8);e[n+h-p]|=128*m}},7029:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,o=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||o)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var o=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/o,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*o)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var i=this.ctx,s=this.canvas;return i&&s&&(s.width=(null===e||void 0===e?void 0:e.width)||s.width,s.height=(null===e||void 0===e?void 0:e.height)||s.height,n.mirrored&&(i.translate(s.width,0),i.scale(-1,1)),i.imageSmoothingEnabled=n.imageSmoothing,i.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(i.scale(-1,1),i.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var o={video:"undefined"===typeof a||a};n.audio&&(o.audio="undefined"===typeof r||r),e.requestUserMediaId++;var i=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(o).then((function(n){e.unmounted||i!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},o=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,i=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(i=e.id)}));var s=o(n.audioConstraints);s&&(t=s);var u=o(n.videoConstraints);u&&(i=u),r(a(t),a(i))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.disablePictureInPicture),u=(n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),l=n.style,c=void 0===l?{}:l,f=n.children,d=i(n,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=u?o(o({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",o({autoPlay:!0,disablePictureInPicture:s,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},d)),f&&f(p))},t.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(5043))},7044:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var u=n(6382).Buffer,l=n(5340).inspect,c=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t,n,r,a=u.allocUnsafe(e>>>0),o=this.head,i=0;o;)t=o.data,n=a,r=i,u.prototype.copy.call(t,n,r),i+=o.data.length,o=o.next;return a}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,o=e>a.length?a.length:e;if(o===a.length?r+=a:r+=a.slice(0,e),0===(e-=o)){o===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,o),0===(e-=o)){o===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(o));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return l(this,a(a({},t),{},{depth:0,customInspect:!1}))}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},7099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Manager:()=>i,Popper:()=>Le,Reference:()=>Pe,usePopper:()=>Te});var r=n(5043),a=r.createContext(),o=r.createContext();function i(e){var t=e.children,n=r.useState(null),i=n[0],s=n[1],u=r.useRef(!1);r.useEffect((function(){return function(){u.current=!0}}),[]);var l=r.useCallback((function(e){u.current||s(e)}),[]);return r.createElement(a.Provider,{value:i},r.createElement(o.Provider,{value:l},t))}var s=function(e){return Array.isArray(e)?e[0]:e},u=function(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},l=function(e,t){if("function"===typeof e)return u(e,t);null!=e&&(e.current=t)},c=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},f="undefined"!==typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,d=n(7950);function h(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function p(e){return e instanceof h(e).Element||e instanceof Element}function m(e){return e instanceof h(e).HTMLElement||e instanceof HTMLElement}function v(e){return"undefined"!==typeof ShadowRoot&&(e instanceof h(e).ShadowRoot||e instanceof ShadowRoot)}var g=Math.max,y=Math.min,b=Math.round;function w(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function x(){return!/^((?!chrome|android).)*safari/i.test(w())}function C(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),a=1,o=1;t&&m(e)&&(a=e.offsetWidth>0&&b(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&b(r.height)/e.offsetHeight||1);var i=(p(e)?h(e):window).visualViewport,s=!x()&&n,u=(r.left+(s&&i?i.offsetLeft:0))/a,l=(r.top+(s&&i?i.offsetTop:0))/o,c=r.width/a,f=r.height/o;return{width:c,height:f,top:l,right:u+c,bottom:l+f,left:u,x:u,y:l}}function _(e){var t=h(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function k(e){return e?(e.nodeName||"").toLowerCase():null}function S(e){return((p(e)?e.ownerDocument:e.document)||window.document).documentElement}function M(e){return C(S(e)).left+_(e).scrollLeft}function E(e){return h(e).getComputedStyle(e)}function N(e){var t=E(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function T(e,t,n){void 0===n&&(n=!1);var r=m(t),a=m(t)&&function(e){var t=e.getBoundingClientRect(),n=b(t.width)/e.offsetWidth||1,r=b(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),o=S(t),i=C(e,a,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==k(t)||N(o))&&(s=function(e){return e!==h(e)&&m(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:_(e);var t}(t)),m(t)?((u=C(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):o&&(u.x=M(o))),{x:i.left+s.scrollLeft-u.x,y:i.top+s.scrollTop-u.y,width:i.width,height:i.height}}function I(e){var t=C(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function j(e){return"html"===k(e)?e:e.assignedSlot||e.parentNode||(v(e)?e.host:null)||S(e)}function D(e){return["html","body","#document"].indexOf(k(e))>=0?e.ownerDocument.body:m(e)&&N(e)?e:D(j(e))}function L(e,t){var n;void 0===t&&(t=[]);var r=D(e),a=r===(null==(n=e.ownerDocument)?void 0:n.body),o=h(r),i=a?[o].concat(o.visualViewport||[],N(r)?r:[]):r,s=t.concat(i);return a?s:s.concat(L(j(i)))}function A(e){return["table","td","th"].indexOf(k(e))>=0}function R(e){return m(e)&&"fixed"!==E(e).position?e.offsetParent:null}function P(e){for(var t=h(e),n=R(e);n&&A(n)&&"static"===E(n).position;)n=R(n);return n&&("html"===k(n)||"body"===k(n)&&"static"===E(n).position)?t:n||function(e){var t=/firefox/i.test(w());if(/Trident/i.test(w())&&m(e)&&"fixed"===E(e).position)return null;var n=j(e);for(v(n)&&(n=n.host);m(n)&&["html","body"].indexOf(k(n))<0;){var r=E(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var O="top",F="bottom",B="right",z="left",U="auto",W=[O,F,B,z],V="start",H="end",Y="viewport",G="popper",q=W.reduce((function(e,t){return e.concat([t+"-"+V,t+"-"+H])}),[]),Q=[].concat(W,[U]).reduce((function(e,t){return e.concat([t,t+"-"+V,t+"-"+H])}),[]),X=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function K(e){var t=new Map,n=new Set,r=[];function a(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&a(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||a(e)})),r}function J(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Z={placement:"bottom",modifiers:[],strategy:"absolute"};function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function ee(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,a=t.defaultOptions,o=void 0===a?Z:a;return function(e,t,n){void 0===n&&(n=o);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Z,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},i=[],s=!1,u={state:a,setOptions:function(n){var s="function"===typeof n?n(a.options):n;l(),a.options=Object.assign({},o,a.options,s),a.scrollParents={reference:p(e)?L(e):e.contextElement?L(e.contextElement):[],popper:L(t)};var c=function(e){var t=K(e);return X.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=c.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"===typeof o){var s=o({state:a,name:t,instance:u,options:r}),l=function(){};i.push(s||l)}})),u.update()},forceUpdate:function(){if(!s){var e=a.elements,t=e.reference,n=e.popper;if($(t,n)){a.rects={reference:T(t,P(n),"fixed"===a.options.strategy),popper:I(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var o=a.orderedModifiers[r],i=o.fn,l=o.options,c=void 0===l?{}:l,f=o.name;"function"===typeof i&&(a=i({state:a,options:c,name:f,instance:u})||a)}else a.reset=!1,r=-1}}},update:J((function(){return new Promise((function(e){u.forceUpdate(),e(a)}))})),destroy:function(){l(),s=!0}};if(!$(e,t))return u;function l(){i.forEach((function(e){return e()})),i=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var te={passive:!0};function ne(e){return e.split("-")[0]}function re(e){return e.split("-")[1]}function ae(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function oe(e){var t,n=e.reference,r=e.element,a=e.placement,o=a?ne(a):null,i=a?re(a):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(o){case O:t={x:s,y:n.y-r.height};break;case F:t={x:s,y:n.y+n.height};break;case B:t={x:n.x+n.width,y:u};break;case z:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var l=o?ae(o):null;if(null!=l){var c="y"===l?"height":"width";switch(i){case V:t[l]=t[l]-(n[c]/2-r[c]/2);break;case H:t[l]=t[l]+(n[c]/2-r[c]/2)}}return t}var ie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(e){var t,n=e.popper,r=e.popperRect,a=e.placement,o=e.variation,i=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,d=i.x,p=void 0===d?0:d,m=i.y,v=void 0===m?0:m,g="function"===typeof c?c({x:p,y:v}):{x:p,y:v};p=g.x,v=g.y;var y=i.hasOwnProperty("x"),w=i.hasOwnProperty("y"),x=z,C=O,_=window;if(l){var k=P(n),M="clientHeight",N="clientWidth";if(k===h(n)&&"static"!==E(k=S(n)).position&&"absolute"===s&&(M="scrollHeight",N="scrollWidth"),a===O||(a===z||a===B)&&o===H)C=F,v-=(f&&k===_&&_.visualViewport?_.visualViewport.height:k[M])-r.height,v*=u?1:-1;if(a===z||(a===O||a===F)&&o===H)x=B,p-=(f&&k===_&&_.visualViewport?_.visualViewport.width:k[N])-r.width,p*=u?1:-1}var T,I=Object.assign({position:s},l&&ie),j=!0===c?function(e,t){var n=e.x,r=e.y,a=t.devicePixelRatio||1;return{x:b(n*a)/a||0,y:b(r*a)/a||0}}({x:p,y:v},h(n)):{x:p,y:v};return p=j.x,v=j.y,u?Object.assign({},I,((T={})[C]=w?"0":"",T[x]=y?"0":"",T.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",T)):Object.assign({},I,((t={})[C]=w?v+"px":"",t[x]=y?p+"px":"",t.transform="",t))}const ue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.offset,o=void 0===a?[0,0]:a,i=Q.reduce((function(e,n){return e[n]=function(e,t,n){var r=ne(e),a=[z,O].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},t,{placement:e})):n,i=o[0],s=o[1];return i=i||0,s=(s||0)*a,[z,B].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,o),e}),{}),s=i[t.placement],u=s.x,l=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=i}};var le={left:"right",right:"left",bottom:"top",top:"bottom"};function ce(e){return e.replace(/left|right|bottom|top/g,(function(e){return le[e]}))}var fe={start:"end",end:"start"};function de(e){return e.replace(/start|end/g,(function(e){return fe[e]}))}function he(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&v(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function pe(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function me(e,t,n){return t===Y?pe(function(e,t){var n=h(e),r=S(e),a=n.visualViewport,o=r.clientWidth,i=r.clientHeight,s=0,u=0;if(a){o=a.width,i=a.height;var l=x();(l||!l&&"fixed"===t)&&(s=a.offsetLeft,u=a.offsetTop)}return{width:o,height:i,x:s+M(e),y:u}}(e,n)):p(t)?function(e,t){var n=C(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):pe(function(e){var t,n=S(e),r=_(e),a=null==(t=e.ownerDocument)?void 0:t.body,o=g(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),i=g(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),s=-r.scrollLeft+M(e),u=-r.scrollTop;return"rtl"===E(a||n).direction&&(s+=g(n.clientWidth,a?a.clientWidth:0)-o),{width:o,height:i,x:s,y:u}}(S(e)))}function ve(e,t,n,r){var a="clippingParents"===t?function(e){var t=L(j(e)),n=["absolute","fixed"].indexOf(E(e).position)>=0&&m(e)?P(e):e;return p(n)?t.filter((function(e){return p(e)&&he(e,n)&&"body"!==k(e)})):[]}(e):[].concat(t),o=[].concat(a,[n]),i=o[0],s=o.reduce((function(t,n){var a=me(e,n,r);return t.top=g(a.top,t.top),t.right=y(a.right,t.right),t.bottom=y(a.bottom,t.bottom),t.left=g(a.left,t.left),t}),me(e,i,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ge(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function ye(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function be(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=void 0===r?e.placement:r,o=n.strategy,i=void 0===o?e.strategy:o,s=n.boundary,u=void 0===s?"clippingParents":s,l=n.rootBoundary,c=void 0===l?Y:l,f=n.elementContext,d=void 0===f?G:f,h=n.altBoundary,m=void 0!==h&&h,v=n.padding,g=void 0===v?0:v,y=ge("number"!==typeof g?g:ye(g,W)),b=d===G?"reference":G,w=e.rects.popper,x=e.elements[m?b:d],_=ve(p(x)?x:x.contextElement||S(e.elements.popper),u,c,i),k=C(e.elements.reference),M=oe({reference:k,element:w,strategy:"absolute",placement:a}),E=pe(Object.assign({},w,M)),N=d===G?E:k,T={top:_.top-N.top+y.top,bottom:N.bottom-_.bottom+y.bottom,left:_.left-N.left+y.left,right:N.right-_.right+y.right},I=e.modifiersData.offset;if(d===G&&I){var j=I[a];Object.keys(T).forEach((function(e){var t=[B,F].indexOf(e)>=0?1:-1,n=[O,F].indexOf(e)>=0?"y":"x";T[e]+=j[n]*t}))}return T}function we(e,t,n){return g(e,y(t,n))}const xe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0!==i&&i,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,h=void 0===d||d,p=n.tetherOffset,m=void 0===p?0:p,v=be(t,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),b=ne(t.placement),w=re(t.placement),x=!w,C=ae(b),_="x"===C?"y":"x",k=t.modifiersData.popperOffsets,S=t.rects.reference,M=t.rects.popper,E="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,N="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,j={x:0,y:0};if(k){if(o){var D,L="y"===C?O:z,A="y"===C?F:B,R="y"===C?"height":"width",U=k[C],W=U+v[L],H=U-v[A],Y=h?-M[R]/2:0,G=w===V?S[R]:M[R],q=w===V?-M[R]:-S[R],Q=t.elements.arrow,X=h&&Q?I(Q):{width:0,height:0},K=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},J=K[L],Z=K[A],$=we(0,S[R],X[R]),ee=x?S[R]/2-Y-$-J-N.mainAxis:G-$-J-N.mainAxis,te=x?-S[R]/2+Y+$+Z+N.mainAxis:q+$+Z+N.mainAxis,oe=t.elements.arrow&&P(t.elements.arrow),ie=oe?"y"===C?oe.clientTop||0:oe.clientLeft||0:0,se=null!=(D=null==T?void 0:T[C])?D:0,ue=U+te-se,le=we(h?y(W,U+ee-se-ie):W,U,h?g(H,ue):H);k[C]=le,j[C]=le-U}if(s){var ce,fe="x"===C?O:z,de="x"===C?F:B,he=k[_],pe="y"===_?"height":"width",me=he+v[fe],ve=he-v[de],ge=-1!==[O,z].indexOf(b),ye=null!=(ce=null==T?void 0:T[_])?ce:0,xe=ge?me:he-S[pe]-M[pe]-ye+N.altAxis,Ce=ge?he+S[pe]+M[pe]-ye-N.altAxis:ve,_e=h&&ge?function(e,t,n){var r=we(e,t,n);return r>n?n:r}(xe,he,Ce):we(h?xe:me,he,h?Ce:ve);k[_]=_e,j[_]=_e-he}t.modifiersData[r]=j}},requiresIfExists:["offset"]};const Ce={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,a=e.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=ne(n.placement),u=ae(s),l=[z,B].indexOf(s)>=0?"height":"width";if(o&&i){var c=function(e,t){return ge("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:ye(e,W))}(a.padding,n),f=I(o),d="y"===u?O:z,h="y"===u?F:B,p=n.rects.reference[l]+n.rects.reference[u]-i[u]-n.rects.popper[l],m=i[u]-n.rects.reference[u],v=P(o),g=v?"y"===u?v.clientHeight||0:v.clientWidth||0:0,y=p/2-m/2,b=c[d],w=g-f[l]-c[h],x=g/2-f[l]/2+y,C=we(b,x,w),_=u;n.modifiersData[r]=((t={})[_]=C,t.centerOffset=C-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&he(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _e(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ke(e){return[O,B,F,z].some((function(t){return e[t]>=0}))}var Se=ee({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,o=void 0===a||a,i=r.resize,s=void 0===i||i,u=h(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&l.forEach((function(e){e.addEventListener("scroll",n.update,te)})),s&&u.addEventListener("resize",n.update,te),function(){o&&l.forEach((function(e){e.removeEventListener("scroll",n.update,te)})),s&&u.removeEventListener("resize",n.update,te)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=oe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=void 0===r||r,o=n.adaptive,i=void 0===o||o,s=n.roundOffsets,u=void 0===s||s,l={placement:ne(t.placement),variation:re(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,se(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,se(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},a=t.elements[e];m(a)&&k(a)&&(Object.assign(a.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?a.removeAttribute(e):a.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],a=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});m(r)&&k(r)&&(Object.assign(r.style,o),Object.keys(a).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},ue,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,o=void 0===a||a,i=n.altAxis,s=void 0===i||i,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,v=t.options.placement,g=ne(v),y=u||(g===v||!p?[ce(v)]:function(e){if(ne(e)===U)return[];var t=ce(e);return[de(e),t,de(t)]}(v)),b=[v].concat(y).reduce((function(e,n){return e.concat(ne(n)===U?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,a=n.boundary,o=n.rootBoundary,i=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=void 0===u?Q:u,c=re(r),f=c?s?q:q.filter((function(e){return re(e)===c})):W,d=f.filter((function(e){return l.indexOf(e)>=0}));0===d.length&&(d=f);var h=d.reduce((function(t,n){return t[n]=be(e,{placement:n,boundary:a,rootBoundary:o,padding:i})[ne(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:c,rootBoundary:f,padding:l,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),w=t.rects.reference,x=t.rects.popper,C=new Map,_=!0,k=b[0],S=0;S<b.length;S++){var M=b[S],E=ne(M),N=re(M)===V,T=[O,F].indexOf(E)>=0,I=T?"width":"height",j=be(t,{placement:M,boundary:c,rootBoundary:f,altBoundary:d,padding:l}),D=T?N?B:z:N?F:O;w[I]>x[I]&&(D=ce(D));var L=ce(D),A=[];if(o&&A.push(j[E]<=0),s&&A.push(j[D]<=0,j[L]<=0),A.every((function(e){return e}))){k=M,_=!1;break}C.set(M,A)}if(_)for(var R=function(e){var t=b.find((function(t){var n=C.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return k=t,"break"},P=p?3:1;P>0;P--){if("break"===R(P))break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},xe,Ce,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,o=t.modifiersData.preventOverflow,i=be(t,{elementContext:"reference"}),s=be(t,{altBoundary:!0}),u=_e(i,r),l=_e(s,a,o),c=ke(u),f=ke(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}}]}),Me=n(6366),Ee=n.n(Me),Ne=[],Te=function(e,t,n){void 0===n&&(n={});var a=r.useRef(null),o={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||Ne},i=r.useState({styles:{popper:{position:o.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),s=i[0],u=i[1],l=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);d.flushSync((function(){u({styles:c(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:c(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),h=r.useMemo((function(){var e={onFirstUpdate:o.onFirstUpdate,placement:o.placement,strategy:o.strategy,modifiers:[].concat(o.modifiers,[l,{name:"applyStyles",enabled:!1}])};return Ee()(a.current,e)?a.current||e:(a.current=e,e)}),[o.onFirstUpdate,o.placement,o.strategy,o.modifiers,l]),p=r.useRef();return f((function(){p.current&&p.current.setOptions(h)}),[h]),f((function(){if(null!=e&&null!=t){var r=(n.createPopper||Se)(e,t,h);return p.current=r,function(){r.destroy(),p.current=null}}}),[e,t,n.createPopper]),{state:p.current?p.current.state:null,styles:s.styles,attributes:s.attributes,update:p.current?p.current.update:null,forceUpdate:p.current?p.current.forceUpdate:null}},Ie=function(){},je=function(){return Promise.resolve(null)},De=[];function Le(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.strategy,i=void 0===o?"absolute":o,u=e.modifiers,c=void 0===u?De:u,f=e.referenceElement,d=e.onFirstUpdate,h=e.innerRef,p=e.children,m=r.useContext(a),v=r.useState(null),g=v[0],y=v[1],b=r.useState(null),w=b[0],x=b[1];r.useEffect((function(){l(h,g)}),[h,g]);var C=r.useMemo((function(){return{placement:n,strategy:i,onFirstUpdate:d,modifiers:[].concat(c,[{name:"arrow",enabled:null!=w,options:{element:w}}])}}),[n,i,d,c,w]),_=Te(f||m,g,C),k=_.state,S=_.styles,M=_.forceUpdate,E=_.update,N=r.useMemo((function(){return{ref:y,style:S.popper,placement:k?k.placement:n,hasPopperEscaped:k&&k.modifiersData.hide?k.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:k&&k.modifiersData.hide?k.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:S.arrow,ref:x},forceUpdate:M||Ie,update:E||je}}),[y,x,n,k,S,E,M]);return s(p)(N)}var Ae=n(6440),Re=n.n(Ae);function Pe(e){var t=e.children,n=e.innerRef,a=r.useContext(o),i=r.useCallback((function(e){l(n,e),u(a,e)}),[n,a]);return r.useEffect((function(){return function(){return l(n,null)}}),[]),r.useEffect((function(){Re()(Boolean(a),"`Reference` should not be used outside of a `Manager` component.")}),[a]),s(t)({ref:i})}},7124:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getMinutes()}},7184:()=>{},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<a&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,d=null,h=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(v=!1,w(e),!m)if(null!==r(l))m=!0,L(C);else{var t=r(c);null!==t&&A(x,t.startTime-e)}}function C(e,n){m=!1,v&&(v=!1,y(M),M=-1),p=!0;var o=h;try{for(w(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!T());){var i=d.callback;if("function"===typeof i){d.callback=null,h=d.priorityLevel;var s=i(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&a(l),w(n)}else a(l);d=r(l)}if(null!==d)var u=!0;else{var f=r(c);null!==f&&A(x,f.startTime-n),u=!1}return u}finally{d=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,S=null,M=-1,E=5,N=-1;function T(){return!(t.unstable_now()-N<E)}function I(){if(null!==S){var e=t.unstable_now();N=e;var n=!0;try{n=S(!0,e)}finally{n?_():(k=!1,S=null)}}else k=!1}if("function"===typeof b)_=function(){b(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,D=j.port2;j.port1.onmessage=I,_=function(){D.postMessage(null)}}else _=function(){g(I,0)};function L(e){S=e,k||(k=!0,_())}function A(e,n){M=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(v?(y(M),M=-1):v=!0,A(x,o-i))):(e.sortIndex=s,n(l,e),m||p||(m=!0,L(C))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},7284:e=>{"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function a(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,a,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var a,o,i,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"===typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=u(e))>0&&i.length>a&&!i.warned){i.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=i.length,l=c,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=c.bind(r);return a.listener=n,r.wrapFn=a,a}function d(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"===typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):p(a,a.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(o){r.once&&e.removeEventListener(t,a),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,o=this._events;if(void 0!==o)a=a&&void 0===o.error;else if(!a)return!1;if(a){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)r(u,this,t);else{var l=u.length,c=p(u,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,a,o,i;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7312:(e,t,n)=>{"use strict";var r;function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(227),i=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function p(e){var t=e[i];if(null!==t){var n=e[d].read();null!==n&&(e[c]=null,e[i]=null,e[s]=null,t(h(n,!1)))}}function m(e){process.nextTick(p,e)}var v=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((a(r={get stream(){return this[d]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[u]?n(e[u]):t(h(void 0,!0))}))}));var n,r=this[c];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(h(void 0,!0)):t[f](n,r)}),r)}}(r,this));else{var a=this[d].read();if(null!==a)return Promise.resolve(h(a,!1));n=new Promise(this[f])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),a(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),r),v);e.exports=function(e){var t,n=Object.create(g,(a(t={},d,{value:e,writable:!0}),a(t,i,{value:null,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,u,{value:null,writable:!0}),a(t,l,{value:e._readableState.endEmitted,writable:!0}),a(t,f,{value:function(e,t){var r=n[d].read();r?(n[c]=null,n[i]=null,n[s]=null,e(h(r,!1))):(n[i]=e,n[s]=t)},writable:!0}),t));return n[c]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[c]=null,n[i]=null,n[s]=null,t(e)),void(n[u]=e)}var r=n[i];null!==r&&(n[c]=null,n[i]=null,n[s]=null,r(h(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}},7318:()=>{},7340:e=>{var t=1e3,n=60*t,r=60*n,a=24*r,o=7*a,i=365.25*a;function s(e,t,n,r){var a=t>=1.5*n;return Math.round(e/n)+" "+r+(a?"s":"")}e.exports=function(e,u){u=u||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*n;case"seconds":case"second":case"secs":case"sec":case"s":return u*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===l&&isFinite(e))return u.long?function(e){var o=Math.abs(e);if(o>=a)return s(e,o,a,"day");if(o>=r)return s(e,o,r,"hour");if(o>=n)return s(e,o,n,"minute");if(o>=t)return s(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=a)return Math.round(e/a)+"d";if(o>=r)return Math.round(e/r)+"h";if(o>=n)return Math.round(e/n)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7358:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case o:case s:case i:case d:case h:return e;default:switch(e=e&&e.$$typeof){case c:case l:case f:case m:case p:case u:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference")},7396:(e,t,n)=>{var r;!function(){"use strict";var a=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:a,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:a&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:a&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},7451:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(888),a=n(8726),o=n(6191),i=n(8171);function s(e,t){var n,s,u,l,c,f,d,h;(0,a.A)(1,arguments);var p=(0,i.q)(),m=(0,o.A)(null!==(n=null!==(s=null!==(u=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(c=t.locale)||void 0===c||null===(f=c.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==u?u:p.weekStartsOn)&&void 0!==s?s:null===(d=p.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var v=(0,r.default)(e),g=v.getUTCDay(),y=(g<m?7:0)+g-m;return v.setUTCDate(v.getUTCDate()-y),v.setUTCHours(0,0,0,0),v}},7462:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},7487:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),a=n(2550),o=n(8726),i=36e5;function s(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.A)(e,n*i)}},7531:()=>{},7532:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(888),a=n(4960),o=n(7780),i=n(8726);var s=6048e5;function u(e){(0,i.A)(1,arguments);var t=(0,r.default)(e),n=(0,a.A)(t).getTime()-function(e){(0,i.A)(1,arguments);var t=(0,o.A)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,a.A)(n)}(t).getTime();return Math.round(n/s)+1}},7566:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);return n.setHours(i),n}},7660:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},7780:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(888),a=n(8726),o=n(4960);function i(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var s=(0,o.A)(i),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var l=(0,o.A)(u);return t.getTime()>=s.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}},7815:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()-o.getFullYear()}},7919:e=>{e.exports=function(){if("undefined"===typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,o(n)))}return e}function o(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getTime()}},8171:(e,t,n)=>{"use strict";n.d(t,{q:()=>a});var r={};function a(){return r}},8224:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t),s=n.getFullYear(),u=n.getDate(),l=new Date(0);l.setFullYear(s,i,15),l.setHours(0,0,0,0);var c=function(e){(0,o.A)(1,arguments);var t=(0,a.default)(e),n=t.getFullYear(),r=t.getMonth(),i=new Date(0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}(l);return n.setMonth(i,Math.min(u,c)),n}},8435:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},a=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}};const o={p:a,P:function(e,t){var n,o=e.match(/(P+)(p+)?/)||[],i=o[1],s=o[2];if(!s)return r(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(i,t)).replace("{{time}}",a(s,t))}}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8539:(e,t,n)=>{"use strict";function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{A:()=>r})},8550:(e,t,n)=>{"use strict";var r=n(6545).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,a){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,a,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(a?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},8613:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,a){"use strict";var o=[],i=Object.getPrototypeOf,s=o.slice,u=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},l=o.push,c=o.indexOf,f={},d=f.toString,h=f.hasOwnProperty,p=h.toString,m=p.call(Object),v={},g=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var r,a,o=(n=n||b).createElement("script");if(o.text=e,t)for(r in w)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,a);n.head.appendChild(o).parentNode.removeChild(o)}function C(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?f[d.call(e)]||"object":typeof e}var _="3.7.1",k=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function M(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function E(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:_,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},S.extend=S.fn.extend=function(){var e,t,n,r,a,o,i=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"===typeof i&&(l=i,i=arguments[s]||{},s++),"object"===typeof i||g(i)||(i={}),s===u&&(i=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&i!==r&&(l&&r&&(S.isPlainObject(r)||(a=Array.isArray(r)))?(n=i[t],o=a&&!Array.isArray(n)?[]:a||S.isPlainObject(n)?n:{},a=!1,i[t]=S.extend(l,o,r)):void 0!==r&&(i[t]=r));return i},S.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(!(t=i(e))||"function"===typeof(n=h.call(t,"constructor")&&t.constructor)&&p.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(M(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,a=e.nodeType;if(!a)for(;t=e[r++];)n+=S.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?S.merge(n,"string"===typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!k.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,o=e.length,i=!n;a<o;a++)!t(e[a],a)!==i&&r.push(e[a]);return r},map:function(e,t,n){var r,a,o=0,i=[];if(M(e))for(r=e.length;o<r;o++)null!=(a=t(e[o],o,n))&&i.push(a);else for(o in e)null!=(a=t(e[o],o,n))&&i.push(a);return u(i)},guid:1,support:v}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=o[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var N=o.pop,T=o.sort,I=o.splice,j="[\\x20\\t\\r\\n\\f]",D=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g");S.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function A(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(L,A)};var R=b,P=l;!function(){var e,t,n,a,i,u,l,f,d,p,m=P,g=S.expando,y=0,b=0,w=ee(),x=ee(),C=ee(),_=ee(),k=function(e,t){return e===t&&(i=!0),0},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",A="\\["+j+"*("+L+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+j+"*\\]",O=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+A+")*)|.*)\\)|)",F=new RegExp(j+"+","g"),B=new RegExp("^"+j+"*,"+j+"*"),z=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),U=new RegExp(j+"|>"),W=new RegExp(O),V=new RegExp("^"+L+"$"),H={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+A),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}"+j+"?|\\\\([^\\r\\n\\f])","g"),K=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){ue()},Z=de((function(e){return!0===e.disabled&&E(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(o=s.call(R.childNodes),R.childNodes),o[R.childNodes.length].nodeType}catch(be){m={apply:function(e,t){P.apply(e,s.call(t))},call:function(e){P.apply(e,s.call(arguments,1))}}}function $(e,t,n,r){var a,o,i,s,l,c,h,p=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(ue(t),t=t||u,f)){if(11!==y&&(l=q.exec(e)))if(a=l[1]){if(9===y){if(!(i=t.getElementById(a)))return n;if(i.id===a)return m.call(n,i),n}else if(p&&(i=p.getElementById(a))&&$.contains(t,i)&&i.id===a)return m.call(n,i),n}else{if(l[2])return m.apply(n,t.getElementsByTagName(e)),n;if((a=l[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(a)),n}if(!_[e+" "]&&(!d||!d.test(e))){if(h=e,p=t,1===y&&(U.test(e)||z.test(e))){for((p=Q.test(e)&&se(t.parentNode)||t)==t&&v.scope||((s=t.getAttribute("id"))?s=S.escapeSelector(s):t.setAttribute("id",s=g)),o=(c=ce(e)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+fe(c[o]);h=c.join(",")}try{return m.apply(n,p.querySelectorAll(h)),n}catch(b){_(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return ye(e.replace(D,"$1"),t,n,r)}function ee(){var e=[];return function n(r,a){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=a}}function te(e){return e[g]=!0,e}function ne(e){var t=u.createElement("fieldset");try{return!!e(t)}catch(be){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return E(t,"input")&&t.type===e}}function ae(e){return function(t){return(E(t,"input")||E(t,"button"))&&t.type===e}}function oe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Z(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ie(e){return te((function(t){return t=+t,te((function(n,r){for(var a,o=e([],n.length,t),i=o.length;i--;)n[a=o[i]]&&(n[a]=!(r[a]=n[a]))}))}))}function se(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function ue(e){var n,r=e?e.ownerDocument||e:R;return r!=u&&9===r.nodeType&&r.documentElement?(l=(u=r).documentElement,f=!S.isXMLDoc(u),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&R!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",J),v.getById=ne((function(e){return l.appendChild(e).id=S.expando,!u.getElementsByName||!u.getElementsByName(S.expando).length})),v.disconnectedMatch=ne((function(e){return p.call(e,"*")})),v.scope=ne((function(){return u.querySelectorAll(":scope")})),v.cssHas=ne((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(be){return!0}})),v.getById?(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&f){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&f){var n,r,a,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(a=t.getElementsByName(e),r=0;o=a[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&f)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+j+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+g+"-]").length||d.push("~="),e.querySelectorAll("a#"+g+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=u.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=u.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+j+"*name"+j+"*="+j+"*(?:''|\"\")")})),v.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),k=function(e,t){if(e===t)return i=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===u||e.ownerDocument==R&&$.contains(R,e)?-1:t===u||t.ownerDocument==R&&$.contains(R,t)?1:a?c.call(a,e)-c.call(a,t):0:4&n?-1:1)},u):u}for(e in $.matches=function(e,t){return $(e,null,null,t)},$.matchesSelector=function(e,t){if(ue(e),f&&!_[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(be){_(t,!0)}return $(t,u,null,[e]).length>0},$.contains=function(e,t){return(e.ownerDocument||e)!=u&&ue(e),S.contains(e,t)},$.attr=function(e,n){(e.ownerDocument||e)!=u&&ue(e);var r=t.attrHandle[n.toLowerCase()],a=r&&h.call(t.attrHandle,n.toLowerCase())?r(e,n,!f):void 0;return void 0!==a?a:e.getAttribute(n)},$.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,n=[],r=0,o=0;if(i=!v.sortStable,a=!v.sortStable&&s.call(e,0),T.call(e,k),i){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)I.call(e,n[r],1)}return a=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(s.apply(this)))},t=S.expr={cacheLength:50,createPseudo:te,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,K),e[3]=(e[3]||e[4]||e[5]||"").replace(X,K),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||$.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&$.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return H.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=ce(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,K).toLowerCase();return"*"===e?function(){return!0}:function(e){return E(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&w(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var a=$.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var o="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p=o!==i?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),b=!u&&!s,w=!1;if(m){if(o){for(;p;){for(f=t;f=f[p];)if(s?E(f,v):1===f.nodeType)return!1;h=p="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?m.firstChild:m.lastChild],i&&b){for(w=(d=(l=(c=m[g]||(m[g]={}))[e]||[])[0]===y&&l[1])&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[p]||(w=d=0)||h.pop();)if(1===f.nodeType&&++w&&f===t){c[e]=[y,d,w];break}}else if(b&&(w=d=(l=(c=t[g]||(t[g]={}))[e]||[])[0]===y&&l[1]),!1===w)for(;(f=++d&&f&&f[p]||(w=d=0)||h.pop())&&(!(s?E(f,v):1===f.nodeType)||!++w||(b&&((c=f[g]||(f[g]={}))[e]=[y,w]),f!==t)););return(w-=a)===r||w%r===0&&w/r>=0}}},PSEUDO:function(e,n){var r,a=t.pseudos[e]||t.setFilters[e.toLowerCase()]||$.error("unsupported pseudo: "+e);return a[g]?a(n):a.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,o=a(e,n),i=o.length;i--;)e[r=c.call(e,o[i])]=!(t[r]=o[i])})):function(e){return a(e,0,r)}):a}},pseudos:{not:te((function(e){var t=[],n=[],r=ge(e.replace(D,"$1"));return r[g]?te((function(e,t,n,a){for(var o,i=r(e,null,a,[]),s=e.length;s--;)(o=i[s])&&(e[s]=!(t[s]=o))})):function(e,a,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return $(e,t).length>0}})),contains:te((function(e){return e=e.replace(X,K),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:te((function(e){return V.test(e||"")||$.error("unsupported lang: "+e),e=e.replace(X,K).toLowerCase(),function(t){var n;do{if(n=f?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return u.activeElement}catch(e){}}()&&u.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:oe(!1),disabled:oe(!0),checked:function(e){return E(e,"input")&&!!e.checked||E(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){return E(e,"input")&&"button"===e.type||E(e,"button")},text:function(e){var t;return E(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ie((function(){return[0]})),last:ie((function(e,t){return[t-1]})),eq:ie((function(e,t,n){return[n<0?n+t:n]})),even:ie((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ie((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ie((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ie((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ae(e);function le(){}function ce(e,n){var r,a,o,i,s,u,l,c=x[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=t.preFilter;s;){for(i in r&&!(a=B.exec(s))||(a&&(s=s.slice(a[0].length)||s),u.push(o=[])),r=!1,(a=z.exec(s))&&(r=a.shift(),o.push({value:r,type:a[0].replace(D," ")}),s=s.slice(r.length)),t.filter)!(a=H[i].exec(s))||l[i]&&!(a=l[i](a))||(r=a.shift(),o.push({value:r,type:i,matches:a}),s=s.slice(r.length));if(!r)break}return n?s.length:s?$.error(e):x(e,u).slice(0)}function fe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,a=t.next,o=a||r,i=n&&"parentNode"===o,s=b++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,a);return!1}:function(t,n,u){var l,c,f=[y,s];if(u){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[g]||(t[g]={}),a&&E(t,a))t=t[r]||t;else{if((l=c[o])&&l[0]===y&&l[1]===s)return f[2]=l[2];if(c[o]=f,f[2]=e(t,n,u))return!0}return!1}}function he(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,a){for(var o,i=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,a)||(i.push(o),l&&t.push(s)));return i}function me(e,t,n,r,a,o){return r&&!r[g]&&(r=me(r)),a&&!a[g]&&(a=me(a,o)),te((function(o,i,s,u){var l,f,d,h,p=[],v=[],g=i.length,y=o||function(e,t,n){for(var r=0,a=t.length;r<a;r++)$(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),b=!e||!o&&t?y:pe(y,p,e,s,u);if(n?n(b,h=a||(o?e:g||r)?[]:i,s,u):h=b,r)for(l=pe(h,v),r(l,[],s,u),f=l.length;f--;)(d=l[f])&&(h[v[f]]=!(b[v[f]]=d));if(o){if(a||e){if(a){for(l=[],f=h.length;f--;)(d=h[f])&&l.push(b[f]=d);a(null,h=[],l,u)}for(f=h.length;f--;)(d=h[f])&&(l=a?c.call(o,d):p[f])>-1&&(o[l]=!(i[l]=d))}}else h=pe(h===i?h.splice(g,h.length):h),a?a(null,i,h,u):m.apply(i,h)}))}function ve(e){for(var r,a,o,i=e.length,s=t.relative[e[0].type],u=s||t.relative[" "],l=s?1:0,f=de((function(e){return e===r}),u,!0),d=de((function(e){return c.call(r,e)>-1}),u,!0),h=[function(e,t,a){var o=!s&&(a||t!=n)||((r=t).nodeType?f(e,t,a):d(e,t,a));return r=null,o}];l<i;l++)if(a=t.relative[e[l].type])h=[de(he(h),a)];else{if((a=t.filter[e[l].type].apply(null,e[l].matches))[g]){for(o=++l;o<i&&!t.relative[e[o].type];o++);return me(l>1&&he(h),l>1&&fe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(D,"$1"),a,l<o&&ve(e.slice(l,o)),o<i&&ve(e=e.slice(o)),o<i&&fe(e))}h.push(a)}return he(h)}function ge(e,r){var a,o=[],i=[],s=C[e+" "];if(!s){for(r||(r=ce(e)),a=r.length;a--;)(s=ve(r[a]))[g]?o.push(s):i.push(s);s=C(e,function(e,r){var a=r.length>0,o=e.length>0,i=function(i,s,l,c,d){var h,p,v,g=0,b="0",w=i&&[],x=[],C=n,_=i||o&&t.find.TAG("*",d),k=y+=null==C?1:Math.random()||.1,M=_.length;for(d&&(n=s==u||s||d);b!==M&&null!=(h=_[b]);b++){if(o&&h){for(p=0,s||h.ownerDocument==u||(ue(h),l=!f);v=e[p++];)if(v(h,s||u,l)){m.call(c,h);break}d&&(y=k)}a&&((h=!v&&h)&&g--,i&&w.push(h))}if(g+=b,a&&b!==g){for(p=0;v=r[p++];)v(w,x,s,l);if(i){if(g>0)for(;b--;)w[b]||x[b]||(x[b]=N.call(c));x=pe(x)}m.apply(c,x),d&&!i&&x.length>0&&g+r.length>1&&S.uniqueSort(c)}return d&&(y=k,n=C),w};return a?te(i):i}(i,o)),s.selector=e}return s}function ye(e,n,r,a){var o,i,s,u,l,c="function"===typeof e&&e,d=!a&&ce(e=c.selector||e);if(r=r||[],1===d.length){if((i=d[0]=d[0].slice(0)).length>2&&"ID"===(s=i[0]).type&&9===n.nodeType&&f&&t.relative[i[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(X,K),n)||[])[0]))return r;c&&(n=n.parentNode),e=e.slice(i.shift().value.length)}for(o=H.needsContext.test(e)?0:i.length;o--&&(s=i[o],!t.relative[u=s.type]);)if((l=t.find[u])&&(a=l(s.matches[0].replace(X,K),Q.test(i[0].type)&&se(n.parentNode)||n))){if(i.splice(o,1),!(e=a.length&&fe(i)))return m.apply(r,a),r;break}}return(c||ge(e,d))(a,n,!f,r,!n||Q.test(e)&&se(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,v.sortStable=g.split("").sort(k).join("")===g,ue(),v.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(u.createElement("fieldset"))})),S.find=$,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,$.compile=ge,$.select=ye,$.setDocument=ue,$.tokenize=ce,$.escape=S.escapeSelector,$.getText=S.text,$.isXML=S.isXMLDoc,$.selectors=S.expr,$.support=S.support,$.uniqueSort=S.uniqueSort}();var O=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&S(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},B=S.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function U(e,t,n){return g(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?S.grep(e,(function(e){return c.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(a[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,a[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(U(this,e||[],!1))},not:function(e){return this.pushStack(U(this,e||[],!0))},is:function(e){return!!U(this,"string"===typeof e&&B.test(e)?S(e):e||[],!1).length}});var W,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||W,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:V.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),z.test(r[1])&&S.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=b.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,W=S(b);var H=/^(?:parents|prev(?:Until|All))/,Y={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,a=this.length,o=[],i="string"!==typeof e&&S(e);if(!B.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?c.call(S(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(E(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var a=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(a=S.filter(r,a)),this.length>1&&(Y[e]||S.uniqueSort(a),H.test(e)&&a.reverse()),this.pushStack(a)}}));var q=/[^\x20\t\r\n\f]+/g;function Q(e){return e}function X(e){throw e}function K(e,t,n,r){var a;try{e&&g(a=e.promise)?a.call(e).done(t).fail(n):e&&g(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return S.each(e.match(q)||[],(function(e,n){t[n]=!0})),t}(e):S.extend({},e);var t,n,r,a,o=[],i=[],s=-1,u=function(){for(a=a||e.once,r=t=!0;i.length;s=-1)for(n=i.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,a&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,i.push(n)),function t(n){S.each(n,(function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return S.each(arguments,(function(e,t){for(var n;(n=S.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return a=i=[],o=n="",this},disabled:function(){return!o},lock:function(){return a=i=[],n||t||(o=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],i.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var a=g(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,a){var o=0;function i(e,t,n,a){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(e<o)){if((r=n.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"===typeof r||"function"===typeof r)&&r.then,g(l)?a?l.call(r,i(o,t,Q,a),i(o,t,X,a)):(o++,l.call(r,i(o,t,Q,a),i(o,t,X,a),i(o,t,Q,t.notifyWith))):(n!==Q&&(s=void 0,u=[r]),(a||t.resolveWith)(s,u))}},c=a?l:function(){try{l()}catch(r){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(r,c.error),e+1>=o&&(n!==X&&(s=void 0,u=[r]),t.rejectWith(s,u))}};e?c():(S.Deferred.getErrorHook?c.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(c.error=S.Deferred.getStackHook()),r.setTimeout(c))}}return S.Deferred((function(r){t[0][3].add(i(0,r,g(a)?a:Q,r.notifyWith)),t[1][3].add(i(0,r,g(e)?e:Q)),t[2][3].add(i(0,r,g(n)?n:X))})).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},o={};return S.each(t,(function(e,r){var i=r[2],s=r[5];a[r[1]]=i.add,s&&i.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=i.fireWith})),a.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),a=s.call(arguments),o=S.Deferred(),i=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,a)}};if(t<=1&&(K(e,o.done(i(n)).resolve,o.reject,!t),"pending"===o.state()||g(a[n]&&a[n].then)))return o.then();for(;n--;)K(a[n],i(n),o.reject);return o.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&J.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){r.setTimeout((function(){throw e}))};var Z=S.Deferred();function $(){b.removeEventListener("DOMContentLoaded",$),r.removeEventListener("load",$),S.ready()}S.fn.ready=function(e){return Z.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||Z.resolveWith(b,[S]))}}),S.ready.then=Z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(S.ready):(b.addEventListener("DOMContentLoaded",$),r.addEventListener("load",$));var ee=function(e,t,n,r,a,o,i){var s=0,u=e.length,l=null==n;if("object"===C(n))for(s in a=!0,n)ee(e,t,s,n[s],!0,o,i);else if(void 0!==r&&(a=!0,g(r)||(i=!0),l&&(i?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,i?r:r.call(e[s],s,t(e[s],n)));return a?e:l?t.call(e):u?t(e[0],n):o},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ae(e){return e.replace(te,"ms-").replace(ne,re)}var oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ie(){this.expando=S.expando+ie.uid++}ie.uid=1,ie.prototype={cache:function(e){var t=e[this.expando];return t||(t={},oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"===typeof t)a[ae(t)]=n;else for(r in t)a[ae(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ae(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ae):(t=ae(t))in r?[t]:t.match(q)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var se=new ie,ue=new ie,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ce=/[A-Z]/g;function fe(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ce,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(a){}ue.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return ue.hasData(e)||se.hasData(e)},data:function(e,t,n){return ue.access(e,t,n)},removeData:function(e,t){ue.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,a,o=this[0],i=o&&o.attributes;if(void 0===e){if(this.length&&(a=ue.get(o),1===o.nodeType&&!se.get(o,"hasDataAttrs"))){for(n=i.length;n--;)i[n]&&0===(r=i[n].name).indexOf("data-")&&(r=ae(r.slice(5)),fe(o,r,a[r]));se.set(o,"hasDataAttrs",!0)}return a}return"object"===typeof e?this.each((function(){ue.set(this,e)})):ee(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=ue.get(o,e))||void 0!==(n=fe(o,e))?n:void 0;this.each((function(){ue.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ue.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,a=n.shift(),o=S._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete o.stop,a.call(e,(function(){S.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:S.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=S.Deferred(),o=this,i=this.length,s=function(){--r||a.resolveWith(o,[o])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=se.get(o[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,he=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=b.documentElement,ve=function(e){return S.contains(e.ownerDocument,e)},ge={composed:!0};me.getRootNode&&(ve=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ve(e)&&"none"===S.css(e,"display")};function be(e,t,n,r){var a,o,i=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&he.exec(S.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;i--;)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(i=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,a=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=a)),a}var we={};function xe(e){var t,n=e.ownerDocument,r=e.nodeName,a=we[r];return a||(t=n.body.appendChild(n.createElement(r)),a=S.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),we[r]=a,a)}function Ce(e,t){for(var n,r,a=[],o=0,i=e.length;o<i;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(a[o]=se.get(r,"display")||null,a[o]||(r.style.display="")),""===r.style.display&&ye(r)&&(a[o]=xe(r))):"none"!==n&&(a[o]="none",se.set(r,"display",n)));for(o=0;o<i;o++)null!=a[o]&&(e[o].style.display=a[o]);return e}S.fn.extend({show:function(){return Ce(this,!0)},hide:function(){return Ce(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ye(this)?S(this).show():S(this).hide()}))}});var _e=/^(?:checkbox|radio)$/i,ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),v.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",v.option=!!e.lastChild}();var Me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ee(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&E(e,t)?S.merge([e],n):n}function Ne(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}Me.tbody=Me.tfoot=Me.colgroup=Me.caption=Me.thead,Me.th=Me.td,v.option||(Me.optgroup=Me.option=[1,"<select multiple='multiple'>","</select>"]);var Te=/<|&#?\w+;/;function Ie(e,t,n,r,a){for(var o,i,s,u,l,c,f=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===C(o))S.merge(d,o.nodeType?[o]:o);else if(Te.test(o)){for(i=i||f.appendChild(t.createElement("div")),s=(ke.exec(o)||["",""])[1].toLowerCase(),u=Me[s]||Me._default,i.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];c--;)i=i.lastChild;S.merge(d,i.childNodes),(i=f.firstChild).textContent=""}else d.push(t.createTextNode(o));for(f.textContent="",h=0;o=d[h++];)if(r&&S.inArray(o,r)>-1)a&&a.push(o);else if(l=ve(o),i=Ee(f.appendChild(o),"script"),l&&Ne(i),n)for(c=0;o=i[c++];)Se.test(o.type||"")&&n.push(o);return f}var je=/^([^.]*)(?:\.(.+)|)/;function De(){return!0}function Le(){return!1}function Ae(e,t,n,r,a,o){var i,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"===typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=Le;else if(!a)return e;return 1===o&&(i=a,a=function(e){return S().off(e),i.apply(this,arguments)},a.guid=i.guid||(i.guid=S.guid++)),e.each((function(){S.event.add(this,t,a,r,n)}))}function Re(e,t,n){n?(se.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,S.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=De)}})):void 0===se.get(e,t)&&S.event.add(e,t,De)}S.event={global:{},add:function(e,t,n,r,a){var o,i,s,u,l,c,f,d,h,p,m,v=se.get(e);if(oe(e))for(n.handler&&(n=(o=n).handler,a=o.selector),a&&S.find.matchesSelector(me,a),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(i=v.handle)||(i=v.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(q)||[""]).length;l--;)h=m=(s=je.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=S.event.special[h]||{},h=(a?f.delegateType:f.bindType)||h,f=S.event.special[h]||{},c=S.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&S.expr.match.needsContext.test(a),namespace:p.join(".")},o),(d=u[h])||((d=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,i)||e.addEventListener&&e.addEventListener(h,i)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),a?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[h]=!0)},remove:function(e,t,n,r,a){var o,i,s,u,l,c,f,d,h,p,m,v=se.hasData(e)&&se.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(q)||[""]).length;l--;)if(h=m=(s=je.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=S.event.special[h]||{},d=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=o=d.length;o--;)c=d[o],!a&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));i&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,p,v.handle)||S.removeEvent(e,h,v.handle),delete u[h])}else for(h in u)S.event.remove(e,h+t[l],n,r,!0);S.isEmptyObject(u)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,o,i,s=new Array(arguments.length),u=S.event.fix(e),l=(se.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(i=S.event.handlers.call(this,u,l),t=0;(a=i[t++])&&!u.isPropagationStopped();)for(u.currentTarget=a.elem,n=0;(o=a.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,a,o,i,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],i={},n=0;n<u;n++)void 0===i[a=(r=t[n]).selector+" "]&&(i[a]=r.needsContext?S(a,this).index(l)>-1:S.find(a,this,null,[l]).length),i[a]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return _e.test(t.type)&&t.click&&E(t,"input")&&Re(t,"click",!0),!1},trigger:function(e){var t=this||e;return _e.test(t.type)&&t.click&&E(t,"input")&&Re(t,"click"),!0},_default:function(e){var t=e.target;return _e.test(t.type)&&t.click&&E(t,"input")&&se.get(t,"click")||E(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?De:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=De,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=De,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=De,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(b.documentMode){var n=se.get(this,"handle"),r=S.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var r;if(Re(this,e,!0),!b.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return Re(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=b.documentMode?this:r,o=se.get(a,t);o||(b.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(a,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=b.documentMode?this:r,o=se.get(a,t)-1;o?se.set(a,t,o):(b.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(a,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||S.contains(this,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Le),this.each((function(){S.event.remove(this,e,n,t)}))}});var Pe=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return E(e,"table")&&E(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function ze(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function We(e,t){var n,r,a,o,i,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(a in se.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)S.event.add(t,a,s[a][n]);ue.hasData(e)&&(o=ue.access(e),i=S.extend({},o),ue.set(t,i))}}function Ve(e,t){var n=t.nodeName.toLowerCase();"input"===n&&_e.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function He(e,t,n,r){t=u(t);var a,o,i,s,l,c,f=0,d=e.length,h=d-1,p=t[0],m=g(p);if(m||d>1&&"string"===typeof p&&!v.checkClone&&Oe.test(p))return e.each((function(a){var o=e.eq(a);m&&(t[0]=p.call(this,a,o.html())),He(o,t,n,r)}));if(d&&(o=(a=Ie(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=o),o||r)){for(s=(i=S.map(Ee(a,"script"),ze)).length;f<d;f++)l=a,f!==h&&(l=S.clone(l,!0,!0),s&&S.merge(i,Ee(l,"script"))),n.call(e[f],l,f);if(s)for(c=i[i.length-1].ownerDocument,S.map(i,Ue),f=0;f<s;f++)l=i[f],Se.test(l.type||"")&&!se.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):x(l.textContent.replace(Fe,""),l,c))}return e}function Ye(e,t,n){for(var r,a=t?S.filter(t,e):e,o=0;null!=(r=a[o]);o++)n||1!==r.nodeType||S.cleanData(Ee(r)),r.parentNode&&(n&&ve(r)&&Ne(Ee(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,o,i,s=e.cloneNode(!0),u=ve(e);if(!v.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(i=Ee(s),r=0,a=(o=Ee(e)).length;r<a;r++)Ve(o[r],i[r]);if(t)if(n)for(o=o||Ee(e),i=i||Ee(s),r=0,a=o.length;r<a;r++)We(o[r],i[r]);else We(e,s);return(i=Ee(s,"script")).length>0&&Ne(i,!u&&Ee(e,"script")),s},cleanData:function(e){for(var t,n,r,a=S.event.special,o=0;void 0!==(n=e[o]);o++)if(oe(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)a[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[ue.expando]&&(n[ue.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return He(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return He(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return He(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(Ee(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Pe.test(e)&&!Me[(ke.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(Ee(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(Ee(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],a=S(e),o=a.length-1,i=0;i<=o;i++)n=i===o?this:this.clone(!0),S(a[i])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Ge=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),qe=/^--/,Qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Xe=function(e,t,n){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=o[a];return r},Ke=new RegExp(pe.join("|"),"i");function Je(e,t,n){var r,a,o,i,s=qe.test(t),u=e.style;return(n=n||Qe(e))&&(i=n.getPropertyValue(t)||n[t],s&&i&&(i=i.replace(D,"$1")||void 0),""!==i||ve(e)||(i=S.style(e,t)),!v.pixelBoxStyles()&&Ge.test(i)&&Ke.test(t)&&(r=u.width,a=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=i,i=n.width,u.width=r,u.minWidth=a,u.maxWidth=o)),void 0!==i?i+"":i}function Ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(c);var e=r.getComputedStyle(c);n="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",i=36===t(e.right),a=36===t(e.width),c.style.position="absolute",o=12===t(c.offsetWidth/3),me.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var n,a,o,i,s,u,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),i},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,a;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),a=r.getComputedStyle(t),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),s}}))}();var $e=["Webkit","Moz","ms"],et=b.createElement("div").style,tt={};function nt(e){var t=S.cssProps[e]||tt[e];return t||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in et)return e}(e)||e)}var rt=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function it(e,t,n){var r=he.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function st(e,t,n,r,a,o){var i="width"===t?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(l+=S.css(e,n+pe[i],!0,a)),r?("content"===n&&(u-=S.css(e,"padding"+pe[i],!0,a)),"margin"!==n&&(u-=S.css(e,"border"+pe[i]+"Width",!0,a))):(u+=S.css(e,"padding"+pe[i],!0,a),"padding"!==n?u+=S.css(e,"border"+pe[i]+"Width",!0,a):s+=S.css(e,"border"+pe[i]+"Width",!0,a));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+l}function ut(e,t,n){var r=Qe(e),a=(!v.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=a,i=Je(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(i)){if(!n)return i;i="auto"}return(!v.boxSizingReliable()&&a||!v.reliableTrDimensions()&&E(e,"tr")||"auto"===i||!parseFloat(i)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(i=e[s])),(i=parseFloat(i)||0)+st(e,t,n||(a?"border":"content"),o,r,i)+"px"}function lt(e,t,n,r,a){return new lt.prototype.init(e,t,n,r,a)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Je(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,i,s=ae(t),u=qe.test(t),l=e.style;if(u||(t=nt(s)),i=S.cssHooks[t]||S.cssHooks[s],void 0===n)return i&&"get"in i&&void 0!==(a=i.get(e,!1,r))?a:l[t];"string"===(o=typeof n)&&(a=he.exec(n))&&a[1]&&(n=be(e,t,a),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=a&&a[3]||(S.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var a,o,i,s=ae(t);return qe.test(t)||(t=nt(s)),(i=S.cssHooks[t]||S.cssHooks[s])&&"get"in i&&(a=i.get(e,!0,n)),void 0===a&&(a=Je(e,t,r)),"normal"===a&&t in ot&&(a=ot[t]),""===n||n?(o=parseFloat(a),!0===n||isFinite(o)?o||0:a):a}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!rt.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Xe(e,at,(function(){return ut(e,t,r)}))},set:function(e,n,r){var a,o=Qe(e),i=!v.scrollboxSize()&&"absolute"===o.position,s=(i||r)&&"border-box"===S.css(e,"boxSizing",!1,o),u=r?st(e,t,r,s,o):0;return s&&i&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-st(e,t,"border",!1,o)-.5)),u&&(a=he.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),it(0,n,u)}}})),S.cssHooks.marginLeft=Ze(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Je(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,a={},o="string"===typeof n?n.split(" "):[n];r<4;r++)a[e+pe[r]+t]=o[r]||o[r-2]||o[0];return a}},"margin"!==e&&(S.cssHooks[e+t].set=it)})),S.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,a,o={},i=0;if(Array.isArray(t)){for(r=Qe(e),a=t.length;i<a;i++)o[t[i]]=S.css(e,t[i],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,n,r,a,o){this.elem=e,this.prop=n,this.easing=a||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=lt.prototype.init,S.fx.step={};var ct,ft,dt=/^(?:toggle|show|hide)$/,ht=/queueHooks$/;function pt(){ft&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(pt):r.setTimeout(pt,S.fx.interval),S.fx.tick())}function mt(){return r.setTimeout((function(){ct=void 0})),ct=Date.now()}function vt(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=pe[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function gt(e,t,n){for(var r,a=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),o=0,i=a.length;o<i;o++)if(r=a[o].call(n,t,e))return r}function yt(e,t,n){var r,a,o=0,i=yt.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(a)return!1;for(var t=ct||mt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,i=l.tweens.length;o<i;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&i?n:(i||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||mt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,a,o,i;for(n in e)if(a=t[r=ae(n)],o=e[n],Array.isArray(o)&&(a=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(i=S.cssHooks[r])&&"expand"in i)for(n in o=i.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=a);else t[r]=a}(c,l.opts.specialEasing);o<i;o++)if(r=yt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,gt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,he.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(q);for(var n,r=0,a=e.length;r<a;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,o,i,s,u,l,c,f="width"in t||"height"in t,d=this,h={},p=e.style,m=e.nodeType&&ye(e),v=se.get(e,"fxshow");for(r in n.queue||(null==(i=S._queueHooks(e,"fx")).unqueued&&(i.unqueued=0,s=i.empty.fire,i.empty.fire=function(){i.unqueued||s()}),i.unqueued++,d.always((function(){d.always((function(){i.unqueued--,S.queue(e,"fx").length||i.empty.fire()}))}))),t)if(a=t[r],dt.test(a)){if(delete t[r],o=o||"toggle"===a,a===(m?"hide":"show")){if("show"!==a||!v||void 0===v[r])continue;m=!0}h[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(h))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=se.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(Ce([e],!0),l=e.style.display||l,c=S.css(e,"display"),Ce([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(d.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(v?"hidden"in v&&(m=v.hidden):v=se.access(e,"fxshow",{display:l}),o&&(v.hidden=!m),m&&Ce([e],!0),d.done((function(){for(r in m||Ce([e]),se.remove(e,"fxshow"),h)S.style(e,r,h[r])}))),u=gt(m?v[r]:0,r,d),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===typeof e?S.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return S.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=S.isEmptyObject(e),o=S.speed(t,n,r),i=function(){var t=yt(this,S.extend({},e),o);(a||se.get(this,"finish"))&&t.stop(!0)};return i.finish=i,a||!1===o.queue?this.each(i):this.queue(o.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",o=S.timers,i=se.get(this);if(a)i[a]&&i[a].stop&&r(i[a]);else for(a in i)i[a]&&i[a].stop&&ht.test(a)&&r(i[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(n),t=!1,o.splice(a,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],o=S.timers,i=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,a){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,r,a)}})),S.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ct=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ct=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ft||(ft=!0,pt())},S.fx.stop=function(){ft=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var a=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(a)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var bt,wt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return ee(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(a=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&E(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match(q);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=wt[t]||S.find.attr;wt[t]=function(e,t,r){var a,o,i=t.toLowerCase();return r||(o=wt[i],wt[i]=a,a=null!=n(e,t,r)?i:null,wt[i]=o),a}}));var xt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;function _t(e){return(e.match(q)||[]).join(" ")}function kt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(q)||[]}S.fn.extend({prop:function(e,t){return ee(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,a,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,a=S.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,a,o,i;return g(e)?this.each((function(t){S(this).addClass(e.call(this,t,kt(this)))})):(t=St(e)).length?this.each((function(){if(r=kt(this),n=1===this.nodeType&&" "+_t(r)+" "){for(o=0;o<t.length;o++)a=t[o],n.indexOf(" "+a+" ")<0&&(n+=a+" ");i=_t(n),r!==i&&this.setAttribute("class",i)}})):this},removeClass:function(e){var t,n,r,a,o,i;return g(e)?this.each((function(t){S(this).removeClass(e.call(this,t,kt(this)))})):arguments.length?(t=St(e)).length?this.each((function(){if(r=kt(this),n=1===this.nodeType&&" "+_t(r)+" "){for(o=0;o<t.length;o++)for(a=t[o];n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");i=_t(n),r!==i&&this.setAttribute("class",i)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,a,o,i=typeof e,s="string"===i||Array.isArray(e);return g(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,kt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=St(e),this.each((function(){if(s)for(o=S(this),a=0;a<n.length;a++)r=n[a],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==i||((r=kt(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+_t(kt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Mt=/\r/g;S.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=g(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,S(this).val()):e)?a="":"number"===typeof a?a+="":Array.isArray(a)&&(a=S.map(a,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=S.valHooks[a.type]||S.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"===typeof(n=a.value)?n.replace(Mt,""):null==n?"":n:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:_t(S.text(e))}},select:{get:function(e){var t,n,r,a=e.options,o=e.selectedIndex,i="select-one"===e.type,s=i?null:[],u=i?o+1:a.length;for(r=o<0?u:i?o:0;r<u;r++)if(((n=a[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){if(t=S(n).val(),i)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,o=S.makeArray(t),i=a.length;i--;)((r=a[i]).selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Et=r.location,Nt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(a){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var It=/^(?:focusinfocus|focusoutblur)$/,jt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,a){var o,i,s,u,l,c,f,d,p=[n||b],m=h.call(e,"type")?e.type:e,v=h.call(e,"namespace")?e.namespace.split("."):[];if(i=d=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!It.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"===typeof e&&e)).isTrigger=a?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),f=S.event.special[m]||{},a||!f.trigger||!1!==f.trigger.apply(n,t))){if(!a&&!f.noBubble&&!y(n)){for(u=f.delegateType||m,It.test(u+m)||(i=i.parentNode);i;i=i.parentNode)p.push(i),s=i;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||r)}for(o=0;(i=p[o++])&&!e.isPropagationStopped();)d=i,e.type=o>1?u:f.bindType||m,(c=(se.get(i,"events")||Object.create(null))[e.type]&&se.get(i,"handle"))&&c.apply(i,t),(c=l&&i[l])&&c.apply&&oe(i)&&(e.result=c.apply(i,t),!1===e.result&&e.preventDefault());return e.type=m,a||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),t)||!oe(n)||l&&g(n[m])&&!y(n)&&((s=n[l])&&(n[l]=null),S.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,jt),n[m](),e.isPropagationStopped()&&d.removeEventListener(m,jt),S.event.triggered=void 0,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}});var Dt=/\[\]$/,Lt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Rt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,r){var a;if(Array.isArray(t))S.each(t,(function(t,a){n||Dt.test(e)?r(e,a):Pt(e+"["+("object"===typeof a&&null!=a?t:"")+"]",a,n,r)}));else if(n||"object"!==C(t))r(e,t);else for(a in t)Pt(e+"["+a+"]",t[a],n,r)}S.param=function(e,t){var n,r=[],a=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){a(this.name,this.value)}));else for(n in e)Pt(n,e[n],t,a);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Rt.test(this.nodeName)&&!At.test(e)&&(this.checked||!_e.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:n.replace(Lt,"\r\n")}})).get()}});var Ot=/%20/g,Ft=/#.*$/,Bt=/([?&])_=[^&]*/,zt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,Wt=/^\/\//,Vt={},Ht={},Yt="*/".concat("*"),Gt=b.createElement("a");function qt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,a=0,o=t.toLowerCase().match(q)||[];if(g(n))for(;r=o[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Qt(e,t,n,r){var a={},o=e===Ht;function i(s){var u;return a[s]=!0,S.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!==typeof l||o||a[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)})),u}return i(t.dataTypes[0])||!a["*"]&&i("*")}function Xt(e,t){var n,r,a=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Gt.href=Et.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Xt(Xt(e,S.ajaxSettings),t):Xt(S.ajaxSettings,e)},ajaxPrefilter:qt(Vt),ajaxTransport:qt(Ht),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,a,o,i,s,u,l,c,f,d,h=S.ajaxSetup({},t),p=h.context||h,m=h.context&&(p.nodeType||p.jquery)?S(p):S.event,v=S.Deferred(),g=S.Callbacks("once memory"),y=h.statusCode||{},w={},x={},C="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(l){if(!i)for(i={};t=zt.exec(o);)i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)_.always(e[_.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return n&&n.abort(t),k(0,t),this}};if(v.promise(_),h.url=((e||h.url||Et.href)+"").replace(Wt,Et.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(q)||[""],null==h.crossDomain){u=b.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Gt.protocol+"//"+Gt.host!==u.protocol+"//"+u.host}catch(M){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!==typeof h.data&&(h.data=S.param(h.data,h.traditional)),Qt(Vt,h,t,_),l)return _;for(f in(c=S.event&&h.global)&&0===S.active++&&S.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ut.test(h.type),a=h.url.replace(Ft,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ot,"+")):(d=h.url.slice(a.length),h.data&&(h.processData||"string"===typeof h.data)&&(a+=(Tt.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(a=a.replace(Bt,"$1"),d=(Tt.test(a)?"&":"?")+"_="+Nt.guid+++d),h.url=a+d),h.ifModified&&(S.lastModified[a]&&_.setRequestHeader("If-Modified-Since",S.lastModified[a]),S.etag[a]&&_.setRequestHeader("If-None-Match",S.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Yt+"; q=0.01":""):h.accepts["*"]),h.headers)_.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(p,_,h)||l))return _.abort();if(C="abort",g.add(h.complete),_.done(h.success),_.fail(h.error),n=Qt(Ht,h,t,_)){if(_.readyState=1,c&&m.trigger("ajaxSend",[_,h]),l)return _;h.async&&h.timeout>0&&(s=r.setTimeout((function(){_.abort("timeout")}),h.timeout));try{l=!1,n.send(w,k)}catch(M){if(l)throw M;k(-1,M)}}else k(-1,"No Transport");function k(e,t,i,u){var f,d,b,w,x,C=t;l||(l=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",_.readyState=e>0?4:0,f=e>=200&&e<300||304===e,i&&(w=function(e,t,n){for(var r,a,o,i,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}i||(i=a)}o=o||i}if(o)return o!==u[0]&&u.unshift(o),n[o]}(h,_,i)),!f&&S.inArray("script",h.dataTypes)>-1&&S.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),w=function(e,t,n,r){var a,o,i,s,u,l={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(i=l[u+" "+o]||l["* "+o]))for(a in l)if((s=a.split(" "))[1]===o&&(i=l[u+" "+s[0]]||l["* "+s[0]])){!0===i?i=l[a]:!0!==l[a]&&(o=s[0],c.unshift(s[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(M){return{state:"parsererror",error:i?M:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(h,w,_,f),f?(h.ifModified&&((x=_.getResponseHeader("Last-Modified"))&&(S.lastModified[a]=x),(x=_.getResponseHeader("etag"))&&(S.etag[a]=x)),204===e||"HEAD"===h.type?C="nocontent":304===e?C="notmodified":(C=w.state,d=w.data,f=!(b=w.error))):(b=C,!e&&C||(C="error",e<0&&(e=0))),_.status=e,_.statusText=(t||C)+"",f?v.resolveWith(p,[d,C,_]):v.rejectWith(p,[_,C,b]),_.statusCode(y),y=void 0,c&&m.trigger(f?"ajaxSuccess":"ajaxError",[_,h,f?d:b]),g.fireWith(p,[_,C]),c&&(m.trigger("ajaxComplete",[_,h]),--S.active||S.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,a){return g(n)&&(a=a||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:a,data:n,success:r},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},Jt=S.ajaxSettings.xhr();v.cors=!!Jt&&"withCredentials"in Jt,v.ajax=Jt=!!Jt,S.ajaxTransport((function(e){var t,n;if(v.cors||Jt&&!e.crossDomain)return{send:function(a,o){var i,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];for(i in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(i,a[i]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Kt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Zt=[],$t=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||S.expando+"_"+Nt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var a,o,i,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+a):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return i||S.error(a+" was not called"),i[0]},e.dataTypes[0]="json",o=r[a],r[a]=function(){i=arguments},n.always((function(){void 0===o?S(r).removeProp(a):r[a]=o,e[a]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(a)),i&&g(o)&&o(i[0]),i=o=void 0})),"script"})),v.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),o=!n&&[],(a=z.exec(e))?[t.createElement(a[1])]:(a=Ie([e],t,o),o&&o.length&&S(o).remove(),S.merge([],a.childNodes)));var r,a,o},S.fn.load=function(e,t,n){var r,a,o,i=this,s=e.indexOf(" ");return s>-1&&(r=_t(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"===typeof t&&(a="POST"),i.length>0&&S.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){o=arguments,i.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){i.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,a,o,i,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(i=(r=c.position()).top,a=r.left):(i=parseFloat(o)||0,a=parseFloat(u)||0),g(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+i),null!=t.left&&(f.left=t.left-s.left+a),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),a.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-S.css(r,"marginTop",!0),left:t.left-a.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||me}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return ee(this,(function(e,r,a){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===a)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:a,n?a:o.pageYOffset):e[r]=a}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Ze(v.pixelPosition,(function(e,n){if(n)return n=Je(e,t),Ge.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(a,o){var i=arguments.length&&(n||"boolean"!==typeof a),s=n||(!0===a||!0===o?"margin":"border");return ee(this,(function(t,n,a){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===a?S.css(t,n,s):S.style(t,n,a,s)}),t,i?a:void 0,i)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,a;if("string"===typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),a=function(){return e.apply(t||this,r.concat(s.call(arguments)))},a.guid=e.guid=e.guid||S.guid++,a},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=E,S.isFunction=g,S.isWindow=y,S.camelCase=ae,S.type=C,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(en,"$1")},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var tn=r.jQuery,nn=r.$;return S.noConflict=function(e){return r.$===S&&(r.$=nn),e&&r.jQuery===S&&(r.jQuery=tn),S},"undefined"===typeof a&&(r.jQuery=r.$=S),S}))},8643:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}},8673:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),a=n(888),o=n(8224),i=n(8726);function s(e,t){(0,i.A)(2,arguments);var n=(0,a.default)(e),s=(0,r.A)(t)-(Math.floor(n.getMonth()/3)+1);return(0,o.default)(n,n.getMonth()+3*s)}},8694:(e,t,n)=>{"use strict";var r=n(9966).Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.I=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=i(t[r]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--r<n||-2===a)return 0;if(a=i(t[r]),a>=0)return a>0&&(e.lastNeed=a-2),a;if(--r<n||-2===a)return 0;if(a=i(t[r]),a>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},8726:(e,t,n)=>{"use strict";function r(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>r})},8821:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var r,a=n(7396);var o=((r=a)&&r.__esModule?r:{default:r}).default,i=o.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=o.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=o.canUseDOM?window.NodeList:{},t.canUseDOM=o.canUseDOM;t.default=i},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},8885:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(8926),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.default)(e,-n)}},8926:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(2215),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.default)(e,12*n)}},9001:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var a;e.exports=k,k.WritableState=_;var o={deprecate:n(2390)},i=n(2902),s=n(6382).Buffer,u=("undefined"!==typeof n.g?n.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var l,c=n(6725),f=n(8550).getHighWaterMark,d=n(6545).F,h=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,v=d.ERR_STREAM_CANNOT_PIPE,g=d.ERR_STREAM_DESTROYED,y=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,x=c.errorOrDestroy;function C(){}function _(e,t,o){a=a||n(6779),e=e||{},"boolean"!==typeof o&&(o=t instanceof a),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if("function"!==typeof a)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,a){--t.pendingcb,n?(process.nextTick(a,r),process.nextTick(I,e,t),e._writableState.errorEmitted=!0,x(e,r)):(a(r),e._writableState.errorEmitted=!0,x(e,r),I(e,t))}(e,n,r,t,a);else{var o=N(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?process.nextTick(M,e,n,o,a):M(e,n,o,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(e){var t=this instanceof(a=a||n(6779));if(!t&&!l.call(k,this))return new k(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),i.call(this)}function S(e,t,n,r,a,o,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function M(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),I(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var a=t.bufferedRequestCount,o=new Array(a),i=t.corkedRequestsFree;i.entry=n;for(var s=0,u=!0;n;)o[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;o.allBuffers=u,S(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(S(e,t,!1,t.objectMode?1:l.length,l,c,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function N(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&x(e,n),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var n=N(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(6329)(k,i),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===k&&(e&&e._writableState instanceof _)}})):l=function(e){return e instanceof this},k.prototype.pipe=function(){x(this,new v)},k.prototype.write=function(e,t,n){var r,a=this._writableState,o=!1,i=!a.objectMode&&(r=e,s.isBuffer(r)||r instanceof u);return i&&!s.isBuffer(e)&&(e=function(e){return s.from(e)}(e)),"function"===typeof t&&(n=t,t=null),i?t="buffer":t||(t=a.defaultEncoding),"function"!==typeof n&&(n=C),a.ending?function(e,t){var n=new b;x(e,n),process.nextTick(t,n)}(this,n):(i||function(e,t,n,r){var a;return null===n?a=new y:"string"===typeof n||t.objectMode||(a=new h("chunk",["string","Buffer"],n)),!a||(x(e,a),process.nextTick(r,a),!1)}(this,a,e,n))&&(a.pendingcb++,o=function(e,t,n,r,a,o){if(!n){var i=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=s.from(t,n));return t}(t,r,a);r!==i&&(n=!0,a="buffer",r=i)}var u=t.objectMode?1:r.length;t.length+=u;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else S(e,t,!1,u,r,a,o);return l}(this,a,i,e,t,n)),o},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new p("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var r=this._writableState;return"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,I(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(e,t){t(e)}},9333:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(6191),a=n(2550),o=n(8726),i=6e4;function s(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.A)(e,n*i)}},9352:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(8539),a=n(2312),o=n(8726),i=864e5;function s(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),s=(0,a.default)(t),u=n.getTime()-(0,r.A)(n),l=s.getTime()-(0,r.A)(s);return Math.round((u-l)/i)}},9392:(e,t,n)=>{"use strict";var r=n(1218),a=n(6496);function o(e){var t=0,n=0,r=0,a=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,a=10*n,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||a)&&e.deltaMode&&(1==e.deltaMode?(r*=40,a*=40):(r*=800,a*=800)),r&&!t&&(t=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:a}}o.getEventType=function(){return r.firefox()?"DOMMouseScroll":a("wheel")?"wheel":"mousewheel"},e.exports=o},9436:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(6337),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,a.default)(e,-n)}},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9563:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2284),a=n(888),o=n(8726);function i(e){var t,n;if((0,o.A)(1,arguments),e&&"function"===typeof e.forEach)t=e;else{if("object"!==(0,r.A)(e)||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=(0,a.default)(e);(void 0===n||n>t||isNaN(t.getDate()))&&(n=t)})),n||new Date(NaN)}},9566:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){(0,a.A)(1,arguments);var t=(0,r.default)(e),n=t.getMonth(),o=n-n%3;return t.setMonth(o,1),t.setHours(0,0,0,0),t}},9713:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(2284),a=n(8726);function o(e){return(0,a.A)(1,arguments),e instanceof Date||"object"===(0,r.A)(e)&&"[object Date]"===Object.prototype.toString.call(e)}},9717:(e,t,n)=>{"use strict";var r=n(5043),a=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=a.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var f=s(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=l((function(){function e(e){if(!u){if(u=!0,i=e,e=r(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return s=t}return s=e}if(t=s,o(i,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(i=e,t):(i=e,s=n)}var i,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,a]);var h=i(e,f[0],f[1]);return u((function(){d.hasValue=!0,d.value=h}),[h]),c(h),h}},9730:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(i),n)}},9838:()=>{},9855:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e){return(0,a.A)(1,arguments),(0,r.default)(e).getDate()}},9952:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6191),a=n(888),o=n(8726);function i(e,t){(0,o.A)(2,arguments);var n=(0,a.default)(e),i=(0,r.A)(t);return n.setMinutes(i),n}},9966:(e,t,n)=>{var r=n(6382),a=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),i.prototype=Object.create(a.prototype),o(a,i),i.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},i.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},9977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(888),a=n(8726);function o(e,t){(0,a.A)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return n.getTime()>o.getTime()}},9989:e=>{"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>r[e]));return i.default=()=>r,n.d(o,i),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".2561a46d.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="Connect:";n.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,u;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var f=l[c];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+o){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[a];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise(((n,r)=>a=e[t]=[n,r]));r.push(a[2]=o);var i=n.p+n.u(t),s=new Error;n.l(i,(r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var a,o,i=r[0],s=r[1],u=r[2],l=0;if(i.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<i.length;l++)o=i[l],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkConnect=self.webpackChunkConnect||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Rr,hasStandardBrowserEnv:()=>Or,hasStandardBrowserWebWorkerEnv:()=>Fr,navigator:()=>Pr,origin:()=>Br});var t={};n.r(t),n.d(t,{Decoder:()=>Ii,Encoder:()=>Ni,PacketType:()=>Ei,protocol:()=>Mi});var r={};n.r(r),n.d(r,{AnchorPosition:()=>vA,DrawBox:()=>_A,DrawBoxOptions:()=>CA,DrawTextField:()=>xA,DrawTextFieldOptions:()=>wA});var a={};n.r(a),n.d(a,{DrawFaceLandmarks:()=>IR,DrawFaceLandmarksOptions:()=>TR,drawContour:()=>oR,drawDetections:()=>lR,drawFaceExpressions:()=>kR,drawFaceLandmarks:()=>jR});var o=n(5043),i=n.t(o,2),s=n(4391);function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=n(4467);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const h=function(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r},p=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var m=e=>"number"==typeof e&&!isNaN(e),v=e=>"string"==typeof e,g=e=>"function"==typeof e,y=e=>v(e)||g(e)?e:null,b=(e,t)=>!1===e||m(e)&&e>0?e:t,w=e=>(0,o.isValidElement)(e)||v(e)||g(e)||m(e);function x(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:a=!0,collapseDuration:i=300}=e;return function(e){let{children:s,position:u,preventExitTransition:l,done:c,nodeRef:f,isIn:d,playToast:h}=e,p=r?"".concat(t,"--").concat(u):t,m=r?"".concat(n,"--").concat(u):n,v=(0,o.useRef)(0);return(0,o.useLayoutEffect)((()=>{let e=f.current,t=p.split(" "),n=r=>{r.target===f.current&&(h(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===v.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)}),[]),(0,o.useEffect)((()=>{let e=f.current,t=()=>{e.removeEventListener("animationend",t),a?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:a}=e;requestAnimationFrame((()=>{a.minHeight="initial",a.height=r+"px",a.transition="all ".concat(n,"ms"),requestAnimationFrame((()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)}))}))}(e,c,i):c()};d||(l?t():(v.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[d]),o.createElement(o.Fragment,null,s)}}function C(e,t){return{content:_(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o.isValidElement)(e)&&!v(e.type)?(0,o.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):g(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function k(e){let{delay:t,isRunning:n,closeToast:r,type:a="default",hide:i,className:s,controlledProgress:u,progress:l,rtl:c,isIn:d,theme:p}=e,m=i||u&&0===l,v={animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused"};u&&(v.transform="scaleX(".concat(l,")"));let y=h("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(a),{"Toastify__progress-bar--rtl":c}),b=g(s)?s({rtl:c,type:a,defaultClassName:y}):h(y,s),w={[u&&l>=1?"onTransitionEnd":"onAnimationEnd"]:u&&l<1?null:()=>{d&&r()}};return o.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},o.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(p," Toastify__progress-bar--").concat(a)}),o.createElement("div",f({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:b,style:v},w)))}var S=1,M=()=>"".concat(S++);function E(e,t,n){let r=1,a=0,o=[],i=[],s=t,u=new Map,l=new Set,c=()=>{i=Array.from(u.values()),l.forEach((e=>e()))},d=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},h=e=>{if(null==e)u.forEach(d);else{let t=u.get(e);t&&d(t)}c()},p=e=>{var t,r;let{toastId:a,updateId:o}=e.props,i=null==o;e.staleId&&u.delete(e.staleId),e.isActive=!0,u.set(a,e),c(),n(C(e,i?"added":"updated")),i&&(null==(r=(t=e.props).onOpen)||r.call(t))};return{id:e,props:s,observe:e=>(l.add(e),()=>l.delete(e)),toggle:(e,t)=>{u.forEach((n=>{var r;(null==t||t===n.props.toastId)&&(null==(r=n.toggle)||r.call(n,e))}))},removeToast:h,toasts:u,clearQueue:()=>{a-=o.length,o=[]},buildToast:(t,i)=>{if((t=>{let{containerId:n,toastId:r,updateId:a}=t,o=n?n!==e:1!==e,i=u.has(r)&&null==a;return o||i})(i))return;let{toastId:l,updateId:d,data:v,staleId:g,delay:x}=i,_=null==d;_&&a++;let k=f(f(f({},s),{},{style:s.toastStyle,key:r++},Object.fromEntries(Object.entries(i).filter((e=>{let[t,n]=e;return null!=n})))),{},{toastId:l,updateId:d,data:v,isIn:!1,className:y(i.className||s.toastClassName),progressClassName:y(i.progressClassName||s.progressClassName),autoClose:!i.isLoading&&b(i.autoClose,s.autoClose),closeToast(e){u.get(l).removalReason=e,h(l)},deleteToast(){let e=u.get(l);if(null!=e){if(n(C(e,"removed")),u.delete(l),a--,a<0&&(a=0),o.length>0)return void p(o.shift());c()}}});k.closeButton=s.closeButton,!1===i.closeButton||w(i.closeButton)?k.closeButton=i.closeButton:!0===i.closeButton&&(k.closeButton=!w(s.closeButton)||s.closeButton);let S={content:t,props:k,staleId:g};s.limit&&s.limit>0&&a>s.limit&&_?o.push(S):m(x)?setTimeout((()=>{p(S)}),x):p(S)},setProps(e){s=e},setToggle:(e,t)=>{let n=u.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=u.get(e))?void 0:t.isActive},getSnapshot:()=>i}}var N=new Map,T=[],I=new Set,j=e=>I.forEach((t=>t(e))),D=()=>N.size>0;function L(e,t){var n;if(t)return!(null==(n=N.get(t))||!n.isToastActive(e));let r=!1;return N.forEach((t=>{t.isToastActive(e)&&(r=!0)})),r}function A(e){if(D()){if(null==e||(e=>v(e)||m(e))(e))N.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){let t=N.get(e.containerId);t?t.removeToast(e.id):N.forEach((t=>{t.removeToast(e.id)}))}}else T=T.filter((t=>null!=e&&t.options.toastId!==e))}function R(e,t){w(e)&&(D()||T.push({content:e,options:t}),N.forEach((n=>{n.buildToast(e,t)})))}function P(e,t){N.forEach((n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)}))}function O(e){let t=e.containerId||1;return{subscribe(n){let r=E(t,e,j);N.set(t,r);let a=r.observe(n);return T.forEach((e=>R(e.content,e.options))),T=[],()=>{a(),N.delete(t)}},setProps(e){var n;null==(n=N.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=N.get(t))?void 0:e.getSnapshot()}}}function F(e){return e&&(v(e.toastId)||m(e.toastId))?e.toastId:M()}function B(e,t){return R(e,t),t.toastId}function z(e,t){return f(f({},t),{},{type:t&&t.type||e,toastId:F(t)})}function U(e){return(t,n)=>B(t,z(e,n))}function W(e,t){return B(e,z("default",t))}function V(e){let[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),i=(0,o.useRef)(null),s=(0,o.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:l,closeToast:c,onClick:f,closeOnClick:d}=e;function h(){n(!0)}function p(){n(!1)}function m(n){let r=i.current;if(s.canDrag&&r){s.didMove=!0,t&&p(),"x"===e.draggableDirection?s.delta=n.clientX-s.start:s.delta=n.clientY-s.start,s.start!==n.clientX&&(s.canCloseOnClick=!1);let a="x"===e.draggableDirection?"".concat(s.delta,"px, var(--y)"):"0, calc(".concat(s.delta,"px + var(--y))");r.style.transform="translate3d(".concat(a,",0)"),r.style.opacity="".concat(1-Math.abs(s.delta/s.removalDistance))}}function v(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",v);let t=i.current;if(s.canDrag&&s.didMove&&t){if(s.canDrag=!1,Math.abs(s.delta)>s.removalDistance)return a(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=N.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,o.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",h),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",p)}}),[e.pauseOnFocusLoss]);let g={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){s.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",v);let n=i.current;s.canCloseOnClick=!0,s.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(s.start=t.clientX,s.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(s.start=t.clientY,s.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:r,left:a,right:o}=i.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=a&&t.clientX<=o&&t.clientY>=n&&t.clientY<=r?p():h()}};return u&&l&&(g.onMouseEnter=p,e.stacked||(g.onMouseLeave=h)),d&&(g.onClick=e=>{f&&f(e),s.canCloseOnClick&&c(!0)}),{playToast:h,pauseToast:p,isRunning:t,preventExitTransition:r,toastRef:i,eventHandlers:g}}W.loading=(e,t)=>B(e,z("default",f({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),W.promise=function(e,t,n){let r,{pending:a,error:o,success:i}=t;a&&(r=v(a)?W.loading(a,n):W.loading(a.render,f(f({},n),a)));let s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(e,t,a)=>{if(null==t)return void W.dismiss(r);let o=f(f(f({type:e},s),n),{},{data:a}),i=v(t)?{render:t}:t;return r?W.update(r,f(f({},o),i)):W(i.render,f(f({},o),i)),a},l=g(e)?e():e;return l.then((e=>u("success",i,e))).catch((e=>u("error",o,e))),l},W.success=U("success"),W.info=U("info"),W.error=U("error"),W.warning=U("warning"),W.warn=W.warning,W.dark=(e,t)=>B(e,z("default",f({theme:"dark"},t))),W.dismiss=function(e){A(e)},W.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N.forEach((t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()}))},W.isActive=L,W.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=N.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:a}=n,o=f(f(f({delay:100},r),t),{},{toastId:t.toastId||e,updateId:M()});o.toastId!==e&&(o.staleId=e);let i=o.render||a;delete o.render,B(i,o)}},W.done=e=>{W.update(e,{progress:1})},W.onChange=function(e){return I.add(e),()=>{I.delete(e)}},W.play=e=>P(!0,e),W.pause=e=>P(!1,e);var H="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,Y=e=>{let{theme:t,type:n,isLoading:r}=e,a=u(e,p);return o.createElement("svg",f({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},a))};var G={info:function(e){return o.createElement(Y,f({},e),o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return o.createElement(Y,f({},e),o.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return o.createElement(Y,f({},e),o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return o.createElement(Y,f({},e),o.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return o.createElement("div",{className:"Toastify__spinner"})}};function q(e){let{theme:t,type:n,isLoading:r,icon:a}=e,i=null,s={theme:t,type:n};return!1===a||(g(a)?i=a(f(f({},s),{},{isLoading:r})):(0,o.isValidElement)(a)?i=(0,o.cloneElement)(a,s):r?i=G.spinner():(e=>e in G)(n)&&(i=G[n](s))),i}var Q,X=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:a,playToast:i}=V(e),{closeButton:s,children:u,autoClose:l,onClick:c,type:d,hideProgressBar:p,closeToast:m,transition:v,position:y,className:b,style:w,progressClassName:x,updateId:C,role:S,progress:M,rtl:E,toastId:N,deleteToast:T,isIn:I,isLoading:j,closeOnClick:D,theme:L,ariaLabel:A}=e,R=h("Toastify__toast","Toastify__toast-theme--".concat(L),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":D}),P=g(b)?b({rtl:E,position:y,type:d,defaultClassName:R}):h(R,b),O=q(e),F=!!M||!l,B={closeToast:m,type:d,theme:L},z=null;return!1===s||(z=g(s)?s(B):(0,o.isValidElement)(s)?(0,o.cloneElement)(s,B):function(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return o.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":r},o.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(B)),o.createElement(v,{isIn:I,done:T,position:y,preventExitTransition:n,nodeRef:r,playToast:i},o.createElement("div",f(f({id:N,tabIndex:0,onClick:c,"data-in":I,className:P},a),{},{style:w,ref:r},I&&{role:S,"aria-label":A}),null!=O&&o.createElement("div",{className:h("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!j})},O),_(u,e,!t),z,!e.customProgressBar&&o.createElement(k,f(f({},C&&!F?{key:"p-".concat(C)}:{}),{},{rtl:E,theme:L,delay:l,isRunning:t,isIn:I,closeToast:m,hide:p,type:d,className:x,controlledProgress:F,progress:M||0}))))},K=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},J=x(K("bounce",!0)),Z=(x(K("slide",!0)),x(K("zoom")),x(K("flip")),{position:"top-right",transition:J,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function $(e){let t=f(f({},Z),e),n=e.stacked,[r,a]=(0,o.useState)(!0),i=(0,o.useRef)(null),{getToastToRender:s,isToastActive:u,count:l}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:a}=(0,o.useRef)(O(e)).current;a(e);let i=null==(t=(0,o.useSyncExternalStore)(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!i)return[];let n=new Map;return e.newestOnTop&&i.reverse(),i.forEach((e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(e=>t(e[0],e[1])))},isToastActive:L,count:null==i?void 0:i.length}}(t),{className:c,style:d,rtl:p,containerId:m,hotKeys:v}=t;function b(e){let t=h("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":p});return g(c)?c({position:e,rtl:p,defaultClassName:t}):h(t,y(c))}function w(){n&&(a(!0),W.play())}return H((()=>{var e;if(n){let n=i.current.querySelectorAll('[data-in="true"]'),a=12,o=null==(e=t.position)?void 0:e.includes("top"),s=0,u=0;Array.from(n).reverse().forEach(((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(r)),n.dataset.pos||(n.dataset.pos=o?"top":"bot");let i=s*(r?.2:1)+(r?0:a*t);n.style.setProperty("--y","".concat(o?i:-1*i,"px")),n.style.setProperty("--g","".concat(a)),n.style.setProperty("--s","".concat(1-(r?u:0))),s+=n.offsetHeight,u+=.025}))}}),[r,l,n]),(0,o.useEffect)((()=>{function e(e){var t;let n=i.current;v(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),a(!1),W.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(a(!0),W.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[v]),o.createElement("section",{ref:i,className:"Toastify",id:m,onMouseEnter:()=>{n&&(a(!1),W.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},s(((e,t)=>{let r=t.length?f({},d):f(f({},d),{},{pointerEvents:"none"});return o.createElement("div",{tabIndex:-1,className:b(e),"data-stacked":n,style:r,key:"c-".concat(e)},t.map((e=>{let{content:t,props:r}=e;return o.createElement(X,f(f({},r),{},{stacked:n,collapseAll:w,isIn:u(r.toastId,r.containerId),key:"t-".concat(r.key)}),t)})))})))}function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Q||(Q={}));const te="popstate";function ne(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function re(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Du){}}}function ae(e,t){return{usr:e.state,key:e.key,idx:t}}function oe(e,t,n,r){return void 0===n&&(n=null),ee({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?se(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function ie(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function se(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ue(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,i=a.history,s=Q.Pop,u=null,l=c();function c(){return(i.state||{idx:null}).idx}function f(){s=Q.Pop;let e=c(),t=null==e?null:e-l;l=e,u&&u({action:s,location:h.location,delta:t})}function d(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:ie(e);return n=n.replace(/ $/,"%20"),ne(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==l&&(l=0,i.replaceState(ee({},i.state,{idx:l}),""));let h={get action(){return s},get location(){return e(a,i)},listen(e){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(te,f),u=e,()=>{a.removeEventListener(te,f),u=null}},createHref:e=>t(a,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s=Q.Push;let r=oe(h.location,e,t);n&&n(r,e),l=c()+1;let f=ae(r,l),d=h.createHref(r);try{i.pushState(f,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;a.location.assign(d)}o&&u&&u({action:s,location:h.location,delta:1})},replace:function(e,t){s=Q.Replace;let r=oe(h.location,e,t);n&&n(r,e),l=c();let a=ae(r,l),f=h.createHref(r);i.replaceState(a,"",f),o&&u&&u({action:s,location:h.location,delta:0})},go:e=>i.go(e)};return h}var le;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(le||(le={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ce(e,t,n){return void 0===n&&(n="/"),fe(e,t,n,!1)}function fe(e,t,n,r){let a=Se(("string"===typeof t?se(t):t).pathname||"/",n);if(null==a)return null;let o=de(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let i=null;for(let s=0;null==i&&s<o.length;++s){let e=ke(a);i=Ce(o[s],e,r)}return i}function de(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,o)=>{let i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(ne(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let s=Ie([r,i.relativePath]),u=n.concat(i);e.children&&e.children.length>0&&(ne(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),de(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:xe(s,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of he(e.path))a(e,t,r);else a(e,t)})),t}function he(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return a?[o,""]:[o];let i=he(r.join("/")),s=[];return s.push(...i.map((e=>""===e?o:[o,e].join("/")))),a&&s.push(...i),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const pe=/^:[\w-]+$/,me=3,ve=2,ge=1,ye=10,be=-2,we=e=>"*"===e;function xe(e,t){let n=e.split("/"),r=n.length;return n.some(we)&&(r+=be),t&&(r+=ve),n.filter((e=>!we(e))).reduce(((e,t)=>e+(pe.test(t)?me:""===t?ge:ye)),r)}function Ce(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},o="/",i=[];for(let s=0;s<r.length;++s){let e=r[s],u=s===r.length-1,l="/"===o?t:t.slice(o.length)||"/",c=_e({path:e.relativePath,caseSensitive:e.caseSensitive,end:u},l),f=e.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=_e({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(a,c.params),i.push({params:a,pathname:Ie([o,c.pathname]),pathnameBase:je(Ie([o,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(o=Ie([o,c.pathnameBase]))}return i}function _e(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);re("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let o=new RegExp(a,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),s=a.slice(1),u=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";i=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const u=s[n];return e[r]=a&&!u?void 0:(u||"").replace(/%2F/g,"/"),e}),{});return{params:u,pathname:o,pathnameBase:i,pattern:e}}function ke(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return re(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Se(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Me(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ee(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Ne(e,t){let n=Ee(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Te(e,t,n,r){let a;void 0===r&&(r=!1),"string"===typeof e?a=se(e):(a=ee({},e),ne(!a.pathname||!a.pathname.includes("?"),Me("?","pathname","search",a)),ne(!a.pathname||!a.pathname.includes("#"),Me("#","pathname","hash",a)),ne(!a.search||!a.search.includes("#"),Me("#","search","hash",a)));let o,i=""===e||""===a.pathname,s=i?"/":a.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"===typeof e?se(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:De(r),hash:Le(a)}}(a,o),l=s&&"/"!==s&&s.endsWith("/"),c=(i||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!l&&!c||(u.pathname+="/"),u}const Ie=e=>e.join("/").replace(/\/\/+/g,"/"),je=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),De=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Le=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Re=["post","put","patch","delete"],Pe=(new Set(Re),["get",...Re]);new Set(Pe),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}const Fe=o.createContext(null);const Be=o.createContext(null);const ze=o.createContext(null);const Ue=o.createContext(null);const We=o.createContext({outlet:null,matches:[],isDataRoute:!1});const Ve=o.createContext(null);function He(){return null!=o.useContext(Ue)}function Ye(){return He()||ne(!1),o.useContext(Ue).location}function Ge(e){o.useContext(ze).static||o.useLayoutEffect(e)}function qe(){let{isDataRoute:e}=o.useContext(We);return e?function(){let{router:e}=ot(rt.UseNavigateStable),t=st(at.UseNavigateStable),n=o.useRef(!1);Ge((()=>{n.current=!0}));let r=o.useCallback((function(r,a){void 0===a&&(a={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Oe({fromRouteId:t},a)))}),[e,t]);return r}():function(){He()||ne(!1);let e=o.useContext(Fe),{basename:t,future:n,navigator:r}=o.useContext(ze),{matches:a}=o.useContext(We),{pathname:i}=Ye(),s=JSON.stringify(Ne(a,n.v7_relativeSplatPath)),u=o.useRef(!1);Ge((()=>{u.current=!0}));let l=o.useCallback((function(n,a){if(void 0===a&&(a={}),!u.current)return;if("number"===typeof n)return void r.go(n);let o=Te(n,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:Ie([t,o.pathname])),(a.replace?r.replace:r.push)(o,a.state,a)}),[t,r,s,i,e]);return l}()}const Qe=o.createContext(null);function Xe(){let{matches:e}=o.useContext(We),t=e[e.length-1];return t?t.params:{}}function Ke(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=o.useContext(ze),{matches:a}=o.useContext(We),{pathname:i}=Ye(),s=JSON.stringify(Ne(a,r.v7_relativeSplatPath));return o.useMemo((()=>Te(e,JSON.parse(s),i,"path"===n)),[e,s,i,n])}function Je(e,t,n,r){He()||ne(!1);let{navigator:a}=o.useContext(ze),{matches:i}=o.useContext(We),s=i[i.length-1],u=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/");s&&s.route;let c,f=Ye();if(t){var d;let e="string"===typeof t?se(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||ne(!1),c=e}else c=f;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=ce(e,{pathname:p});let v=nt(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Ie([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Ie([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),i,n,r);return t&&v?o.createElement(Ue.Provider,{value:{location:Oe({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Q.Pop}},v):v}function Ze(){let e=function(){var e;let t=o.useContext(Ve),n=it(at.UseRouteError),r=st(at.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:a},n):null,null)}const $e=o.createElement(Ze,null);class et extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(We.Provider,{value:this.props.routeContext},o.createElement(Ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tt(e){let{routeContext:t,match:n,children:r}=e,a=o.useContext(Fe);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(We.Provider,{value:t},r)}function nt(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,u=null==(a=n)?void 0:a.errors;if(null!=u){let e=s.findIndex((e=>e.route.id&&void 0!==(null==u?void 0:u[e.route.id])));e>=0||ne(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let o=0;o<s.length;o++){let e=s[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=o),e.route.id){let{loaderData:t,errors:r}=n,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){l=!0,s=c>=0?s.slice(0,c+1):[s[0]];break}}}return s.reduceRight(((e,r,a)=>{let i,f=!1,d=null,h=null;var p;n&&(i=u&&r.route.id?u[r.route.id]:void 0,d=r.route.errorElement||$e,l&&(c<0&&0===a?(p="route-fallback",!1||ut[p]||(ut[p]=!0),f=!0,h=null):c===a&&(f=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,a+1)),v=()=>{let t;return t=i?d:f?h:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(tt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?o.createElement(et,{location:n.location,revalidation:n.revalidation,component:d,error:i,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()}),null)}var rt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rt||{}),at=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(at||{});function ot(e){let t=o.useContext(Fe);return t||ne(!1),t}function it(e){let t=o.useContext(Be);return t||ne(!1),t}function st(e){let t=function(){let e=o.useContext(We);return e||ne(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||ne(!1),n.route.id}const ut={};function lt(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ct(e){return function(e){let t=o.useContext(We).outlet;return t?o.createElement(Qe.Provider,{value:e},t):t}(e.context)}function ft(e){ne(!1)}function dt(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Q.Pop,navigator:i,static:s=!1,future:u}=e;He()&&ne(!1);let l=t.replace(/^\/*/,"/"),c=o.useMemo((()=>({basename:l,navigator:i,static:s,future:Oe({v7_relativeSplatPath:!1},u)})),[l,u,i,s]);"string"===typeof r&&(r=se(r));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:m="default"}=r,v=o.useMemo((()=>{let e=Se(f,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:m},navigationType:a}}),[l,f,d,h,p,m,a]);return null==v?null:o.createElement(ze.Provider,{value:c},o.createElement(Ue.Provider,{children:n,value:v}))}function ht(e){let{children:t,location:n}=e;return Je(pt(t),n)}new Promise((()=>{}));o.Component;function pt(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,((e,r)=>{if(!o.isValidElement(e))return;let a=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,pt(e.props.children,a));e.type!==ft&&ne(!1),e.props.index&&e.props.children&&ne(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=pt(e.props.children,a)),n.push(i)})),n}var mt=n(7950),vt=n.t(mt,2);function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}function yt(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const bt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wt=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Du){}const xt=o.createContext({isTransitioning:!1});new Map;const Ct=i.startTransition;vt.flushSync,i.useId;function _t(e){let{basename:t,children:n,future:r,window:a}=e,i=o.useRef();var s;null==i.current&&(i.current=(void 0===(s={window:a,v5Compat:!0})&&(s={}),ue((function(e,t){let{pathname:n,search:r,hash:a}=e.location;return oe("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:ie(t)}),null,s)));let u=i.current,[l,c]=o.useState({action:u.action,location:u.location}),{v7_startTransition:f}=r||{},d=o.useCallback((e=>{f&&Ct?Ct((()=>c(e))):c(e)}),[c,f]);return o.useLayoutEffect((()=>u.listen(d)),[u,d]),o.useEffect((()=>lt(r)),[r]),o.createElement(dt,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:u,future:r})}const kt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,St=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mt=o.forwardRef((function(e,t){let n,{onClick:r,relative:a,reloadDocument:i,replace:s,state:u,target:l,to:c,preventScrollReset:f,viewTransition:d}=e,h=yt(e,bt),{basename:p}=o.useContext(ze),m=!1;if("string"===typeof c&&St.test(c)&&(n=c,kt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=Se(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:m=!0}catch(Du){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;He()||ne(!1);let{basename:r,navigator:a}=o.useContext(ze),{hash:i,pathname:s,search:u}=Ke(e,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:Ie([r,s])),a.createHref({pathname:l,search:u,hash:i})}(c,{relative:a}),g=function(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:s,viewTransition:u}=void 0===t?{}:t,l=qe(),c=Ye(),f=Ke(e,{relative:s});return o.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:ie(c)===ie(f);l(e,{replace:n,state:a,preventScrollReset:i,relative:s,viewTransition:u})}}),[c,l,f,r,a,n,e,i,s,u])}(c,{replace:s,state:u,target:l,preventScrollReset:f,relative:a,viewTransition:d});return o.createElement("a",gt({},h,{href:n||v,onClick:m||i?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))}));const Et=o.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:a="",end:i=!1,style:s,to:u,viewTransition:l,children:c}=e,f=yt(e,wt),d=Ke(u,{relative:f.relative}),h=Ye(),p=o.useContext(Be),{navigator:m,basename:v}=o.useContext(ze),g=null!=p&&function(e,t){void 0===t&&(t={});let n=o.useContext(xt);null==n&&ne(!1);let{basename:r}=It(Nt.useViewTransitionState),a=Ke(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Se(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Se(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=_e(a.pathname,s)||null!=_e(a.pathname,i)}(d)&&!0===l,y=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,b=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&v&&(w=Se(w,v)||w);const x="/"!==y&&y.endsWith("/")?y.length-1:y.length;let C,_=b===y||!i&&b.startsWith(y)&&"/"===b.charAt(x),k=null!=w&&(w===y||!i&&w.startsWith(y)&&"/"===w.charAt(y.length)),S={isActive:_,isPending:k,isTransitioning:g},M=_?n:void 0;C="function"===typeof a?a(S):[a,_?"active":null,k?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let E="function"===typeof s?s(S):s;return o.createElement(Mt,gt({},f,{"aria-current":M,className:C,ref:t,style:E,to:u,viewTransition:l}),"function"===typeof c?c(S):c)}));var Nt,Tt;function It(e){let t=o.useContext(Fe);return t||ne(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nt||(Nt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Tt||(Tt={}));var jt=n(8139),Dt=n.n(jt),Lt=n(579);const At=["xxl","xl","lg","md","sm","xs"],Rt="xs",Pt=o.createContext({prefixes:{},breakpoints:At,minBreakpoint:Rt}),{Consumer:Ot,Provider:Ft}=Pt;function Bt(e,t){const{prefixes:n}=(0,o.useContext)(Pt);return e||n[t]||t}function zt(){const{breakpoints:e}=(0,o.useContext)(Pt);return e}function Ut(){const{minBreakpoint:e}=(0,o.useContext)(Pt);return e}const Wt=["bsPrefix","fluid","as","className"],Vt=o.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:a="div",className:o}=e,i=u(e,Wt);const s=Bt(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,Lt.jsx)(a,f(f({ref:t},i),{},{className:Dt()(o,r?"".concat(s).concat(l):s)}))}));Vt.displayName="Container";const Ht=Vt,Yt=["bsPrefix","className","as"],Gt=o.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:a="div"}=e,o=u(e,Yt);const i=Bt(n,"row"),s=zt(),l=Ut(),c="".concat(i,"-cols"),d=[];return s.forEach((e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==l?"-".concat(e):"";null!=n&&d.push("".concat(c).concat(r,"-").concat(n))})),(0,Lt.jsx)(a,f(f({ref:t},o),{},{className:Dt()(r,i,...d)}))}));Gt.displayName="Row";const qt=Gt,Qt=["as","bsPrefix","className"],Xt=["className"];const Kt=o.forwardRef(((e,t)=>{const[n,{as:r="div",bsPrefix:a,spans:o}]=function(e){let{as:t,bsPrefix:n,className:r}=e,a=u(e,Qt);n=Bt(n,"col");const o=zt(),i=Ut(),s=[],l=[];return o.forEach((e=>{const t=a[e];let r,o,u;delete a[e],"object"===typeof t&&null!=t?({span:r,offset:o,order:u}=t):r=t;const c=e!==i?"-".concat(e):"";r&&s.push(!0===r?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(r)),null!=u&&l.push("order".concat(c,"-").concat(u)),null!=o&&l.push("offset".concat(c,"-").concat(o))})),[f(f({},a),{},{className:Dt()(r,...s,...l)}),{as:t,bsPrefix:n,spans:s}]}(e),{className:i}=n,s=u(n,Xt);return(0,Lt.jsx)(r,f(f({},s),{},{ref:t,className:Dt()(i,!o.length&&a)}))}));Kt.displayName="Col";const Jt=Kt;var Zt=n(9461),$t=n(8443);let en=function(e){e()};const tn=()=>en,nn=Symbol.for("react-redux-context"),rn="undefined"!==typeof globalThis?globalThis:{};function an(){var e;if(!o.createContext)return{};const t=null!=(e=rn[nn])?e:rn[nn]=new Map;let n=t.get(o.createContext);return n||(n=o.createContext(null),t.set(o.createContext,n)),n}const on=an();function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on;return function(){return(0,o.useContext)(e)}}const un=sn();let ln=()=>{throw new Error("uSES not initialized!")};const cn=(e,t)=>e===t;function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on;const t=e===on?un:sn(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=cn,stabilityCheck:a,noopCheck:i}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:u,getServerState:l,stabilityCheck:c,noopCheck:f}=t(),d=((0,o.useRef)(!0),(0,o.useCallback)({[e.name]:t=>e(t)}[e.name],[e,c,a])),h=ln(u.addNestedSub,s.getState,l||s.getState,d,r);return(0,o.useDebugValue)(h),h}}const dn=fn();n(219),n(2706);const hn={notify(){},get:()=>[]};function pn(e,t){let n,r=hn,a=0,o=!1;function i(){l.onStateChange&&l.onStateChange()}function s(){a++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=tn();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,a=n={callback:e,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){r&&null!==t&&(r=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}())}function u(){a--,n&&0===a&&(n(),n=void 0,r.clear(),r=hn)}const l={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),u())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,u())},getListeners:()=>r};return l}const mn=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?o.useLayoutEffect:o.useEffect;let vn=null;const gn=function(e){let{store:t,context:n,children:r,serverState:a,stabilityCheck:i="once",noopCheck:s="once"}=e;const u=o.useMemo((()=>{const e=pn(t);return{store:t,subscription:e,getServerState:a?()=>a:void 0,stabilityCheck:i,noopCheck:s}}),[t,a,i,s]),l=o.useMemo((()=>t.getState()),[t]);mn((()=>{const{subscription:e}=u;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[u,l]);const c=n||on;return o.createElement(c.Provider,{value:u},r)};function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on;const t=e===on?un:sn(e);return function(){const{store:e}=t();return e}}const bn=yn();function wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on;const t=e===on?bn:yn(e);return function(){return t().dispatch}}const xn=wn();var Cn;(e=>{ln=e})($t.useSyncExternalStoreWithSelector),(e=>{vn=e})(Zt.useSyncExternalStore),Cn=mt.unstable_batchedUpdates,en=Cn;var _n=n(2963),kn=n.n(_n),Sn=n(8613),Mn=n.n(Sn);kn().setAppElement("#root");const En=(e,t)=>{let{children:n,title:r,style:a,isOpen:i,onRequestClose:s,id:u,onClose:l}=e;var c=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");const d={content:f(f({top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",backgroundColor:"rgb(36,37,38)",zIndex:"99",maxHeight:"100%"},a),{},{width:c?"95%":"600px"}),overlay:{backgroundColor:"rgba(0,0,0,0.8)",zIndex:"999"}};return(0,Lt.jsx)("div",{children:(0,Lt.jsx)(kn(),{shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0,style:d,isOpen:i,onRequestClose:s,id:u||"profile-modal",children:n})})},Nn=(e,t)=>{const n=new Image;n.src=e,n.onload=()=>t(!0),n.onerror=()=>t(!1)};const Tn=e=>{const[t,n]=(0,o.useState)(e.hasStory||!1),[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!1);let u=qe();var l=e.profile;(0,o.useEffect)((()=>{a((null===e||void 0===e?void 0:e.active)||(null===e||void 0===e?void 0:e.isActive)||!1),Nn(e.profilePic,s)}),[e]);let c=(0,o.useCallback)((e=>{u("/".concat(e.currentTarget.dataset.id))}),[]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"user-profile-img-container",children:[r&&(0,Lt.jsx)("div",{className:"active-icon active"}),(0,Lt.jsx)("div",{className:"user-profile-img ".concat(1==t?"has-story":""),children:i?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{"data-id":l,onClick:c,children:(0,Lt.jsx)("img",{src:e.profilePic,alt:""})})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{"data-id":l,onClick:c,children:[" ",(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png",alt:""})]})})})]})})};function In(e,t){return function(){return e.apply(t,arguments)}}const{toString:jn}=Object.prototype,{getPrototypeOf:Dn}=Object,{iterator:Ln,toStringTag:An}=Symbol,Rn=(e=>t=>{const n=jn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pn=e=>(e=e.toLowerCase(),t=>Rn(t)===e),On=e=>t=>typeof t===e,{isArray:Fn}=Array,Bn=On("undefined");const zn=Pn("ArrayBuffer");const Un=On("string"),Wn=On("function"),Vn=On("number"),Hn=e=>null!==e&&"object"===typeof e,Yn=e=>{if("object"!==Rn(e))return!1;const t=Dn(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(An in e)&&!(Ln in e)},Gn=Pn("Date"),qn=Pn("File"),Qn=Pn("Blob"),Xn=Pn("FileList"),Kn=Pn("URLSearchParams"),[Jn,Zn,$n,er]=["ReadableStream","Request","Response","Headers"].map(Pn);function tr(e,t){let n,r,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Fn(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=a?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let i;for(n=0;n<o;n++)i=r[n],t.call(null,e[i],i,e)}}function nr(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const rr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ar=e=>!Bn(e)&&e!==rr;const or=(ir="undefined"!==typeof Uint8Array&&Dn(Uint8Array),e=>ir&&e instanceof ir);var ir;const sr=Pn("HTMLFormElement"),ur=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),lr=Pn("RegExp"),cr=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tr(n,((n,a)=>{let o;!1!==(o=t(n,a,e))&&(r[a]=o||n)})),Object.defineProperties(e,r)};const fr=Pn("AsyncFunction"),dr=(hr="function"===typeof setImmediate,pr=Wn(rr.postMessage),hr?setImmediate:pr?((e,t)=>(rr.addEventListener("message",(n=>{let{source:r,data:a}=n;r===rr&&a===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),rr.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var hr,pr;const mr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(rr):"undefined"!==typeof process&&process.nextTick||dr,vr={isArray:Fn,isArrayBuffer:zn,isBuffer:function(e){return null!==e&&!Bn(e)&&null!==e.constructor&&!Bn(e.constructor)&&Wn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Wn(e.append)&&("formdata"===(t=Rn(e))||"object"===t&&Wn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zn(e.buffer),t},isString:Un,isNumber:Vn,isBoolean:e=>!0===e||!1===e,isObject:Hn,isPlainObject:Yn,isReadableStream:Jn,isRequest:Zn,isResponse:$n,isHeaders:er,isUndefined:Bn,isDate:Gn,isFile:qn,isBlob:Qn,isRegExp:lr,isFunction:Wn,isStream:e=>Hn(e)&&Wn(e.pipe),isURLSearchParams:Kn,isTypedArray:or,isFileList:Xn,forEach:tr,merge:function e(){const{caseless:t}=ar(this)&&this||{},n={},r=(r,a)=>{const o=t&&nr(n,a)||a;Yn(n[o])&&Yn(r)?n[o]=e(n[o],r):Yn(r)?n[o]=e({},r):Fn(r)?n[o]=r.slice():n[o]=r};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&tr(arguments[a],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return tr(t,((t,r)=>{n&&Wn(t)?e[r]=In(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,o,i;const s={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)i=a[o],r&&!r(i,e,t)||s[i]||(t[i]=e[i],s[i]=!0);e=!1!==n&&Dn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Rn,kindOfTest:Pn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Fn(e))return e;let t=e.length;if(!Vn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Ln]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:sr,hasOwnProperty:ur,hasOwnProp:ur,reduceDescriptors:cr,freezeMethods:e=>{cr(e,((t,n)=>{if(Wn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Wn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Fn(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:nr,global:rr,isContextDefined:ar,isSpecCompliantForm:function(e){return!!(e&&Wn(e.append)&&"FormData"===e[An]&&e[Ln])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Hn(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const a=Fn(e)?[]:{};return tr(e,((e,t)=>{const o=n(e,r+1);!Bn(o)&&(a[t]=o)})),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:fr,isThenable:e=>e&&(Hn(e)||Wn(e))&&Wn(e.then)&&Wn(e.catch),setImmediate:dr,asap:mr,isIterable:e=>null!=e&&Wn(e[Ln])};function gr(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}vr.inherits(gr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vr.toJSONObject(this.config),code:this.code,status:this.status}}});const yr=gr.prototype,br={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{br[e]={value:e}})),Object.defineProperties(gr,br),Object.defineProperty(yr,"isAxiosError",{value:!0}),gr.from=(e,t,n,r,a,o)=>{const i=Object.create(yr);return vr.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),gr.call(i,e.message,t,n,r,a),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const wr=gr;function xr(e){return vr.isPlainObject(e)||vr.isArray(e)}function Cr(e){return vr.endsWith(e,"[]")?e.slice(0,-2):e}function _r(e,t,n){return e?e.concat(t).map((function(e,t){return e=Cr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const kr=vr.toFlatObject(vr,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Sr=function(e,t,n){if(!vr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=vr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!vr.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,i=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&vr.isSpecCompliantForm(t);if(!vr.isFunction(a))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(vr.isDate(e))return e.toISOString();if(!s&&vr.isBlob(e))throw new wr("Blob is not supported. Use a Buffer instead.");return vr.isArrayBuffer(e)||vr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,a){let s=e;if(e&&!a&&"object"===typeof e)if(vr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(vr.isArray(e)&&function(e){return vr.isArray(e)&&!e.some(xr)}(e)||(vr.isFileList(e)||vr.endsWith(n,"[]"))&&(s=vr.toArray(e)))return n=Cr(n),s.forEach((function(e,r){!vr.isUndefined(e)&&null!==e&&t.append(!0===i?_r([n],r,o):null===i?n:n+"[]",u(e))})),!1;return!!xr(e)||(t.append(_r(a,n,o),u(e)),!1)}const c=[],f=Object.assign(kr,{defaultVisitor:l,convertValue:u,isVisitable:xr});if(!vr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!vr.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),vr.forEach(n,(function(n,o){!0===(!(vr.isUndefined(n)||null===n)&&a.call(t,n,vr.isString(o)?o.trim():o,r,f))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function Mr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Er(e,t){this._pairs=[],e&&Sr(e,this,t)}const Nr=Er.prototype;Nr.append=function(e,t){this._pairs.push([e,t])},Nr.toString=function(e){const t=e?function(t){return e.call(this,t,Mr)}:Mr;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Tr=Er;function Ir(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jr(e,t,n){if(!t)return e;const r=n&&n.encode||Ir;vr.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(o=a?a(t,n):vr.isURLSearchParams(t)?t.toString():new Tr(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Dr=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){vr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Lr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ar={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Tr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Rr="undefined"!==typeof window&&"undefined"!==typeof document,Pr="object"===typeof navigator&&navigator||void 0,Or=Rr&&(!Pr||["ReactNative","NativeScript","NS"].indexOf(Pr.product)<0),Fr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Br=Rr&&window.location.href||"http://localhost",zr=f(f({},e),Ar);const Ur=function(e){function t(e,n,r,a){let o=e[a++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),s=a>=e.length;if(o=!o&&vr.isArray(r)?r.length:o,s)return vr.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!i;r[o]&&vr.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],a)&&vr.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}(r[o])),!i}if(vr.isFormData(e)&&vr.isFunction(e.entries)){const n={};return vr.forEachEntry(e,((e,r)=>{t(function(e){return vr.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Wr={transitional:Lr,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=vr.isObject(e);a&&vr.isHTMLForm(e)&&(e=new FormData(e));if(vr.isFormData(e))return r?JSON.stringify(Ur(e)):e;if(vr.isArrayBuffer(e)||vr.isBuffer(e)||vr.isStream(e)||vr.isFile(e)||vr.isBlob(e)||vr.isReadableStream(e))return e;if(vr.isArrayBufferView(e))return e.buffer;if(vr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Sr(e,new zr.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return zr.isNode&&vr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=vr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Sr(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(vr.isString(e))try{return(t||JSON.parse)(e),vr.trim(e)}catch(Du){if("SyntaxError"!==Du.name)throw Du}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Wr.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(vr.isResponse(e)||vr.isReadableStream(e))return e;if(e&&vr.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Du){if(n){if("SyntaxError"===Du.name)throw wr.from(Du,wr.ERR_BAD_RESPONSE,this,null,this.response);throw Du}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zr.classes.FormData,Blob:zr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vr.forEach(["delete","get","head","post","put","patch"],(e=>{Wr.headers[e]={}}));const Vr=Wr,Hr=vr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yr=Symbol("internals");function Gr(e){return e&&String(e).trim().toLowerCase()}function qr(e){return!1===e||null==e?e:vr.isArray(e)?e.map(qr):String(e)}function Qr(e,t,n,r,a){return vr.isFunction(r)?r.call(this,t,n):(a&&(t=n),vr.isString(t)?vr.isString(r)?-1!==t.indexOf(r):vr.isRegExp(r)?r.test(t):void 0:void 0)}class Xr{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=Gr(t);if(!a)throw new Error("header name must be a non-empty string");const o=vr.findKey(r,a);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=qr(e))}const o=(e,t)=>vr.forEach(e,((e,n)=>a(e,n,t)));if(vr.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(vr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach((function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&Hr[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(vr.isObject(e)&&vr.isIterable(e)){let n,r,a={};for(const t of e){if(!vr.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?vr.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Gr(e)){const n=vr.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(vr.isFunction(t))return t.call(this,e,n);if(vr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gr(e)){const n=vr.findKey(this,e);return!(!n||void 0===this[n]||t&&!Qr(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=Gr(e)){const a=vr.findKey(n,e);!a||t&&!Qr(0,n[a],a,t)||(delete n[a],r=!0)}}return vr.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Qr(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return vr.forEach(this,((r,a)=>{const o=vr.findKey(n,a);if(o)return t[o]=qr(r),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(a):String(a).trim();i!==a&&delete t[a],t[i]=qr(r),n[i]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return vr.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&vr.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Yr]=this[Yr]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Gr(e);t[r]||(!function(e,t){const n=vr.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return vr.isArray(e)?e.forEach(r):r(e),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),vr.reduceDescriptors(Xr.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),vr.freezeMethods(Xr);const Kr=Xr;function Jr(e,t){const n=this||Vr,r=t||n,a=Kr.from(r.headers);let o=r.data;return vr.forEach(e,(function(e){o=e.call(n,o,a.normalize(),t?t.status:void 0)})),a.normalize(),o}function Zr(e){return!(!e||!e.__CANCEL__)}function $r(e,t,n){wr.call(this,null==e?"canceled":e,wr.ERR_CANCELED,t,n),this.name="CanceledError"}vr.inherits($r,wr,{__CANCEL__:!0});const ea=$r;function ta(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new wr("Request failed with status code "+n.status,[wr.ERR_BAD_REQUEST,wr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const na=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,o=0,i=0;return t=void 0!==t?t:1e3,function(s){const u=Date.now(),l=r[i];a||(a=u),n[o]=s,r[o]=u;let c=i,f=0;for(;c!==o;)f+=n[c++],c%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),u-a<t)return;const d=l&&u-l;return d?Math.round(1e3*f/d):void 0}};const ra=function(e,t){let n,r,a=0,o=1e3/t;const i=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];t>=o?i(u,e):(n=u,r||(r=setTimeout((()=>{r=null,i(n)}),o-t)))},()=>n&&i(n)]},aa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const a=na(50,250);return ra((n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,s=o-r,u=a(s);r=o;e({loaded:o,total:i,progress:i?o/i:void 0,bytes:s,rate:u||void 0,estimated:u&&i&&o<=i?(i-o)/u:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},oa=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ia=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return vr.asap((()=>e(...n)))},sa=zr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zr.origin),zr.navigator&&/(msie|trident)/i.test(zr.navigator.userAgent)):()=>!0,ua=zr.hasStandardBrowserEnv?{write(e,t,n,r,a,o){const i=[e+"="+encodeURIComponent(t)];vr.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),vr.isString(r)&&i.push("path="+r),vr.isString(a)&&i.push("domain="+a),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function la(e,t,n){let r=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ca=e=>e instanceof Kr?f({},e):e;function fa(e,t){t=t||{};const n={};function r(e,t,n,r){return vr.isPlainObject(e)&&vr.isPlainObject(t)?vr.merge.call({caseless:r},e,t):vr.isPlainObject(t)?vr.merge({},t):vr.isArray(t)?t.slice():t}function a(e,t,n,a){return vr.isUndefined(t)?vr.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function o(e,t){if(!vr.isUndefined(t))return r(void 0,t)}function i(e,t){return vr.isUndefined(t)?vr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,a,o){return o in t?r(n,a):o in e?r(void 0,n):void 0}const u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(e,t,n)=>a(ca(e),ca(t),0,!0)};return vr.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=u[r]||a,i=o(e[r],t[r],r);vr.isUndefined(i)&&o!==s||(n[r]=i)})),n}const da=e=>{const t=fa({},e);let n,{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:u}=t;if(t.headers=s=Kr.from(s),t.url=jr(la(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),vr.isFormData(r))if(zr.hasStandardBrowserEnv||zr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(zr.hasStandardBrowserEnv&&(a&&vr.isFunction(a)&&(a=a(t)),a||!1!==a&&sa(t.url))){const e=o&&i&&ua.read(i);e&&s.set(o,e)}return t},ha="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=da(e);let a=r.data;const o=Kr.from(r.headers).normalize();let i,s,u,l,c,{responseType:f,onUploadProgress:d,onDownloadProgress:h}=r;function p(){l&&l(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let m=new XMLHttpRequest;function v(){if(!m)return;const r=Kr.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());ta((function(e){t(e),p()}),(function(e){n(e),p()}),{data:f&&"text"!==f&&"json"!==f?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=v:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(v)},m.onabort=function(){m&&(n(new wr("Request aborted",wr.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new wr("Network Error",wr.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Lr;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new wr(t,a.clarifyTimeoutError?wr.ETIMEDOUT:wr.ECONNABORTED,e,m)),m=null},void 0===a&&o.setContentType(null),"setRequestHeader"in m&&vr.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),vr.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),f&&"json"!==f&&(m.responseType=r.responseType),h&&([u,c]=aa(h,!0),m.addEventListener("progress",u)),d&&m.upload&&([s,l]=aa(d),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(i=t=>{m&&(n(!t||t.type?new ea(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===zr.protocols.indexOf(g)?n(new wr("Unsupported protocol "+g+":",wr.ERR_BAD_REQUEST,e)):m.send(a||null)}))},pa=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof wr?t:new ea(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,a(new wr("timeout ".concat(t," of ms exceeded"),wr.ETIMEDOUT))}),t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((e=>e.addEventListener("abort",a)));const{signal:s}=r;return s.unsubscribe=()=>vr.asap(i),s}};function ma(e,t){this.v=e,this.k=t}function va(e){return function(){return new ga(e.apply(this,arguments))}}function ga(e){var t,n;function r(t,n){try{var o=e[t](n),i=o.value,s=i instanceof ma;Promise.resolve(s?i.v:i).then((function(n){if(s){var u="return"===t?"return":"next";if(!i.k||n.done)return r(u,n);n=e[u](n).value}a(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(o,i){var s={key:e,arg:a,resolve:o,reject:i,next:null};n?n=n.next=s:(t=n=s,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function ya(e){return new ma(e,0)}function ba(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new ma(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function wa(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new xa(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function xa(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return xa=function(e){this.s=e,this.n=e.next},xa.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new xa(e)}ga.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ga.prototype.next=function(e){return this._invoke("next",e)},ga.prototype.throw=function(e){return this._invoke("throw",e)},ga.prototype.return=function(e){return this._invoke("return",e)};const Ca=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},_a=function(){var e=va((function*(e,t){var n,r=!1,a=!1;try{for(var o,i=wa(ka(e));r=!(o=yield ya(i.next())).done;r=!1){const e=o.value;yield*ba(wa(Ca(e,t)))}}catch(s){a=!0,n=s}finally{try{r&&null!=i.return&&(yield ya(i.return()))}finally{if(a)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),ka=function(){var e=va((function*(e){if(e[Symbol.asyncIterator])return void(yield*ba(wa(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield ya(t.read());if(e)break;yield n}}finally{yield ya(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Sa=(e,t,n,r)=>{const a=_a(e,t);let o,i=0,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return s(),void e.close();let o=r.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),a.return())},{highWaterMark:2})},Ma="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Ea=Ma&&"function"===typeof ReadableStream,Na=Ma&&("function"===typeof TextEncoder?(Ta=new TextEncoder,e=>Ta.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Ta;const Ia=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Du){return!1}},ja=Ea&&Ia((()=>{let e=!1;const t=new Request(zr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Da=Ea&&Ia((()=>vr.isReadableStream(new Response("").body))),La={stream:Da&&(e=>e.body)};var Aa;Ma&&(Aa=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!La[e]&&(La[e]=vr.isFunction(Aa[e])?t=>t[e]():(t,n)=>{throw new wr("Response type '".concat(e,"' is not supported"),wr.ERR_NOT_SUPPORT,n)})})));const Ra=async(e,t)=>{const n=vr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(vr.isBlob(e))return e.size;if(vr.isSpecCompliantForm(e)){const t=new Request(zr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return vr.isArrayBufferView(e)||vr.isArrayBuffer(e)?e.byteLength:(vr.isURLSearchParams(e)&&(e+=""),vr.isString(e)?(await Na(e)).byteLength:void 0)})(t):n},Pa=Ma&&(async e=>{let{url:t,method:n,data:r,signal:a,cancelToken:o,timeout:i,onDownloadProgress:s,onUploadProgress:u,responseType:l,headers:c,withCredentials:d="same-origin",fetchOptions:h}=da(e);l=l?(l+"").toLowerCase():"text";let p,m=pa([a,o&&o.toAbortSignal()],i);const v=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(u&&ja&&"get"!==n&&"head"!==n&&0!==(g=await Ra(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(vr.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=oa(g,aa(ia(u)));r=Sa(n.body,65536,e,t)}}vr.isString(d)||(d=d?"include":"omit");const a="credentials"in Request.prototype;p=new Request(t,f(f({},h),{},{signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:a?d:void 0}));let o=await fetch(p);const i=Da&&("stream"===l||"response"===l);if(Da&&(s||i&&v)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=vr.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&oa(t,aa(ia(s),!0))||[];o=new Response(Sa(o.body,65536,n,(()=>{r&&r(),v&&v()})),e)}l=l||"text";let y=await La[vr.findKey(La,l)||"text"](o,e);return!i&&v&&v(),await new Promise(((t,n)=>{ta(t,n,{data:y,headers:Kr.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(y){if(v&&v(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new wr("Network Error",wr.ERR_NETWORK,e,p),{cause:y.cause||y});throw wr.from(y,y&&y.code,e,p)}}),Oa={http:null,xhr:ha,fetch:Pa};vr.forEach(Oa,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Du){}Object.defineProperty(e,"adapterName",{value:t})}}));const Fa=e=>"- ".concat(e),Ba=e=>vr.isFunction(e)||null===e||!1===e,za=e=>{e=vr.isArray(e)?e:[e];const{length:t}=e;let n,r;const a={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Ba(n)&&(r=Oa[(t=String(n)).toLowerCase()],void 0===r))throw new wr("Unknown adapter '".concat(t,"'"));if(r)break;a[t||"#"+o]=r}if(!r){const e=Object.entries(a).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Fa).join("\n"):" "+Fa(e[0]):"as no adapter specified";throw new wr("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Ua(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ea(null,e)}function Wa(e){Ua(e),e.headers=Kr.from(e.headers),e.data=Jr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return za(e.adapter||Vr.adapter)(e).then((function(t){return Ua(e),t.data=Jr.call(e,e.transformResponse,t),t.headers=Kr.from(t.headers),t}),(function(t){return Zr(t)||(Ua(e),t&&t.response&&(t.response.data=Jr.call(e,e.transformResponse,t.response),t.response.headers=Kr.from(t.response.headers))),Promise.reject(t)}))}const Va="1.9.0",Ha={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ha[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ya={};Ha.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,a,o)=>{if(!1===e)throw new wr(r(a," has been removed"+(t?" in "+t:"")),wr.ERR_DEPRECATED);return t&&!Ya[a]&&(Ya[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,o)}},Ha.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Ga={assertOptions:function(e,t,n){if("object"!==typeof e)throw new wr("options must be an object",wr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new wr("option "+o+" must be "+n,wr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new wr("Unknown option "+o,wr.ERR_BAD_OPTION)}},validators:Ha},qa=Ga.validators;class Qa{constructor(e){this.defaults=e||{},this.interceptors={request:new Dr,response:new Dr}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Du){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=fa(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&Ga.assertOptions(n,{silentJSONParsing:qa.transitional(qa.boolean),forcedJSONParsing:qa.transitional(qa.boolean),clarifyTimeoutError:qa.transitional(qa.boolean)},!1),null!=r&&(vr.isFunction(r)?t.paramsSerializer={serialize:r}:Ga.assertOptions(r,{encode:qa.function,serialize:qa.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ga.assertOptions(t,{baseUrl:qa.spelling("baseURL"),withXsrfToken:qa.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&vr.merge(a.common,a[t.method]);a&&vr.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete a[e]})),t.headers=Kr.concat(o,a);const i=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const u=[];let l;this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)}));let c,f=0;if(!s){const e=[Wa.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,u),c=e.length,l=Promise.resolve(t);f<c;)l=l.then(e[f++],e[f++]);return l}c=i.length;let d=t;for(f=0;f<c;){const e=i[f++],t=i[f++];try{d=e(d)}catch(h){t.call(this,h);break}}try{l=Wa.call(this,d)}catch(h){return Promise.reject(h)}for(f=0,c=u.length;f<c;)l=l.then(u[f++],u[f++]);return l}getUri(e){return jr(la((e=fa(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}vr.forEach(["delete","get","head","options"],(function(e){Qa.prototype[e]=function(t,n){return this.request(fa(n||{},{method:e,url:t,data:(n||{}).data}))}})),vr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(fa(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Qa.prototype[e]=t(),Qa.prototype[e+"Form"]=t(!0)}));const Xa=Qa;class Ka{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,a){n.reason||(n.reason=new ea(e,r,a),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ka((function(t){e=t}));return{token:t,cancel:e}}}const Ja=Ka;const Za={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Za).forEach((e=>{let[t,n]=e;Za[n]=t}));const $a=Za;const eo=function e(t){const n=new Xa(t),r=In(Xa.prototype.request,n);return vr.extend(r,Xa.prototype,n,{allOwnKeys:!0}),vr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(fa(t,n))},r}(Vr);eo.Axios=Xa,eo.CanceledError=ea,eo.CancelToken=Ja,eo.isCancel=Zr,eo.VERSION=Va,eo.toFormData=Sr,eo.AxiosError=wr,eo.Cancel=eo.CanceledError,eo.all=function(e){return Promise.all(e)},eo.spread=function(e){return function(t){return e.apply(null,t)}},eo.isAxiosError=function(e){return vr.isObject(e)&&!0===e.isAxiosError},eo.mergeConfig=fa,eo.AxiosHeaders=Kr,eo.formToJSON=e=>Ur(vr.isHTMLForm(e)?new FormData(e):e),eo.getAdapter=za,eo.HttpStatusCode=$a,eo.default=eo;const to=eo;let no=localStorage.getItem("user")||"{}",ro=JSON.parse(no).accessToken;const ao=to.create({baseURL:"https://connectbd.onrender.com/api/",headers:{Authorization:"".concat(ro),"User-Agent":"MyCustomUserAgent","Access-Control-Allow-Origin":"*"}}),oo="LOAD_POSTS",io="ADD_POST",so=e=>({type:io,payload:e});const uo=e=>{let{setPosts:t=null}=e,n=dn((e=>e.profile)),r=n._id,a=xn(),[i,s]=(0,o.useState)(!1),[u,l]=(0,o.useState)(!1),c=e=>{s(!0)},d=()=>{s(!1)};const h={caption:"",attachments:null,urls:null,location:"",feelings:""};let[p,m]=(0,o.useState)(h),[v,g]=(0,o.useState)(!1);const[y,b]=(0,o.useState)(!1);(0,o.useEffect)((()=>{ao.get("/profile/hasStory",{params:{profileId:r}}).then((e=>{if(200==e.status){let t=e.data.hasStory;"yes"==t&&b(!0),"no"==t&&b(!1)}}))}),[p]);var w=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");let x=n.user&&n.user.firstName+" "+n.user.surname||"",C="What's On Your Mind "+x+"?",_=(0,o.useCallback)((e=>{let t=e.target.value,n=e.target.name;0==v&&"caption"==n&&g("caption"),m((e=>f(f({},e),{},{[n]:t})))}),[p]),k=(0,o.useCallback)((e=>{let t=e.currentTarget;m(f(f({},p),{},{urls:"https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif"})),Mn()(t).parents(".cpm-attachment-upload").slideUp(),Mn()(t).parents(".cpm-attachment-upload").siblings(".cpm-attachment-preview").slideDown();let n=e.target.files[0];S(n.type,n)}),[p]),S=async(e,t)=>{l(!0);try{let a=e.split("/")[0];switch(g(a),a){case"image":let e=new FormData;e.append("image",t),e.append("type","image/png");let o=await ao.post("/upload/",e,{headers:{"content-type":"multipart/form-data"}});if(200==o.status){l(!1);var n=o.data.secure_url;m((e=>f(f({},e),{},{urls:n,type:a})))}break;case"video":let i=new FormData;i.append("attachment",t),i.append("type","video/mp4");let s=await ao.post("/upload/video",i,{headers:{"content-type":"multipart/form-data"}});if(200==s.status){var r=s.data.secure_url;l(!1),m((e=>f(f({},e),{},{type:a,urls:r})))}}}catch(a){console.log(a)}},M=(0,o.useCallback)((async e=>{e.preventDefault(),s(!1);try{switch(p.type){case"image":e.target.classList.add("added");let n=new FormData;n.append("caption",p.caption),n.append("urls",p.urls),n.append("feelings",p.feelings),n.append("location",p.location);let r=await ao.post("/post/create/",n,{headers:{"content-type":"multipart/form-data"}});200===r.status&&(a(so(r.data.post)),m(h),t&&t((e=>[r.data.post,...e])),s(!1));break;case"video":e.target.classList.add("added"),200===(await ao.post("/watch/create",{caption:p.caption,videoUrl:p.urls,location:p.location,feelings:p.feelings},{headers:{"content-type":"multipart/form-data"}})).status&&(m(h),a(so(i.data.post)),s(!1));break;default:let o=new FormData;o.append("caption",p.caption),o.append("urls",p.urls),o.append("feelings",p.feelings),o.append("location",p.location);let i=await ao.post("/post/create/",o,{headers:{"content-type":"multipart/form-data"}});200===i.status&&(m(h),a(so(i.data.post)),t&&t((e=>[i.data.post,...e])),s(!1))}}catch(n){console.log(n)}}),[p]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"nf-create-post",children:[(0,Lt.jsxs)("div",{className:"top",children:[(0,Lt.jsx)("div",{className:"profile-pic",children:(0,Lt.jsx)(Tn,{profilePic:n.profilePic,hasStory:y,profile:n._id})}),(0,Lt.jsx)("div",{onClick:c,className:"cp-field",children:(0,Lt.jsx)("input",{readOnly:!0,placeholder:C,className:"cp-input"})})]}),(0,Lt.jsx)("div",{className:"bottom",children:(0,Lt.jsxs)("ul",{onClick:c,className:"button-container",children:[(0,Lt.jsxs)("li",{className:"photo-button",children:[(0,Lt.jsx)("div",{className:"button-icon"}),(0,Lt.jsx)("div",{className:"button-text",children:"Photo/video"})]}),(0,Lt.jsxs)("li",{className:"live-button",children:[(0,Lt.jsx)("div",{className:"button-icon"}),(0,Lt.jsx)("div",{className:"button-text",children:"Live Video"})]})]})}),(0,Lt.jsxs)(En,{isOpen:i,id:"create-post-modal",onRequestClose:d,title:"Create A Post",style:{width:w?"95%":"600px"},children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",children:"Create a Post"}),(0,Lt.jsx)("div",{onClick:d,className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("div",{className:"cp-modal-container",children:[(0,Lt.jsxs)("div",{className:"cpm-header",children:[(0,Lt.jsx)("div",{className:"cpm-profilePic",children:(0,Lt.jsx)(Tn,{profilePic:n.profilePic,hasStory:y,profile:n._id})}),(0,Lt.jsx)("div",{className:"cpm-username",children:(0,Lt.jsx)("h3",{children:x})}),(0,Lt.jsx)("div",{className:"cpm-feelings-container ml-2",children:(0,Lt.jsxs)("select",{name:"feelings",onChange:_.bind(void 0),className:"form-control",children:[(0,Lt.jsx)("option",{value:"0",children:"Select Feelings"}),(0,Lt.jsx)("option",{value:"funny",children:"Funny"}),(0,Lt.jsx)("option",{value:"lovely",children:"Lovely"}),(0,Lt.jsx)("option",{value:"sad",children:"Sad"})]})}),(0,Lt.jsx)("div",{className:"cpm-location-container",children:(0,Lt.jsx)("input",{type:"text",name:"location",onChange:_,className:"form-control",placeholder:"Location...."})})]}),(0,Lt.jsxs)("form",{className:"cpm-form",onSubmit:e=>{e.preventDefault()},children:[(0,Lt.jsx)("div",{className:"cpm-form-text",children:(0,Lt.jsx)("textarea",{name:"caption",onChange:_,placeholder:C,className:"cpm-form-text-input",value:p.caption})}),(0,Lt.jsxs)("div",{className:"cpm-attachment-control",children:[(0,Lt.jsxs)("div",{className:"cpm-attachment-preview",children:["video"===p.type&&(0,Lt.jsx)("video",{style:{width:"100%"},src:p.urls}),"image"===p.type&&(0,Lt.jsx)("img",{src:p.urls&&p.urls,alt:"attachment preview"})]}),(0,Lt.jsxs)("div",{className:"cpm-attachment-upload",children:[(0,Lt.jsxs)("div",{className:"cpm-attachment-upload-overlay",children:[(0,Lt.jsx)("span",{className:"plus-icon"}),(0,Lt.jsx)("span",{className:"overlay-text",children:"Add Photos/Videos"})]}),(0,Lt.jsx)("input",{onChange:k,name:"photos_vidoes",type:"file"})]})]}),(0,Lt.jsxs)("div",{className:"cpm-attachment",children:[(0,Lt.jsx)("span",{className:"cpm-button-text",children:"Add to your post"}),(0,Lt.jsx)("div",{className:"post-meta-buttons",children:(0,Lt.jsx)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".cpm-attachment").siblings(".cpm-attachment-control").slideToggle()},className:"attachment-button-file"})})]}),(0,Lt.jsx)("div",{className:"cpm-submit-button",children:(0,Lt.jsxs)("button",{onClick:M.bind(void 0),className:"button",disabled:u,type:"submit",children:["  ",1==u?"Media Uploading....":"Post Now","  "]})})]})]})})]})]})})};const lo=e=>{let{children:t,style:n,className:r}=e;return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{style:f({zIndex:"999",position:"absolute",boxShadow:"1px #888",display:"none",padding:"10px"},n),className:r,children:t})})};const co=()=>{let e=dn((e=>e.profile)),t=qe();const n="/"+JSON.parse(localStorage.getItem("user")||"{}").profile+"/";let r=(0,o.useCallback)((e=>{t(n)}),[Date.now()]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{id:"left-sidebar",className:"text-left",children:(0,Lt.jsxs)("ul",{className:"ls-nav-menu",children:[(0,Lt.jsx)("li",{children:(0,Lt.jsx)("div",{onClick:r,className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-profile-img",children:(0,Lt.jsx)(Tn,{profilePic:e.profilePic,profile:e._id})}),(0,Lt.jsxs)("div",{className:"ls-text user-name",children:[e.user&&e.user.firstName," ",e.user&&e.user.surname]})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Mt,{to:"/friends/",className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-friends"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Find Friends"})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Mt,{to:"/downloads/",className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-downloads"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Saved Videos"})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Mt,{to:"/downloads/",className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-group"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Group"})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Mt,{to:"/watch/",className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-watch"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Watch"})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Mt,{to:"/marketplace/",className:"text-decoration-none",children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-mp"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Marketplace"})]})})}),(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-memo"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Memories"})]})}),(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"lsi-star"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Favourites"})]})}),(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-pages"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Pages"})]})}),(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"ls-icon lsi-saved"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Saved"})]})}),(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"ls-nav-menu-item",children:[(0,Lt.jsx)("div",{className:"lsi-card"}),(0,Lt.jsx)("div",{className:"ls-text",children:"Orders & Payments"})]})})]})})})},fo=()=>{const[e,t]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);return(0,o.useEffect)((()=>{const e=window.matchMedia("(max-width: 768px)"),n=e=>t(e.matches);return e.addEventListener("change",n),()=>e.removeEventListener("change",n)}),[]),e};const ho=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(""),f=Ye(),d=fo(),h=qe();(0,o.useEffect)((()=>{u(!1)}),[f]);let p=e=>{u(!s)},m=()=>(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{onClick:p,className:"header-mm-button",style:{lineHeight:1},children:(0,Lt.jsx)("i",{className:"fa fa-bars"})})});let v=()=>{d||(Mn()(".header-search-icon, .header-logo").hide(),Mn()(".header-search-back-container").fadeIn("slow"),Mn()(".header-search-icon, .header-logo-container").animate({left:"-10px",opacity:0},"fast"),Mn()("#header-search").css({width:"100%",display:"block"}))},g=(0,o.useCallback)((e=>{h(e.currentTarget.dataset.url)}),[]);function y(e){return e.split(/\s+/).slice(0,4).join(" ")}return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"header-left",children:[(0,Lt.jsx)("div",{className:"header-logo-container",children:(0,Lt.jsx)(Mt,{to:"/",children:(0,Lt.jsx)("img",{className:"header-logo",src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo.png",alt:"logo"})})}),(0,Lt.jsxs)("div",{className:"header-mobile-menu-button-container",children:[d&&(0,Lt.jsx)(m,{}),s&&(0,Lt.jsx)(lo,{className:"header-mm-dropdown",style:{top:"100%",left:0,width:"300px",zIndex:"999999",display:"block"},children:(0,Lt.jsx)(co,{})})]}),(0,Lt.jsx)("div",{className:"header-search-back-container",children:(0,Lt.jsx)("i",{onClick:e=>{i(!1)},className:"fal fa-arrow-left header-search-back-icon"})}),(0,Lt.jsxs)("div",{className:"header-search-container ".concat(1==a?"active-mobile":""),children:[(0,Lt.jsx)("i",{className:"fal fa-search header-search-icon",onClick:(e=>{d&&(i(!a),v())}).bind(void 0)}),(0,Lt.jsx)("input",{value:l,onChange:e=>{c(e.target.value)},onBlur:()=>{if(d||(Mn()(".header-search-back-container").hide(),Mn()(".header-search-icon, .header-logo-container").animate({left:"0",opacity:1},"fast"),Mn()(".header-search-icon, .header-logo").fadeIn(),Mn()("#header-search").css({width:"auto",display:"block"})),l.length>0)return r(!0);r(!1)},onFocus:v,onKeyUp:(async e=>{if(l.length>0){let e=await ao.get("search/",{params:{input:l}});200===e.status&&(console.log("data",e.data),t(e.data),r(null!==e.data.users||null!==e.data.posts||null!==e.data.videos))}else t([]),r(!1)}).bind(void 0),id:"header-search",type:"search",placeholder:"Search ICS"}),n&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"header-search-results",children:[e.users.length>0&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"search-results-user",children:[(0,Lt.jsx)("h3",{className:"search-result-title",children:"Users"}),(0,Lt.jsx)("ul",{className:"search-results-list-container",children:e.users&&e.users.map(((e,t)=>(0,Lt.jsx)("li",{className:"search-result-item",onClick:()=>{r(!1),i(!1)},children:(0,Lt.jsxs)("div",{className:"item-container","data-url":"/".concat(e._id),onClick:g.bind(void 0),children:[(0,Lt.jsx)("div",{className:"user-profile-pic",children:(0,Lt.jsx)(Tn,{profilePic:e.profilePic,profile:e._id})}),(0,Lt.jsx)("div",{className:"user-details",children:e.fullName})]})},t)))})]})}),e.videos.length>0&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"search-results-videos",children:[(0,Lt.jsx)("h3",{className:"search-result-title",children:"Videos"}),(0,Lt.jsx)("ul",{className:"search-results-list-container",children:e.videos&&e.videos.map(((e,t)=>(0,Lt.jsx)("li",{className:"search-result-item",onClick:()=>{r(!1),i(!1)},children:(0,Lt.jsxs)("div",{className:"item-container","data-url":"/watch/".concat(e._id),onClick:g.bind(void 0),children:[(0,Lt.jsx)("div",{className:"user-profile-pic",children:(0,Lt.jsx)(Tn,{profilePic:e.author.profilePic,profile:e.author._id})}),(0,Lt.jsx)("div",{className:"user-details fs-6",children:y(e.caption)})]})},t)))})]})}),e.posts.length>0&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"search-results-posts",children:[(0,Lt.jsx)("h3",{className:"search-result-title",children:"Posts"}),(0,Lt.jsx)("ul",{className:"search-results-list-container",children:e.posts&&e.posts.map(((e,t)=>(0,Lt.jsx)("li",{className:"search-result-item",onClick:()=>{r(!1),i(!1)},children:(0,Lt.jsxs)("div",{className:"item-container","data-url":"/post/".concat(e._id),onClick:g.bind(void 0),children:[(0,Lt.jsx)("div",{className:"user-profile-pic",children:(0,Lt.jsx)(Tn,{profilePic:e.author.profilePic,profile:e.author._id})}),(0,Lt.jsx)("div",{className:"user-details",children:y(e.caption)})]})},t)))})]})})]})})]})]})})};const po=()=>{let e=Ye(),t=e=>{let t=e.currentTarget;Mn()(t).siblings().removeClass("active"),Mn()(t).addClass("active"),Mn()(".header-nav-menu-item").children().children().removeClass("primary-color fas"),Mn()(".header-nav-menu-item").children().children().addClass("fal"),Mn()(e.currentTarget).children().children().addClass("primary-color fas"),Mn()(e.currentTarget).children().children().removeClass("fal")};return(0,o.useEffect)((()=>{Mn()(".header-nav-menu-item.active").siblings().removeClass("active"),Mn()(".header-nav-menu-item.active").siblings().find("i").removeClass("primary-color"),Mn()(".header-nav-menu-item.active").siblings().find("i").removeClass("fas"),Mn()(".header-nav-menu-item.active").siblings().find("i").addClass("fal")}),[e]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{className:"header-nav-menu-container",children:(0,Lt.jsxs)("ul",{className:"header-nav-menu",children:[(0,Lt.jsx)(Et,{to:"/",exact:"true",onClick:t,className:"header-nav-menu-item",title:"Home",children:(0,Lt.jsx)("div",{className:"header-nav-menu-icon",children:(0,Lt.jsx)("i",{className:"fal fa-home-alt "})})}),(0,Lt.jsx)(Et,{to:"/friends",onClick:t,className:"header-nav-menu-item",title:"Friends",children:(0,Lt.jsx)("div",{className:"header-nav-menu-icon",children:(0,Lt.jsx)("i",{className:"fal fa-user-friends "})})}),(0,Lt.jsx)(Et,{to:"/watch",onClick:t,className:"header-nav-menu-item",title:"Videos",children:(0,Lt.jsx)("div",{className:"header-nav-menu-icon",children:(0,Lt.jsx)("i",{className:"fal fa-play-circle"})})}),(0,Lt.jsx)(Et,{to:"/message",onClick:t,className:"header-nav-menu-item",title:"Marketplace",children:(0,Lt.jsx)("div",{className:"header-nav-menu-icon",children:(0,Lt.jsx)("i",{className:"fal fa-envelope"})})}),(0,Lt.jsx)(Et,{to:"/downloads",onClick:t,className:"header-nav-menu-item",title:"Story",children:(0,Lt.jsx)("div",{className:"header-nav-menu-icon",children:(0,Lt.jsx)("i",{className:"fas fa-download"})})})]})})})};var mo=n(1747),vo=n.n(mo);const go=Object.create(null);go.open="0",go.close="1",go.ping="2",go.pong="3",go.message="4",go.upgrade="5",go.noop="6";const yo=Object.create(null);Object.keys(go).forEach((e=>{yo[go[e]]=e}));const bo={type:"error",data:"parser error"},wo="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),xo="function"===typeof ArrayBuffer,Co=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,_o=(e,t,n)=>{let{type:r,data:a}=e;return wo&&a instanceof Blob?t?n(a):ko(a,n):xo&&(a instanceof ArrayBuffer||Co(a))?t?n(a):ko(new Blob([a]),n):n(go[r]+(a||""))},ko=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function So(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mo;const Eo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",No="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)No[Eo.charCodeAt(n)]=n;const To="function"===typeof ArrayBuffer,Io=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Do(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:jo(e.substring(1),t)};return yo[n]?e.length>1?{type:yo[n],data:e.substring(1)}:{type:yo[n]}:bo},jo=(e,t)=>{if(To){const n=(e=>{let t,n,r,a,o,i=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const l=new ArrayBuffer(i),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=No[e.charCodeAt(t)],r=No[e.charCodeAt(t+1)],a=No[e.charCodeAt(t+2)],o=No[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|a>>2,c[u++]=(3&a)<<6|63&o;return l})(e);return Do(n,t)}return{base64:!0,data:e}},Do=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Lo=String.fromCharCode(30);function Ao(){return new TransformStream({transform(e,t){!function(e,t){wo&&e.data instanceof Blob?e.data.arrayBuffer().then(So).then(t):xo&&(e.data instanceof ArrayBuffer||Co(e.data))?t(So(e.data)):_o(e,!1,(e=>{Mo||(Mo=new TextEncoder),t(Mo.encode(e))}))}(e,(n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const e=new DataView(a.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{a=new Uint8Array(9);const e=new DataView(a.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(a[0]|=128),t.enqueue(a),t.enqueue(n)}))}})}let Ro;function Po(e){return e.reduce(((e,t)=>e+t.length),0)}function Oo(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Fo(e){if(e)return function(e){for(var t in Fo.prototype)e[t]=Fo.prototype[t];return e}(e)}Fo.prototype.on=Fo.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Fo.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Fo.prototype.off=Fo.prototype.removeListener=Fo.prototype.removeAllListeners=Fo.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((n=r[a])===t||n.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Fo.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var a=(n=n.slice(0)).length;r<a;++r)n[r].apply(this,t)}return this},Fo.prototype.emitReserved=Fo.prototype.emit,Fo.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Fo.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Bo="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),zo="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Uo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Wo=zo.setTimeout,Vo=zo.clearTimeout;function Ho(e,t){t.useNativeTimers?(e.setTimeoutFn=Wo.bind(zo),e.clearTimeoutFn=Vo.bind(zo)):(e.setTimeoutFn=zo.setTimeout.bind(zo),e.clearTimeoutFn=zo.clearTimeout.bind(zo))}function Yo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Go extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class qo extends Fo{constructor(e){super(),this.writable=!1,Ho(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Go(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Io(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class Qo extends qo{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Lo),r=[];for(let a=0;a<n.length;a++){const e=Io(n[a],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let a=0;e.forEach(((e,o)=>{_o(e,!1,(e=>{r[o]=e,++a===n&&t(r.join(Lo))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Yo()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Xo=!1;try{Xo="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(O$){}const Ko=Xo;function Jo(){}class Zo extends Qo{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class $o extends Fo{constructor(e,t,n){super(),this.createRequest=e,Ho(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Uo(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(Du){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Du){}try{n.setRequestHeader("Accept","*/*")}catch(Du){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(Du){return void this.setTimeoutFn((()=>{this._onError(Du)}),0)}"undefined"!==typeof document&&(this._index=$o.requestsCount++,$o.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Jo,e)try{this._xhr.abort()}catch(Du){}"undefined"!==typeof document&&delete $o.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if($o.requestsCount=0,$o.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ei);else if("function"===typeof addEventListener){addEventListener("onpagehide"in zo?"pagehide":"unload",ei,!1)}function ei(){for(let e in $o.requests)$o.requests.hasOwnProperty(e)&&$o.requests[e].abort()}const ti=function(){const e=ni({xdomain:!1});return e&&null!==e.responseType}();function ni(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Ko))return new XMLHttpRequest}catch(Du){}if(!t)try{return new(zo[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Du){}}const ri="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ai extends qo{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ri?{}:Uo(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(O$){return this.emitReserved("error",O$)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;_o(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(Du){}r&&Bo((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Yo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const oi=zo.WebSocket||zo.MozWebSocket;const ii={websocket:class extends ai{createSocket(e,t,n){return ri?new oi(e,t,n):t?new oi(e,t):new oi(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends qo{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(O$){return this.emitReserved("error",O$)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Ro||(Ro=new TextDecoder);const n=[];let r=0,a=-1,o=!1;return new TransformStream({transform(i,s){for(n.push(i);;){if(0===r){if(Po(n)<1)break;const e=Oo(n,1);o=128===(128&e[0]),a=127&e[0],r=a<126?3:126===a?1:2}else if(1===r){if(Po(n)<2)break;const e=Oo(n,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Po(n)<8)break;const e=Oo(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){s.enqueue(bo);break}a=o*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Po(n)<a)break;const e=Oo(n,a);s.enqueue(Io(o?e:Ro.decode(e),t)),r=0}if(0===a||a>e){s.enqueue(bo);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Ao();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const a=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),a())})).catch((e=>{}))};a();const o={type:"open"};this.query.sid&&(o.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&Bo((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Zo{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ti&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new $o(ni,this.uri(),e)}}},si=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ui=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function li(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let a=si.exec(e||""),o={},i=14;for(;i--;)o[ui[i]]=a[i]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}const ci="function"===typeof addEventListener&&"function"===typeof removeEventListener,fi=[];ci&&addEventListener("offline",(()=>{fi.forEach((e=>e()))}),!1);class di extends Fo{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=li(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=li(t.host).host);Ho(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,a=n.length;r<a;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),ci&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&di.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",di.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,a=e.length;r<a;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Bo((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(di.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ci&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=fi.indexOf(this._offlineEventListener);-1!==e&&fi.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}di.protocol=4;class hi extends di{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;di.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;di.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function a(){n||(n=!0,l(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,a(),this.emitReserved("upgradeError",n)};function i(){o("transport closed")}function s(){o("socket closed")}function u(e){t&&e.name!==t.name&&a()}const l=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",i),this.off("close",s),this.off("upgrading",u)};t.once("open",r),t.once("error",o),t.once("close",i),this.once("close",s),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class pi extends hi{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>ii[e])).filter((e=>!!e))),super(e,t)}}const mi="function"===typeof ArrayBuffer,vi=Object.prototype.toString,gi="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===vi.call(Blob),yi="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===vi.call(File);function bi(e){return mi&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||gi&&e instanceof Blob||yi&&e instanceof File}function wi(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(wi(e[t]))return!0;return!1}if(bi(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return wi(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&wi(e[n]))return!0;return!1}function xi(e){const t=[],n=e.data,r=e;return r.data=Ci(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ci(e,t){if(!e)return e;if(bi(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ci(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ci(e[r],t));return n}return e}function _i(e,t){return e.data=ki(e.data,t),delete e.attachments,e}function ki(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ki(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ki(e[n],t));return e}const Si=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Mi=5;var Ei;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ei||(Ei={}));class Ni{constructor(e){this.replacer=e}encode(e){return e.type!==Ei.EVENT&&e.type!==Ei.ACK||!wi(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ei.EVENT?Ei.BINARY_EVENT:Ei.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Ei.BINARY_EVENT&&e.type!==Ei.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=xi(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Ti(e){return"[object Object]"===Object.prototype.toString.call(e)}class Ii extends Fo{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Ei.BINARY_EVENT;n||t.type===Ei.BINARY_ACK?(t.type=n?Ei.EVENT:Ei.ACK,this.reconstructor=new ji(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!bi(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Ei[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Ei.BINARY_EVENT||n.type===Ei.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const a=e.substring(r,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(a)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Ii.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Du){return!1}}static isPayloadValid(e,t){switch(e){case Ei.CONNECT:return Ti(t);case Ei.DISCONNECT:return void 0===t;case Ei.CONNECT_ERROR:return"string"===typeof t||Ti(t);case Ei.EVENT:case Ei.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Si.indexOf(t[0]));case Ei.ACK:case Ei.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ji{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=_i(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Di(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Li=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ai extends Fo{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Di(e,"open",this.onopen.bind(this)),Di(e,"packet",this.onpacket.bind(this)),Di(e,"error",this.onerror.bind(this)),Di(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(Li.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const s={type:Ei.EVENT,data:o,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),s.id=e}const u=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,l=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!u||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const a=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===a)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),a),i=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply(r,n)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(((t,r)=>{const a=(e,n)=>e?r(e):t(n);a.withError=!0,n.push(a),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];n(null,...o)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ei.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ei.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ei.EVENT:case Ei.BINARY_EVENT:this.onevent(e);break;case Ei.ACK:case Ei.BINARY_ACK:this.onack(e);break;case Ei.DISCONNECT:this.ondisconnect();break;case Ei.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t.packet({type:Ei.ACK,id:e,data:a})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ei.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Ri(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ri.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Ri.prototype.reset=function(){this.attempts=0},Ri.prototype.setMin=function(e){this.ms=e},Ri.prototype.setMax=function(e){this.max=e},Ri.prototype.setJitter=function(e){this.jitter=e};class Pi extends Fo{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,Ho(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=n.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new Ri({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||t;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new pi(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Di(t,"open",(function(){n.onopen(),e&&e()})),a=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=Di(t,"error",a);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),a(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Di(e,"ping",this.onping.bind(this)),Di(e,"data",this.ondata.bind(this)),Di(e,"error",this.onerror.bind(this)),Di(e,"close",this.onclose.bind(this)),Di(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Du){this.onclose("parse error",Du)}}ondecoded(e){Bo((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ai(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Oi={};function Fi(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=li(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,a=n.id,o=n.path,i=Oi[a]&&o in Oi[a].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?s=new Pi(r,t):(Oi[a]||(Oi[a]=new Pi(r,t)),s=Oi[a]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}Object.assign(Fi,{Manager:Pi,Socket:Ai,io:Fi,connect:Fi});let Bi=localStorage.getItem("user")||"{}",zi=JSON.parse(Bi);const Ui=Fi.connect("https://connectbd.onrender.com",{query:{profile:zi.profile}}),Wi=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("li",{className:"message-list-item",children:(0,Lt.jsx)("div",{className:"skeleton-card mb-0 p-1 border-0",children:(0,Lt.jsxs)("div",{className:"skeleton-header mb-0",children:[(0,Lt.jsx)("div",{className:"skeleton-avatar"}),(0,Lt.jsxs)("div",{className:"skeleton-lines",children:[(0,Lt.jsx)("div",{className:"skeleton-line short"}),(0,Lt.jsx)("div",{className:"skeleton-line medium"})]})]})})},t)))};const Vi=JSON.parse(localStorage.getItem("user")||"{}").profile,Hi=()=>{const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)({}),[a,i]=(0,o.useState)([]),[s,u]=(0,o.useState)(!1),l=(0,o.useRef)();let c=Xe(),f=dn((e=>e.profile))._id,d=dn((e=>e.message)),h=qe();(0,o.useEffect)((()=>{if(0!=d.length)return d&&d.map(((n,a)=>{r(n.person),i(n.messages),Ui.emit("is_active",{profileId:null===n||void 0===n?void 0:n.person._id,myId:Vi}),Ui.on("is_active",((n,r,a)=>{if(!0===n&&!e.includes(a))return t([...e,a])}))})),()=>Ui.off("is_active")}),[d]),(0,o.useEffect)((()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let p=(0,o.useCallback)((async e=>{}),[]),m=(0,o.useCallback)((async e=>{u(!s)}),[]),v=(0,o.useCallback)((e=>{h("/message/".concat(e.currentTarget.dataset.id))}),[]),g=()=>(0,Lt.jsx)("div",{className:"header-message-option-menu",style:{position:"relative",display:"inline-block"},ref:l,children:s&&(0,Lt.jsx)("div",{style:{position:"absolute",top:"15px",right:"0",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e17,width:"200px"},children:(0,Lt.jsxs)("ul",{className:"message-option-menu",style:{listStyle:"none",margin:0,padding:"8px 0"},children:[(0,Lt.jsx)("li",{onClick:p,style:{padding:"8px 16px",cursor:"pointer"},children:"Mark All As Read"}),(0,Lt.jsx)("li",{style:{padding:"8px 16px",cursor:"pointer"},children:(0,Lt.jsx)(Mt,{to:"/settings/message",children:"Message Settings"})})]})})});return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"left-sidebar-container",children:[(0,Lt.jsxs)("div",{className:"message-leftside-header",children:[(0,Lt.jsx)("h2",{className:"message-leftside-title",children:"Chats"}),(0,Lt.jsx)("div",{className:"message-sidebar-header-menu",children:(0,Lt.jsxs)("div",{onClick:m,className:"header-menu-icons",children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),s&&(0,Lt.jsx)(g,{})]})})]}),(0,Lt.jsx)("div",{className:"message-list-container",children:(0,Lt.jsx)("ul",{className:"message-list",children:d.length>0?d.map(((t,n)=>{var r;let a=t.person,o=t.messages||[],i=null===a||void 0===a?void 0:a.fullName,s=!o[0]||(!(!o[0].isSeen||o[0].receiverId!=f)||o[0].isSeen),u=e.includes(a._id);return(0,Lt.jsx)("div",{style:{textDecoration:"none"},"data-id":a._id,onClick:v.bind(void 0),children:(0,Lt.jsxs)("li",{className:"message-list-item ".concat(s?"message-seen":"message-unseen"," ").concat(a._id==c.profile?"active":""),children:[(0,Lt.jsx)("div",{className:"user-profilePic",children:(0,Lt.jsx)(Tn,{profilePic:a.profilePic,profile:a._id,active:u})}),(0,Lt.jsxs)("div",{className:"user-data",children:[(0,Lt.jsx)("h4",{className:"message-author-name",children:i}),(0,Lt.jsxs)("p",{className:"last-message-data",children:[(0,Lt.jsxs)("span",{className:"last-message",children:[(l=o&&(null===(r=o[0])||void 0===r?void 0:r.message)||"",d=45,l.length>d?l.slice(0,d)+"...":l)," "]}),o&&o.length>0?(0,Lt.jsxs)("span",{className:"last-msg-time",children:["| ",(0,Lt.jsx)(vo(),{fromNow:!0,children:o&&o[0].timestamp})]}):(0,Lt.jsx)(Lt.Fragment,{})]})]})]})},n);var l,d})):(0,Lt.jsx)(Wi,{count:5})})})]})})},Yi="ADD_NOTIFICATION",Gi="ADD_NOTIFICATIONS",qi="VIEW_NOTIFICATION",Qi="VIEW_NOTIFICATIONS",Xi=function(e){return{type:Gi,payload:e,reset:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}};const Ki="/"+JSON.parse(localStorage.getItem("user")||"{}").profile+"/";const Ji=e=>{let{dispatch:t,useSelector:n}=e,r=n((e=>e.profile)),a=n((e=>e.option)),i=n((e=>e.notification)),s=n((e=>e.message)),[u,l]=(0,o.useState)(!1),[c,f]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),[p,m]=(0,o.useState)(0),[v,g]=(0,o.useState)(0),y=Ye(),[b,w]=(0,o.useState)("https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),x=qe();const[C,_]=(0,o.useState)(!1),k=(0,o.useRef)(null);let S={maxHeight:a.bodyHeight-a.headerHeight-100+"px",overflowY:"scroll"};(0,o.useEffect)((()=>{null!==r&&void 0!==r&&r.profilePic&&w(r.profilePic)}),[r]),(0,o.useEffect)((()=>{l(!1),f(!1),h(!1)}),[y]),(0,o.useEffect)((()=>{let e=i.filter((e=>!1===e.isSeen));m(e.length)}),[i]),(0,o.useEffect)((()=>{let e=s.filter((e=>{if(e.messages.length>0&&0==e.messages[0].isSeen&&e.messages[0].receiverId==r._id)return!0}));g(e.length)}),[s]);let M=(0,o.useCallback)((async e=>{let n=e.currentTarget.dataset.id;200==(await ao.post("/notification/view",{notificationId:n})).status&&t({type:qi,payload:n})}),[i]),E=(0,o.useCallback)((async()=>{_(1!=C)}),[C]),N=(0,o.useCallback)((async e=>{let n=i.filter((e=>0==e.isSeen));console.log(n),n.map((async(e,n)=>{200==(await ao.post("/notification/viewall",{profile:r._id})).status&&t({type:Qi})}))}),[i]),T=(0,o.useCallback)((async e=>{200==(await ao.post("/notification/deleteall",{profile:r._id})).status&&(t(Xi([],!0)),h(!1))}),[i]);(0,o.useEffect)((()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&_(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let I=(0,o.useCallback)((e=>{x(Ki)}),[]),j=()=>(0,Lt.jsx)("div",{className:"header-notification-option-menu",style:{position:"relative",display:"inline-block"},ref:k,children:C&&(0,Lt.jsx)("div",{style:{position:"absolute",top:"20px",right:"0",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",zIndex:1e17,width:"200px"},children:(0,Lt.jsxs)("ul",{className:"notification-option-menu",style:{listStyle:"none",margin:0,padding:"8px 0"},children:[(0,Lt.jsx)("li",{onClick:N,style:{padding:"8px 16px",cursor:"pointer"},children:"Mark All As Read"}),(0,Lt.jsx)("li",{onClick:T,style:{padding:"8px 16px",cursor:"pointer"},children:"Delete All"}),(0,Lt.jsx)("li",{style:{padding:"8px 16px",cursor:"pointer"},children:(0,Lt.jsx)(Mt,{to:"/settings/notification",children:"Notification Setting"})})]})})});return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{className:"header-quick-menu-container",children:(0,Lt.jsxs)("ul",{className:"header-quick-menu",children:[(0,Lt.jsx)("li",{onClick:e=>{l(!u),f(!1),h(!1)},className:"header-quick-menu-item ".concat(u?"active":""),title:"Message",children:(0,Lt.jsxs)("div",{className:"header-quick-menu-icon",children:[(0,Lt.jsx)("i",{className:"far fa-comment-alt-lines"}),v>0&&(0,Lt.jsx)("span",{className:"hr-counter-badge",children:(0,Lt.jsx)("span",{className:"counter",children:v})})]})}),u&&(0,Lt.jsx)(lo,{style:{right:"50%",zIndex:9999999999999,transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Lt.jsx)(Hi,{})}),(0,Lt.jsx)("li",{onClick:()=>{h(!d),f(!1),l(!1)},className:"header-quick-menu-item ".concat(d?"active":""),title:"",children:(0,Lt.jsxs)("div",{className:"header-quick-menu-icon",children:[(0,Lt.jsx)("i",{className:"far fa-bell"}),p>0&&(0,Lt.jsx)("span",{className:"hr-counter-badge",children:(0,Lt.jsx)("span",{className:"counter",children:p})})]})}),d&&(0,Lt.jsx)(lo,{style:{right:"50%",zIndex:999999999999,transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Lt.jsx)("div",{className:"hr-mm-container",children:i.length>0?(0,Lt.jsxs)("div",{className:"hr-notification-menu-container",children:[(0,Lt.jsxs)("div",{className:"notification-leftside-header",children:[(0,Lt.jsx)("h2",{className:"notification-leftside-title",children:"Notifications"}),(0,Lt.jsx)("div",{className:"notification-sidebar-header-menu",children:(0,Lt.jsxs)("div",{onClick:E,className:"header-menu-icons",children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),C&&(0,Lt.jsx)(j,{})]})})]}),(0,Lt.jsx)("ul",{className:"hr-notification-menu",style:S,children:i.map(((e,t)=>(0,Lt.jsx)("li",{className:"hr-notification-item ".concat(0==e.isSeen&&"unseen"),"data-id":e._id,onClick:M.bind(void 0),children:(0,Lt.jsx)(Mt,{to:e.link||"",children:(0,Lt.jsxs)("div",{className:"hr-notification-row align-items-center",children:[(0,Lt.jsx)("div",{className:"hr-notification-col-2",children:(0,Lt.jsx)("div",{className:"hr-notification-icon-continaer",children:(0,Lt.jsx)("img",{className:"hr-notification-icon",src:e.icon,alt:"Notification Icon"})})}),(0,Lt.jsxs)("div",{className:"hr-notification-col-10",children:[" ",(0,Lt.jsxs)("p",{className:"hr-notification-text",children:[e.text," . ",(0,Lt.jsx)(vo(),{fromNow:!0,children:e.timestamp})]})]})]})})},t)))})]}):(0,Lt.jsx)("p",{className:"text-muted text-center mb-0",children:"No Notification Found"})})}),(0,Lt.jsx)("li",{onClick:()=>{f(!c),l(!1),h(!1)},className:"header-quick-menu-item item-profile",title:"",children:(0,Lt.jsx)("div",{className:"profile-pic",children:(0,Lt.jsx)("img",{src:b,alt:""})})}),c&&(0,Lt.jsx)(lo,{style:{right:"50%",transform:"translateX(50%)",top:"101%",width:"300px",backgroundColor:"#242526",borderRadius:"5px",display:"block",boxShadow:"0px 0px 2px 0px rgba(255,255,255,0.3)"},className:"hr-mega-menu",children:(0,Lt.jsxs)("div",{className:"hr-mm-container",children:[(0,Lt.jsx)("div",{onClick:I,children:(0,Lt.jsxs)("div",{className:"all-profiles",children:[r&&(0,Lt.jsx)(Tn,{profilePic:b}),(0,Lt.jsxs)("span",{className:"text-capitalize",children:[" ",r.fullName?r.fullName:r.user&&r.user.firstName+" "+r.user.surname," "]})]})}),(0,Lt.jsxs)("div",{className:"profile-menus",children:[(0,Lt.jsxs)(Mt,{to:"/settings",className:"profile-menu-item",children:[(0,Lt.jsx)("div",{className:"menu-item-icon",children:(0,Lt.jsx)("i",{className:"fa fa-cog"})}),(0,Lt.jsx)("span",{className:"menu-item-name",children:"Settings"})]}),(0,Lt.jsxs)(Mt,{onClick:e=>{localStorage.removeItem("user"),window.location.reload()},to:"#",className:"profile-menu-item",children:[(0,Lt.jsx)("div",{className:"menu-item-icon",children:(0,Lt.jsx)("i",{className:"fa fa-sign-out-alt"})}),(0,Lt.jsx)("span",{className:"menu-item-name",children:"LogOut"})]})]})]})})]})})})},Zi="SET_HEADER_HEIGHT",$i="SET_BODY_HEIGHT",es="SET_LOADING",ts=e=>({type:es,payload:e}),ns=()=>{const e=xn();Ye(),dn((e=>e.profile)),Xe();let t=(0,o.useRef)(null);const[n,r]=(0,o.useState)(null),a={dispatch:e,useSelector:dn};(0,o.useEffect)((()=>{e((e=>({type:Zi,payload:e}))(n))}),[n,e]);let[i,s]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);return(0,o.useEffect)((()=>{var e;(Mn()(window).on("scroll",(e=>{if(window.pageYOffset>100){Mn()("#header").addClass("sticky-header");let e=Mn()("#header").height();Mn()("#main-container").css("padding-top",e)}else Mn()("#header").removeClass("sticky-header"),Mn()("#main-container").css("padding-top",0)})),t.current)&&r(null===(e=t.current)||void 0===e?void 0:e.offsetHeight);window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{s(e.matches)}))}),[]),(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsx)("header",{ref:t,className:"header",id:"header",children:(0,Lt.jsx)(Ht,{className:"header-container",fluid:"xxl",children:(0,Lt.jsxs)(qt,{children:[(0,Lt.jsx)(Jt,{className:"d-flex align-items-center",children:(0,Lt.jsx)(ho,{})}),!i&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(Jt,{className:"header-middle",md:6,xs:2,children:(0,Lt.jsx)(po,{})})}),(0,Lt.jsx)(Jt,{className:"header-right d-flex justify-content-end align-items-center",children:(0,Lt.jsx)(Ji,f({},a))})]})})}),(0,Lt.jsx)(ct,{})]})};for(var rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",as=new Map,os=0;os<64;os++){var is=os.toString(2);is="0".repeat(6-is.length)+is,as.set(rs.charCodeAt(os),is)}function ss(e){try{if("string"!=typeof e||3!==e.split(".").length)return null;var t=function(e){for(var t,n="",r=e.length,a=0;a<r;a++)t=e[a],n+=String.fromCodePoint(t>251&&t<254&&a+5<r?1073741824*(t-252)+(e[++a]-128<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:t>247&&t<252&&a+4<r?(t-248<<24)+(e[++a]-128<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:t>239&&t<248&&a+3<r?(t-240<<18)+(e[++a]-128<<12)+(e[++a]-128<<6)+e[++a]-128:t>223&&t<240&&a+2<r?(t-224<<12)+(e[++a]-128<<6)+e[++a]-128:t>191&&t<224&&a+1<r?(t-192<<6)+e[++a]-128:t);return n}(function(e){for(var t="",n=0;n<e.length;n++)t+=as.get(e.charCodeAt(n));t=t.slice(0,t.length-t.length%8);for(var r=[],a=0;a<t.length/8;a++)r.push(t.slice(8*a,8*a+8));return r}(e.split(".")[1].replaceAll("=","").replaceAll("-","+").replaceAll("_","/")).map((function(e){return parseInt(e,2)})));return JSON.parse(t)}catch(e){return console.error("There was an error decoding token: ",e),null}}function us(e){var t=(0,o.useState)(!1),n=t[0],r=t[1],a=(0,o.useState)(null),i=a[0],s=a[1];(0,o.useEffect)((function(){u(e)}),[e]);var u=function(e){s(ss(e)),r(function(e){var t=ss(e),n=!0;if(t&&t.exp){var r=new Date(0);r.setUTCSeconds(t.exp),n=r.valueOf()<(new Date).valueOf()}return n}(e))};return{isExpired:n,decodedToken:i,reEvaluateToken:u}}const ls=localStorage.getItem("user")||"{}",cs=JSON.parse(ls),fs=e=>{let{children:t}=e,n=dn((e=>e.auth)),r=qe(),a=Ye();const{isExpired:i}=us((null===n||void 0===n?void 0:n.token)||cs.accessToken)||!1;return(0,o.useEffect)((()=>{i&&r("/login")}),[cs,a,i]),(0,o.useEffect)((()=>{null!==n&&void 0!==n&&n.token&&(n.token||r("/login"))}),[n]),(0,Lt.jsx)(Lt.Fragment,{children:t})},ds=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("li",{className:"rs-nav-menu-item",children:(0,Lt.jsx)("div",{className:"skeleton-card mb-0 p-1 border-0",children:(0,Lt.jsxs)("div",{className:"skeleton-header mb-0",children:[(0,Lt.jsx)("div",{className:"skeleton-avatar"}),(0,Lt.jsx)("div",{className:"skeleton-lines",children:(0,Lt.jsx)("div",{className:"skeleton-line medium"})})]})})},t)))};const hs=()=>{Xe();let e=qe(),t=localStorage.getItem("user")?localStorage.getItem("user"):"{}",{profile:n}=JSON.parse(t),r=dn((e=>e.profile)),[a,i]=(0,o.useState)([]);const[s,u]=(0,o.useState)([]);(0,o.useEffect)((()=>(r.friends&&r.friends.map(((e,t)=>(Ui.emit("is_active",{profileId:e._id,myId:r._id}),Ui.on("is_active",((e,t,n)=>{if(1==e&&!s.includes(n))return u([...s,n])})),()=>Ui.off("is_active")))),()=>Ui.off("is_active"))),[r,setTimeout((()=>!0)),[2e3]]),(0,o.useEffect)((()=>{i(r.friends)}),[r]);let l=t=>{let n=t.currentTarget.dataset.profile;e("/message/"+n)};return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"right-sidebar",className:"text-left",children:[(0,Lt.jsx)("h3",{className:"rs-nav-title",children:"Contacts"}),(0,Lt.jsx)("ul",{className:"rs-nav-menu",children:a&&a.length>1?a.map(((e,t)=>{let n=s.includes(e._id);return(0,Lt.jsx)("li",{children:(0,Lt.jsxs)("div",{className:"rs-nav-menu-item","data-profile":e._id,onClick:l.bind(void 0),children:[(0,Lt.jsxs)("div",{className:"rs-profile-img-container",children:[(0,Lt.jsx)("div",{className:"active-icon"}),(0,Lt.jsx)("div",{className:"rs-profile-img",children:(0,Lt.jsx)(Tn,{profilePic:"".concat(e.profilePic),profile:e._id,active:n})})]}),(0,Lt.jsx)("div",{className:"rs-text user-name",children:e.fullName?e.fullName:e.user.firstName+" "+e.user.surname})]})},t)})):(0,Lt.jsx)(ds,{count:10})})]})})},ps=e=>{let{item:t,myProfile:n,setReplies:r,comment:a,replies:i,isEditMode:s}=e,u=n._id,[l,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(null===t||void 0===t?void 0:t.reacts.length),[p,m]=(0,o.useState)(!1),[v,g]=(0,o.useState)({body:null,attachment:null});return(0,Lt.jsxs)("div",{className:"reply-container",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Lt.jsxs)("div",{className:"comment-info",children:[(0,Lt.jsxs)("div",{className:"comment-box",children:[(0,Lt.jsxs)("div",{className:"name-comment",children:[(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)(Mt,{to:"/".concat(t.author._id),children:t.author.fullName})}),(0,Lt.jsx)("p",{className:"comment-text",children:t.body})]}),(t.author._id==u||s)&&(0,Lt.jsxs)("div",{className:"options-icon",onClick:(e=>{c(!l)}).bind(void 0),children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Lt.jsx)("div",{className:"options-container ".concat(l&&"open"),children:(0,Lt.jsx)("button",{"data-id":t._id,onClick:(async e=>{let t=e.currentTarget.dataset.id;200===(await ao.post("/comment/deleteReply",{replyId:t})).status&&Mn()(e.target).parents(".reply-container").remove()}).bind(void 0),className:"comment-option text-danger",children:"Delete Reply"})})]})]}),(0,Lt.jsxs)("div",{className:"comment-react",children:[(0,Lt.jsxs)("div",{className:"like button ".concat(t.reacts.includes(u)&&"reacted"),onClick:(async e=>{let t=e.target.dataset.id;if(Mn()(e.target).hasClass("reacted")){200==(await ao.post("/comment/reply/removeReact",{replyId:t,myId:u})).status&&(h(d-1),Mn()(e.target).removeClass("reacted"))}else{200===(await ao.post("/comment/reply/addReact",{replyId:t,myId:u})).status&&(h(d+1),Mn()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(d>0?"(".concat(d,")"):"")]}),(0,Lt.jsx)("div",{className:"reply button",onClick:(e=>{m(!p)}).bind(void 0),"data-id":t._id,children:"Reply"}),(0,Lt.jsx)("div",{className:"comment-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]}),p&&(0,Lt.jsx)("div",{className:"new-reply",children:(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let e=a._id;if(v){let t=await ao.post("/comment/addReply",{replyMsg:v.body,authorId:n._id,commentId:e});if(200===t.status){m(!1);let e=t.data;r((t=>[...t,e]))}}}},onChange:(async e=>{g((t=>f(f({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-reply":t._id,placeholder:"Reply to ".concat(t.author.fullName)}),(0,Lt.jsx)("div",{onClick:(async e=>{let t=a._id;if(v){let e=await ao.post("/comment/addReply",{replyMsg:v.body,authorId:n._id,commentId:t});if(200===e.status){m(!1);let t=e.data._id;r((e=>[...e,t]))}}}).bind(void 0),"data-reply":t._id,className:"comment-attachment",children:(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-paper-plane"})})})]})})]})]})},ms=e=>{let{comment:t,postData:n,myProfile:r,isEditMode:a}=e,i=r._id,[s,u]=(0,o.useState)(0),[l,c]=(0,o.useState)(!1),[d,h]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null===t||void 0===t?void 0:t.replies),[v,g]=(0,o.useState)(!1),[y,b]=(0,o.useState)(t.body);const w=n;(0,o.useEffect)((()=>{u(t.reacts.length||0),c(t.reacts.includes(i))}),[t]);let[x,C]=(0,o.useState)({body:null,attachment:null}),_=(0,o.useCallback)((e=>{b(e.target.value)}),[]),k=(0,o.useCallback)((async e=>{let n=await ao.post("comment/updateComment",{commentId:t._id,body:y});200==n.status&&(b(n.data.body),g(!1))})),S=(0,o.useCallback)((e=>{g(!v)}),[]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"comment-container comment-id-".concat(t._id),children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Lt.jsxs)("div",{className:"comment-info",children:[(0,Lt.jsxs)("div",{className:"comment-box",children:[(0,Lt.jsxs)("div",{className:"name-comment",children:[(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)(Mt,{to:"/".concat(t.author._id),children:t.author.user.firstName+" "+t.author.user.surname})}),(0,Lt.jsx)("p",{className:"comment-text",children:v?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"comment-editor",children:[(0,Lt.jsx)("textarea",{onChange:_.bind(void 0),className:"form-control w-100",value:y}),(0,Lt.jsx)("button",{onClick:k.bind(void 0),className:"btn btn-primary mt-2",children:"Update"})]})}):(0,Lt.jsx)(Lt.Fragment,{children:y})}),t.attachment&&(0,Lt.jsx)("div",{className:"comment-attachment-container",children:(0,Lt.jsx)("img",{src:t.attachment,alt:"attachment"})})]}),t.author._id==r._id||a?(0,Lt.jsxs)("div",{onClick:e=>{Mn()(e.currentTarget).children(".options-container").hasClass("open")?Mn()(e.currentTarget).children(".options-container").removeClass("open"):Mn()(e.currentTarget).children(".options-container").addClass("open")},className:"options-icon",children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Lt.jsxs)("div",{className:"options-container",children:[(0,Lt.jsx)("button",{dataid:t._id,onClick:S.bind(void 0),className:"comment-option text-primary",children:"Edit Comment"}),(0,Lt.jsx)("button",{dataid:t._id,onClick:(async e=>{try{let t=Mn()(e.currentTarget).attr("dataid"),n=w._id;Mn()(e.currentTarget).parents(".comment-container").remove(),(await ao.post("/comment/deleteComment",{commentId:t,postId:n})).status}catch(t){console.log(t)}}).bind(void 0),className:"comment-option text-danger",children:"Delete Comment"})]})]}):""]}),(0,Lt.jsxs)("div",{className:"comment-react",children:[(0,Lt.jsxs)("div",{className:"like button ".concat(l?"reacted":""),onClick:(async e=>{let t=e.currentTarget.dataset.id;if(Mn()(e.currentTarget).hasClass("reacted")){200==(await ao.post("/comment/removeReact",{commentId:t,reactorId:i})).status&&(Mn()(e.target).removeClass("reacted"),u((e=>e-1)))}else{200==(await ao.post("/comment/addReact",{commentId:t,reactorId:i})).status&&(u((e=>e+1)),Mn()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(s>0?"("+s+")":"")]}),(0,Lt.jsx)("div",{className:"reply button","data-id":t._id,onClick:(async e=>{h(!d)}).bind(void 0),children:"Reply"}),(0,Lt.jsx)("div",{className:"comment-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]}),d&&(0,Lt.jsx)("div",{className:"new-reply",children:(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let t=e.currentTarget.dataset.comment;if(x){let e=await ao.post("/comment/addReply",{replyMsg:x.body,authorId:r._id,commentId:t});if(200==e.status){h(!1);let t=e.data;m((e=>[...e,t]))}}}},onChange:(async e=>{C((t=>f(f({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-comment":t._id,placeholder:"Reply to ".concat(t.author.displayName||t.author.user.surname)}),(0,Lt.jsx)("div",{onClick:(async e=>{let t=e.currentTarget.dataset.comment;if(x){let e=await ao.post("/comment/addReply",{replyMsg:x.body,authorId:r._id,commentId:t});if(200==e.status){h(!1);let t=e.data;m((e=>[...e,t]))}}}).bind(void 0),"data-comment":t._id,className:"comment-attachment",children:(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-paper-plane"})})})]})}),p.map(((e,n)=>(0,Lt.jsx)(ps,{isEditMode:a,setReplies:m,replies:p,comment:t,item:e,myProfile:r},n)))]})]})})};const vs=e=>{let{post:t,authProfilePicture:n,authProfile:r,myProfile:a,setAllComments:i,allComments:s=[],commentState:u,isEditMode:l}=e;a._id;const c=Ye();let[d,h]=(0,o.useState)(c.pathname.includes("/".concat(((null===t||void 0===t?void 0:t._id)||"").toString())));(0,o.useEffect)((()=>{h(c.pathname.includes("/".concat(((null===t||void 0===t?void 0:t._id)||"").toString())))}),[[],c]);let[p,m]=(0,o.useState)(null),[v,g]=(0,o.useState)({body:null,attachment:null});return(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsxs)("div",{className:"comments",children:[s.slice(d?-s.length-1:-3).map(((e,n)=>e&&(0,Lt.jsx)(ms,{isEditMode:l,comment:e,postData:t,myProfile:a},n))),(null===t||void 0===t?void 0:t.comments.length)>3&&!d&&(0,Lt.jsxs)("div",{className:"more-comment-button",children:[" ",(0,Lt.jsx)(Mt,{to:"/post/".concat(t._id),children:"View more comments"})]})]}),(0,Lt.jsxs)("div",{className:"new-comment",children:[(0,Lt.jsx)("div",{className:"user-pp",children:(0,Lt.jsx)(Tn,{profilePic:n,profile:r})}),(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode)try{e.target.value="";let n=new FormData;n.append("body",null==v.body?"":v.body),n.append("attachment",null==p?"":p),n.append("post",t._id);let r=await ao.post("/comment/addComment",{body:v.body,attachment:p,post:t._id.toString()}),o={body:v.body,author:a,post:t._id,reacts:[],replies:[]};if(i((e=>[...e,o])),200===r.status){r.data.author=a,g([]),u((e=>e+1))}}catch(n){console.log(n)}},onChange:async e=>{g((t=>f(f({},t),{},{body:e.target.value})))},className:"field-comment-text",type:"text",placeholder:"Write a Public Comment"}),(0,Lt.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;Mn()(t).children("input").trigger("click")},className:"comment-attachment",children:[(0,Lt.jsx)("input",{onChange:async e=>{g((e=>f(f({},e),{},{attachment:"https://programmerikram.com/wp-content/uploads/2025/03/loading.gif"})));let t=new FormData;t.append("image",e.target.files[0]);let n=await ao.post("/upload/",t,{headers:{"content-type":"multipart/form-data"}});n&&setTimeout((()=>{let e=n.data.secure_url;m(e),g((t=>f(f({},t),{},{attachment:e})))}),1e3)},className:"attachment",type:"file"}),(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-camera"})})]})]})]}),(0,Lt.jsx)("div",{className:"comment-attachment-preview",children:v.attachment&&(0,Lt.jsx)("img",{alt:"comment attachment",src:v.attachment})})]})};var gs=n(917);const ys=e=>{let{count:t=1,style:n}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"pp-skleton-container",style:{backgroundColor:"gray"},children:(0,Lt.jsx)("div",{style:{padding:0},className:"skeleton-card no-border",children:(0,Lt.jsx)("div",{style:{padding:0},className:"skeleton-main"})})},t)))},bs=e=>{try{return new URL(e),!0}catch(O$){return!1}},ws="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",xs="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",Cs="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg";const _s=e=>{let{data:t,postContainer:n,index:r}=e,a=t||{},i=dn((e=>e.profile)),s=i._id,u=null===a||void 0===a?void 0:a.author._id,[l,c]=(0,o.useState)(a.reacts.length),[f,d]=(0,o.useState)(a.shares.length),[h,p]=(0,o.useState)(a.comments.length),[m,v]=(0,o.useState)(a.comments),[g,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(!1),[x,C]=(0,o.useState)(!1),[_,k]=(0,o.useState)(""),[S,M]=(0,o.useState)([]),[E,N]=(0,o.useState)(!1),[T,I]=(0,o.useState)(!1);const[j,D]=(0,o.useState)(!1);let L=fo(),A=qe(),R=(0,o.useRef)([]),P=(0,o.useRef)(),O=xn();(0,o.useEffect)((()=>(Ui.emit("is_active",{profileId:u,myId:s}),Ui.on("is_active",((e,t,n)=>{n===s&&y(e)})),()=>Ui.off("is_active"))),[i]);var F=s===u;a.author.profilePic;(0,o.useEffect)((()=>{let e=[];a.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===s&&(w(t.type),C(!0))}})),M(e)}),[]);let B=a.photos,z=a.type||"post";(0,o.useEffect)((()=>{Nn(B,D)}),[B]);let U=async e=>{let t=e.currentTarget;F?(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{let e=await ao.post("/post/delete",{postId:a._id,authorId:a.author._id});200===e.status?(Mn()(t).parents(".nf-post").css({"min-height":"0px",padding:"10px"}),Mn()(t).parents(".nf-post").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete post")}},{label:"No",onClick:()=>{}}]}):Mn()(t).parents(".nf-post").hide()},W=async function(){if(c((e=>e-1)),w(!1),200===(await ao.post("/react/removeReact",{id:a._id,postType:"post",reactor:s})).status)return C(!1),!0;c((e=>e+1))},V=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";if(x||c((e=>e+1)),M([...S,e]),w(e),200===(await ao.post("/react/addReact",{id:a._id,postType:t,reactType:e})).status)return C(!0),!0;c(a.reacts),M([...S]),w(!1)},H=async e=>{let t=e.currentTarget;Mn()(t).parent().hasClass("reacted")?(W("post"),Mn()(t).parent().removeClass("reacted")):(V("like","post",t),Mn()(t).parent().addClass("reacted"))},Y=async e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(t).hasClass("reacted")?(W("post"),Mn()(t).removeClass("reacted")):(V("like","post",t),Mn()(t).addClass("reacted"),Mn()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},G=e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(W("post"),Mn()(e.currentTarget).removeClass("reacted")):(V("love","post"),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},q=e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(W(),Mn()(e.currentTarget).removeClass("reacted")):(V("haha","post",t),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},Q=e=>{let t=e.currentTarget;Mn()(t).children(".post-react-container").css("visibility","visible")},X=e=>{let t=e.currentTarget;Mn()(t).parents(".footer").find(".field-comment-text").focus()},K=e=>{N(!0)},J=()=>{N(!1)},Z=(0,o.useCallback)((async e=>{e.preventDefault();let t=await ao.post("post/share",{postId:a._id,caption:_});200==t.status&&(d((e=>e+1)),O(so(t.data.post)),N(!1))}),[O]),$=dn((e=>e.profile.profilePic)),ee=dn((e=>e.profile._id)),te=e=>{A("/post/".concat(a._id))},ne=(0,o.useCallback)((e=>{A("/post/".concat(a._id,"/edit"))}),[]),re="".concat(a.author.profilePic),ae=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=e=>{ae.current&&!ae.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let oe=(0,o.useCallback)((e=>{I(!T)}),[]);const ie=(0,o.useRef)(new Set);(0,o.useEffect)((()=>{const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{const n=Number(e.target.dataset.index);var r;e.isIntersecting&&!ie.current.has(n)&&(ie.current.add(n),r=e.target.dataset.id,Ui.emit("viewPost",{visitorId:s,postId:r}),t.unobserve(e.target))}))}),{root:n.current,threshold:.5});return R.current.forEach((t=>t&&e.observe(t))),()=>{e.disconnect()}}),[]);let se=()=>"share"===z?(0,Lt.jsxs)("div",{"data-id":a._id,ref:e=>R.current[r]=e,"data-index":r,className:"share-nf-post nf-post",children:[(0,Lt.jsxs)("div",{className:"header",children:[(0,Lt.jsx)("div",{className:"reason",children:(0,Lt.jsxs)("span",{className:"",children:[(0,Lt.jsx)("b",{children:(0,Lt.jsx)(Mt,{to:"/".concat(a.author._id),children:a.author.fullName})})," Shared ",(0,Lt.jsxs)("b",{children:[(0,Lt.jsxs)(Mt,{to:"/".concat(null===a||void 0===a?void 0:a.parentPost.author._id),children:[null===a||void 0===a?void 0:a.parentPost.author.fullName,"'s"]})," "]}),(0,Lt.jsx)("span",{className:"text-capitalize",children:null===a||void 0===a?void 0:a.parentPost.type})]})}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:a.author.profilePic,profile:a.author._id,active:!1})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsx)(Mt,{to:"/"+a.author._id,children:(0,Lt.jsx)("h4",{className:"author-name",children:a.author.fullName})}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:a.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:oe.bind(void 0),className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})}),T&&(0,Lt.jsx)("div",{className:"post-option-menu",ref:ae,children:(0,Lt.jsxs)("ul",{children:[F&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("li",{onClick:ne,children:"Edit Post"}),(0,Lt.jsx)("li",{children:"Edit Audience"})]}),(0,Lt.jsx)("li",{children:"Report This Post"})]})})]}),(0,Lt.jsxs)("button",{onClick:U.bind(void 0),className:"post-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{ref:P,"data-id":a._id,className:"body",children:[(0,Lt.jsx)("p",{className:"caption",children:a.caption}),(0,Lt.jsxs)("div",{className:"nf-post ".concat(z," m-3 border overflow-hidden"),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===z&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsx)("span",{className:"d-none",children:(0,Lt.jsx)("b",{children:"Shared a photos"})}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:null===a||void 0===a?void 0:a.parentPost.author.profilePic,profile:null===a||void 0===a?void 0:a.parentPost.author._id,active:g})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsxs)(Mt,{to:"/"+a.author._id,children:[(0,Lt.jsx)("h4",{className:"author-name",children:null===a||void 0===a?void 0:a.parentPost.author.fullName}),a.feelings&&(0,Lt.jsxs)("span",{className:"post-feelings",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",a.feelings||""]}),a.location&&(0,Lt.jsxs)("span",{className:"post-location",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",a.location||""]})]}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:null===a||void 0===a?void 0:a.parentPost.createdAt})})]})]}),(0,Lt.jsx)("div",{className:"right"})]})]}),(0,Lt.jsxs)("div",{className:"body",children:[(0,Lt.jsx)("p",{className:"caption",children:null===a||void 0===a?void 0:a.parentPost.caption}),j&&bs(B)?(0,Lt.jsxs)(Lt.Fragment,{children:[" ",(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/post/".concat(a._id),children:(0,Lt.jsx)("img",{src:B,alt:"post"})})})]}):(0,Lt.jsx)(Lt.Fragment,{children:bs(B)&&(0,Lt.jsx)(ys,{})})]})]})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[S.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:ws,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),S.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:xs,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),S.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:Cs,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[a.reacts&&l," ",l>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:a.comments&&h}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:a.shares&&f}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(b?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:H,onMouseOver:Q,className:"react-like ".concat(1==b?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:b||"",children:["haha"==b?(0,Lt.jsx)("img",{src:Cs,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==b?(0,Lt.jsx)("img",{src:xs,alt:"love"}):(0,Lt.jsx)("span",{}),0==b||"like"==b?(0,Lt.jsx)("img",{src:ws,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:b||"like"})]}),(0,Lt.jsxs)("div",{className:"post-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==b?"reacted":""),onClick:Y,id:"postReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:ws,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==b?"reacted":""),onClick:G,id:"postReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:xs,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==b?"reacted":""),onClick:q,id:"postReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:Cs,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:X,className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),!F&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{onClick:K,className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"})]}),(0,Lt.jsxs)(En,{title:"Share Post",style:{width:L?"95%":"600px",top:"50%"},isOpen:E,onRequestClose:J,id:"cp-view-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{}),(0,Lt.jsx)("div",{onClick:J,className:"modal-close-btn text-danger",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("div",{className:"share-post-container",children:[(0,Lt.jsxs)("div",{className:"share-post-header",children:[(0,Lt.jsxs)("div",{className:"row",children:[(0,Lt.jsx)("div",{className:"col-1",children:(0,Lt.jsx)(Tn,{profilePic:i.profilePic})}),(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("h3",{children:i.fullName})})]}),(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsxs)("div",{className:"col",children:["You're Sharing ",a.author.fullName||"Someone","'s Post"]})})]}),(0,Lt.jsxs)("div",{className:"share-post-body my-3",children:[(0,Lt.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"What's On Your Mind?",onChange:e=>k(e.target.value),value:_}),(0,Lt.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Lt.jsx)("button",{className:"btn btn-primary",onClick:Z.bind(void 0),children:"Share Now"})})]}),(0,Lt.jsx)("div",{className:"share-post-footer"})]})})]})]})]})}),(0,Lt.jsx)(vs,{post:a,commentState:p,allComments:m,setAllComments:v,myProfile:i,authProfile:ee,authProfilePicture:$})]})]}):(0,Lt.jsxs)("div",{"data-id":a._id,ref:e=>R.current[r]=e,"data-index":r,className:"nf-post ".concat(z),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===z&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsxs)("span",{className:"d-none",children:[(0,Lt.jsx)("b",{children:"A bitch"})," commented."]}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:re,profile:a.author._id,active:g})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsxs)("h4",{className:"author-name",onClick:te.bind(void 0),children:[(0,Lt.jsx)(Mt,{to:"/"+a.author._id,children:a.author.fullName}),a.feelings&&(0,Lt.jsxs)("span",{className:"post-feelings",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",a.feelings||""]}),a.location&&(0,Lt.jsxs)("span",{className:"post-location",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",a.location||""]})]}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:a.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[(0,Lt.jsx)("button",{onClick:oe.bind(void 0),className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})}),T&&(0,Lt.jsx)("div",{className:"post-option-menu",ref:ae,children:(0,Lt.jsxs)("ul",{children:[F&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("li",{onClick:ne,children:"Edit Post"}),(0,Lt.jsx)("li",{children:"Edit Audience"})]}),(0,Lt.jsx)("li",{children:"Report This Post"})]})}),(0,Lt.jsxs)("button",{onClick:U.bind(void 0),className:"post-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{ref:P,"data-id":a._id,className:"body",children:[(0,Lt.jsx)("p",{className:"caption",children:a.caption}),j&&bs(B)?(0,Lt.jsxs)(Lt.Fragment,{children:[" ",(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/post/".concat(a._id),children:(0,Lt.jsx)("img",{src:B,alt:"post"})})})]}):(0,Lt.jsx)(Lt.Fragment,{children:bs(B)&&(0,Lt.jsx)(ys,{})})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[S.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:ws,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),S.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:xs,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),S.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:Cs,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[a.reacts&&l," ",l>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:a.comments&&h}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:a.shares&&f}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(b?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:H,onMouseOver:Q,className:"react-like ".concat(1==b?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:b||"",children:["haha"==b?(0,Lt.jsx)("img",{src:Cs,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==b?(0,Lt.jsx)("img",{src:xs,alt:"love"}):(0,Lt.jsx)("span",{}),0==b||"like"==b?(0,Lt.jsx)("img",{src:ws,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:b||"like"})]}),(0,Lt.jsxs)("div",{className:"post-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==b?"reacted":""),onClick:Y,id:"postReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:ws,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==b?"reacted":""),onClick:G,id:"postReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:xs,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==b?"reacted":""),onClick:q,id:"postReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:Cs,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:X,className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),(0,Lt.jsxs)("div",{onClick:K,className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"})]}),(0,Lt.jsxs)(En,{title:"Share Post",style:{width:L?"95%":"600px",top:"50%"},isOpen:E,onRequestClose:J,id:"cp-view-modal",children:[(0,Lt.jsx)("div",{className:"modal",children:(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("h3",{className:"modal-title"}),(0,Lt.jsx)("div",{className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]})}),(0,Lt.jsxs)("div",{className:"share-post-container",children:[(0,Lt.jsxs)("div",{className:"share-post-header",children:[(0,Lt.jsxs)("div",{className:"row",children:[(0,Lt.jsx)("div",{className:"col-1",children:(0,Lt.jsx)(Tn,{profilePic:i.profilePic})}),(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("h3",{children:i.fullName})})]}),(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsxs)("div",{className:"col",children:["Your Sharing ",a.author.fullName||"Someone","'s Post"]})})]}),(0,Lt.jsxs)("div",{className:"share-post-body my-3",children:[(0,Lt.jsx)("textarea",{className:"form-control",onChange:e=>k(e.target.value),value:_}),(0,Lt.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Lt.jsx)("button",{className:"btn btn-primary",onClick:Z,children:"Share Now"})})]}),(0,Lt.jsx)("div",{className:"share-post-footer"})]})]})]})}),(0,Lt.jsx)(vs,{post:a,commentState:p,allComments:m,setAllComments:v,myProfile:i,authProfile:ee,authProfilePicture:$})]})]});return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(se,{})})};const ks=e=>{var t;let n=e.data||{};null===n||void 0===n||null===(t=n.author)||void 0===t||t._id;const[r,a]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{a(!0)}),[]),(0,Lt.jsx)(Lt.Fragment,{children:null==n?(0,Lt.jsx)("p",{children:"No Story Found"}):(0,Lt.jsx)("div",{className:"nf-story",style:{backgroundImage:n.bgColor},children:(0,Lt.jsxs)(Mt,{to:"/story/".concat(n._id),children:[(0,Lt.jsx)("div",{className:"nf-story-pp-container",children:(0,Lt.jsx)(Tn,{profile:n.author._id,hasStory:r,checkStory:"no",profilePic:n.author.profilePic})}),(0,Lt.jsx)("div",{className:"nf-story-image-container",children:(0,Lt.jsx)("img",{src:n.image,className:"nf-story-image",alt:"Story"})})]})})})},Ss=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsxs)("div",{className:"skeleton-card",children:[(0,Lt.jsxs)("div",{className:"skeleton-header",children:[(0,Lt.jsx)("div",{className:"skeleton-avatar"}),(0,Lt.jsxs)("div",{className:"skeleton-lines",children:[(0,Lt.jsx)("div",{className:"skeleton-line short"}),(0,Lt.jsx)("div",{className:"skeleton-line medium"})]})]}),(0,Lt.jsx)("div",{className:"skeleton-main"}),(0,Lt.jsxs)("div",{className:"skeleton-footer",children:[(0,Lt.jsx)("div",{className:"skeleton-line small button"}),(0,Lt.jsx)("div",{className:"skeleton-line small button"}),(0,Lt.jsx)("div",{className:"skeleton-line small button"})]})]},t)))},Ms=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"nf-story",children:(0,Lt.jsxs)("div",{className:"skeleton-card",style:{margin:"0px",marginRight:"20px",padding:"5px",maxWidth:"150px",height:"100%",float:"left"},children:[(0,Lt.jsxs)("div",{className:"skeleton-header",style:{margin:0},children:[(0,Lt.jsx)("div",{className:"skeleton-avatar"}),(0,Lt.jsx)("div",{className:"skeleton-lines mt-2",children:(0,Lt.jsx)("div",{className:"skeleton-line medium"})})]}),(0,Lt.jsx)("div",{className:"skeleton-main",style:{height:"150px"}})]})},t)))};const Es=()=>{let e=xn(),t=(0,o.useRef)(),n=(0,o.useRef)();function r(e){t.current.scrollBy({left:-300,behavior:"smooth"})}function a(e){t.current.scrollBy({left:300,behavior:"smooth"})}let[i,s]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);const[u,l]=(0,o.useState)(!1),[c,f]=(0,o.useState)(!0);let[d,h]=(0,o.useState)([]),[p,m]=(0,o.useState)([]),[v,g]=(0,o.useState)(!1),[y,b]=(0,o.useState)(0),w=(dn((e=>e.profile)),dn((e=>e.post))),x=async()=>{if(!1===c)return;let t=await ao.get("/post/newsFeed/",{params:{pageNumber:y+1}});if(200===t.status){e((n=[...t.data.posts]||[],{type:oo,payload:n})),b(y+1);let r=t.data.hasNewPost;f(r),l(!1)}var n;let r=await ao.get("/story/");200===r.status&&m(r.data),e(ts(!1))};return(0,o.useEffect)((()=>{window.addEventListener("scroll",(()=>{(window.scrollY+window.innerHeight)/document.body.scrollHeight>=.8&&0==u&&l(!0)}))}),[]),(0,o.useEffect)((()=>{u&&c&&x()}),[u]),(0,o.useEffect)((()=>{e(ts(!1)),window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{s(e.matches)})),f(!0),l(!0)}),[]),(0,o.useEffect)((()=>{if(w.length>0){let e=Math.floor(w.length/3);b(e)}}),[w]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{id:"home",className:"home-page",children:(0,Lt.jsx)(Ht,{fluid:!0,children:(0,Lt.jsxs)(qt,{children:[(0,Lt.jsx)(Jt,{md:"3",children:!i&&(0,Lt.jsx)(co,{})}),(0,Lt.jsxs)(Jt,{md:"6",children:[(0,Lt.jsx)(uo,{setNewsFeed:h}),(0,Lt.jsxs)("div",{id:"newsfeed-container",className:"newsfeed-container",children:[p.length>0?(0,Lt.jsxs)("div",{id:"nf-story-container",children:[(0,Lt.jsx)("div",{ref:t,className:"nf-story-overflow-container",children:p.map(((e,t)=>(0,Lt.jsx)(ks,{data:e},t)))}),(0,Lt.jsx)("div",{className:"nf-story-arrow-left",onClick:r.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Lt.jsx)("div",{className:"nf-story-arrow-right",onClick:a.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Lt.jsxs)("div",{id:"nf-story-container",children:[(0,Lt.jsx)("div",{ref:t,className:"nf-story-overflow-container",children:(0,Lt.jsx)(Ms,{count:7})}),(0,Lt.jsx)("div",{className:"nf-story-arrow-left",onClick:r.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Lt.jsx)("div",{className:"nf-story-arrow-right",onClick:a.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]}),(0,Lt.jsxs)("div",{id:"nf-post-container",ref:n,children:[w.length>0?w.map(((e,t)=>(0,Lt.jsx)(_s,{index:w.indexOf(e),postContainer:n,data:e},t))):(0,Lt.jsx)(Ss,{count:3}),(0,Lt.jsx)(Ss,{count:1})]})]})]}),(0,Lt.jsx)(Jt,{md:"3",children:!i&&(0,Lt.jsx)(hs,{})})]})})})})},Ns=e=>{const t=qe();let n=dn((e=>e.profile)),r=e.profileData,a=e.isAuth,i=e.isFriend,s=r.friendReqs&&r.friendReqs.includes(n._id),u=n.friendReqs&&n.friendReqs.includes(r._id),l=s||u,[c,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!0),[b,w]=(0,o.useState)({photo:null,uploadedUrl:!1}),x=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)"),C=r.user&&r.user.firstName+" "+r.user.surname;(0,o.useEffect)((()=>{y(!0)}),[g]);let _=e=>{t("/message/".concat(r._id))},k=()=>{d(!1)};return(0,Lt.jsx)(o.Fragment,{children:a?(0,Lt.jsxs)("div",{className:"profile-buttons",children:[(0,Lt.jsxs)("div",{className:"highligh-btn button add-story",onClick:async()=>{d(!0)},children:[(0,Lt.jsx)("i",{className:"fas fa-plus-circle"}),(0,Lt.jsx)("span",{children:"Add to story"})]}),(0,Lt.jsxs)(En,{isOpen:c,id:"create-post-modal",onRequestClose:k,title:"Create A Post",style:{width:x?"95%":"600px"},children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",children:"Add to Story"}),(0,Lt.jsx)("div",{onClick:k.bind(void 0),className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("div",{className:"cp-modal-container",children:[(0,Lt.jsxs)("div",{className:"cpm-header",children:[(0,Lt.jsx)("div",{className:"cpm-profilePic",children:(0,Lt.jsx)(Tn,{profilePic:r.profilePic,profile:r._id})}),(0,Lt.jsx)("div",{className:"cpm-username",children:(0,Lt.jsx)("h3",{children:C})})]}),(0,Lt.jsxs)("form",{className:"cpm-form",onSubmit:e=>{e.preventDefault()},children:[(0,Lt.jsxs)("div",{className:"cpm-attachment-control",children:[(0,Lt.jsx)("div",{className:"cpm-attachment-preview",children:(0,Lt.jsx)("img",{src:b.url||"",alt:"attachment preview"})}),(0,Lt.jsxs)("div",{className:"cpm-attachment-upload",children:[(0,Lt.jsxs)("div",{className:"cpm-attachment-upload-overlay",children:[(0,Lt.jsx)("span",{className:"plus-icon"}),(0,Lt.jsx)("span",{className:"overlay-text",children:"Add Photos/Videos"})]}),(0,Lt.jsx)("input",{onChange:(async e=>{let t=e.currentTarget,n=e.target.files;var r=URL.createObjectURL(n[0]);w((e=>f(f({},e),{},{photo:n[0],url:r}))),Mn()(t).parents(".cpm-attachment-upload").slideUp(),Mn()(t).parents(".cpm-attachment-upload").siblings(".cpm-attachment-preview").slideDown();let a=new FormData;a.append("image",n[0]),p(!0);let o=await ao.post("/upload/",a,{headers:{"content-type":"multipart/form-data"}});if(200==o.status){let e=o.data.secure_url;if(e){const t=new Image;t.crossOrigin="Anonymous",t.src=e,t.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");e.width=t.width,e.height=t.height,n.drawImage(t,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height).data,a=0,o=0,i=0,s=0;for(let t=0;t<r.length;t+=4)a+=r[t],o+=r[t+1],i+=r[t+2],s++;a=Math.floor(a/s),o=Math.floor(o/s),i=Math.floor(i/s);const u="linear-gradient(135deg, rgb(".concat(a,", ").concat(o,", ").concat(i,") 0%, rgba(").concat(a-30,", ").concat(o-30,", ").concat(i-30,", 0.8) 100%)");v(u)},p(!1),y(!1),w((t=>f(f({},t),{},{uploadedUrl:e,bgColors:m})))}}}).bind(void 0),name:"photos",type:"file"})]})]}),(0,Lt.jsxs)("div",{className:"cpm-attachment",children:[(0,Lt.jsx)("span",{className:"cpm-button-text",children:"Add Image to your story"}),(0,Lt.jsx)("div",{className:"post-meta-buttons",children:(0,Lt.jsx)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".cpm-attachment").siblings(".cpm-attachment-control").slideToggle()},className:"attachment-button-file"})})]}),(0,Lt.jsx)("div",{className:"cpm-submit-button",children:(0,Lt.jsxs)("button",{className:"button",onClick:(async e=>{if(e.preventDefault(),d(!1),!e.target.classList.containers("added")&&0!=b.uploadedUrl&&0!=m)try{e.target.classList.add("added"),200===(await ao.post("/story/create/",{image:b.uploadedUrl,storyBg:m})).status&&d(!1)}catch(t){console.log(t)}}).bind(void 0),type:"submit",children:[" ",h?"Uploading ... ":"Add to your story"]})})]})]})})]}),(0,Lt.jsxs)("div",{onClick:()=>t("/settings"),className:"normal-btn button edit-profile",children:[(0,Lt.jsx)("i",{className:"fas fa-pen"}),(0,Lt.jsx)("span",{children:"Edit Profile"})]})]}):i?(0,Lt.jsxs)("div",{className:"profile-buttons",children:[(0,Lt.jsxs)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).children(".friend-options-menu").toggleClass("hide")},className:"button normal-btn  friend",children:[(0,Lt.jsx)("i",{className:"fas fa-user-check"}),(0,Lt.jsx)("span",{children:"Friend"}),(0,Lt.jsx)("div",{className:"friend-options-menu hide",children:(0,Lt.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;ao.post("/friend/removeFriend",{profile:r._id});Mn()(t).parents(".friend").hide()}catch(t){console.log(t)}},className:"friend-options-menu-item",children:[(0,Lt.jsx)("div",{className:"menu-item-icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-times"})}),(0,Lt.jsx)("div",{className:"menu-item-text",children:"Remove Friend"})]})})]}),(0,Lt.jsxs)("div",{onClick:_,className:"highligh-btn button message-button",children:[(0,Lt.jsx)("i",{className:"fas fa-comment-dots"}),(0,Lt.jsx)("span",{children:"Message"})]})]}):l?s?(0,Lt.jsxs)("div",{className:"profile-buttons",children:[(0,Lt.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;if(!Mn()(t).hasClass("removed")){await ao.post("/friend/removeRequest",{profile:r._id});Mn()(t).addClass("removed"),Mn()(t).children("span").text("Request Cenceled")}}catch(t){console.log(t)}},className:"normal-btn button cencel-friend",children:[(0,Lt.jsx)("i",{className:"fas fa-user-check"}),(0,Lt.jsx)("span",{children:"Cencel Request"})]}),(0,Lt.jsxs)("div",{onClick:_,className:"highligh-btn button message-button",children:[(0,Lt.jsx)("i",{className:"fas fa-comment-dots"}),(0,Lt.jsx)("span",{children:"Message"})]})]}):(0,Lt.jsxs)("div",{className:"profile-buttons",children:[(0,Lt.jsxs)("div",{onClick:async e=>{try{let t=e.currentTarget;if(!Mn()(t).hasClass("accepted")){await ao.post("/friend/reqAccept",{profile:r._id});Mn()(t).children("span").text("Accepted"),Mn()(t).addClass("Friend Accepted")}}catch(t){console.log(t)}},className:"highligh-btn button confirm-friend",children:[(0,Lt.jsx)("i",{className:"fas fa-user-check"}),(0,Lt.jsx)("span",{children:"Confirm Request"})]}),(0,Lt.jsxs)("div",{onClick:_,className:"normal-btn button message-button",children:[(0,Lt.jsx)("i",{className:"fas fa-comment-dots"}),(0,Lt.jsx)("span",{children:"Message"})]})]}):(0,Lt.jsxs)("div",{className:"profile-buttons",children:[(0,Lt.jsxs)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).hasClass("sent")||ao.post("/friend/sendRequest/",{profile:r._id}).then((e=>{Mn()(t).children("span").text("Request Sent"),Mn()(t).addClass("sent")})).catch((e=>{console.log(e)}))},className:"highligh-btn button add-friend",children:[(0,Lt.jsx)("i",{className:"fas fa-user-check"}),(0,Lt.jsx)("span",{children:"Add Friend"})]}),(0,Lt.jsxs)("div",{onClick:_,className:"normal-btn button message-button",children:[(0,Lt.jsx)("i",{className:"fas fa-comment-dots"}),(0,Lt.jsx)("span",{children:"Message"})]})]})})};var Ts=function(e,t){return Ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ts(e,t)};function Is(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ts(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},js.apply(this,arguments)};Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Ds=n(1185),Ls=n.n(Ds);function As(e,t,n,r,a){void 0===a&&(a=0);var o=Us(t.width,t.height,a),i=o.width,s=o.height;return{x:Rs(e.x,i,n.width,r),y:Rs(e.y,s,n.height,r)}}function Rs(e,t,n,r){var a=t*r/2-n/2;return Ws(e,-a,a)}function Ps(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Os(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function Fs(e,t){return Math.min(e,Math.max(0,t))}function Bs(e,t){return t}function zs(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Us(e,t,n){var r=n*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function Ws(e,t,n){return Math.min(Math.max(e,t),n)}function Vs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"===typeof e&&e.length>0})).join(" ").trim()}var Hs=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.cropperRef=o.createRef(),n.imageRef=o.createRef(),n.videoRef=o.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc="undefined"!==typeof document?document:null,n.currentWindow="undefined"!==typeof window?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if("undefined"!==typeof window.ResizeObserver&&n.containerRef){var e=!0;n.resizeObserver=new window.ResizeObserver((function(t){e?e=!1:n.computeSizes()})),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(e){return e.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var e=n.computeSizes();e&&(n.emitCropData(),n.setInitialCrop(e)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(e){if(n.props.initialCroppedAreaPercentages){var t=function(e,t,n,r,a,o){var i=Us(t.width,t.height,n),s=Ws(r.width/i.width*(100/e.width),a,o);return{crop:{x:s*i.width/2-r.width/2-i.width*s*(e.x/100),y:s*i.height/2-r.height/2-i.height*s*(e.y/100)},zoom:s}}(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom),r=t.crop,a=t.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(a)}else if(n.props.initialCroppedAreaPixels){var o=function(e,t,n,r,a,o){void 0===n&&(n=0);var i=Us(t.naturalWidth,t.naturalHeight,n),s=Ws(function(e,t,n){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return n.height>n.width?n.height/(e.height*r):n.width/(e.width*r)}(e,t,r),a,o),u=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((i.width-e.width)/2-e.x)*u,y:((i.height-e.height)/2-e.y)*u},zoom:s}}(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom);r=o.crop,a=o.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(a)}},n.computeSizes=function(){var e,t,r,a,o,i,s=n.imageRef.current||n.videoRef.current;if(s&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var u=n.containerRect.width/n.containerRect.height,l=(null===(e=n.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=n.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,c=(null===(r=n.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(a=n.videoRef.current)||void 0===a?void 0:a.videoHeight)||0,f=l/c,d=void 0;if(s.offsetWidth<l||s.offsetHeight<c)switch(n.state.mediaObjectFit){default:case"contain":d=u>f?{width:n.containerRect.height*f,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/f};break;case"horizontal-cover":d={width:n.containerRect.width,height:n.containerRect.width/f};break;case"vertical-cover":d={width:n.containerRect.height*f,height:n.containerRect.height}}else d={width:s.offsetWidth,height:s.offsetHeight};n.mediaSize=js(js({},d),{naturalWidth:l,naturalHeight:c}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var h=n.props.cropSize?n.props.cropSize:function(e,t,n,r,a,o){void 0===o&&(o=0);var i=Us(e,t,o),s=i.width,u=i.height,l=Math.min(s,n),c=Math.min(u,r);return l>c*a?{width:c*a,height:c}:{width:l,height:l/a}}(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(null===(o=n.state.cropSize)||void 0===o?void 0:o.height)===h.height&&(null===(i=n.state.cropSize)||void 0===i?void 0:i.width)===h.width||n.props.onCropSizeChange&&n.props.onCropSizeChange(h),n.setState({cropSize:h},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(h),h}},n.saveContainerPosition=function(){if(n.containerRef){var e=n.containerRef.getBoundingClientRect();n.containerPosition={x:e.left,y:e.top}}},n.onMouseDown=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(t.getMousePoint(e)))},n.onMouseMove=function(e){return n.onDrag(t.getMousePoint(e))},n.onScroll=function(e){n.currentDoc&&(e.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(e){n.currentDoc&&(n.isTouching=!0,n.props.onTouchRequest&&!n.props.onTouchRequest(e)||(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),2===e.touches.length?n.onPinchStart(e):1===e.touches.length&&n.onDragStart(t.getTouchPoint(e.touches[0]))))},n.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?n.onPinchMove(e):1===e.touches.length&&n.onDrag(t.getTouchPoint(e.touches[0]))},n.onGestureStart=function(e){n.currentDoc&&(e.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(e){if(e.preventDefault(),!n.isTouching){var r=t.getMousePoint(e),a=n.gestureZoomStart-1+e.scale;if(n.setNewZoom(a,r,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+e.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(e){n.cleanEvents()},n.onDragStart=function(e){var t,r,a=e.x,o=e.y;n.dragStartPosition={x:a,y:o},n.dragStartCrop=js({},n.props.crop),null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t)},n.onDrag=function(e){var t=e.x,r=e.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame((function(){if(n.state.cropSize&&void 0!==t&&void 0!==r){var e=t-n.dragStartPosition.x,a=r-n.dragStartPosition.y,o={x:n.dragStartCrop.x+e,y:n.dragStartCrop.y+a},i=n.props.restrictPosition?As(o,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):o;n.props.onCropChange(i)}})))},n.onDragStopped=function(){var e,t;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),null===(t=(e=n.props).onInteractionEnd)||void 0===t||t.call(e)},n.onWheel=function(e){if(n.currentWindow&&(!n.props.onWheelRequest||n.props.onWheelRequest(e))){e.preventDefault();var r=t.getMousePoint(e),a=Ls()(e).pixelY,o=n.props.zoom-a*n.props.zoomSpeed/200;n.setNewZoom(o,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=n.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout((function(){return n.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=n.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},n.getPointOnContainer=function(e,t){var r=e.x,a=e.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(r-t.x),y:n.containerRect.height/2-(a-t.y)}},n.getPointOnMedia=function(e){var t=e.x,r=e.y,a=n.props,o=a.crop,i=a.zoom;return{x:(t+o.x)/i,y:(r+o.y)/i}},n.setNewZoom=function(e,t,r){var a=(void 0===r?{}:r).shouldUpdatePosition,o=void 0===a||a;if(n.state.cropSize&&n.props.onZoomChange){var i=Ws(e,n.props.minZoom,n.props.maxZoom);if(o){var s=n.getPointOnContainer(t,n.containerPosition),u=n.getPointOnMedia(s),l={x:u.x*i-s.x,y:u.y*i-s.y},c=n.props.restrictPosition?As(l,n.mediaSize,n.state.cropSize,i,n.props.rotation):l;n.props.onCropChange(c)}n.props.onZoomChange(i)}},n.getCropData=function(){return n.state.cropSize?function(e,t,n,r,a,o,i){void 0===o&&(o=0),void 0===i&&(i=!0);var s=i?Fs:Bs,u=Us(t.width,t.height,o),l=Us(t.naturalWidth,t.naturalHeight,o),c={x:s(100,((u.width-n.width/a)/2-e.x/a)/u.width*100),y:s(100,((u.height-n.height/a)/2-e.y/a)/u.height*100),width:s(100,n.width/u.width*100/a),height:s(100,n.height/u.height*100/a)},f=Math.round(s(l.width,c.width*l.width/100)),d=Math.round(s(l.height,c.height*l.height/100)),h=l.width>=l.height*r?{width:Math.round(d*r),height:d}:{width:f,height:Math.round(f/r)};return{croppedAreaPercentages:c,croppedAreaPixels:js(js({},h),{x:Math.round(s(l.width-h.width,c.x*l.width/100)),y:Math.round(s(l.height-h.height,c.y*l.height/100))})}}(n.props.restrictPosition?As(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition):null},n.emitCropData=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(t,r),n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.emitCropAreaChange=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var e=n.props.restrictPosition?As(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(e),n.emitCropData()}},n.onKeyDown=function(e){var t,r,a=n.props,o=a.crop,i=a.onCropChange,s=a.keyboardStep,u=a.zoom,l=a.rotation,c=s;if(n.state.cropSize){e.shiftKey&&(c*=.2);var f=js({},o);switch(e.key){case"ArrowUp":f.y-=c,e.preventDefault();break;case"ArrowDown":f.y+=c,e.preventDefault();break;case"ArrowLeft":f.x-=c,e.preventDefault();break;case"ArrowRight":f.x+=c,e.preventDefault();break;default:return}n.props.restrictPosition&&(f=As(f,n.mediaSize,n.state.cropSize,u,l)),e.repeat||null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t),i(f)}},n.onKeyUp=function(e){var t,r;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}n.emitCropData(),null===(r=(t=n.props).onInteractionEnd)||void 0===r||r.call(t)},n}return Is(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),"undefined"===typeof window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&("undefined"===typeof window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){var t,n,r,a,o,i,s,u,l;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(a=this.props.cropSize)||void 0===a?void 0:a.width)?this.computeSizes():(null===(o=e.crop)||void 0===o?void 0:o.x)===(null===(i=this.props.crop)||void 0===i?void 0:i.x)&&(null===(s=e.crop)||void 0===s?void 0:s.y)===(null===(u=this.props.crop)||void 0===u?void 0:u.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(l=this.videoRef.current)||void 0===l||l.load());var c=this.getObjectFit();c!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:c},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},t.prototype.getObjectFit=function(){var e,t,n,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var a=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(n=this.imageRef.current)||void 0===n?void 0:n.naturalHeight)||(null===(r=this.videoRef.current)||void 0===r?void 0:r.videoHeight)||0)<a?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var n=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=Ps(n,r),this.lastPinchRotation=Os(n,r),this.onDragStart(zs(n,r))},t.prototype.onPinchMove=function(e){var n=this;if(this.currentDoc&&this.currentWindow){var r=t.getTouchPoint(e.touches[0]),a=t.getTouchPoint(e.touches[1]),o=zs(r,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame((function(){var e=Ps(r,a),t=n.props.zoom*(e/n.lastPinchDistance);n.setNewZoom(t,o,{shouldUpdatePosition:!1}),n.lastPinchDistance=e;var i=Os(r,a),s=n.props.rotation+(i-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(s),n.lastPinchRotation=i}))}},t.prototype.render=function(){var e,t=this,n=this.props,r=n.image,a=n.video,i=n.mediaProps,s=n.cropperProps,u=n.transform,l=n.crop,c=l.x,f=l.y,d=n.rotation,h=n.zoom,p=n.cropShape,m=n.showGrid,v=n.style,g=v.containerStyle,y=v.cropAreaStyle,b=v.mediaStyle,w=n.classes,x=w.containerClassName,C=w.cropAreaClassName,_=w.mediaClassName,k=null!==(e=this.state.mediaObjectFit)&&void 0!==e?e:this.getObjectFit();return o.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:g,className:Vs("reactEasyCrop_Container",x)},r?o.createElement("img",js({alt:"",className:Vs("reactEasyCrop_Image","contain"===k&&"reactEasyCrop_Contain","horizontal-cover"===k&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===k&&"reactEasyCrop_Cover_Vertical",_)},i,{src:r,ref:this.imageRef,style:js(js({},b),{transform:u||"translate(".concat(c,"px, ").concat(f,"px) rotate(").concat(d,"deg) scale(").concat(h,")")}),onLoad:this.onMediaLoad})):a&&o.createElement("video",js({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Vs("reactEasyCrop_Video","contain"===k&&"reactEasyCrop_Contain","horizontal-cover"===k&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===k&&"reactEasyCrop_Cover_Vertical",_)},i,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:js(js({},b),{transform:u||"translate(".concat(c,"px, ").concat(f,"px) rotate(").concat(d,"deg) scale(").concat(h,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map((function(e){return o.createElement("source",js({key:e.src},e))}))),this.state.cropSize&&o.createElement("div",js({ref:this.cropperRef,style:js(js({},y),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Vs("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",m&&"reactEasyCrop_CropAreaGrid",C)},s)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(o.Component);const Ys=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"skeleton-card no-border",children:(0,Lt.jsx)("div",{className:"skeleton-main"})},t)))};const Gs=e=>{let{profileData:t}=e;Xe();const[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[f,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(t.profilePic||""),[m,v]=(0,o.useState)(null),[g,y]=(0,o.useState)(null),[b,w]=(0,o.useState)({x:0,y:0}),[x,C]=(0,o.useState)(null),[_,k]=(0,o.useState)(1);let S=dn((e=>e.profile));(0,o.useEffect)((()=>{p(""),d(!1)}),[Sn.param]),(0,o.useEffect)((()=>{t&&(d(!1),(e=>{const t=new Image;t.src=e,t.onload=()=>d(!0),t.onerror=()=>d(!1)})(t.coverPic))}),[t,Sn.param]),(0,o.useEffect)((()=>{1==f&&p(t.coverPic)}),[f]);const M=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");let E=()=>{c(!1)};var N={fontSize:M?"18px":"30px"};const T=(0,o.useCallback)(((e,t)=>{C(t)}),[]),I=(0,o.useCallback)((async()=>{if(m)try{const a=await(e=URL.createObjectURL(m),t=x,n=1430,r=450,new Promise(((a,o)=>{const i=new Image;i.src=e,i.onload=()=>{const e=document.createElement("canvas");e.width=n,e.height=r,e.getContext("2d").drawImage(i,t.x,t.y,t.width,t.height,0,0,n,r),e.toBlob((e=>{if(!e)return void o(new Error("Canvas is empty"));const t=URL.createObjectURL(e);a(t)}),"image/jpeg")},i.onerror=o})));if(a)return y(a),!0}catch(Du){console.error(Du)}var e,t,n,r}),[m&&URL.createObjectURL(m),x]);let j=S._id===t._id;return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"cover-photo-container",children:[f?(0,Lt.jsx)("img",{onClick:()=>{c(!0)},className:"cover-photo",src:h,alt:"cover"}):(0,Lt.jsx)(Ys,{count:1}),j&&(0,Lt.jsxs)("div",{className:"upload-cover-photo",onClick:()=>{r(!0)},children:[(0,Lt.jsx)("i",{className:"fa fa-camera-alt"}),(0,Lt.jsx)("span",{children:"Upload Cover Photo"})]}),(0,Lt.jsxs)(En,{title:"View Cover Photo",style:{width:M?"95%":"600px",top:"50%"},isOpen:l,onRequestClose:E,id:"cp-view-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",style:N,children:" View Profile Picture"}),(0,Lt.jsx)("div",{onClick:E,className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body text-center",children:(0,Lt.jsx)("img",{src:h,className:"w-100",alt:"Cover Pic View"})})]}),(0,Lt.jsxs)(En,{title:"Upload Cover Photo",style:{width:"500px",top:"20%",top:"50%"},isOpen:n,onRequestClose:()=>{r(!1)},id:"cp-upload-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",children:"Upload Cover Photo"}),(0,Lt.jsx)("div",{onClick:()=>{r(!1)},className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsxs)("div",{className:"modal-body",children:[(0,Lt.jsx)("div",{className:"modal-upload-preview",children:m&&(0,Lt.jsx)(Hs,{image:URL.createObjectURL(m),crop:b,zoom:_,aspect:1430/450,onCropChange:w,onZoomChange:k,onCropComplete:T})}),(0,Lt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!h)return I(),(async()=>{u(!1),i(!0);let e=new FormData;e.append("image",m);let t=await ao.post("/upload",e,{headers:{"content-type":"multipart/form-data"}});if(200===t.status){let e=t.data.secure_url;i(!1),p(e)}})(),!0;try{if(h){i(!0);let e=new FormData;e.append("coverPicUrl",h),e.append("profile",t._id),200===(await ao.post("/profile/update/coverPic",e,{headers:{"content-type":"multipart/form-data"}})).status&&(r(!1),window.location.reload())}}catch(n){console.log(n)}},children:[(0,Lt.jsx)("input",{name:"cover_pic",onChange:(async e=>{v(e.target.files[0]||""),u(!0)}).bind(void 0),className:"cp-upload-input",type:"file"}),(0,Lt.jsx)("button",{type:"submit",className:"cp-upload-button",children:a?"Uploading...":s?"Crop":"Update Cover Picture"})]})]})]})]})})};var qs=n(4872),Qs=n.n(qs);const Xs=e=>{let{profileData:t}=e,{profile:n}=Xe(),r=dn((e=>e.profile));const[a,i]=(0,o.useState)(!1),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(),[f,d]=(0,o.useState)(t.profilePic),[h,p]=(0,o.useState)(t.profilePic),[m,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)("");(0,o.useEffect)((()=>{ao.get("/profile/hasStory?profileId="+n).then((e=>{200==e.status&&v(e.data.hasStory)}))}),[n]),(0,o.useEffect)((()=>{d(t?bs(t.profilePic)?t.profilePic:"":"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png")}),[t]),(0,o.useEffect)((e=>{f&&Nn(f,p)}),[f]);let b="";let w=()=>{i(!1)},x=e=>{u(!1)},C=r._id===t._id;var _=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)"),k={fontSize:_?"18px":"30px"};return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"profile-pic",children:[(0,Lt.jsx)("div",{className:"profilePic-container ".concat("yes"==m?"has-story":""),onClick:()=>{u(!0)},children:h?(0,Lt.jsx)("img",{src:f,alt:""}):(0,Lt.jsx)(ys,{})}),C&&(0,Lt.jsx)("div",{onClick:e=>{i(!0)},className:"upload-profile-pic",children:(0,Lt.jsx)("i",{className:"fa fa-camera-alt"})}),(0,Lt.jsxs)(En,{title:"View Profile Picture",style:{width:_?"95%":"600px",top:"50%"},isOpen:s,onRequestClose:x,id:"pp-view-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",style:k,children:" View Profile Picture"}),(0,Lt.jsx)("div",{onClick:x,className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body text-center",children:(0,Lt.jsx)("img",{src:t.profilePic,className:"w-100",alt:"Ikram"})})]}),(0,Lt.jsxs)(En,{title:"Upload Profile Pics",style:{width:"600px",maxWidth:"95%",top:"50%"},isOpen:a,onRequestClose:w,id:"pp-upload-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{className:"modal-title",children:" Upload Profile Picture"}),(0,Lt.jsx)("div",{onClick:w,className:"modal-close-btn",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!1);try{b.getImageScaledToCanvas().toBlob((async e=>{let n=new File([e],"".concat(t._id,".png"),{type:e.type,lastModified:(new Date).getTime()}),r=new FormData;r.append("image",n);let a=await ao.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"}});if(200===a.status){let e=a.data.secure_url,t=new FormData;t.append("profilePicUrl",e),t.append("type","profilePic"),t.append("caption",g),200===(await ao.post("/profile/update/profilePic",t,{headers:{"Content-Type":"multipart/form-data"}})).status&&window.location.reload()}}))}catch(n){console.log(n)}},children:[(0,Lt.jsx)("textarea",{onChange:(e=>{y(e.target.value)}).bind(void 0),placeholder:"What's in your Mind?",name:"caption",className:"post-caption",value:g}),l&&(0,Lt.jsx)(Qs(),{ref:e=>{b=e},image:URL.createObjectURL(l),width:450,height:450,border:50,borderRadius:300,color:[0,0,0,.5],scale:1.1,rotate:0,style:{margin:"auto",marginBottom:"20px",maxWidth:"100%",height:"100%",width:"100%"}}),(0,Lt.jsx)("input",{onChange:e=>{c(e.target.files[0])},name:"profilePic",className:"pp-upload-input",type:"file"}),(0,Lt.jsx)("button",{className:"pp-upload-button",type:"submit",children:"Upload"})]})})]})]})})};const Ks=e=>{let t=Xe(),n=xn(),r=dn((e=>e.profile))||{},a=r._id,[i,s]=(0,o.useState)(t.profile===a||t.profile==r.username),[u,l]=(0,o.useState)(i?f({},r):{});(0,o.useEffect)((()=>{s(t.profile===a),r.friends&&r.friends.filter((e=>{e._id===t.profile&&d(!0)}))}),[r]);let[c,d]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(!i){n(ts(!0));try{ao.post("/profile",{profile:t.profile}).then((e=>{200===e.status&&(l(e.data),n(ts(!1)))})).catch((e=>{console.log(e)}))}catch(e){console(e)}}}),[t]);let h="/"+u._id+"/";const p=()=>(0,Lt.jsxs)("div",{className:"animate-pulse flex flex-col items-center space-y-4",children:[(0,Lt.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-300"}),(0,Lt.jsx)("div",{className:"w-40 h-6 bg-gray-300 rounded"}),(0,Lt.jsx)("div",{className:"w-60 h-4 bg-gray-300 rounded"})]});let m=e=>{Mn()(e.currentTarget).siblings().removeClass("active")};return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"profile",children:[(0,Lt.jsxs)("div",{className:"profile-header",children:[u?(0,Lt.jsx)(Gs,{profileData:u}):(0,Lt.jsx)(p,{}),(0,Lt.jsxs)("div",{className:"profile-info-container",children:[(0,Lt.jsx)(Xs,{profileData:u}),(0,Lt.jsxs)("div",{className:"profile-info",children:[(0,Lt.jsxs)("div",{className:"profile-name",children:[(0,Lt.jsxs)("h3",{className:"full-name",children:[u.user&&u.user.firstName," ",u.user&&u.user.surname," ",(null===u||void 0===u?void 0:u.nickname)&&(0,Lt.jsxs)("span",{className:"nickname",children:["(",u.nickname,")"]})]}),(0,Lt.jsx)("div",{className:"friends-count",children:(0,Lt.jsxs)(Mt,{className:"text-decoration-none",to:"/".concat(u._id,"/friends"),children:[u.friends&&u.friends.length," Friends"]})})]}),(0,Lt.jsx)(Ns,{profileData:u,isAuth:i,isFriend:c})]})]}),(0,Lt.jsxs)("div",{className:"profile-info-tab-navigator",children:[(0,Lt.jsx)("div",{className:"header-nav-menu",children:(0,Lt.jsxs)("div",{className:"header-nav-menu-container",children:[(0,Lt.jsx)(Et,{to:h,onClick:m,className:"header-nav-menu-item",children:"Posts"}),(0,Lt.jsx)(Et,{to:h+"about",onClick:m,className:"header-nav-menu-item",children:"About"}),(0,Lt.jsx)(Et,{to:h+"friends",onClick:m,className:"header-nav-menu-item",children:" Friends"}),(0,Lt.jsx)(Et,{to:h+"images",onClick:m,className:"header-nav-menu-item",children:"Images"}),(0,Lt.jsx)(Et,{to:h+"videos",onClick:m,className:"header-nav-menu-item",children:"Videos"})]})}),(0,Lt.jsx)("div",{className:"options-menu",children:(0,Lt.jsx)("i",{className:"fa fa-ellipsis-h"})})]})]}),(0,Lt.jsx)("div",{className:"profile-content-container",children:(0,Lt.jsx)(ct,{})})]})})};const Js=()=>{let e=dn((e=>e.profile));return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"friends",children:[(0,Lt.jsxs)("div",{className:"friends-sidebar",children:[(0,Lt.jsx)("h4",{className:"page-title",children:"Friends"}),(0,Lt.jsxs)("div",{className:"friends-sidebar-menu",children:[(0,Lt.jsxs)(Et,{to:"/friends/",className:"friends-sidebar-menu-item",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-friends"})}),(0,Lt.jsx)("span",{className:"text",children:"Home"})]}),(0,Lt.jsxs)(Et,{to:"/friends/requests",className:"friends-sidebar-menu-item",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-edit"})}),(0,Lt.jsx)("span",{className:"text",children:"Friend Requests"})]}),(0,Lt.jsxs)(Et,{to:"/friends/suggestions",className:"friends-sidebar-menu-item",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-plus"})}),(0,Lt.jsx)("span",{className:"text",children:"Suggestions"})]}),(0,Lt.jsxs)(Et,{to:"/".concat(e?e._id:"","/friends"),className:"friends-sidebar-menu-item",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"fas fa-users"})}),(0,Lt.jsx)("span",{className:"text",children:"All Freinds"})]})]})]}),(0,Lt.jsx)("div",{className:"friends-content",children:(0,Lt.jsx)(ct,{})})]})})},Zs=e=>{let{item:t,myProfile:n,setReplies:r,comment:a,replies:i}=e,s=n._id,[u,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(t.reacts.length),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)({body:null,attachment:null});return(0,Lt.jsxs)("div",{className:"reply-container",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:t.author.profilePic,profile:t.author._id})}),(0,Lt.jsxs)("div",{className:"comment-info",children:[(0,Lt.jsxs)("div",{className:"comment-box",children:[(0,Lt.jsxs)("div",{className:"name-comment",children:[(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)(Mt,{to:"/".concat(t.author._id),children:t.author.fullName})}),(0,Lt.jsx)("p",{className:"comment-text",children:t.body})]}),t.author._id==s&&(0,Lt.jsxs)("div",{className:"options-icon",onClick:(e=>{l(!u)}).bind(void 0),children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Lt.jsx)("div",{className:"options-container ".concat(u&&"open"),children:(0,Lt.jsx)("button",{"data-id":t._id,onClick:(async e=>{let t=e.currentTarget.dataset.id;200==(await ao.post("/comment/deleteReply",{replyId:t})).status&&Mn()(e.target).parents(".reply-container").remove()}).bind(void 0),className:"comment-option text-danger",children:"Delete Reply"})})]})]}),(0,Lt.jsxs)("div",{className:"comment-react",children:[(0,Lt.jsxs)("div",{className:"like button ".concat(t.reacts.includes(s)&&"reacted"),onClick:(async e=>{let t=e.target.dataset.id;if(Mn()(e.target).hasClass("reacted")){200==(await ao.post("/comment/reply/removeReact",{replyId:t,myId:s})).status&&(d(c-1),Mn()(e.target).removeClass("reacted"))}else{200==(await ao.post("/comment/reply/addReact",{replyId:t,myId:s})).status&&(d(c+1),Mn()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":t._id,children:["Like ","".concat(c>0?"(".concat(c,")"):"")]}),(0,Lt.jsx)("div",{className:"reply button",onClick:(e=>{p(!h)}).bind(void 0),"data-id":t._id,children:"Reply"}),(0,Lt.jsx)("div",{className:"comment-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]}),h&&(0,Lt.jsx)("div",{className:"new-reply",children:(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let e=a._id;if(m){let t=await ao.post("/comment/addReply",{replyMsg:m.body,authorId:n._id,commentId:e});if(200==t.status){p(!1);let e=t.data;r((t=>[...t,e]))}}}},onChange:(async e=>{v((t=>f(f({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-reply":t._id,placeholder:"Reply to ".concat(t.author.fullName)}),(0,Lt.jsx)("div",{onClick:(async e=>{let t=a._id;if(m){let e=await ao.post("/comment/addReply",{replyMsg:m.body,authorId:n._id,commentId:t});if(200==e.status){p(!1);let t=e.data._id;r((e=>[...e,t]))}}}).bind(void 0),"data-reply":t._id,className:"comment-attachment",children:(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-paper-plane"})})})]})})]})]})},$s=e=>{var t;let n=e.watch||{},r=e.myProfile?e.myProfile:{},[a,i]=(0,o.useState)(e.comment),s=r._id,[u,l]=(0,o.useState)(0),[c,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)(null===(t=e.comment)||void 0===t?void 0:t.replies);(0,o.useEffect)((()=>{i(e.comment),l(e.comment.reacts.length||0),d(e.comment.reacts.includes(s))}),[e]);let[g,y]=(0,o.useState)({body:null,attachment:null});return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"comment-container comment-id-".concat(a._id),children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:a.author.profilePic,profile:a.author._id})}),(0,Lt.jsxs)("div",{className:"comment-info",children:[(0,Lt.jsxs)("div",{className:"comment-box",children:[(0,Lt.jsxs)("div",{className:"name-comment",children:[(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)(Mt,{to:"/".concat(a.author._id),children:a.author.user.firstName+" "+a.author.user.surname})}),(0,Lt.jsx)("p",{className:"comment-text",children:a.body}),a.attachment&&(0,Lt.jsx)("div",{className:"comment-attachment-container",children:(0,Lt.jsx)("img",{src:a.attachment,alt:"attachment"})})]}),a.author._id==r._id?(0,Lt.jsxs)("div",{onClick:e=>{Mn()(e.currentTarget).children(".options-container").hasClass("open")?Mn()(e.currentTarget).children(".options-container").removeClass("open"):Mn()(e.currentTarget).children(".options-container").addClass("open")},className:"options-icon",children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Lt.jsx)("div",{className:"options-container",children:(0,Lt.jsx)("button",{dataid:a._id,onClick:(async e=>{try{let t=Mn()(e.currentTarget).attr("dataid"),a=n._id;Mn()(e.currentTarget).parents(".comment-container").remove();let o=await ao.post("/comment/deleteComment",{commentId:t,watchId:a});if(200===o.status){o.data.author=r}}catch(t){console.log(t)}}).bind(void 0),className:"comment-option text-danger",children:"Delete Comment"})})]}):""]}),(0,Lt.jsxs)("div",{className:"comment-react",children:[(0,Lt.jsxs)("div",{className:"like button ".concat(c?"reacted":""),onClick:(async e=>{let t=e.currentTarget.dataset.id;if(Mn()(e.currentTarget).hasClass("reacted")){200==(await ao.post("/comment/removeReact",{commentId:t,reactorId:s})).status&&(Mn()(e.target).removeClass("reacted"),l((e=>e-1)))}else{200==(await ao.post("/comment/addReact",{commentId:t,reactorId:s})).status&&(l((e=>e+1)),Mn()(e.target).addClass("reacted"))}}).bind(void 0),"data-id":a._id,children:["Like ","".concat(u>0?"("+u+")":"")]}),(0,Lt.jsx)("div",{className:"reply button","data-id":a._id,onClick:(async e=>{p(!h)}).bind(void 0),children:"Reply"}),(0,Lt.jsx)("div",{className:"comment-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:a.createdAt})})]}),h&&(0,Lt.jsx)("div",{className:"new-reply",children:(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async e=>{if(e.preventDefault(),13===e.keyCode){let t=e.currentTarget.dataset.comment;if(g){let e=await ao.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){p(!1);let t=e.data;v((e=>[...e,t]))}}}},onChange:(async e=>{y((t=>f(f({},t),{},{body:e.target.value})))}).bind(void 0),className:"field-comment-text",type:"text","data-comment":a._id,placeholder:"Reply to ".concat(a.author.fullName)}),(0,Lt.jsx)("div",{onClick:(async e=>{let t=e.currentTarget.dataset.comment;if(g){let e=await ao.post("/comment/addReply",{replyMsg:g.body,authorId:r._id,commentId:t});if(200==e.status){p(!1);let t=e.data;v((e=>[...e,t]))}}}).bind(void 0),"data-comment":a._id,className:"comment-attachment",children:(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-paper-plane"})})})]})}),m.map(((e,t)=>(0,Lt.jsx)(Zs,{setReplies:v,replies:m,comment:a,item:e,myProfile:r},t)))]})]})})};const eu=e=>{let t=e.watch||{},n=e.authProfilePicture,r=e.authProfile,a=e.myProfile?e.myProfile:{},[i,s]=(a._id,(0,o.useState)(t.comments)),[u,l]=(0,o.useState)(null),[c,d]=(0,o.useState)({body:null,attachment:null});return(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsxs)("div",{className:"comments",children:[i&&i.map(((e,n)=>e&&(0,Lt.jsx)($s,{comment:e,watch:t,myProfile:a},n))),t.comments.length>i.length&&(0,Lt.jsx)("div",{className:"more-comment-button",children:" View more comments"})]}),(0,Lt.jsxs)("div",{className:"new-comment",children:[(0,Lt.jsx)("div",{className:"user-pp",children:(0,Lt.jsx)(Tn,{profilePic:n,profile:r})}),(0,Lt.jsxs)("div",{className:"comment-field",children:[(0,Lt.jsx)("input",{onKeyUp:async n=>{if(n.preventDefault(),13===n.keyCode)try{n.target.value="";let r=new FormData;r.append("body",null==c.body?"":c.body),r.append("attachment",null==u?"":u),r.append("watch",t._id);let o=await ao.post("/comment/addComment",{body:c.body,attachment:u,watch:t._id.toString()});if(200===o.status){let t=o.data;t.author=a;let n=t;s((t=>{[...t].slice(-3);let r=[...t,n];return d([]),e.commentState((e=>e+1)),r}))}}catch(r){console.log(r)}},onChange:async e=>{d((t=>f(f({},t),{},{body:e.target.value})))},className:"field-comment-text",type:"text",placeholder:"Write a Public Comment"}),(0,Lt.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;Mn()(t).children("input").trigger("click")},className:"comment-attachment",children:[(0,Lt.jsx)("input",{onChange:async e=>{d((e=>f(f({},e),{},{attachment:"https://programmerikram.com/wp-content/uploads/2025/03/loading.gif"})));let t=new FormData;t.append("image",e.target.files[0]);let n=await ao.post("/upload/",t,{headers:{"content-type":"multipart/form-data"}});n&&setTimeout((()=>{let e=n.data.secure_url;l(e),d((t=>f(f({},t),{},{attachment:e})))}),1e3)},className:"attachment",type:"file"}),(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-camera"})})]})]})]}),(0,Lt.jsx)("div",{className:"comment-attachment-preview",children:c.attachment&&(0,Lt.jsx)("img",{alt:"comment attachment",src:c.attachment})})]})},tu=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsxs)("div",{className:"skeleton-card",children:[(0,Lt.jsxs)("div",{className:"skeleton-header",children:[(0,Lt.jsx)("div",{className:"skeleton-avatar"}),(0,Lt.jsxs)("div",{className:"skeleton-lines",children:[(0,Lt.jsx)("div",{className:"skeleton-line short"}),(0,Lt.jsx)("div",{className:"skeleton-line medium"})]})]}),(0,Lt.jsx)("div",{className:"skeleton-main"}),(0,Lt.jsxs)("div",{className:"skeleton-footer",children:[(0,Lt.jsx)("div",{className:"skeleton-line small button"}),(0,Lt.jsx)("div",{className:"skeleton-line small button"}),(0,Lt.jsx)("div",{className:"skeleton-line small button"})]})]},t)))},nu=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"skeleton-card no-border",children:(0,Lt.jsx)("div",{className:"skeleton-main"})},t)))},ru=e=>{const t=indexedDB.open("savedVideoDb",2);t.onupgradeneeded=()=>{const e=t.result;e.objectStoreNames.contains("videos")||e.createObjectStore("videos",{keyPath:"id"})},t.onsuccess=()=>{e(t.result)},t.onerror=()=>{console.error("Failed to open IndexedDB"),e(null)}},au=async(e,t,n)=>{const r=await fetch(t),a=await r.blob();ru((t=>{if(!t)return;const r=t.transaction("videos","readwrite");r.objectStore("videos").put({id:e,blob:a,metadata:n}),r.oncomplete=()=>{console.log('Video "'.concat(e,'" saved with metadata')),W((0,Lt.jsx)(Mt,{className:"text-decoration-none text-secondary",to:"/downloads/".concat(n._id),children:(0,Lt.jsx)("div",{style:{color:"blue",fontWeight:"bold"},children:(0,Lt.jsxs)("div",{className:"row d-flex align-items-center",children:[(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("img",{className:"rounded-circle w-100",src:n.author.profilePic,alt:"connect"})}),(0,Lt.jsxs)("div",{className:"col-9",children:[(null===n||void 0===n?void 0:n.caption)&&(0,Lt.jsx)("h3",{className:"text-success mb-0",children:n.caption}),(0,Lt.jsx)("p",{className:"text-small text-secondary text-muted mb-0",children:"".concat(n.caption," Saved to videos")})]})]})})}))}}))},ou=(e,t)=>{ru((n=>{if(!n)return t(!1);const r=n.transaction("videos","readwrite").objectStore("videos").delete(e);r.onsuccess=()=>{console.log('Video with id "'.concat(e,'" deleted')),t&&t(!0)},r.onerror=()=>{console.error('Failed to delete video with id "'.concat(e,'"')),t&&t(!1)}}))},iu="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",su="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",uu="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",lu=e=>{let{watch:t}=e,n=dn((e=>e.profile)),r=n._id,[a,i]=(0,o.useState)(t.reacts.length),[s,u]=(0,o.useState)(t.shares.length),[l,c]=(0,o.useState)(t.comments.length),[f,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)([]);const[x,C]=(0,o.useState)(!1),[_,k]=(0,o.useState)(t.videoUrl),S=(0,o.useRef)(null),M=(0,o.useRef)(null);(0,o.useEffect)((()=>{null!==t&&void 0!==t&&t.thumbnail&&Nn(t.thumbnail,y)}),[t]),(0,o.useEffect)((()=>(Ui.emit("is_active",{profileId:"",myId:r}),Ui.on("is_active",((e,t,n)=>{n===r&&d(e)})),()=>Ui.off("is_active"))),[n]),(0,o.useEffect)((()=>{k(t.videoUrl)}),[t]);var E=""===r;(0,o.useEffect)((()=>{let e=[];t.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===r&&v(t.type)}})),w(e)}),[]);let N=t.type||"watch",T=async function(){i((e=>e-1));let e=await ao.post("/react/removeReact",{id:t._id,watchType:"watch"});return 200===e.status&&(i(e.data.reacts.length),v(""),!0)},I=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"watch";i((e=>e+1));let r=await ao.post("/react/addReact",{id:t._id,watchType:n,reactType:e});return 200===r.status&&(i(r.data.reacts.length),w([...b,e]),v(e),!0)},j=dn((e=>e.profile.profilePic)),D=dn((e=>e.profile._id)),L="".concat(null===t||void 0===t?void 0:t.author.profilePic);(0,o.useEffect)((()=>{window.addEventListener("scroll",(()=>{(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(null==e)return;return e.getBoundingClientRect().top<=t})(null===M||void 0===M?void 0:M.current)&&(document.querySelectorAll(".watch-video").forEach((e=>{e.pause()})),null!==S.current&&S.current.play())}))}),[]);let A=(0,o.useCallback)((e=>{null!==t&&void 0!==t&&t.videoUrl&&au(t._id,t.videoUrl,t)}),[t]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{ref:M,className:"nf-watch ".concat(N),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===N&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsxs)("span",{className:"d-none",children:[(0,Lt.jsx)("b",{children:"A bitch"})," commented."]}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:L,profile:t.author._id,active:f})}),(0,Lt.jsxs)("div",{className:"watch-nd-container",children:[(0,Lt.jsx)(Mt,{to:"/"+t.author._id,children:(0,Lt.jsx)("h4",{className:"author-name",children:t.author.user.firstName+" "+t.author.user.surname})}),(0,Lt.jsx)("span",{className:"watch-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[(0,Lt.jsx)("button",{onClick:A,className:"watch-three-dot",children:(0,Lt.jsx)("i",{className:"fas fa-download"})}),E&&(0,Lt.jsx)("button",{className:"watch-three-dot",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})}),(0,Lt.jsxs)("button",{onClick:(async e=>{let n=e.currentTarget;E?(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this watch?",buttons:[{label:"Yes",onClick:async()=>{let e=await ao.watch("/watch/delete",{watchId:t._id,authorId:t.author._id});200===e.status?(Mn()(n).parents(".nf-watch").css({"min-height":"0px",padding:"10px"}),Mn()(n).parents(".nf-watch").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete watch")}},{label:"No",onClick:()=>{}}]}):Mn()(n).parents(".nf-watch").hide()}).bind(void 0),className:"watch-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{className:"body",children:[(0,Lt.jsx)("p",{className:"caption",children:t.caption}),!(null!==t&&void 0!==t&&t.thumbnail)&&_&&(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/watch/".concat(t._id),children:(0,Lt.jsx)("video",{id:"watch-".concat(t._id),ref:S,className:"w-100 watch-video",controls:!0,src:"".concat(_)})})})||(0,Lt.jsx)(Lt.Fragment,{children:!(null!==t&&void 0!==t&&t.thumbnail)&&!_&&(0,Lt.jsx)(nu,{})}),null!==t&&void 0!==t&&t.thumbnail&&g&&!h?(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/watch/".concat(t._id),children:(0,Lt.jsx)("img",{className:"w-100",onClick:()=>{p(!0)},src:t.thumbnail,alt:""})})})," "]}):(0,Lt.jsx)(Lt.Fragment,{children:!(null!==t&&void 0!==t&&t.thumbnail)&&!_&&(0,Lt.jsx)(nu,{})})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[b.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:iu,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),b.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:su,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),b.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:uu,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[t.reacts&&a," ",a>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:t.comments&&l}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:t.shares&&s}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(m?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;Mn()(t).parent().hasClass("reacted")?(T("watch"),Mn()(t).parent().removeClass("reacted")):(I("like","watch",t),Mn()(t).parent().addClass("reacted"))},onMouseOver:e=>{let t=e.currentTarget;Mn()(t).children(".watch-react-container").css("visibility","visible")},className:"react-like ".concat(1==m?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:m||"",children:["haha"==m?(0,Lt.jsx)("img",{src:uu,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==m?(0,Lt.jsx)("img",{src:su,alt:"love"}):(0,Lt.jsx)("span",{}),0==m||"like"==m?(0,Lt.jsx)("img",{src:iu,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:m||"like"})]}),(0,Lt.jsxs)("div",{className:"watch-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==m?"reacted":""),onClick:async e=>{let t=e.currentTarget;Mn()(t).parents(".watch-react-container").css("visibility","hidden"),Mn()(t).hasClass("reacted")?(T("watch"),Mn()(t).removeClass("reacted")):(I("like","watch",t),Mn()(t).addClass("reacted"),Mn()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{Mn()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:iu,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==m?"reacted":""),onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".watch-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(T("watch"),Mn()(e.currentTarget).removeClass("reacted")):(I("love","watch"),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:su,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==m?"reacted":""),onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".watch-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(T(),Mn()(e.currentTarget).removeClass("reacted")):(I("haha","watch",t),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".watch-react-container").css("visibility","visible")}),500)},id:"watchReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:uu,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".footer").find(".field-comment-text").focus()},className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),(0,Lt.jsxs)("div",{onClick:e=>{},className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"})]})]})}),(0,Lt.jsx)(eu,{watch:t,commentState:c,myProfile:n,authProfile:D,authProfilePicture:j})]})]})})},cu=()=>{let e=dn((e=>e.profile))._id,t=fo();const[n,r]=(0,o.useState)([]);return(0,o.useEffect)((()=>{(async()=>{let t=await ao.get("watch/related",{params:{profile_id:e}});200===t.status&&r(t.data)})()}),[]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{className:"container my-3",children:(0,Lt.jsxs)("div",{className:"row",children:[(0,Lt.jsx)("div",{className:"col-md-3",children:!t&&(0,Lt.jsx)(co,{})}),(0,Lt.jsx)("div",{className:"col-md-6",children:n.length>0?n.map(((e,t)=>(0,Lt.jsx)(lu,{watch:e,type:"watch"},t))):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(tu,{count:3})})}),(0,Lt.jsx)("div",{className:"col-md-3",children:!t&&(0,Lt.jsx)(hs,{})})]})})})};const fu=()=>(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("h2",{children:"Marketplace"})});const du=()=>(0,Lt.jsx)(o.Fragment,{}),hu=()=>(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"yt-download-page",children:(0,Lt.jsx)("div",{className:"container my-3",children:(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsx)("h1",{children:"Yt Downloader"})})})})})});var pu=n(6178),mu=n.n(pu);let vu=e=>{const t=mu()(e);mu()();return t.format("DD/MM/YY hh:mm A")};const gu=e=>{var t,n,r,a,i,s,u,l,c,f;let{index:d,msg:h,friendProfile:p,isActive:m,messages:v,setReplyData:g,setIsReplying:y,setIsPreview:b,isPreview:w,msgListRef:x,isMsgLoading:C}=e,_=dn((e=>e.profile))._id,k=p._id,[S,M]=(h.reacts.includes(_)||h.reacts.includes(_),(0,o.useState)(h.reacts.includes(_))),[E,N]=(0,o.useState)(!1),[T,I]=(0,o.useState)(h.reacts.includes(k)),[j,D]=(0,o.useState)(!1),[L,A]=(0,o.useState)(!1),[R,P]=(0,o.useState)(!h||void 0!==(null===h||void 0===h?void 0:h.parent));(0,o.useEffect)((()=>{var e,t;(bs(h.attachment)&&Nn(h.attachment,D),bs(null===h||void 0===h||null===(e=h.parent)||void 0===e?void 0:e.attachment))&&Nn(null===h||void 0===h||null===(t=h.parent)||void 0===t?void 0:t.attachment,A)}),[h]),(0,o.useEffect)((()=>{}),[j]),(0,o.useEffect)((()=>(Ui.on("messageReacted",(e=>{h._id===e&&I(!0)})),Ui.on("messageReactRemoved",(e=>{h._id===e&&I(!1)})),()=>{Ui.off("messageReacted"),Ui.off("messageReactRemoved")}))),(0,o.useEffect)((()=>{var e;null!==h&&void 0!==h&&null!==(e=h.parent)&&void 0!==e&&e._id&&P(!0)}),[]);let O=async e=>{let t=Mn()(e.currentTarget).data("id");Ui.emit("deleteMessage",t)},F=async e=>{let t=Mn()(e.currentTarget).data("id");if(S){200==(await ao.post("/message/removeReact",{messageId:t,myId:_})).status&&M(!1)}else{200==(await ao.post("/message/addReact",{messageId:t,myId:_})).status&&M(!0)}},B=async e=>{let t=Mn()(e.currentTarget).data("id");y(!0),b(!0),g({messageId:t,body:h.message})},z=async e=>{Ui.emit("speak_message",Mn()(e.currentTarget).data("id"),k)},U=async e=>{let t=e.currentTarget.dataset.parent;document.querySelectorAll("#chatMessageList .chat-message-container .chat-message").forEach(((e,t)=>{e.style.border="unset"}));let n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message"));null!==n&&(n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9",N(!0));let r=new CustomEvent("scroll",{bubbles:!0,cancelable:!0}),a=setInterval((()=>{E&&(n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message")),n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9",clearInterval(a)),null==n?0==C&&(x.current.scrollTop=10,x.current.dispatchEvent(r),n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message"))):(n=document.querySelector("#chatMessageList .chat-message-container.message-id-".concat(t," .chat-message")),n&&(N(!0),clearInterval(a),n.scrollIntoView({behavior:"smooth"}),n.style.border="2px solid #29B1A9"))}),1500)};return(0,Lt.jsx)(Lt.Fragment,{children:h.senderId!==_?(0,Lt.jsxs)("div",{className:"chat-message-container message-receive message-id-".concat(h._id," ").concat(!0===S||1==T?"message-reacted":""),"data-toggle":"tooltip",title:vu(h.timestamp),children:[(0,Lt.jsx)("div",{className:"chat-message-profilePic",children:(0,Lt.jsx)(Tn,{profilePic:"".concat(p.profilePic),profile:p._id,active:!!m})}),(0,Lt.jsxs)("div",{className:"chat-message ".concat(bs(v.attachment)&&"has-attachment"),children:[(0,Lt.jsxs)("div",{className:"chat-message-options",children:[(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option like ".concat(1==S?"reacted":""),onClick:F.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-thumbs-up"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option reply",onClick:B.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-reply"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option share",onClick:z.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-speaker"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option delete",onClick:O.bind(h),children:(0,Lt.jsx)("i",{className:"fa fa-trash"})})]}),void 0===(null===h||void 0===h?void 0:h.parent)||null===(null===h||void 0===h?void 0:h.parent)?(0,Lt.jsx)(Lt.Fragment,{}):(0,Lt.jsxs)("p",{onClick:U.bind(void 0),"data-parent":null===h||void 0===h||null===(t=h.parent)||void 0===t?void 0:t._id,className:"parent-message-container ".concat(bs(null===h||void 0===h||null===(n=h.parent)||void 0===n?void 0:n.attachment)&&"has-attachment"),children:[(0,Lt.jsx)("span",{children:null===h||void 0===h||null===(r=h.parent)||void 0===r?void 0:r.message}),1==L?(0,Lt.jsx)("div",{className:"message-attachment-container",children:(0,Lt.jsx)("img",{src:null===h||void 0===h||null===(a=h.parent)||void 0===a?void 0:a.attachment,alt:"Message Attchment",className:"message-attachment"})}):bs(null===h||void 0===h||null===(i=h.parent)||void 0===i?void 0:i.attachment)&&(0,Lt.jsx)(ys,{style:{minWidth:"200px"}})]}),(0,Lt.jsx)("div",{className:"message-container mb-0",children:(0,Lt.jsx)("span",{children:h.message})}),1==j?(0,Lt.jsx)("div",{className:"message-attachment-container",children:(0,Lt.jsx)("img",{src:h.attachment,alt:"",className:"message-attachment"})}):bs(h.attachment)&&(0,Lt.jsx)(ys,{style:{minWidth:"200px"}}),(0,Lt.jsx)("span",{className:"message-react",children:(0,Lt.jsx)("i",{children:"\ud83d\udc4d"})})]}),(0,Lt.jsx)("div",{className:"chat-message-seen-status d-none",children:"Seen"})]},d):(0,Lt.jsxs)("div",{className:"chat-message-container message-sent message-id-".concat(h._id," ").concat(!0===S||1==T?"message-reacted":""),"data-toggle":"tooltip",title:vu(h.timestamp),children:[(0,Lt.jsxs)("div",{className:"chat-message ".concat(bs(v.attachment)&&"has-attachment"),children:[(0,Lt.jsxs)("div",{className:"chat-message-options",children:[(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option like ".concat(1==S?"reacted":""),onClick:F.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-thumbs-up"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option reply",onClick:B.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-reply"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option share speaker",onClick:z.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-speaker"})}),(0,Lt.jsx)("button",{type:"button","data-id":h._id,className:"chat-message-option delete",onClick:O.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-trash"})})]}),void 0===(null===h||void 0===h?void 0:h.parent)||null===(null===h||void 0===h?void 0:h.parent)?(0,Lt.jsx)(Lt.Fragment,{}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("p",{onClick:U.bind(void 0),"data-parent":null===h||void 0===h||null===(s=h.parent)||void 0===s?void 0:s._id,className:"parent-message-container ".concat(bs(null===h||void 0===h||null===(u=h.parent)||void 0===u?void 0:u.attachment)&&"has-attachment"),children:[(0,Lt.jsx)("span",{children:null===h||void 0===h||null===(l=h.parent)||void 0===l?void 0:l.message}),1==L?(0,Lt.jsx)("div",{className:"message-attachment-container",children:(0,Lt.jsx)("img",{src:null===h||void 0===h||null===(c=h.parent)||void 0===c?void 0:c.attachment,alt:"",className:"message-attachment"})}):bs(null===h||void 0===h||null===(f=h.parent)||void 0===f?void 0:f.attachment)&&(0,Lt.jsx)(ys,{style:{minWidth:"200px"}})]})}),(0,Lt.jsx)("div",{className:"message-container mb-0",children:(0,Lt.jsx)("span",{children:h.message})}),1==j?(0,Lt.jsx)("div",{className:"message-attachment-container",children:(0,Lt.jsx)("img",{src:h.attachment,alt:"Message Attchment",className:"message-attachment"})}):bs(h.attachment)&&(0,Lt.jsx)(ys,{style:{minWidth:"200px"}}),(0,Lt.jsx)("span",{className:"message-react",children:(0,Lt.jsx)("i",{children:"\ud83d\udc4d"})})]}),(0,Lt.jsx)("div",{className:"chat-message-seen-status ".concat(h.isSeen?"message-seen":"message-unseen"),children:(0,Lt.jsx)("img",{src:p.profilePic,alt:"Seen"})})]},d)})},yu="ADD_MESSAGES",bu="NEW_MESSAGE",wu="SEND_MESSAGE",xu="SEEN_MESSAGE",Cu=e=>({type:bu,payload:e}),_u=e=>({type:xu,payload:{contactId:e}}),ku=e=>({type:wu,payload:e});var Su=function(e,t){return Su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Su(e,t)};function Mu(e,t){function n(){this.constructor=e}Su(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Eu=function(){return Eu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Eu.apply(this,arguments)};function Nu(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(Du){o(Du)}}function s(e){try{u(r.throw(e))}catch(Du){o(Du)}}function u(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function Tu(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(Du){o=[6,Du],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Iu(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)r[a]=o[i];return r}var ju=function(e,t){return(ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Du(e,t){function n(){this.constructor=e}ju(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Lu=function(){return(Lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function Au(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function Ru(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var Pu=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t=Ou(this.global.location.search);"tfjsflags"in t&&t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},e}();function Ou(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")})),t}var Fu=null;function Bu(e){Fu=e}Object.freeze({Environment:Pu,getQueryParams:Ou,get ENV(){return Fu},setEnvironmentGlobal:Bu});function zu(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Uu(e,t,n){return Math.max(e,Math.min(t,n))}function Wu(e){return e%2==0?e:e+1}function Vu(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Hu(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Yu(e,t,n){void 0===n&&(n=""),Hu(Xu(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Gu(e){Hu(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function qu(e,t){if(void 0===t&&(t=[]),null==t&&(t=[]),Array.isArray(e)||cl(e))for(var n=0;n<e.length;++n)qu(e[n],t);else t.push(e);return t}function Qu(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Xu(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ku(e){return e%1==0}function Ju(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Zu(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function $u(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function el(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var o=0,i=function(){if(e())r();else{var s=t(++o);null!=n&&o>=n?a():setTimeout(i,s)}};i()}))}function tl(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function nl(e,t){var n=t.length;return Hu((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Hu(e.every((function(e){return Ku(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function rl(e,t){for(var n=[],r=[],a=null==t?null:nl(t,e).sort(),o=0,i=0;i<e.length;++i){if(null!=a){if(a[o]===i&&1!==e[i])throw new Error("Can't squeeze axis "+i+" since its dim '"+e[i]+"' is not 1");(null==a[o]||a[o]>i)&&1===e[i]&&(n.push(e[i]),r.push(i)),a[o]<=i&&o++}1!==e[i]&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function al(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function ol(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function il(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))throw Error("The result of the '"+n+"' is "+a+".")}}function sl(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function ul(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function ll(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function cl(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function fl(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function dl(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=2*e.length})),t}function hl(e){return"string"==typeof e||e instanceof String}function pl(e){return"boolean"==typeof e}function ml(e){return"number"==typeof e}function vl(e){return Array.isArray(e)?vl(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ml(e)?"float32":hl(e)?"string":pl(e)?"bool":"float32"}function gl(e){return!!(e&&e.constructor&&e.call&&e.apply)}function yl(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function bl(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function wl(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=qu(e)),n&&sl(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function xl(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var o=n[0],i=0;i<o;i++)a[i]=r[t+i];else{o=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(i=0;i<o;i++)a[i]=e(t+i*u,s,r)}return a}(0,e,t)}function Cl(e,t){for(var n=_l(e,t),r=0;r<n.length;r++)n[r]=1;return n}function _l(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function kl(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof process){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}function Sl(e){e.forEach((function(t){Hu(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Ml(e,t){return Fu.platform.fetch(e,t)}Object.freeze({shuffle:zu,clamp:Uu,nearestLargerEven:Wu,sum:Vu,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:Hu,assertShapesMatch:Yu,assertNonNull:Gu,flatten:qu,sizeFromShape:Qu,isScalarShape:function(e){return 0===e.length},arraysEqual:Xu,isInt:Ku,tanh:Ju,sizeToSquarishShape:Zu,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return zu(t),t},rightPad:$u,repeatedTry:el,inferFromImplicitShape:tl,parseAxisParam:nl,squeezeShape:rl,getTypedArrayFromDType:al,getArrayFromDType:ol,checkComputationForErrors:il,checkConversionForErrors:sl,isValidDtype:ul,hasEncodingLoss:ll,isTypedArray:cl,bytesPerElement:fl,bytesFromStringArray:dl,isString:hl,isBoolean:pl,isNumber:ml,inferDtype:vl,isFunction:gl,nearestDivisor:yl,computeStrides:bl,toTypedArray:wl,toNestedArray:xl,makeOnesTypedArray:Cl,makeZerosTypedArray:_l,now:kl,assertNonNegativeIntegerDimensions:Sl,fetch:Ml});var El=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Nl)}return e.prototype.profileKernel=function(e,t){var n,r=this,a=this.backendTimer.time((function(){n=t()}));return(Array.isArray(n)?n:[n]).forEach((function(t){var n=t.dataSync();il(n,t.dtype,e),a.then((function(a){var o="";null!=a.getExtraProfileInfo&&(o=a.getExtraProfileInfo()),r.logger.logKernelProfile(e,t,n,a.kernelMs,o)}))})),n},e}(),Nl=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a){var o=$u(r+"ms",9),i=$u(e,25),s=t.rank,u=t.size,l=$u(t.shape.toString(),14);console.log("%c"+i+"\t%c"+o+"\t%c"+s+"D "+l+"\t%c"+u+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green")},e}();function Tl(e,t,n){return $u(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":hl(e)?"'"+e+"'":"bool"===n?Il(e):parseFloat(e.toFixed(7)).toString(),t)}function Il(e){return 0===e?"false":"true"}function jl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Dl=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Qu(e),null!=n){var a=n.length;Hu(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||ol(t,this.size),this.strides=bl(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Hu(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var o=a[r];if(o<0||o>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Pl.make(this.shape,{values:this.values},this.dtype)},e}(),Ll=null,Al=null,Rl=null,Pl=function(){function e(e,t,n,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Qu(e),this.strides=bl(e),this.dataId=null!=r?r:{},this.id=Ll().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",Ll().registerTensor(this,a),null!=n&&Ll().write(a,this.dataId,n)}return e.make=function(t,n,r,a){return new e(t,r,n.values,n.dataId,a)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Hu(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),Al.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Al.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Al.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,xl(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return xl(this.shape,this.dataSync())},e.prototype.data=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){return this.throwIfDisposed(),[2,Ll().read(this.dataId)]}))}))},e.prototype.dataSync=function(){return this.throwIfDisposed(),Ll().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(Ll().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Al.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Al.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Al.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Al.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Al.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Al.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Al.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=bl(t),o=function(e,t,n,r){var a=Qu(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?jl(e):e;if(s>1)for(var l=0;l<a/o;l++)for(var c=l*o,f=0;f<o;f++)i[f]=Math.max(i[f],Tl(u[c+f],0,n).length);return i}(e,t,n,a),i=t.length,s=function e(t,n,r,a,o,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[Tl(jl(t)[0],0,r)]:"bool"===r?[Il(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,f=Array.from(t.slice(0,c)),d=Array.from(t.slice(u-3*s,u));return"complex64"===r&&(f=jl(f),d=jl(d)),["["+f.map((function(e,t){return Tl(e,o[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return Tl(e,o[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?jl(t):Array.from(t)).map((function(e,t){return Tl(e,o[t],r)})).join(", ")+"]"]}var h=n.slice(1),p=a.slice(1),m=a[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),h,r,p,o,!1))}for(v.push("..."),g=u-3;g<u;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,o,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,o,g===u-1))}var w=2===l?",":"";for(v[0]="["+v[0]+w,g=1;g<v.length-1;g++)v[g]=" "+v[g]+w;var x=",\n";for(g=2;g<l;g++)x+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":x),v}(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Al.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Al.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Al.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Al.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Al.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Al.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Al.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Al.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Al.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Al.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Al.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Al.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),Rl("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.batchNorm=function(e,t,n,r,a){return void 0===a&&(a=.001),this.throwIfDisposed(),Al.batchNorm(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Al.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Al.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Al.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Al.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Al.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Al.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Al.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Al.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Al.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Al.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Al.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Al.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Al.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Al.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Al.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Al.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Al.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Al.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Al.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Al.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Al.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Al.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),Al.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Al.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Al.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Al.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Al.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Al.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Al.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Al.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Al.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Al.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Al.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Al.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Al.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Al.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Al.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Al.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Al.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Al.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Al.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Al.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Al.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Al.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Al.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Al.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Al.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Al.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Al.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Al.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Al.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Al.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Al.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Al.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Al.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Al.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Al.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Al.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Al.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Al.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Al.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Al.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Al.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Al.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Al.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Al.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Al.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Al.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Al.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Al.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Al.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Al.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Al.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Al.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Al.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Al.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Al.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Al.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Al.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Al.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Al.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Al.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Al.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Al.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Al.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Al.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Al.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Al.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,o){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),Al.conv1d(this,e,t,n,r,a,o)},e.prototype.conv2d=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Al.conv2d(this,e,t,n,r,a,o)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Al.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Al.depthwiseConv2d(this,e,t,n,r,a,o)},e.prototype.separableConv2d=function(e,t,n,r,a,o){return void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),Al.separableConv2d(this,e,t,n,r,a,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Al.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Al.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Al.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Al.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Ol.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Al.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Al.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Al.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Al.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),Al.stridedSlice(this,e,t,n,r,a,o,i,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Al.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Al.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Al.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Al.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Al.spectral.irfft(this)},e}();Object.defineProperty(Pl,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ol=function(e){function t(t,n,r){void 0===n&&(n=!0);var a=e.call(this,t.shape,t.dtype,null,t.dataId)||this;a.trainable=n,a.name=r,null==a.name&&(a.name=Ll().nextVariableId().toString());try{Ll().registerVariable(a)}catch(e){throw Ll().disposeTensor(a),e}return a}return Du(t,e),t.variable=function(e,n,r,a){return void 0===n&&(n=!0),null!=a&&a!==e.dtype&&(e=e.asType(a)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Xu(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ll().disposeTensor(this),this.dataId=e.dataId,Ll().registerTensor(this)},t.prototype.dispose=function(){Ll().disposeVariable(this),this.isDisposedInternal=!0},t}(Pl);Object.defineProperty(Ol,Symbol.hasInstance,{value:function(e){return e instanceof Pl&&null!=e.assign&&e.assign instanceof Function}});var Fl,Bl,zl,Ul,Wl;Ol.variable;!function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Fl||(Fl={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Bl||(Bl={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(zl||(zl={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Ul||(Ul={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Wl||(Wl={}));var Vl={float32:Ul,int32:Bl,bool:zl,complex64:Wl};function Hl(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Vl[e][t]}function Yl(e){return Hl(e,"int32")}function Gl(e,t){if(e.dtype===t.dtype)return[e,t];var n=Hl(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ql(e,t){Hu(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Ql(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Pl)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,o=t;for(var i in o){var s=o[i];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Gl,assertTypesMatch:ql,isTensorInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1},getTensorsInContainer:Ql});var Xl,Kl=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Jl=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Kl}return e.prototype.ready=function(){return Au(this,void 0,void 0,(function(){var e,t,n;return Ru(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Au(this,void 0,void 0,(function(){var t,n,r;return Ru(this,(function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.profiler=new El(this.backendInstance),[2,!0]}}))}))},e.prototype.initializeBackend=function(e){var t=this,n=Zl.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){this.write(e,t,this.readSync(t))},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=Pl.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],t,(function(e){return[e.toFloat()]})),t},e.prototype.runKernel=function(e,t,n){var r,a=this,o=[],i=this.isTapeOn(),s=null!=this.state.activeScope?this.state.activeScope.name:"",u=function(e){i&&(o=e.map((function(e){return a.keep(a.clone(e))})))},l=this.state.numBytes,c=this.state.numTensors;if(this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){r=a.ENV.getBool("DEBUG")?a.profiler.profileKernel(s,(function(){return e(a.backend,u)})):e(a.backend,u)})),i){var f={id:this.state.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r],saved:o};null!=n&&(f.gradient=function(e){return n(e,o)}),this.state.activeTape.push(f)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-c,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShape:Array.isArray(r)?r.map((function(e){return e.shape})):r.shape}),r},e.prototype.registerTensor=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*fl(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:null!=t?t:this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=t?t.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Ol||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.state.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.state.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Au(this,void 0,void 0,(function(){var t,n;return Ru(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach((function(e,t){r[t]=e}));var a={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t=n(e),r={};return t.forEach((function(e,t){r[t]=function(){return e}})),r}};this.state.activeTape.push(a)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Ql(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),Hu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));Hu(o instanceof Pl,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(o=0;o<e.length;o++){var i=(p=e[o]).inputs;for(var s in i){for(var u=i[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,a[p.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var d={};for(o=e.length-1;o>=0;o--)for(i=(p=e[o]).inputs,c=0;c<p.outputs.length;c++)if(f[p.outputs[c].id]){for(var s in i)f[i[s].id]=!0,d[p.id]=!0;break}var h=[];for(o=0;o<e.length;o++){var p;if(a[(p=e[o]).id]&&d[p.id]){var m={};for(var s in p.inputs){var v=p.inputs[s];r[v.id]&&(m[s]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,h.push(g)}}return h}(this.state.activeTape,t,o);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[o.id]=null==n?(r=Cl(Qu(e=o.shape),"float32"),Pl.make(e,{values:r})):n,function(e,t,n){for(var r=function(r){var a=t[r],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];if(null!=n)o.push(n);else{var r=Pl.make(t.shape,{values:_l(t.size,t.dtype)},t.dtype);o.push(r)}})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.name+".");var i=a.gradient(1===a.outputs.length?o[0]:o),s=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n((function(){return i[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.name+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var o=a.inputs[t];if(!Xu(r.shape,o.shape))throw new Error("Error in gradient for op "+a.name+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==e[o.id])e[o.id]=r;else{var s=e[o.id];e[o.id]=s.add(r),s.dispose()}};for(var u in a.inputs)s(u)},a=t.length-1;a>=0;a--)r(a)}(s,i,(function(e){return a.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t in e.saved)e.saved[t].dispose()})),a.state.activeTape=null),{value:o,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return Hu(gl(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];Hu(r.every((function(e){return e instanceof Pl})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernel((function(t,a){return Hu((n=e.apply(void 0,r.concat([a]))).value instanceof Pl,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Hu(gl(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),o,(function(e,t){var a=n.gradFunc(e,t),o=Array.isArray(a)?a:[a];Hu(o.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Hu(o.every((function(e){return e instanceof Pl})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return o.forEach((function(e,t){i[t]=function(){return e}})),i}))}},e.prototype.write=function(e,t,n){var r=this.state.tensorInfo.get(t),a=r.backend;if(e=e||this.backend,"string"===r.dtype){var o=dl(n);this.state.numBytes+=o-r.bytes,r.bytes=o}e!==a&&(a.disposeData(t),r.backend=e,e.register(t,r.shape,r.dtype)),e.write(t,n)},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return Au(this,void 0,void 0,(function(){var t,n;return Ru(this,(function(r){switch(r.label){case 0:return t=kl(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=kl()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Kl,this.registry)this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Zl=function(){var e=function(){if(null==Xl){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Xl=e}return Xl}();if(null==e._tfengine){var t=new Pu(e);e._tfengine=new Jl(t)}return Bu(e._tfengine.ENV),Ll=function(){return e._tfengine},e._tfengine}();function $l(){return"undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope}Fu.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Fu.registerFlag("IS_BROWSER",(function(){return $l()})),Fu.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Fu.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Fu.registerFlag("PROD",(function(){return!1})),Fu.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Fu.getBool("DEBUG")})),Fu.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Fu.registerFlag("IS_TEST",(function(){return!1}));var ec={},tc={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function nc(e,t){ec[e]=t}function rc(e){e in ec||(ec[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete ec[e]}),!1),1===e?t.getContext("webgl",tc)||t.getContext("experimental-webgl",tc):t.getContext("webgl2",tc)}(e));var t=ec[e];return t.isContextLost()?(delete ec[e],rc(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),ec[e])}function ac(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+ic(e,t))}(e),r}function oc(e){return!!(Fu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function ic(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function sc(e,t,n){return Ic(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function uc(e,t,n){var r=Ic(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(ac(e,t,(function(){return e.shaderSource(r,n)})),ac(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function lc(e,t,n){var r=Ic(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(ac(e,t,(function(){return e.shaderSource(r,n)})),ac(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=dc.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return $u((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),f=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+$u(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var cc,fc,dc=/ERROR: [0-9]+:([0-9]+):/g;function hc(e,t){return Ic(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function pc(e,t,n){if(ac(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function mc(e,t,n){if(ac(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function vc(e,t,n){var r=Ic(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ac(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),ac(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function gc(e,t,n){var r=Ic(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return ac(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),ac(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function yc(e,t){return Ic(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function bc(e,t){var n=Fu.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function wc(e,t){return Ic(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function xc(e,t,n,r,a,o,i,s){var u=e.getAttribLocation(n,r);return-1!==u&&(ac(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),ac(e,t,(function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,i,s)})),ac(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function Cc(e,t,n,r){jc(e,r),ac(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function _c(e,t,n,r){return Ic(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function kc(e,t,n){return e.getUniformLocation(t,n)}function Sc(e,t,n,r,a,o){ac(e,t,(function(){return Cc(e,t,r,o)})),ac(e,t,(function(){return e.uniform1i(a,o)}))}function Mc(e,t,n,r){ac(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),ac(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Ec(e,t,n){ac(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),ac(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Nc(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Tc(e,t))}function Tc(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Ic(e,t,n,r){var a=ac(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function jc(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Dc(e,t){return void 0===t&&(t=2),Qu(e.slice(0,e.length-t))}function Lc(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Ac(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Dc(e)].concat(Lc(e))),t}function Rc(e,t){var n;void 0===t&&(t=!1);var r=Fu.getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Wu(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=rl(e);e=a.newShape}var o=Qu(e);if(e.length<=1&&o<=r)return[1,o];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=Dc(e),s=2,u=2;return e.length&&(s=(n=Lc(e))[0],u=n[1]),Zu(o=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return Zu(o)}function Pc(e){return e%2==0}function Oc(e,t){if(Xu(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Pc(n)&&Pc(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Pc(e[0])&&Pc(t[0])}function Fc(e){if(null==cc){var t=rc(e);cc=t.getParameter(t.MAX_TEXTURE_SIZE)}return cc}function Bc(e){if(null==fc){var t=rc(e);fc=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,fc)}function zc(e){if(0===e)return 0;var t=rc(e);return Uc(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Uc(t,"EXT_disjoint_timer_query")?1:0}function Uc(e,t){return null!=e.getExtension(t)}function Wc(e){try{if(null!=rc(e))return!0}catch(e){return!1}return!1}function Vc(e){if(0===e)return!1;var t=rc(e);if(1===e){if(!Uc(t,"OES_texture_float"))return!1}else if(!Uc(t,"EXT_color_buffer_float"))return!1;return Yc(t,e)}function Hc(e){if(0===e)return!1;var t=rc(e);if(1===e){if(!Uc(t,"OES_texture_float"))return!1;if(!Uc(t,"WEBGL_color_buffer_float"))return!1}else if(!Uc(t,"EXT_color_buffer_float"))return!1;return Yc(t,e)}function Yc(e,t){var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),o}function Gc(e){return 2===e&&null!=rc(e).fenceSync}var qc=Object.freeze({callAndCheck:ac,canBeRepresented:oc,getWebGLErrorMessage:ic,getExtensionOrThrow:sc,createVertexShader:uc,createFragmentShader:lc,createProgram:hc,linkProgram:pc,validateProgram:mc,createStaticVertexBuffer:vc,createStaticIndexBuffer:gc,getNumChannels:function(){return 2===Fu.getNumber("WEBGL_VERSION")?1:4},createTexture:yc,validateTextureSize:bc,createFramebuffer:wc,bindVertexBufferToProgramAttribute:xc,bindTextureUnit:Cc,unbindTextureUnit:function(e,t,n){jc(e,n),ac(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:_c,getProgramUniformLocation:kc,bindTextureToProgramUniformSampler:Sc,bindCanvasToFramebuffer:function(e,t){ac(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),ac(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),ac(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Mc,unbindColorTextureFromFramebuffer:Ec,validateFramebuffer:Nc,getFramebufferErrorMessage:Tc,getBatchDim:Dc,getRowsCols:Lc,getShapeAs3D:Ac,getTextureShapeFromLogicalShape:Rc,isReshapeFree:Oc,get MAX_TEXTURE_SIZE(){return cc},get MAX_TEXTURES_IN_SHADER(){return fc},getWebGLMaxTextureSize:Fc,getMaxTexturesInShader:Bc,getWebGLDisjointQueryTimerVersion:zc,isWebGLVersionEnabled:Wc,isRenderToFloatTextureEnabled:Vc,isDownloadFloatTextureEnabled:Hc,isWebGLFenceEnabled:Gc});function Qc(e){Fu.getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Xc(e,t){return Zl.tidy(e,t)}function Kc(e){Ql(e).forEach((function(e){return e.dispose()}))}function Jc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Fu.getBool("IS_TEST")||console.warn.apply(console,e)}function Zc(e){var t=e;if(cl(e))return[e.length];if(!Array.isArray(e))return[];for(var n=[];Array.isArray(t)||cl(t);)n.push(t.length),t=t[0];return Array.isArray(e)&&Fu.getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||cl(t)){Hu(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Hu(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var a=n.slice(1),o=0;o<t.length;++o)e(t[o],a,r.concat(o))}else Hu(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,n,[]),n}function $c(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function ef(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Pl)return $c(r,e.dtype,t,n),e;var a=vl(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),$c(r,a,t,n),null==e||!cl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var i=Zc(e);cl(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?wl(e,a,Fu.getBool("DEBUG")):qu(e);return Pl.make(i,{values:s},a)}function tf(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return ef(e,t+"["+r+"]",n)}),r)}function nf(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function rf(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function af(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function of(e,t){return rf(e,t.map((function(e){return 1})),t)}function sf(e,t,n){Hu(nf(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function uf(e,t){if(nf(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function lf(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function cf(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function ff(e,t){var n=e[0].length;e.forEach((function(e,t){Hu(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Hu(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)Hu(o===t||e[o]===r[o],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function df(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function hf(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Zl.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Zl.endScope(a),a}catch(e){throw Zl.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}Fu.registerFlag("HAS_WEBGL",(function(){return Fu.getNumber("WEBGL_VERSION")>0})),Fu.registerFlag("WEBGL_VERSION",(function(){return Wc(2)?2:Wc(1)?1:0})),Fu.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Fu.get("WEBGL_VERSION")})),Fu.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Fu.registerFlag("WEBGL_PACK",(function(){return Fu.getBool("HAS_WEBGL")})),Fu.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_PACK_CLIP",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Fu.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_PACK_REDUCE",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_CONV_IM2COL",(function(){return Fu.getBool("WEBGL_PACK")})),Fu.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Fc(Fu.getNumber("WEBGL_VERSION"))})),Fu.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Bc(Fu.getNumber("WEBGL_VERSION"))})),Fu.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Fu.getNumber("WEBGL_VERSION");return 0===e?0:zc(e)})),Fu.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),Fu.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return Vc(Fu.getNumber("WEBGL_VERSION"))})),Fu.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Hc(Fu.getNumber("WEBGL_VERSION"))})),Fu.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Gc(Fu.getNumber("WEBGL_VERSION"))})),Fu.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Fu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Rl=Qc;var pf=hf({complex_:function(e,t){var n=ef(e,"real","complex"),r=ef(t,"imag","complex");return Yu(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Zl.runKernel((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),mf=hf({real_:function(e){var t=ef(e,"input","real");return Zl.runKernel((function(e){return e.real(t)}),{$input:t})}}),vf=hf({imag_:function(e){var t=ef(e,"input","imag");return Zl.runKernel((function(e){return e.imag(t)}),{$input:t})}});function gf(e,t,n){return yf(e,t,Zc(e),n)}function yf(e,t,n,r){if(null==r&&(r=vl(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!cl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Sl(t);var a=Qu(t),o=Qu(n);Hu(a===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+o}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Qu(t.slice(i));Hu(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return cl(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?wl(e,r,Fu.getBool("DEBUG")):qu(e),Pl.make(t,{values:e},r)}function bf(e,t){if((cl(e)||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");return yf(e,[],[],t)}function wf(e,t){Gu(e);var n=Zc(e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return yf(e,null,n,t)}function xf(e,t,n){if(Gu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Zc(e);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return yf(e,t,r,n)}function Cf(e,t,n){if(Gu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Zc(e);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return yf(e,t,r,n)}function _f(e,t,n){if(Gu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Zc(e);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return yf(e,t,r,n)}function kf(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=kf(e,"float32"),r=Sf(e,"float32");return pf(n,r)}var a=Cl(Qu(e),t);return Pl.make(e,{values:a},t)}function Sf(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Sf(e,"float32"),r=Sf(e,"float32");return pf(n,r)}var a=_l(Qu(e),t);return Pl.make(e,{values:a},t)}function Mf(e,t,n){return Zl.runKernel((function(r){return r.fill(e,t,n)}),{})}function Ef(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Sf([0],r);var a=_l(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return wf(a,r)}var Nf=hf({onesLike_:function(e){var t=ef(e,"x","onesLike");if("complex64"===t.dtype){var n=Nf(mf(t)),r=Tf(vf(t));return pf(n,r)}return Zl.runKernel((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Tf(e)}}}))}}),Tf=hf({zerosLike_:function(e){var t=ef(e,"x","zerosLike");return Zl.runKernel((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Tf(e)}}}))}}),If=hf({concat_:function(e,t){void 0===t&&(t=0),Hu(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=tf(e,"tensors","concat");t=nl(t,n[0].shape)[0];var r=df(n.map((function(e){return e.shape})),t);if(0===Qu(r))return gf([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=n.map((function(e){return e.shape}));ff(a,t);var o=n;return Zl.runKernel((function(e){return e.concat(n,t)}),o,(function(e){var n=a.map((function(e){return e[t]}));return Rf(e,n,t).map((function(e){return function(){return e}}))}))}}),jf=hf({concat1d_:function(e){return If(e,0)}}),Df=hf({concat2d_:function(e,t){return If(e,t)}}),Lf=hf({concat3d_:function(e,t){return If(e,t)}}),Af=hf({concat4d_:function(e,t){return If(e,t)}}),Rf=hf({split_:function(e,t,n){void 0===n&&(n=0);var r,a=ef(e,"x","split");return n=nl(n,a.shape)[0],"number"==typeof t?(Hu(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(Hu(a.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Zl.runKernel((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return If(e,n)}}}))}});function Pf(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Of=Pf((function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var a=new n(e),o=t&&t.state,i=a.next;return i.int32=function(){return 4294967296*a.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),Ff=Pf((function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),Bf=Pf((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),zf=Pf((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&(o.x&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),Uf=Pf((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&(o.X&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),Wf=Pf((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),Vf=Pf((function(e){!function(t,r){var a,o=this,i=256,s="random",u=r.pow(i,6),l=r.pow(2,52),c=2*l,f=255;function d(e,n,f){var d=[],g=m(function e(t,n){var r,a=[],o=typeof t;if(n&&"object"==o)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(i):(e=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=o.navigator,r=n&&n.plugins;return[+new Date,o,r,o.screen,v(t)]}}():e,3),d),y=new h(d),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||f||function(e,t,n,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[o=f&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,s=r.S;e--;)t=s[a=f&a+1],n=n*i+s[f&(s[a]=s[o=f&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=d,m(r.random(),t),e.exports){e.exports=d;try{a=n(Object(function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}}}([],Math)}));Vf.alea=Of,Vf.xor128=Ff,Vf.xorwow=Bf,Vf.xorshift7=zf,Vf.xor4096=Uf,Vf.tychei=Wf;var Hf=Vf.alea,Yf=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=Hf(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),Gf=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=1);var a=this;if(this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Hf(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function qf(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Sl(e),new Dl(e,t,n)}var Qf=hf({batchToSpaceND_:function(e,t,n){var r=ef(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return Hu(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Hu(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Hu(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),Zl.runKernel((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),Xf=hf({cast_:function(e,t){var n=ef(e,"x","cast");if(!ul(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Zl.runKernel((function(e){return e.cast(n,t)}),{$x:n},(function(e){return{$x:function(){return e.clone()}}}))}}),Kf=hf({clone_:function(e){var t=ef(e,"x","clone",null);return Zl.runKernel((function(e){return Pl.make(t.shape,{dataId:t.dataId},t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),Jf=hf({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=ef(e,"x","cumsum"),o=uf([t|=0],a.rank),i=a;null!=o&&(i=a.transpose(o));var s=cf(1,a.rank)[0],u=Zl.runKernel((function(e){return e.cumsum(i,s,n,r)}),{permutedX:i},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=o&&(u=u.transpose(o)),u}}),Zf=hf({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=ef(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return Hu(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Hu(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Hu(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),Zl.runKernel((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),$f=hf({expandDims_:function(e,t){void 0===t&&(t=0);var n=ef(e,"x","expandDims",null);Hu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Hu(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),fd(n,r)}}),ed=hf({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=qf([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return md($f(s,0),[n[0],1,1]);if(2===n.length)return md($f($f(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return md($f($f($f(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),td=hf({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=ef(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?a.as2D(1,-1):a,u=Zl.runKernel((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===i?u.as1D():u}}),nd=hf({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=ef(e,"indices","oneHot","int32"),o=a.shape.concat([t]);return a=a.flatten(),Zl.runKernel((function(e){return e.oneHot(a,t,n,r)}),{$indices:a},(function(e){return{$indices:function(){return Sf(a.shape,"float32")}}})).reshape(o)}}),rd=hf({pad_:function(e,t,n){void 0===n&&(n=0);var r=ef(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a=t.map((function(e){return e[0]}));return Zl.runKernel((function(e){return e.pad(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.slice(a,r.shape)}}}))}}),ad=hf({pad1d_:function(e,t,n){return void 0===n&&(n=0),Hu(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),rd(e,[t],n)}}),od=hf({pad2d_:function(e,t,n){return void 0===n&&(n=0),Hu(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),rd(e,t,n)}}),id=hf({pad3d_:function(e,t,n){return void 0===n&&(n=0),Hu(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),rd(e,t,n)}}),sd=hf({pad4d_:function(e,t,n){return void 0===n&&(n=0),Hu(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),rd(e,t,n)}}),ud=hf({rand_:function(e,t,n){var r=Qu(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return Pl.make(e,{values:a},n)}}),ld=hf({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new Yf(t,n,r,!1,a),i=qf(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),cd=hf({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=qf(e,r),i=new Gf(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),fd=hf({reshape_:function(e,t){var n=ef(e,"x","reshape",null);return t=tl(t,n.size),Hu(n.size===Qu(t),(function(){return"new shape and old shape must have the same number of elements."})),Zl.runKernel((function(e){return e.reshape(n,t)}),{$x:n},(function(e){return{$x:function(){return e.reshape(n.shape)}}}))}}),dd=hf({spaceToBatchND_:function(e,t,n){var r=ef(e,"x","spaceToBatchND");return Hu(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Hu(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Hu(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Zl.runKernel((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),hd=hf({squeeze_:function(e,t){var n=ef(e,"x","squeeze");return fd(n,rl(n.shape,t).newShape)}}),pd=hf({stack_:function(e,t){void 0===t&&(t=0);var n=tf(e,"tensors","stack");if(Hu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,o=n[0].dtype;Hu(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Yu(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Hu(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return If(i,t)}}),md=hf({tile_:function(e,t){var n=ef(e,"x","tile",null);return Hu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."})),Zl.runKernel((function(e,r){var a=e.tile(n,t);return r([n]),a}),{$x:n},(function(e,n){var r=n[0];return{$x:function(){var n=Tf(r);if(1===r.rank)for(var a=0;a<t[0];++a)n=n.add(e.slice([a*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(a=0;a<t[0];++a)for(var o=0;o<t[1];++o)n=n.add(e.slice([a*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(a=0;a<t[0];++a)for(o=0;o<t[1];++o)for(var i=0;i<t[2];++i)n=n.add(e.slice([a*r.shape[0],o*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(a=0;a<t[0];++a)for(o=0;o<t[1];++o)for(i=0;i<t[2];++i)for(var s=0;s<t[3];++s)n=n.add(e.slice([a*r.shape[0],o*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}))}}),vd=hf({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new Yf(t,n,r,!0,a),i=qf(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),gd=hf({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=ef(e,"x","unstack");return Hu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length),Zl.runKernel((function(e){return e.unstack(n,t)}),{$x:n},(function(e){return{$x:function(){return pd(e,t)}}}))}});function yd(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function bd(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var o=[],i=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?i.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function wd(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function xd(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Cd(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function _d(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,o=0;o<n.length-1;++o)a*=n[o];var i=e.shape,s=n.slice();s.pop();var u=1;for(o=r;o<e.rank;++o)u*=i[o],s.push(i[o]);var l=bl(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,a,u,l]}function kd(e){return e<=30?e:yl(e,Math.floor(Math.sqrt(e)))}function Sd(e,t,n){for(var r=t.rank>1?t.shape[t.rank-1]:1,a=n.length,o=1,i=r;i<a;++i)o*=n[i];var s=r<1?1:r;return{sliceRank:r,numUpdates:t.size/s,sliceSize:o,strides:bl(n.slice(0,r)).concat([1]),outputSize:Qu(n)}}function Md(e,t,n,r,a,o,i,s,u){if(void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==i)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");for(var l=[],c=[],f=[],d=0;d<e.length;d++)l[d]=Ed(a,t,r,e,d),c[d]=Nd(o,n,r,e,d),u&1<<d&&(c[d]=l[d]+1,f.push(d));var h=new Array(e.length).fill(0);return h=h.map((function(e,t){for(var n=0,a=r[t]||1,o=l[t];!(a>0?o>=c[t]:o<=c[t]);o+=a)n+=1;return n})),[l,h,f]}function Ed(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||null==o)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),Uu(0,o,s-1)}function Nd(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||null==o)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),i>0?Uu(0,o,s):Uu(-1,o,s-1)}function Td(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function Id(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function jd(e){return Zl.customGrad(e)}var Dd=hf({softmax_:function(e,t){void 0===t&&(t=-1);var n=ef(e,"logits","softmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return jd((function(e,n){var r=e.logSumExp([t],!0),a=e.toFloat().sub(r).exp();return n([a]),{value:a,gradFunc:function(e,n){var r=n[0],a=e.mul(r);return a.sub(a.sum([t],!0).mul(r))}}}))(n)}}),Ld=hf({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=ef(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return jd((function(e,n){var r=e.max(t,!0),a=e.sub(r),o=a.toFloat().sub(a.exp().sum(t,!0).log());return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),Ad=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.data.delete(e)},e}();!function(){function e(){}e.prototype.time=function(e){throw new Error("Not yet implemented.")},e.prototype.read=function(e){throw new Error("Not yet implemented.")},e.prototype.readSync=function(e){throw new Error("Not yet implemented.")},e.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},e.prototype.write=function(e,t){throw new Error("Not yet implemented.")},e.prototype.fromPixels=function(e,t){throw new Error("Not yet implemented.")},e.prototype.register=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.memory=function(){throw new Error("Not yet implemented.")},e.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fusedBatchMatMul=function(e,t,n,r,a,o){throw new Error("Not yet implemented")},e.prototype.slice=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s,u){throw new Error("Not yet implemented")},e.prototype.unstack=function(e,t){throw new Error("Not yet implemented")},e.prototype.reverse=function(e,t){throw new Error("Not yet implemented")},e.prototype.concat=function(e,t){throw new Error("Not yet implemented")},e.prototype.neg=function(e){throw new Error("Not yet implemented")},e.prototype.add=function(e,t){throw new Error("Not yet implemented")},e.prototype.addN=function(e){throw new Error("Not yet implemented")},e.prototype.subtract=function(e,t){throw new Error("Not yet implemented")},e.prototype.multiply=function(e,t){throw new Error("Not yet implemented")},e.prototype.realDivide=function(e,t){throw new Error("Not yet implemented")},e.prototype.floorDiv=function(e,t){throw new Error("Not yet implemented")},e.prototype.sum=function(e,t){throw new Error("Not yet implemented")},e.prototype.prod=function(e,t){throw new Error("Not yet implemented")},e.prototype.unsortedSegmentSum=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.argMin=function(e,t){throw new Error("Not yet implemented")},e.prototype.argMax=function(e,t){throw new Error("Not yet implemented")},e.prototype.equal=function(e,t){throw new Error("Not yet implemented")},e.prototype.notEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.less=function(e,t){throw new Error("Not yet implemented")},e.prototype.lessEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.greater=function(e,t){throw new Error("Not yet implemented")},e.prototype.greaterEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},e.prototype.logicalAnd=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalOr=function(e,t){throw new Error("Not yet implemented")},e.prototype.where=function(e){throw new Error("Not yet implemented")},e.prototype.select=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.topk=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.min=function(e,t){throw new Error("Not yet implemented")},e.prototype.minimum=function(e,t){throw new Error("Not yet implemented")},e.prototype.mod=function(e,t){throw new Error("Not yet implemented")},e.prototype.max=function(e,t){throw new Error("Not yet implemented")},e.prototype.maximum=function(e,t){throw new Error("Not yet implemented")},e.prototype.all=function(e,t){throw new Error("Not yet implemented")},e.prototype.any=function(e,t){throw new Error("Not yet implemented")},e.prototype.squaredDifference=function(e,t){throw new Error("Not yet implemented")},e.prototype.ceil=function(e){throw new Error("Not yet implemented")},e.prototype.floor=function(e){throw new Error("Not yet implemented")},e.prototype.round=function(e){throw new Error("Not yet implemented")},e.prototype.sign=function(e){throw new Error("Not yet implemented")},e.prototype.isNaN=function(e){throw new Error("Not yet implemented")},e.prototype.isInf=function(e){throw new Error("Not yet implemented")},e.prototype.isFinite=function(e){throw new Error("Not yet implemented")},e.prototype.pow=function(e,t){throw new Error("Not yet implemented")},e.prototype.exp=function(e){throw new Error("Not yet implemented")},e.prototype.expm1=function(e){throw new Error("Not yet implemented")},e.prototype.log=function(e){throw new Error("Not yet implemented")},e.prototype.log1p=function(e){throw new Error("Not yet implemented")},e.prototype.sqrt=function(e){throw new Error("Not yet implemented")},e.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},e.prototype.square=function(e){throw new Error("Not yet implemented")},e.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},e.prototype.relu=function(e){throw new Error("Not yet implemented")},e.prototype.prelu=function(e,t){throw new Error("Not yet implemented")},e.prototype.elu=function(e){throw new Error("Not yet implemented")},e.prototype.eluDer=function(e,t){throw new Error("Not yet implemented")},e.prototype.selu=function(e){throw new Error("Not yet implemented")},e.prototype.int=function(e){throw new Error("Not yet implemented")},e.prototype.clip=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.abs=function(e){throw new Error("Not yet implemented")},e.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},e.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},e.prototype.softplus=function(e){throw new Error("Not yet implemented")},e.prototype.sin=function(e){throw new Error("Not yet implemented")},e.prototype.cos=function(e){throw new Error("Not yet implemented")},e.prototype.tan=function(e){throw new Error("Not yet implemented")},e.prototype.asin=function(e){throw new Error("Not yet implemented")},e.prototype.acos=function(e){throw new Error("Not yet implemented")},e.prototype.atan=function(e){throw new Error("Not yet implemented")},e.prototype.atan2=function(e,t){throw new Error("Not yet implemented")},e.prototype.sinh=function(e){throw new Error("Not yet implemented")},e.prototype.cosh=function(e){throw new Error("Not yet implemented")},e.prototype.tanh=function(e){throw new Error("Not yet implemented")},e.prototype.asinh=function(e){throw new Error("Not yet implemented")},e.prototype.acosh=function(e){throw new Error("Not yet implemented")},e.prototype.atanh=function(e){throw new Error("Not yet implemented")},e.prototype.erf=function(e){throw new Error("Not yet implemented")},e.prototype.step=function(e,t){throw new Error("Not yet implemented")},e.prototype.conv2d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2D=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPoolBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.avgPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPoolBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.reshape=function(e,t){throw new Error("Not yet implemented")},e.prototype.cast=function(e,t){throw new Error("Not yet implemented")},e.prototype.tile=function(e,t){throw new Error("Not yet implemented")},e.prototype.pad=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.transpose=function(e,t){throw new Error("Not yet implemented")},e.prototype.gather=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.gatherND=function(e,t){throw new Error("Not yet implemented")},e.prototype.scatterND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchToSpaceND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.spaceToBatchND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeBilinear=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeBilinearBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchNormalization=function(e,t,n,r,a,o){throw new Error("Not yet implemented")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){throw new Error("Not yet implemented")},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){throw new Error("Not yet implemented")},e.prototype.multinomial=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.oneHot=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.cumsum=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){throw new Error("Not yet implemented")},e.prototype.fft=function(e){throw new Error("Not yet implemented")},e.prototype.ifft=function(e){throw new Error("Not yet implemented")},e.prototype.complex=function(e,t){throw new Error("Not yet implemented")},e.prototype.real=function(e){throw new Error("Not yet implemented")},e.prototype.imag=function(e){throw new Error("Not yet implemented")},e.prototype.cropAndResize=function(e,t,n,r,a,o){throw new Error("Not yet implemented")},e.prototype.depthToSpace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.split=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.sparseToDense=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fill=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.onesLike=function(e){throw new Error("Not yet implemented")},e.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},e.prototype.linspace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.dispose=function(){throw new Error("Not yet implemented")}}();function Rd(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function Pd(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function Od(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}function Fd(e,t,n,r,a,o,i){void 0===i&&(i="channelsLast");var s,u=Wd(t),l=u[0],c=u[1];if("channelsLast"===i)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return Bd(e,s,n,r,a,o,!1,i)}function Bd(e,t,n,r,a,o,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3];if("channelsLast"===s)l=e[0],c=e[1],f=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],d=e[1],c=e[2],f=e[3]}var h,p=t[0],m=t[1],v=t[3],g=Wd(n),y=g[0],b=g[1],w=Wd(r),x=w[0],C=w[1],_=Hd(p,x),k=Hd(m,C),S=function(e,t,n,r,a,o,i,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a,o){null==a&&(a=Ud(e,t,r));var i=e[1],s=Yd((e[0]-t+2*a)/r+1,o);Hu(Ku(s),(function(){return"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters"}));var u=Yd((i-t+2*a)/r+1,o);return Hu(Ku(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[s,u,1]}([t,n,1],o,0,r,e,s);l=f[0],c=f[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(c-1)*a+i-n),p=Math.floor(d/2),m=d-p,v=Math.floor(h/2);u={top:p,bottom:m,left:v,right:h-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),c=Math.ceil((n-i+1)/a)}return{padInfo:u,outHeight:l,outWidth:c}}(a,c,f,y,b,_,k,o),M=S.padInfo,E=S.outHeight,N=S.outWidth,T=i?v*d:v;return"channelsFirst"===s?h=[l,T,E,N]:"channelsLast"===s&&(h=[l,E,N,T]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:d,outHeight:E,outWidth:N,outChannels:T,padInfo:M,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:k,dilationHeight:x,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function zd(e,t,n,r,a,o,i){void 0===o&&(o=!1),void 0===i&&(i="channelsLast");var s=[-1,-1,-1,-1,-1],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4];if("channelsLast"===i)u=e[0],l=e[1],c=e[2],f=e[3],d=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=e[0],d=e[1],l=e[2],c=e[3],f=e[4]}var h,p=t[0],m=t[1],v=t[2],g=t[4],y=Vd(n),b=y[0],w=y[1],x=y[2],C=Vd(r),_=C[0],k=C[1],S=C[2],M=function(e,t,n,r,a,o,i,s,u,l){var c,f,d,h;if("same"===e){var p=((f=Math.ceil(t/a))-1)*a+s-t,m=((d=Math.ceil(n/o))-1)*o+u-n,v=((h=Math.ceil(r/i))-1)*i+l-r,g=Math.floor(p/2),y=p-g,b=Math.floor(m/2),w=m-b,x=Math.floor(v/2);c={top:b,bottom:w,left:x,right:v-x,front:g,back:y,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);c={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),d=Math.ceil((n-u+1)/o),h=Math.ceil((r-l+1)/i)}return{padInfo:c,outDepth:f,outHeight:d,outWidth:h}}(a,l,c,f,b,w,x,Hd(p,_),Hd(m,k),Hd(v,S)),E=M.padInfo,N=M.outDepth,T=M.outHeight,I=M.outWidth,j=o?g*d:g;return"channelsFirst"===i?h=[u,j,N,T,I]:"channelsLast"===i&&(h=[u,N,T,I,j]),{batchSize:u,dataFormat:i,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:N,outHeight:T,outWidth:I,outChannels:j,padInfo:E,strideDepth:b,strideHeight:w,strideWidth:x,filterDepth:p,filterHeight:m,filterWidth:v,dilationDepth:_,dilationHeight:k,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function Ud(e,t,n,r){void 0===r&&(r=1);var a=Hd(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Wd(e){return"number"==typeof e?[e,e]:e}function Vd(e){return"number"==typeof e?[e,e,e]:e}function Hd(e,t){return t<=1?e:e+(e-1)*(t-1)}function Yd(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Gd(e){var t=Wd(e),n=t[0],r=t[1];return 1===n&&1===r}function qd(e,t){return Gd(e)||Gd(t)}function Qd(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Sf(e.shape),a=e.toFloat(),o=n.complex(a,r);return r.dispose(),a.dispose(),o}if(!ll(e.dtype,t))return Pl.make(e.shape,{dataId:e.dataId},t);if("complex64"===e.dtype){var i=n.real(e);return o=i.cast(t),i.dispose(),o}if("int32"===t)return n.int(e);if("bool"===t){var s=bf(0,e.dtype);return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function Xd(e,t){return Pl.make(t,{dataId:e.dataId},e.dtype)}function Kd(e,t,n){var r=(t-e)/(n-1),a=_l(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return wf(a,"float32")}Object.freeze({castTensor:Qd,reshapeTensor:Xd,linspaceImpl:Kd,upcastType:Hl,axesAreInnerMostDims:nf,combineLocations:rf,computeOutAndReduceShapes:af,expandShapeToKeepDim:of,assertAxesAreInnerMostDims:sf,getAxesPermutation:uf,getUndoAxesPermutation:lf,getInnerMostAxes:cf,getBroadcastDims:Rd,getReductionAxes:Pd,assertAndGetBroadcastShape:Od,assertParamsConsistent:ff,computeOutShape:df,computePool2DInfo:Fd,computeConv2DInfo:Bd,computeConv3DInfo:zd,computeDefaultPad:Ud,tupleValuesAreOne:Gd,eitherStridesOrDilationsAreOne:qd});function Jd(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function Zd(e,t){return{real:e[2*t],imag:e[2*t+1]}}function $d(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function eh(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function th(e,t,n,r,a){for(var o=Array.from(t).map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),i=[],s=0;s<o.length;s++){var u=o[s],l=u.score,c=u.boxIndex;if(l<a)break;for(var f=!1,d=i.length-1;d>=0;--d)if(nh(e,c,i[d])>=r){f=!0;break}if(!f&&(i.push(c),i.length>=n))break}return wf(i,"int32")}function nh(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(s-o)*(u-i),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var m=Math.max(o,l),v=Math.max(i,c),g=Math.min(s,f),y=Math.min(u,d),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(h+p-b)}function rh(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var o=e.slice(r,a);return r[n]+=t,o}))}function ah(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=qf(n,e.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=o[s]%e.shape[s];var u=e.locToIndex(i);a.values[r]=e.values[u]}return a.toTensor()}function oh(e,t,n,r,a){for(var o=t[t.length-1],i=[e.length/o,o],s=i[0],u=i[1],l=al(n,s*r),c=al("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=e.subarray(d,d+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((function(e,t){return t.value-e.value}));var v=f*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[gf(l,b,n),gf(c,b,"int32")]}function ih(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=qf(e,"int32"),o=qf([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=a.indexToLoc(n[r]),s=r*e.length;o.values.set(i,s)}return o.toTensor()}var sh=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},uh=function(e,t){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},lh=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,o=e.inSize,i=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function ch(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function fh(e,t){return 1===t?[e]:ch(e,t)}function dh(){var e,t,n,r,a,o,i,s,u,l;return 2===Fu.getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 0. || val == 0.) ? false : true;\n      }\n    ",u="\n      const float INFINITY = uintBitsToFloat(uint(0x7f800000));\n    ",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function hh(e,t,n){void 0===n&&(n="index");var r=bl(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function ph(e){var t=bl(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var mh="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function vh(e,t,n,r){var a=[];e.forEach((function(e){var t=Qu(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var o,i,s=a.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?yh(e):gh(e);var a=e.shapeInfo.logicalShape,o=t.logicalShape;return a.length<=o.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Rd(e.shapeInfo.logicalShape,t.logicalShape),l=Sh(s),c=s-i,f=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+f[e+c]+" = 0;"})).join("\n");var d;d=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+c]})).join(", ");var h="return outputValue;",p=1===Qu(e.shapeInfo.logicalShape),m=1===Qu(t.logicalShape);if(1!==i||p||m){if(p&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,g=i-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+d+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Xu(i,o))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=Sh(u),f=Rd(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords."+h[e+d]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+d]})).join(", "),"\n    float "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=dh(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    #define isnan(value) isnan_custom(value)\n    "+e.defineSpecialNaN+"\n    bvec4 isnan_custom(vec4 val) {\n      return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n    }\n\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+bh+"\n    "+wh+"\n    "+xh+"\n  "}(c);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Xu(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),o=a,i="",s="b, r, c",u=2;u<e.length-1;u++)i="\n      int b"+u+" = index / "+(o*=e[e.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,o,i}(t.logicalShape,l),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return Xu(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=hh(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=hh(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=hh(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=hh(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(d+=Ch),[d,f,i,s,o,u,n].join("\n")}function gh(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===a&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+_h(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+kh(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===o&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=_h(t);return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+o+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&Xu(t,a)){var o=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+o+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=rl(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n      "+gh(Mh(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Eh(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+kh(e)+"\n      }\n    ";var c=a[0],f=a[1],d=_h(n);return 1===f?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+c+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],o=t[2],i=rl(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n        "+gh(Mh(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Eh(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+o+", 1)));\n        "+kh(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,f=c[0],d=c[1],h=e.shapeInfo.flatOffset;return d===a&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===o&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+o+" + depth + "+_h(n)+";\n        vec2 uv = uvFromFlat("+f+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],o=t[2]*a,i=t[1]*o,s=rl(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+gh(Mh(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Eh(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+o+", "+a+", 1)));\n        "+kh(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1];return h===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===a&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+o+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+h+", index + "+_h(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=rl(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+gh(Mh(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Eh(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+o+", "+a+")) +\n          depth3;\n        "+kh(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];return p===s&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+o+" +\n          depth2 * "+a+" + depth3 + "+_h(n)+";\n      vec2 uv = uvFromFlat("+h+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=rl(t),o=a.newShape,i=a.keptDims;if(o.length<t.length)return"\n      "+gh(Mh(e,o))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Eh(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,f=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+kh(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],m=h[1];return m===f&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+_h(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function yh(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+dh().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=dh();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=a[0],i=a[1],s=dh();if(null!=a&&Xu(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+yh(Mh(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+Eh(["b","row","col"],[1,2])+");\n        }\n      ";var i=o[0],s=o[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+dh().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=i[0],u=i[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * "+c+" + (row / 2) * "+l+" + (col / 2)",h=2;h<n-1;h++)f="int b"+h+", "+f,d="b"+h+" * "+(c*=t[n-h-1])+" + "+d;return"\n    vec4 "+a+"("+f+") {\n      int index = "+d+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+dh().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var bh="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",wh="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",xh="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Ch="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function _h(e){return"offset"+e}function kh(e){var t=e.name,n=Qu(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Sh(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Mh(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Eh(e,t){return t.map((function(t){return e[t]})).join(", ")}var Nh=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,Hu(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=Sh(l),f=fh("coords",l);if(1===o){var d=Sh(s=l+1);i="\n        "+d+" sourceLocR = "+d+"("+f.join()+", 0);\n        ++"+f[l-1]+";\n        "+d+" sourceLocG = "+d+"("+f.join()+", 0);\n        ++"+f[l-2]+";\n        "+d+" sourceLocA = "+d+"("+f.join()+", 0);\n        --"+f[l-1]+";\n        "+d+" sourceLocB = "+d+"("+f.join()+", 0);\n        --"+f[l-2]+";"}else s=l,i="\n        "+c+" sourceLocR = coords;\n        ++"+f[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+f[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+f[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+f[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map((function(e){return"int "+e})),v=fh("sourceLocR",s-1).concat("inIdx.r"),g=fh("sourceLocG",s-1).concat("inIdx.g"),y=fh("sourceLocB",s-1).concat("inIdx.b"),b=fh("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",_=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+_+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+f[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+f[l-2]+" < "+(u[l-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Th=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ih=function(e,t,n,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Od(e,t),Od(e,n);var i="0.0";null!=r&&(Od(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=a&&(Od(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},jh=function(e,t,n,r,a,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],Od(e,t),Od(e,n);var i="vec4(0.0)";null!=r&&(Od(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(Od(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Dh=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Od(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Lh="return a + b;",Ah="return a - b;",Rh="return a * b;",Ph=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Od(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Oh=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=Od(t,n);var a=this.outputShape.length,o="";if(r)if(0===a||1===Qu(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+Sh(a)+" coords = getOutputCoords();\n        ",1===a)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=fh("coords",a);o+="\n            bool nextRowOutOfBounds =\n              ("+i[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+i[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},Fh=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, min, max));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"min"),n.maxLoc=r.getUniformLocationNoThrow(a,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),Bh=function(){function e(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float min;\n      uniform float max;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(min), vec4(max)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"min"),n.maxLoc=r.getUniformLocationNoThrow(a,"max")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),zh=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Uh=function(e){this.outputShape=[],this.outputShape=df(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var o=t.length,i=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Wh=function(e,t){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=df(e,t);var n=this.outputShape,r=n.length,a=Sh(r),o=fh("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c="vec2("+i.slice(-2).join()+")",f=i.join(),d="if ("+l+" < "+s[0]+")\n          return getChannel(getT0("+f+"), "+c+");";for(u=1;u<s.length;u++){var h=s[u-1];d+="\n        else if ("+l+" < "+s[u]+") {\n          "+l+" -= "+h+";\n          return getChannel(getT"+u+"("+f+"), "+c+");\n        }"}var p=s.length;d+="\n        else {\n          "+l+" -= "+s[s.length-1]+";\n          return getChannel(getT"+p+"("+f+"), "+c+");\n        }",this.userCode="\n      float getValue("+i.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n        if (++"+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n        if (++"+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            --"+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "},Vh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Hh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Yh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Gh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qh=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Qh=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Xh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,l=4*Math.floor(e.inChannels/4),c=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+a+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+o+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+i+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Kh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,f=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+o+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Jh=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+c+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Zh=function(e){this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=e.outShape;for(var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,f=c,d="int xR; int xC; int xCOffset;",h=0;h<l;h++)for(var p=0;p<c;p++)d+="\n          vec4 xTexelR"+h+"C"+2*p+" = vec4(0.);\n          vec4 wR"+h+"C"+p+" = vec4(0.);\n          vec4 xR"+h+"C"+p+" = vec4(0.);";for(h=0;h<l;h++)for(var m=0;m<f;m++){if(d+="\n          xR = xRCorner + "+h*s+";\n          xC = xCCorner + "+(p=2*m)*u+";\n        ",1===i){if(p<c&&(d+=a%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+t+" && xCOffset >= 0 && xCOffset < "+n+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+h+"C"+p+" = vec4(previous.zw, xTexelR"+h+"C"+p+".xy);\n                } else {\n                  xR"+h+"C"+p+" = vec4(0, 0, xTexelR"+h+"C"+p+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+t+" && xC >= 0 && xC < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = xTexelR"+h+"C"+p+";\n              ",p+1<c)){var v=a%2==0?Wu(u):u;u%2==0&&a%2==1||u%2!=0&&a%2!=1?(d+="\n                  xCOffset = xC + "+a%2+" + "+v+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",u>1&&(d+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+t+" &&\n                      xCOffset >= 0 && xCOffset < "+n+") {\n                      xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+h+"C"+p+" = vec4(0.);\n                    }\n                  "),d+="\n                  xR"+h+"C"+(p+1)+" = vec4(\n                    xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".xy);\n                "):d+="\n                  xCOffset = xC + "+v+";\n\n                  if(xR >= 0 && xR < "+t+" &&\n                    xCOffset >= 0 && xCOffset < "+n+") {\n                    xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+h+"C"+(p+1)+" = xTexelR"+h+"C"+(p+2)+";\n                "}}else p<c&&(d+="\n              if(xR >= 0 && xR < "+t+") {\n            ",a%2==1?(d+="\n                xCOffset = xC + 1 - "+i+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+n+") {\n                  xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+h+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = vec4(\n                  xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".zw);\n              ",p+1<c&&(d+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+i+";\n                  if(xCOffset >= 0 && xCOffset < "+n+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+h+"C"+(p+1)+" = vec4(xTexelR"+h+"C"+(p+2)+".xy, final.xy);\n                ")):(d+="\n                if(xC >= 0 && xC < "+n+") {\n                  xTexelR"+h+"C"+p+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+h+"C"+p+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+i+";\n                if(xCOffset >= 0 && xCOffset < "+n+") {\n                  xTexelR"+h+"C"+(p+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+h+"C"+(p+2)+" = vec4(0.);\n                }\n\n                xR"+h+"C"+p+" = vec4(\n                  xTexelR"+h+"C"+p+".xy, xTexelR"+h+"C"+(p+2)+".xy);\n              ",p+1<c&&(d+="\n                  xR"+h+"C"+(p+1)+" = vec4(\n                    xTexelR"+h+"C"+p+".zw, xTexelR"+h+"C"+(p+2)+".zw);\n                ")),d+="}");p<c&&(d+="\n            vec4 wTexelR"+h+"C"+p+" = getW("+h+", "+p+", d1, q);\n            wR"+h+"C"+p+" = vec4(wTexelR"+h+"C"+p+".xz, wTexelR"+h+"C"+p+".xz);\n          ",p+1<c&&(d+="\n              vec4 wTexelR"+h+"C"+(p+1)+" = getW("+h+", "+(p+1)+", d1, q);\n              wR"+h+"C"+(p+1)+" =\n                vec4(wTexelR"+h+"C"+(p+1)+".xz, wTexelR"+h+"C"+(p+1)+".xz);"))}for(h=0;h<l;h++)for(p=0;p<c;p++)d+="result += xR"+h+"C"+p+" * wR"+h+"C"+p+";";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+a+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 result = vec4(0.);\n\n        "+d+"\n\n        setOutput(result);\n      }\n    "},$h=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var d="bilinear"===r?1:0,h=[i-1+".0",s-1+".0"],p=h[0],m=h[1],v=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],w=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],C=w[1],_=w[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},ep=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Sh(r)+" coords = getOutputCoords();\n        int end = "+tp(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+tp(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function tp(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var np,rp,ap=function(e,t){this.variableNames=["A"];var n=dh();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+hh(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},op=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;var n=dh();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+hh(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},ip=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),sp=function(e){this.variableNames=["A"];var t=dh();this.outputShape=e,this.userCode="\n      "+mh+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},up=function(e){this.variableNames=["A"],this.usesPackedTextures=!0;var t=dh();this.outputShape=e,this.userCode="\n      "+mh+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},lp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=dh(),a=t[0],o=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+ph(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex /= 4;\n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},cp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=dh(),a=t[0],o=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex /= 4;\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+ph(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},fp=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},dp=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),hp=function(e){this.variableNames=["A"];var t=dh(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},pp=function(e){this.variableNames=["A"];var t=dh(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},mp=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=Sh(this.rank),o=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=0;o<e.length;o++)o===t?a.push("int(getIndices("+r[o]+"))"):a.push(""+r[o]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},vp=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Sh(t.length),a=Sh(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function gp(e,t){return[t,e]}function yp(e){var t=Qu(e);return Zu(Math.ceil(t/4))}function bp(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function wp(e,t){var n=dh();return uc(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function xp(e,t){return vc(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Cp(e,t){return gc(e,t,new Uint16Array([0,1,2,2,1,3]))}function _p(e,t){var n,r,a,o,i,s,u,l,c=e;return 2===Fu.getNumber("WEBGL_VERSION")?(n=c.R32F,r=c.R16F,a=c.RGBA16F,o=c.RGBA32F,i=c.RED,s=4,u=1,l=c.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=c.RGBA,i=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l}}function kp(e,t,n,r,a,o,i){bc(n,r);var s=yc(e,t),u=e.TEXTURE_2D;return ac(e,t,(function(){return e.bindTexture(u,s)})),ac(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),ac(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),ac(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),ac(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),ac(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,o,i,null)})),ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function Sp(e,t,n,r,a){var o=gp(n,r);return kp(e,t,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function Mp(e,t,n,r,a){var o=gp(n,r);return kp(e,t,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function Ep(e,t,n,r,a){var o=gp(n,r);return kp(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Np(e,t,n,r,a){var o=bp(n,r);return kp(e,t,o[0],o[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Tp(e,t,n,r,a){var o=bp(n,r);return kp(e,t,o[0],o[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function Ip(e,t,n,r){return ac(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),xc(e,t,n,"clipSpacePos",r,3,20,0)&&xc(e,t,n,"uv",r,2,20,12)}function jp(e,t,n,r,a,o,i){var s,u,l;ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),o instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(o),ac(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,u,s)})),ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Dp(e,t,n,r){ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?ac(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):ac(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),ac(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Lp(e,t,n,r,a){var o=e.createBuffer();ac(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)}));var i=16*n*r;return ac(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),ac(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),ac(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),o}function Ap(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function Rp(e,t,n,r,a){var o=gp(n,r),i=o[0],s=o[1],u=new Uint8Array(n*r*4);return ac(e,t,(function(){return e.readPixels(0,0,i,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function Pp(e,t,n,r,a,o,i,s){var u=e,l=new Float32Array(function(e,t){var n=bp(e,t);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Op(e,t,n,r){var a=new Float32Array(n*r*4);return ac(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(np||(np={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(rp||(rp={}));var Fp=Object.freeze({createVertexShader:wp,createVertexBuffer:xp,createIndexBuffer:Cp,getTextureConfig:_p,createFloat32MatrixTexture:Sp,createFloat16MatrixTexture:Mp,createUnsignedBytesMatrixTexture:Ep,createPackedMatrixTexture:Np,createFloat16PackedMatrixTexture:Tp,bindVertexProgramAttributeStreams:Ip,uploadDenseMatrixToTexture:jp,uploadPixelDataToTexture:Dp,createBufferFromOutputTexture:Lp,downloadFloat32MatrixFromBuffer:Ap,downloadByteEncodedFloatMatrixFromOutputTexture:Rp,downloadPackedMatrixFromBuffer:Pp,downloadMatrixFromPackedOutputTexture:Op}),Bp=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Fu.getNumber("WEBGL_VERSION");null!=e?(this.gl=e,nc(t,e)):this.gl=rc(t),1===Fu.getNumber("WEBGL_VERSION")?(this.textureFloatExtension=sc(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),Fu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=sc(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=sc(this.gl,this.debug,"EXT_color_buffer_float"),this.vertexBuffer=xp(this.gl,this.debug),this.indexBuffer=Cp(this.gl,this.debug),this.framebuffer=wc(this.gl,this.debug),this.textureConfig=_p(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Fu.getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;ac(t,this.debug,(function(){return t.finish()})),ac(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),ac(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),ac(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),ac(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),ac(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Sp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Mp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Ep(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Dp(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),jp(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Tp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Np(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Ec(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ac(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return Rp(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,o){return Pp(this.gl,e,0,0,0,a,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return Ap(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Lp(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Fu.getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return Op(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=lc(t,this.debug,e),r=wp(t,this.debug),a=hc(t,this.debug);return ac(t,this.debug,(function(){return t.attachShader(a,r)})),ac(t,this.debug,(function(){return t.attachShader(a,n)})),pc(t,this.debug,a),this.debug&&mc(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=Ip(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&ac(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&mc(this.gl,this.debug,this.program),ac(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?_c(this.gl,this.debug,e,t):kc(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),ac(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Sc(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=bp(t,n),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&mc(this.gl,this.debug,this.program),Nc(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),ac(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),ac(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=sc(this.gl,this.debug,2===Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Au(this,void 0,void 0,(function(){var t=this;return Ru(this,(function(n){switch(n.label){case 0:return[4,el((function(){return t.disposed||t.isQueryAvailable(e,Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||el((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Mc(this.gl,this.debug,e,this.framebuffer),this.debug&&Nc(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Mc(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Nc(this.gl)):Ec(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Mc(r,this.debug,e,this.framebuffer),this.debug&&Nc(r),this.outputTexture=e,ac(r,this.debug,(function(){return r.viewport(0,0,t,n)})),ac(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),ac(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function zp(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!Xu(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match");if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Xu(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}}))}var Up=function(e,t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;var r=n.filterWidth,a=n.inChannels,o=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=s.left,d=s.top,h=a*r,p=dh();this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            int blockIndex = rc.y + col;\n            int pos = rc.x + row;\n\n            if(blockIndex >= "+e[1]+" || pos >= "+e[0]+") continue;\n\n            int offsetY = int(blockIndex / ("+u+")) * "+i+" - "+d+";\n            int d0 = offsetY + "+c+" * (pos / "+h+");\n\n            if(d0 >= "+t[0]+" || d0 < 0) continue;\n\n            int offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+f+".);\n            int d1 = offsetX + "+l+" * (int(mod(float(pos), "+h+".) / "+a+".));\n\n            if(d1 >= "+t[1]+" || d1 < 0) continue;\n\n            vec2 innerDims = vec2(d1, int(mod(float(pos), "+a+".)));\n            result[row * 2 + col] = getChannel(getA(d0, int(innerDims.x),\n                                              int(innerDims.y)), innerDims);\n          }\n        }\n\n        "+p.output+" = result;\n      }\n    "},Wp=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},Vp=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},Hp=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0;var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},Yp=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=a-1-e.padInfo.top,s=o-1-e.padInfo.left,u=a*o-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Gp=function(e,t,n,r,a,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===o&&(o=null),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=t;var i=n?e[1]:e[2],s=Math.ceil(i/2),u=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",h="";o&&(d="vec4 activation(vec4 x) {\n        "+o+"\n      }",h="result = activation(result);");var p=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          result += ("+c[0]+" * "+f[0]+") + ("+c[1]+" * "+f[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+p+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},qp=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),Qp=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Xp=function(e){this.variableNames=["A"],this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=fh("rc",t),r=Sh(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),i=2;i<e;i++)o=t[t.length-1-i]+","+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},Kp=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=Sh(r),o=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+o+");\n      "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Jp=function(e,t,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=Sh(r),o=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=fh("rc",r),u=fh("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=1===r?2:4;p<m;p++)h+="\n        "+f[p]+"\n        if ("+d+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+o+");\n      const "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},Zp=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,a=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,h="0.0";if(d||(h="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+o+");\n        const ivec2 pads = ivec2("+c+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(p="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+o+");\n      const ivec2 pads = ivec2("+c+", "+f+");\n      const float initializationValue = "+h+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+h+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===v)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+p+");\n      }\n    "}},$p=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=Math.ceil(a/n);this.outputShape=[r,o];var i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(i="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(i="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},em=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+hh(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+ph(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},tm=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},nm=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},rm=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},am=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},om=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},im=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=Sh(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},sm=function(e,t){this.variableNames=["x"],this.usesPackedTextures=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=fh("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Sh(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},um=function(e,t,n,r,a,o,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Sh(a.length),u=Sh(o.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var d="getUpdates("+f+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},lm=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,i=o*Math.ceil(a/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var f="";a%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},cm=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&i.push(""+o[u]);r=i.join(),a=s.join()}var l=Sh(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},fm=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Sh(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return dm.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+dm[t]+" = start["+t+"] + coords."+dm[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),dm=["x","y","z","w","u","v"],hm=function(){function e(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var t=Sh(this.rank),n=fh("coords",this.rank),r=fh("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+a+")",i="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+" \n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),pm=function(e,t,n,r){this.variableNames=["x"];var a=n.filter((function(e,t){return-1===r.indexOf(t)}));this.outputShape=a;var o=n.length,i=Sh(n.length),s=Sh(a.length),u="";if(1===o)u="coords * strides + begin";else{var l=0;u=n.map((function(e,t){return-1===r.indexOf(t)?(l++,1===a.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(l-1)+"] * strides["+t+"] + begin["+t+"]"):"begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},mm=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=vm(t,n),o=gm(e,a,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[o].shift();return this.usedTextures[o].push(i),i}return this.numUsedTextures++,this.log(),a===rp.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===rp.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===rp.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===rp.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===rp.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=gm(t,vm(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],i=o.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function vm(e,t){if(e===np.UPLOAD)return rp.PACKED_2X2_FLOAT32;if(e===np.RENDER||null==e)return t?Fu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?rp.PACKED_2X2_FLOAT32:rp.PACKED_2X2_FLOAT16:Fu.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?rp.UNPACKED_FLOAT32:rp.UNPACKED_FLOAT16;if(e===np.DOWNLOAD||e===np.PIXELS)return rp.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function gm(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var ym=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=Sh(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},bm=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=Sh(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},wm=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=Sh(this.rank),o=ch("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=o[r];var s="vec2("+i.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},xm=1.7580993408473768,Cm=1.0507009873554805,_m=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},km="if (isnan(x)) return x;",Sm=km+"\n  return (x < 0.0) ? 0.0 : x;\n",Mm="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+xm+";\n  float scale = "+Cm+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",Em="return exp(x);",Nm=km+"\n  return sin(x);\n",Tm=km+"\n  return cos(x);\n",Im=km+"\n  return atan(x);\n",jm=km+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Dm=km+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",Lm="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Am=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Rm=function(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;var t=e.length,n=fh("rc",t),r=Sh(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},Pm={},Om=function(){function e(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!Fu.getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var t=rc(Fu.getNumber("WEBGL_VERSION"));this.binaryCache=((n=Fu.getNumber("WEBGL_VERSION"))in Pm||(Pm[n]={}),Pm[n]),this.gpgpu=new Bp(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var n;this.textureManager=new mm(this.gpgpu),this.numMBBeforeWarning=null==Fu.global.screen?1024:Fu.global.screen.height*Fu.global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Ad(this,Zl)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(Fu.getBool("IS_BROWSER")){if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e.data instanceof Uint8Array))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(null==this.fromPixels2DContext){if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.browser.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixels2DContext=document.createElement("canvas").getContext("2d")}this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),e=this.fromPixels2DContext.canvas}}var a,o,i=this.makeTensorHandle(n,"int32");if(this.texData.get(i.dataId).usage=np.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(i.dataId),e),Fu.getBool("WEBGL_PACK")){a=new pp(r);var s=this.makePackedTensor(a.outputShape,i.dtype);o=this.compileAndRun(a,[i],s)}else a=new hp(r),o=this.compileAndRun(a,[i]);return this.disposeData(i.dataId),o},e.prototype.makeTensorHandle=function(e,t){var n={};return this.register(n,e,t),{dataId:n,shape:e,dtype:t}},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");if(Fu.getBool("DEBUG"))for(var n=0;n<t.length;n++){var r=t[n];if(!oc(r))throw Error("The value "+r+" cannot be represented on this device.")}var a=this.texData.get(e);if("complex64"===a.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.releaseGPUData(e),a.usage=np.UPLOAD,a.values=t},e.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,o=t.slice,i=t.shape;if(null!=o){var s=new _m(i,"return x;"),u=this.compileAndRun(s,[{dataId:e,shape:i,dtype:r}]),l=this.readSync(u.dataId);return u.dispose(),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var c,f,d=null!=this.activeTimers;return d&&(c=performance.now()),f="complex64"===r?Jd(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),d&&(this.downloadWaitMs+=performance.now()-c),this.convertAndCacheOnCPU(e,f)},e.prototype.read=function(e){return Au(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x;return Ru(this,(function(C){switch(C.label){case 0:if(this.pendingRead.has(e))return n=this.pendingRead.get(e),[2,new Promise((function(e){return n.push(e)}))];if(r=this.texData.get(e),a=r.values,o=r.shape,i=r.slice,s=r.dtype,u=r.complexTensors,null!=i)return l=new _m(o,"return x;"),c=this.compileAndRun(l,[{dataId:e,shape:o,dtype:s}]),f=this.read(c.dataId),c.dispose(),[2,f];if(null!=a)return[2,this.convertAndCacheOnCPU(e)];if(!Fu.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Fu.getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==s&&Fu.get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(e),e=h.dataId,p=this.texData.get(h.dataId),d=(t=this.gpgpu).createBufferFromTexture.apply(t,[p.texture].concat(yp(o)))),this.pendingRead.set(e,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return v=C.sent(),g=v[0],y=v[1],m=Jd(g,y),[3,5];case 4:null==d?m=this.getValuesFromTexture(e):(b=Qu(o),m=this.gpgpu.downloadFloat32MatrixFromBuffer(d,b),this.disposeData(e)),C.label=5;case 5:return w=this.convertAndCacheOnCPU(e,m),x=this.pendingRead.get(e),this.pendingRead.delete(e),x.forEach((function(e){return e(w)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,w]}}))}))},e.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),a=r.shape,o=r.dtype,i=r.isPacked,s=Qu(a);if(Fu.getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),l=this.texData.get(u.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[l.texture].concat(yp(a))).subarray(0,s);return this.disposeData(u.dataId),c}var f=Fu.getBool("WEBGL_PACK")&&!0===i,d=f?Ac(a):a,h=this.makeTensorHandle(d,"float32");h.size=Qu(a),this.texData.get(h.dataId).usage=np.DOWNLOAD;var p=Xc((function(){var t=f?new up(d):new sp(d);return n.compileAndRun(t,[{shape:d,dtype:o,dataId:e}],h,null)})),m=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,s);return this.disposeData(h.dataId),v},e.prototype.time=function(e){return Au(this,void 0,void 0,(function(){var t,n,r,a,o,i,s;return Ru(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=qu(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=qu(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(a)];case 1:return i=u.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:Vu(i),getExtraProfileInfo:function(){return i.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){return Fu.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}},e.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getCPUBackend=function(){return Fu.getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Zl.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(e,t){var n=this.makeOutputArray(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Zl.keep(e.clone()),imag:Zl.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Qu(n))return gf([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=Td(e.shape,t,n);if(r||!a){var o=Fu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hm(n):new fm(n),i=o.getCustomSetupFunc(t);return this.compileAndRun(o,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},e.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=Pl.make(n,{},e.dtype,this),o=this.texData.get(a.dataId);Object.assign(o,r),o.shape=n,o.dtype=e.dtype;var i=Id(t,e.strides);r.slice&&(i+=r.slice.flatOffset),o.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,s+1),a},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s,u){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r,a,o,i,s,u);var l=Md(e.shape,t,n,r,a,o,i,s,u),c=l[0],f=l[1],d=l[2],h=f.filter((function(e,t){return-1===d.indexOf(t)}));if(h.some((function(e){return 0===e})))return gf([],h);var p=new pm(c,r,f,d);return this.compileAndRun(p,[e])},e.prototype.reverse=function(e,t){var n=Fu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sm(e.shape,t):new im(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Fu.getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(e.length/2),r=this.concat(e.slice(0,n),t),a=this.concat(e.slice(n),t);return this.concat([r,a],t)}if(Fu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var o=new Wh(e.map((function(e){return e.shape})),t);return this.compileAndRun(o,e)}var i=df(e.map((function(e){return e.shape})),t),s=e.map((function(e){return e.as2D(-1,Qu(e.shape.slice(t)))})),u=new Uh(s.map((function(e){return e.shape})));return this.compileAndRun(u,s).reshape(i)},e.prototype.neg=function(e){var t=new _m(e.shape,"return -x;");return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===a||1===o)&&i>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===o?e:e.as3D(s,i,1),l=1===o?2:1,c=1===o?t.as3D(s,1,i):t;return this.multiply(u,c).sum(l,!0)}var f=Hl(e.dtype,t.dtype),d=new Gp(e.shape,[s,a,o],n,r),h=this.makePackedTensor(d.outputShape,f);return this.compileAndRun(d,[e,t],h)},e.prototype.fusedBatchMatMul=function(e,t,n,r,a,o){var i=n?e.shape[2]:e.shape[1],s=r?t.shape[1]:t.shape[2],u=e.shape[0],l=Hl(e.dtype,t.dtype),c=new Gp(e.shape,[u,i,s],n,r,!!a,o?function(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?Lm:Sm;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}(o,!0):null),f=this.makePackedTensor(c.outputShape,l),d=[e,t];return a&&d.push(a),this.compileAndRun(c,d,f)},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new Dh("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new Dh("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(a,i),u=this.compileAndRun(o,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Rh,e.dtype);var c=new Ph(Rh,e.shape,t.shape),f=this.makeOutputArray(c.outputShape,e.dtype);return this.compileAndRun(c,[e,t],f)},e.prototype.batchNormalization=function(e,t,n,r,a,o){var i=[e,t,n],s=null;null!=o&&(s=o.shape,i.push(o));var u=null;if(null!=a&&(u=a.shape,i.push(a)),Fu.getBool("WEBGL_PACK_NORMALIZATION")){var l=new jh(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var c=new Ih(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){var o=Fu.getBool("WEBGL_PACK_NORMALIZATION")?new Hp(e.shape,t,n,r,a):new Wp(e.shape,t,n,r,a);return this.compileAndRun(o,[e])},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){var s=new Vp(t.shape,r,a,o,i);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){if("string"===e.dtype)return ah(qf(e.shape,e.dtype,this.readSync(e.dataId)),t);var n=new ym(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=Fu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jp(e.shape,t,n):new Kp(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Fu.getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wm(e.shape,t):new bm(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new mp(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){Hu(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=yd(e.shape,t,r),o=bd(a.length,t.length),i=wd(e.shape,t,r),s=xd(n,t.length),u=Cd(i,n,t.length);return e.reshape(a).transpose(o).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){Hu(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=yd(i.shape,t,r,!1),u=bd(s.length,t.length,!1),l=wd(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],o=kd(a),i=new $p({windowSize:o,inSize:a,batchSize:r},t),s=i.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],n);return this.compileAndRun(i,[e],c),1===c.shape[1]?c:this.reduce(c,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var o=kd(a),i=new lh({windowSize:o,inSize:a,batchSize:r},t,null==n),s=i.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],"int32"),f=[e];return null!=n&&f.push(n),this.compileAndRun(i,f,c),1===c.shape[1]?c:this.argReduce(e,t,c)},e.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=kd(r[r.length-1]),o=new Nh(r,a,t,null==n),i=this.makePackedTensor(o.outputShape,"int32"),s=null==n?[e]:[e,n];return this.compileAndRun(o,s,i),i.rank===e.rank?this.argReducePacked(e,t,i):i},e.prototype.sum=function(e,t){sf("sum",t,e.rank);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a),i=Yl(e.dtype);return this.reduce(o,"sum",i).reshape(r)},e.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a),i=Yl(e.dtype);return this.reduce(o,"prod",i).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=uf([r],e.rank),o=e;null!=a&&(o=e.transpose(a),r=cf(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}(o.shape,r,n),s=Qu([o.shape[r]]),u=o.as2D(-1,s),l=Yl(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=a&&(c=c.transpose(lf(a))),c},e.prototype.segOpCompute=function(e,t,n,r,a){var o=e.shape[0],i=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=yl(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=yl(e,n+1);return n}(i,a),u=new lm({windowSize:s,inSize:i,batchSize:o,numSegments:a},t),l=u.outputShape,c=l[0],f=l[1],d=this.makeOutputArray([c,f],r);return this.compileAndRun(u,[e,n],d),d.shape[1]===a?d:(n=Ef(0,a).tile([i/s]),this.segOpCompute(d,t,n,r,a))},e.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(sf("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Fu.getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=af(e.shape,r),o=a[0],i=Qu(a[1]),s=e.as2D(-1,i);return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},e.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},e.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new ep(e.shape,n,r);return this.compileAndRun(a,[e])},e.prototype.equal=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Ph("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Ph("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Ph("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Ph("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Ph("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Ph("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new _m(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Ph("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Ph("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new cm(e.rank,t.shape,t.rank),a=this.makeOutputArray(r.outputShape,Hl(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],a)},e.prototype.where=function(e){Jc("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return ih(e.shape,t)},e.prototype.topk=function(e,t,n){return oh(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){sf("min",t,e.rank);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a);return this.reduce(o,"min",o.dtype).reshape(r)},e.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ph("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ph("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);sf("max",t,e.rank);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a);return this.reduce(o,"max",o.dtype).reshape(r)},e.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ph("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){sf("all",t,e.rank);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a);return this.reduce(o,"all",o.dtype).reshape(r)},e.prototype.any=function(e,t){sf("any",t,e.rank);var n=af(e.shape,t),r=n[0],a=Qu(n[1]),o=e.as2D(-1,a);return this.reduce(o,"any",o.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("return (a - b) * (a - b);",e.shape,t.shape):new Ph("return (a - b) * (a - b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(b.x == 0.0) {\n    result.x = NAN;\n  } else if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(b.y == 0.0) {\n    result.y = NAN;\n  } else if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(b.z == 0.0) {\n    result.z = NAN;\n  } else if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(b.w == 0.0) {\n    result.w = NAN;\n  } else if(a.w == b.w) {\n    result.w = 1.;\n  }\n  \n  return result;\n","float32",!0);var n=new Ph("\nif (b == 0.0) {\n  return NAN;\n} \nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Ph("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Lh);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Hl(e.dtype,t.dtype);if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Lh,n);var r=new Ph(Lh,e.shape,t.shape),a=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],a)},e.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var o=new Oh(n,e.shape,t.shape,a),i=this.makePackedTensor(o.outputShape,r);return this.compileAndRun(o,[e,t],i)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),o=this.texData.get(t.dataId),i=[[a.complexTensors.real,o.complexTensors.real],[a.complexTensors.imag,o.complexTensors.imag]].map((function(a){var o=a[0],i=a[1],s=r.makeComplexComponentTensorHandle(e,o),u=r.makeComplexComponentTensorHandle(t,i),l=new Ph(n,e.shape,t.shape),c=r.makeOutputArray(l.outputShape,Hl(o.dtype,i.dtype));return r.compileAndRun(l,[s,u],c)})),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Fu.get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return Hl(e,t)})),o=e.map((function(e){return e.shape})),i=Fu.getBool("WEBGL_PACK"),s=i?new uh(e[0].shape,o):new sh(e[0].shape,o),u=i?this.makePackedTensor(s.outputShape,a):this.makeOutputArray(s.outputShape,a);return this.compileAndRun(s,e,u)},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Ah);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Hl(e.dtype,t.dtype);if(Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Ah,e.dtype);var r=new Ph(Ah,e.shape,t.shape),a=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],a)},e.prototype.pow=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new Oh("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ph("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),a=Hl(e.dtype,t.dtype),o=n?this.makePackedTensor(r.outputShape,a):this.makeOutputArray(r.outputShape,a);return this.compileAndRun(r,[e,t],o)},e.prototype.ceil=function(e){var t=new _m(e.shape,"return ceil(x);");return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new _m(e.shape,"return floor(x);");return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new _m(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},e.prototype.isNaN=function(e){var t=new _m(e.shape,"return float(isnan(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isInf=function(e){var t=new _m(e.shape,"return float(isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isFinite=function(e){var t=new _m(e.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.round=function(e){var t=new _m(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t;return t=Fu.getBool("WEBGL_PACK")?new Am(e.shape,Em):new _m(e.shape,Em),this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new _m(e.shape,"return exp(x) - 1.0;");return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t;return t=Fu.getBool("WEBGL_PACK")?new Am(e.shape,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n"):new _m(e.shape,"if (x < 0.0) return NAN;\n  return log(x);"),this.compileAndRun(t,[e])},e.prototype.log1p=function(e){var t=new _m(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new _m(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new _m(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new _m(e.shape,"return x * x;");return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new _m(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t;return t=Fu.getBool("WEBGL_PACK")?new Am(e.shape,Lm):new _m(e.shape,Sm),this.compileAndRun(t,[e])},e.prototype.prelu=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",e.shape,t.shape):new Ph("return (a < 0.) ? b * a : a;",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.elu=function(e){var t=new _m(e.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Ph("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new _m(e.shape,Mm);return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new _m(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r,a=(r=Fu.getBool("WEBGL_PACK_CLIP")?new Bh(e.shape):new Fh(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},e.prototype.abs=function(e){var t=new _m(e.shape,"return abs(x);");return this.compileAndRun(t,[e])},e.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new zh(e.shape),r=[this.makeComplexComponentTensorHandle(e,t.complexTensors.real),this.makeComplexComponentTensorHandle(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(e){var t=new _m(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new _m(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new _m(e.shape,Nm);return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new _m(e.shape,Tm);return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new _m(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new _m(e.shape,"return asin(x);");return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new _m(e.shape,"return acos(x);");return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new _m(e.shape,Im);return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oh("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Ph("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new _m(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new _m(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new _m(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new _m(e.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new _m(e.shape,jm);return this.compileAndRun(t,[e])},e.prototype.atanh=function(e){var t=new _m(e.shape,Dm);return this.compileAndRun(t,[e])},e.prototype.erf=function(e){var t=new _m(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new _m(e.shape,function(e){return void 0===e&&(e=0),km+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},e.prototype.conv2dByMatMul=function(e,t,n){var r=e.shape,a=this.texData.get(e.dataId),o=n.inChannels,i=r[0]*r[1]*r[2],s=n.outChannels,u=(1===i||1===s)&&o>1e3,l=r[2]%2!=0&&!!a.isPacked;if(u||!Fu.getBool("WEBGL_LAZILY_UNPACK")||!Fu.getBool("WEBGL_PACK_BINARY_OPERATIONS")||!l){var c=this.reshape(e,[1,r[0]*r[1]*r[2],n.inChannels]),f=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.batchMatMul(c,f,!1,!1),n.outShape)}var d=Pl.make([1,r[0]*r[1]*(r[2]+1),n.inChannels],{dataId:e.dataId},e.dtype,this),h=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,Hu(Oc(a.shape,d.shape),(function(){return"packed reshape "+a.shape+" to "+d.shape+" isn't free"}));var p=this.reshape(t,[1,n.inChannels,n.outChannels]),m=this.batchMatMul(d,p,!1,!1),v=this.texData.get(m.dataId);return Hu(v.isPacked,(function(){return"batchMatMul result is expected to be packed"})),a.shape=h,v.shape=n.outShape,Pl.make(n.outShape,{dataId:m.dataId},m.dtype,this)},e.prototype.conv2dWithIm2Row=function(e,t,n){var r=n.filterWidth,a=n.filterHeight,o=n.inChannels,i=n.outWidth,s=n.outHeight,u=r*a*o,l=s*i,c=[u,l],f=e.squeeze([0]),d=t.reshape([1,u,-1]),h=new Up(c,f.shape,n),p=this.compileAndRun(h,[f]).reshape([1,c[0],c[1]]),m=new Gp(p.shape,[1,l,n.outChannels],!0,!1);return this.compileAndRun(m,[p,d]).reshape([1,s,i,n.outChannels])},e.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Fu.getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Xh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new Hh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new Vh(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r;return Fu.getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Zh(n),this.compileAndRun(r,[e,t],this.makePackedTensor(n.outShape,e.dtype))):(r=new Jh(n),this.compileAndRun(r,[e,t]))},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new Qh(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new qh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3d=function(e,t,n){var r=new Kh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerInput=function(e,t,n){var r=new Gh(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerFilter=function(e,t,n){var r=new Yh(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new Zp(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new Zp(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var a=new Zp(r,"max",!0),o=this.compileAndRun(a,[t]),i=new Yp(r),s=this.makeOutputArray(i.outputShape,t.dtype),u=this.compileAndRun(i,[e,o],s);return o.dispose(),u},e.prototype.avgPoolBackprop=function(e,t,n){var r=new Th(n),a=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],a)},e.prototype.cast=function(e,t){return Qd(e,t,this)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,o=0;o<e.rank;o++)o!==t&&(r[a++]=e.shape[o]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)i[t]=o,u[o]=this.slice(e,i,s).reshape(r);return u},e.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);return!n.isPacked||Oc(e.shape,t)||null!==n.texture&&Oc(n.shape,t)?Xd(e,t):this.packedReshape(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var a=Fu.getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rm(e.shape,t,n,r):new nm(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new tm(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new om(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new am(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var a=t?e:Dd(e),o=a.shape[0],i=a.shape[1],s=new qp(o,i,n),u=this.makeOutputArray(s.outputShape,"int32"),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],u,l)},e.prototype.oneHot=function(e,t,n,r){var a=new Qp(e.size,t,n,r);return this.compileAndRun(a,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return Jc("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),th(e.dataSync(),t.dataSync(),n,r,a)},e.prototype.cropAndResize=function(e,t,n,r,a,o){var i=new $h(e.shape,t.shape,r,a,o);return this.compileAndRun(i,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){Hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,u=o*t,l=i/(t*t),c=new ip("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},e.prototype.split=function(e,t,n){return rh(e,t,n)},e.prototype.scatterND=function(e,t,n){var r=Sd(0,e,n),a=r.sliceRank,o=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/i,i],c=e.reshape([o,a]),f=t.reshape([o,i]);if(0===u)return Xd(gf([]),n);var d=bf(0),h=new um(o,a,c.rank,f.rank,s,l);return this.compileAndRun(h,[f,c,d]).reshape(n)},e.prototype.sparseToDense=function(e,t,n,r){var a=Sd(0,e,n),o=a.sliceRank,i=a.numUpdates,s=a.strides,u=a.outputSize,l=new um(i,o,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},e.prototype.fft=function(e){return this.fftImpl(e,!1)},e.prototype.ifft=function(e){return this.fftImpl(e,!0)},e.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new fp("return real * expR - imag * expI;",e.shape,t),a=new fp("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)],i=this.compileAndRun(r,o),s=this.compileAndRun(a,o),u=this.complex(i,s).as2D(e.shape[0],e.shape[1]);return i.dispose(),s.dispose(),u},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=_d(e,t),o=a[0],i=a[1],s=a[2],u=a[3],l=t.reshape([i,r]),c=e.reshape([e.size/s,s]),f=new vp(r,u,[i,s]);return this.compileAndRun(f,[c,l]).reshape(o)},e.prototype.fill=function(e,t,n){if("string"===(n=n||vl(t))){var r=ol(n,Qu(e));return r.fill(t),Pl.make(e,{values:r},n)}var a=new dp(e,t),o=a.getCustomSetupFunc(t),i=this.makeOutputArray(e,n);return this.compileAndRun(a,[],i,o)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},e.prototype.linspace=function(e,t,n){return Kd(e,t,n)},e.prototype.makeOutputArray=function(e,t){return Pl.make(e,{},t,this)},e.prototype.makePackedTensor=function(e,t){var n=Pl.make(e,{},t,this);return this.texData.get(n.dataId).isPacked=!0,n},e.prototype.unpackTensor=function(e){var t=new Rm(e.shape);return this.compileAndRun(t,[e],Pl.make(t.outputShape,{},e.dtype,this))},e.prototype.packTensor=function(e){var t=new Xp(e.shape);return this.compileAndRun(t,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},e.prototype.packedReshape=function(e,t){var n=e.reshape([Dc(e.shape)].concat(Lc(e.shape))),r=[Dc(t)].concat(Lc(t)),a=new em(r,n.shape);return this.compileAndRun(a,[n]).reshape(t)},e.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=Ac(a),s=yp(a),u=this.makeTensorHandle(a,"float32");return this.texData.get(u.dataId).isPacked=!0,this.texData.get(u.dataId).dtype=o,this.texData.get(u.dataId).texShape=s.map((function(e){return 2*e})),t=r?new op(i,s):new ap(i,s),this.compileAndRun(t,[{shape:i,dtype:o,dataId:e}],u,null,!0),u},e.prototype.compileAndRun=function(e,t,n,r,a){var o=this;if(void 0===a&&(a=!1),null==n&&(n=e.usesPackedTextures?this.makePackedTensor(e.outputShape,t[0].dtype):this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=al(n.dtype,0),n;var i=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=o.texData.get(t.dataId);if(null==n.texture){if(!e.usesPackedTextures&&Qu(t.shape)<=Fu.getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.usesPackedTextures&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.usesPackedTextures)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),n=o.texData.get(t.dataId);else if(n.isPacked&&!Oc(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=o.packedReshape(t,a),n=o.texData.get(t.dataId),r.shape=a}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(n.dataId);var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},l=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,i,u),c=this.getAndSaveBinary(l,(function(){return function(e,t,n,r){var a=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=vh(o,s,a,t.usesPackedTextures),l=e.createProgram(u),c=null,f=e.getUniformLocation(l,"NAN",!1);1===Fu.getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var d={},h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];d[p]=e.getUniformLocation(l,p,!1),d["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:d,inShapeInfos:i,outShapeInfo:s,infLoc:c,nanLoc:f}}(o.gpgpu,e,i,u)})),f=null!=this.activeTimers;return f&&(s=this.startTimer()),function(e,t,n,r,a){zp(t.inShapeInfos,n),zp([t.outShapeInfo],[r]);var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===Fu.getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset"+a];if(null!=o)if(n.isUniform)if(Qu(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,c,i,u,r),f&&(s=this.endTimer(s),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(s)})),!Fu.getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(n.dataId).isPacked&&!1===a?this.unpackTensor(n):n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),null!=this.canvas&&null!=this.canvas.remove?this.canvas.remove():this.canvas=null,null!=this.fromPixels2DContext&&null!=this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Xc((function(){var t=Fu.getBool("DEBUG");Fu.set("DEBUG",!1);var n=e.abs(bf(1e-8)).dataSync()[0];return Fu.set("DEBUG",t),n>0?32:16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,o=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=performance.now());var f=n.texShape;if(null==f&&(f=Rc(r,u),n.texShape=f),null!=o){var d=Ac(r),h=void 0,p=f[1],m=f[0],v=o instanceof Uint8Array;u?(p=(t=bp(f[0],f[1]))[0],m=t[1],h=new cp(d,[m,p],v)):h=new lp(d,[m,p],v);var g=this.makeTensorHandle([m,p],a);this.texData.get(g.dataId).usage=v?np.PIXELS:np.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,m,o);var y=this.makeTensorHandle(h.outputShape,g.dtype);y.size=Qu(h.outputShape),this.texData.get(y.dataId).isPacked=u,this.compileAndRun(h,[g],y);var b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=performance.now()-l)}else{var w=this.acquireTexture(f,s,a,u);n.texture=w}}},e.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},e.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},e.prototype.computeBytes=function(e,t){return e[0]*e[1]*fl(t)},e}();$l()&&Zl.registerBackend("webgl",(function(){return new Om}),2);var Fm=hf({abs_:function(e){var t=ef(e,"x","abs");return"complex64"===t.dtype?Zl.runKernel((function(e){return e.complexAbs(t)}),{$x:t}):Zl.runKernel((function(e,n){var r=e.abs(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().step(-1))}}}))}}),Bm=hf({acos_:function(e){var t=ef(e,"x","acos");return Zl.runKernel((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(bf(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),zm=hf({acosh_:function(e){var t=ef(e,"x","acosh");return Zl.runKernel((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Um=hf({asin_:function(e){var t=ef(e,"x","asin");return Zl.runKernel((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(bf(1).sub(n.toFloat().square()).sqrt())}}}))}}),Wm=hf({asinh_:function(e){var t=ef(e,"x","asinh");return Zl.runKernel((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(bf(1).add(n.toFloat().square()).sqrt())}}}))}}),Vm=hf({atan_:function(e){var t=ef(e,"x","atan");return Zl.runKernel((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Hm=hf({atanh_:function(e){var t=ef(e,"x","atanh");return Zl.runKernel((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(bf(1).sub(n.toFloat().square()))}}}))}}),Ym=hf({ceil_:function(e){var t=ef(e,"x","ceil");return Zl.runKernel((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),Gm=hf({clipByValue_:function(e,t,n){var r=ef(e,"x","clipByValue");return Hu(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."})),Zl.runKernel((function(e,a){var o=e.clip(r,t,n);return a([r]),o}),{$x:r},(function(e,r){var a=r[0];return{$x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),Tf(e))}}}))}}),qm=hf({cos_:function(e){var t=ef(e,"x","cos");return Zl.runKernel((function(e,n){var r=e.cos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sin().neg().mul(e)}}}))}}),Qm=hf({cosh_:function(e){var t=ef(e,"x","cosh");return Zl.runKernel((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Xm=hf({erf_:function(e){var t=ef(e,"x","erf");return Hu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Zl.runKernel((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Km=hf({exp_:function(e){var t=ef(e,"x","exp");return Zl.runKernel((function(e,n){var r=e.exp(t);return n([r]),r}),{$x:t},(function(e,t){return{$x:function(){return e.mulStrict(t[0])}}}))}}),Jm=hf({expm1_:function(e){var t=ef(e,"x","expm1");return Zl.runKernel((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Zm=hf({floor_:function(e){var t=ef(e,"x","floor");return Zl.runKernel((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),$m=hf({log_:function(e){var t=ef(e,"x","log");return Zl.runKernel((function(e,n){var r=e.log(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat())}}}))}}),ev=hf({log1p_:function(e){var t=ef(e,"x","log1p");return Zl.runKernel((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),tv=hf({logSigmoid_:function(e){var t=ef(e,"x","logSigmoid");return Zl.runKernel((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),nv=hf({neg_:function(e){var t=ef(e,"x","neg");return Zl.runKernel((function(e){return e.neg(t)}),{$x:t},(function(e){return{$x:function(){return e.neg()}}}))}}),rv=hf({reciprocal_:function(e){var t=ef(e,"x","reciprocal");return Zl.runKernel((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),av=hf({round_:function(e){var t=ef(e,"x","round");return Zl.runKernel((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),ov=hf({rsqrt_:function(e){var t=ef(e,"x","rsqrt");return Zl.runKernel((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}))}}),iv=hf({sigmoid_:function(e){var t=ef(e,"x","sigmoid");return Zl.runKernel((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.mul(bf(1).sub(n)))}}}))}}),sv=hf({sign_:function(e){var t=ef(e,"x","sign");return Zl.runKernel((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),uv=hf({isNaN_:function(e){var t=ef(e,"x","isNaN");return Zl.runKernel((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),lv=hf({isInf_:function(e){var t=ef(e,"x","isInf");return Zl.runKernel((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),cv=hf({isFinite_:function(e){var t=ef(e,"x","isFinite");return Zl.runKernel((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Tf(e)}}}))}}),fv=hf({sin_:function(e){var t=ef(e,"x","sin");return Zl.runKernel((function(e,n){var r=e.sin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cos().mul(e)}}}))}}),dv=hf({sinh_:function(e){var t=ef(e,"x","sinh");return Zl.runKernel((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),hv=hf({softplus_:function(e){var t=ef(e,"x","softplus");return Zl.runKernel((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),pv=hf({sqrt_:function(e){var t=ef(e,"x","sqrt");return Zl.runKernel((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),mv=hf({square_:function(e){var t=ef(e,"x","square");return Zl.runKernel((function(e,n){return n([t]),e.square(t)}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().mul(2))}}}))}}),vv=hf({step_:function(e,t){void 0===t&&(t=0);var n=ef(e,"x","step");return Zl.runKernel((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Tf(e)}}}))}}),gv=hf({tan_:function(e){var t=ef(e,"x","tan");return Zl.runKernel((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),yv=hf({tanh_:function(e){var t=ef(e,"x","tanh");return Zl.runKernel((function(e,n){var r=e.tanh(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return bf(1).sub(n.square()).mulStrict(e)}}}))}});function bv(e,t,n,r,a,o){var i,s,u=ef(e,"x","batchNorm"),l=ef(t,"mean","batchNorm"),c=ef(n,"variance","batchNorm");return null!=a&&(i=ef(a,"scale","batchNorm")),null!=r&&(s=ef(r,"offset","batchNorm")),Hu(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Hu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),Hu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=i&&Hu(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),null!=s&&Hu(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),Cv(u,l,c,s,i,o)}function wv(e,t,n,r,a,o){var i,s,u=ef(e,"x","batchNorm"),l=ef(t,"mean","batchNorm"),c=ef(n,"variance","batchNorm");return null!=a&&(i=ef(a,"scale","batchNorm")),null!=r&&(s=ef(r,"offset","batchNorm")),Hu(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Hu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),Hu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=i&&Hu(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),null!=s&&Hu(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),Cv(u,l,c,s,i,o)}function xv(e,t,n,r,a,o){var i,s,u=ef(e,"x","batchNorm"),l=ef(t,"mean","batchNorm"),c=ef(n,"variance","batchNorm");return null!=a&&(i=ef(a,"scale","batchNorm")),null!=r&&(s=ef(r,"offset","batchNorm")),Hu(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Hu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),Hu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=i&&Hu(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),null!=s&&Hu(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),Cv(u,l,c,s,i,o)}function Cv(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u,l=ef(e,"x","batchNorm"),c=ef(t,"mean","batchNorm"),f=ef(n,"variance","batchNorm");return null!=a&&(i=ef(a,"scale","batchNorm")),null!=r&&(s=ef(r,"offset","batchNorm")),Hu(c.rank===f.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Hu(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Hu(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,Zl.runKernel((function(e,t){var n=e.batchNormalization(u,_v(c),_v(f),o,_v(i),_v(s));return t([l,c,f,i]),n}),{$x:l,$mean:c,$variance:f,$scale:i,$offset:s},(function(e,t){var n=t,r=n[0],a=n[1],i=n[2],s=n[3],l=null==s?bf(1):s,c=Pd(a.shape,u.shape),f=[];if(1===a.rank){for(var d=0;d<u.shape.length-1;++d)f.push(u.shape[d]);f.push(1)}var h=r.sub(a),p=e.mul(l),m=ov(i.add(bf(o))),v=m.mul(m).mul(m).mul(bf(-.5));return{$x:function(){return 1===a.rank?e.mul(md(m.as4D(1,1,1,a.shape[0]),f)).mul(l).reshape(r.shape):e.mul(m).mul(l).reshape(r.shape)},$mean:function(){var e=m.mul(bf(-1)).mul(p);return 1===a.rank&&(e=e.sum(c)),e.reshape(a.shape)},$variance:function(){var e=v.mul(h).mul(p);return 1===a.rank&&(e=e.sum(c)),e.reshape(a.shape)},$scale:function(){var t=h.mul(m),n=e.mul(t);return 1===a.rank&&(n=n.sum(c)),n.reshape(a.shape)},$offset:function(){var t=e;return 1===a.rank&&(t=t.sum(c)),t.reshape(a.shape)}}})).reshape(l.shape)}function _v(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function kv(){Qc("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Sv=hf({batchNormalization2d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),kv(),bv(e,t,n,o,a,r)}}),Mv=hf({batchNormalization3d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),kv(),wv(e,t,n,o,a,r)}}),Ev=hf({batchNormalization4d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),kv(),xv(e,t,n,o,a,r)}}),Nv=hf({batchNormalization_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),kv(),Cv(e,t,n,o,a,r)}}),Tv=hf({batchNorm_:Cv}),Iv=hf({batchNorm2d_:bv}),jv=hf({batchNorm3d_:wv}),Dv=hf({batchNorm4d_:xv});function Lv(e,t,n,r,a,o){Hu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),i=[1,e[0],e[1],e[2]]);var l=i[3],c=s.shape[3];Hu(4===i.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+i.length+"."})),Hu(4===s.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank})),Hu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank})),Hu(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),Hu(c===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&Hu(Ku(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var f=Bd(i,n.shape,r,1,a,o),d=Zl.runKernel((function(e,t){var r=e.conv2dDerInput(s,n,f);return t([n,s]),r}),{dy4D:s,filter:n},(function(e,t){var n=t[0],i=t[1];return{dy4D:function(){return Ov(e,n,r,a,"NHWC",1,o)},filter:function(){return Bv(e,i,n.shape,r,a,o)}}}));return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function Av(e,t,n,r,a,o){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Hu(4===i.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+i.shape+"."})),Hu(4===s.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."})),Hu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."})),Hu(i.shape[3]===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must match input depth in filter ("+n[2]+"."})),Hu(s.shape[3]===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."})),null!=o&&Hu(Ku(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var u=Bd(i.shape,n,r,1,a,o);return Zl.runKernel((function(e){return e.conv2dDerFilter(i,s,u)}),{x4D:i,dy4D:s})}function Rv(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}var Pv=hf({conv1d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NWC"),void 0===o&&(o=1);var s=ef(e,"x","conv1d"),u=ef(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Hu(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),Hu(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=i&&Hu(Ku(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Hu(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Hu(qd(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"})),Hu("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=Ov(d,f,[1,n],r,"NHWC",[1,o],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),Ov=hf({conv2d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NHWC"),void 0===o&&(o=[1,1]);var s=ef(e,"x","conv2d"),u=ef(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Hu(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),Hu(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=i&&Hu(Ku(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Hu(l.shape[3]===u.shape[2],(function(){return"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."})),Hu(qd(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),Hu("NHWC"===a,(function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."}));var f=Bd(l.shape,u.shape,n,o,r,i),d=Zl.runKernel((function(e,t){var n=e.conv2d(l,u,f);return t([u,l]),n}),{x:l,$filter:u},(function(e,t){var a=t,i=a[0],s=a[1];return Hu(Gd(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return Lv(s.shape,e,i,n,r)},$filter:function(){return Av(s,e,i.shape,n,r)}}}));return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Fv=hf({conv3d_:function(e,t,n,r,a,o){void 0===a&&(a="NDHWC"),void 0===o&&(o=[1,1,1]);var i=ef(e,"x","conv3d"),s=ef(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),Hu(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Hu(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Hu(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Hu(function(e,t){return Rv(e)||Rv(t)}(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),Hu("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var c=zd(u.shape,s.shape,n,o,r),f=Zl.runKernel((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){Hu(Rv(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var a=t[0],i=t[1];return{x:function(){return function(e,t,n,r,a){Hu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var o=e,i=t,s=!1;4===t.rank&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],l=i.shape[4];Hu(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),Hu(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),Hu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Hu(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Hu(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=zd(o,n.shape,r,1,a),f=Zl.runKernel((function(e){return e.conv3dDerInput(i,n,c)}),{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(a.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,a){var o=e;4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Hu(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."})),Hu(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."})),Hu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Hu(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."})),Hu(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=zd(o.shape,n,r,1,a);return Zl.runKernel((function(e){return e.conv3dDerFilter(o,i,s)}),{x5D:o,dy5D:i})}(a,e,i.shape,n,r)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Bv=hf({conv2dDerFilter_:Av}),zv=hf({depthwiseConv2d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NHWC"),void 0===o&&(o=[1,1]);var s=ef(e,"x","depthwiseConv2d"),u=ef(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Hu(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),Hu(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Hu(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==o&&(o=[1,1]),Hu(qd(n,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&Hu(Ku(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=Bd(l.shape,u.shape,n,o,r,i,!0),d=Zl.runKernel((function(e,t){var n=e.depthwiseConv2D(l,u,f);return t([l,u]),n}),{x:l,$filter:u},(function(e,t){Hu(Gd(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var n=t[0],r=t[1];return{x:function(){return function(e,t,n,r){var a=t,o=!1;3===t.rank&&(o=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Zl.runKernel((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return o?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}(n.shape,e,r,f)},$filter:function(){return function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Zl.runKernel((function(e){return e.depthwiseConv2DDerFilter(a,o,r)}),{x4D:a,dy4D:o})}(n,e,r.shape,f)}}}));return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),Uv=hf({separableConv2d_:function(e,t,n,r,a,o,i){void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC");var s=ef(e,"x","separableConv2d"),u=ef(t,"depthwiseFilter","separableConv2d"),l=ef(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(3===s.rank&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Hu(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Hu(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Hu(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Hu(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),Hu(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var d=u.shape[2],h=u.shape[3];Hu(l.shape[2]===d*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+l.shape[2]+"."}));var p=zv(c,u,r,a,i,o),m=Ov(p,l,1,"valid",i);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Wv=hf({conv2dTranspose_:function(e,t,n,r,a,o){return Lv(n,ef(e,"x","conv2dTranspose"),ef(t,"filter","conv2dTranspose"),r,a,o)}}),Vv=hf({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=ef(e,"a","matMul"),i=ef(t,"b","matMul");a=Gl(o,i),o=a[0],i=a[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=o.shape.slice(0,-2),d=i.shape.slice(0,-2),h=Qu(f),p=Qu(d);Hu(o.rank>=2&&i.rank>=2&&o.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+i.rank+"."})),Hu(Xu(f,d),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+o.shape+" and "+i.shape+" must match."})),Hu(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=o.shape.slice(0,-2).concat([l,c]),v=n?o.as3D(h,s,l):o.as3D(h,l,s),g=r?i.as3D(p,c,u):i.as3D(p,u,c);return Zl.runKernel((function(e,t){var a=e.batchMatMul(v,g,n,r);return t([v,g]),a}),{$a:v,$b:g},(function(e,t){var a=t,o=a[0],i=a[1];return n||r?!n&&r?{$a:function(){return e.matMul(i,!1,!1)},$b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{$a:function(){return i.matMul(e,!1,!0)},$b:function(){return o.matMul(e,!1,!1)}}:{$a:function(){return i.matMul(e,!0,!0)},$b:function(){return e.matMul(o,!0,!0)}}:{$a:function(){return e.matMul(i,!1,!0)},$b:function(){return o.matMul(e,!0,!1)}}})).reshape(m)}}),Hv=hf({dot_:function(e,t){var n=ef(e,"t1","dot"),r=ef(t,"t2","dot");Hu(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return Hu(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Yv=hf({outerProduct_:function(e,t){var n=ef(e,"v1","outerProduct"),r=ef(t,"v2","outerProduct");return Hu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Gv=hf({reverse_:function(e,t){var n=ef(e,"x","reverse");if(0===n.rank)return n.clone();var r=nl(t,n.shape);return Zl.runKernel((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),qv=hf({reverse1d_:function(e){var t=ef(e,"x","reverse");return Hu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Gv(t,0)}}),Qv=hf({reverse2d_:function(e,t){var n=ef(e,"x","reverse");return Hu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Gv(n,t)}}),Xv=hf({reverse3d_:function(e,t){var n=ef(e,"x","reverse");return Hu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Gv(n,t)}}),Kv=hf({reverse4d_:function(e,t){var n=ef(e,"x","reverse");return Hu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Gv(n,t)}});function Jv(e,t,n,r,a,o){var i=ef(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),Hu(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Hu(qd(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=o&&Hu(Ku(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=Fd(s.shape,t,n,r,a,o),c=Zl.runKernel((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,o){var i=o[0],s=o[1];return{x:function(){return function(e,t,n,r,a,o,i,s){var u=ef(e,"dy","maxPoolBackprop"),l=ef(t,"input","maxPoolBackprop"),c=ef(n,"output","maxPoolBackprop");Hu(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==o&&(o=[1,1]),Hu(qd(a,o),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"})),Hu(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Hu(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var f=Fd(l.shape,r,a,o,i,s);return Zl.runKernel((function(e){return e.maxPoolBackprop(u,l,c,f)}),{$dy:u,$input:l})}(e,i,s,t,n,r,a)}}}));return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Zv(e,t,n,r,a,o){var i=ef(e,"x","avgPool","float32");null==r&&(r=[1,1]),Hu(qd(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Hu(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=o&&Hu(Ku(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=Fd(s.shape,t,n,r,a,o),c=Zl.runKernel((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,o){var i=ef(e,"dy","avgPoolBackprop"),s=ef(t,"input","avgPoolBackprop");Hu(s.rank===i.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"})),null==a&&(a=[1,1]),Hu(qd(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}));var u=s,l=i,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Hu(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),Hu(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var f=Fd(u.shape,n,r,a,o),d=Zl.runKernel((function(e){return e.avgPoolBackprop(l,u,f)}),{dy4D:l,input4D:u});return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,s,t,n,r,a)}}}));return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var $v=hf({maxPool_:function(e,t,n,r,a){return Jv(e,t,n,1,r,a)}}),eg=hf({avgPool_:function(e,t,n,r,a){return Zv(e,t,n,1,r,a)}}),tg=hf({pool_:function(e,t,n,r,a,o){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var i=ef(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Hu(qd(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}));var l,c=Fd(s.shape,t,o,a,r),f=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,i[t]]}))]}([c.inHeight,c.inWidth],f,l),p=h[0],m=h[1],v=d?r:"valid",g=d?s:dd(s,f,p),y=("avg"===n?function(){return Zv(g,t,o,1,v)}:function(){return Jv(g,t,o,1,v)})(),b=d?y:Qf(y,f,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),ng=hf({slice_:function(e,t,n){var r,a,o=ef(e,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice(),a=(a=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Hu(-1===e,(function(){return"Bad value in size"})),o.shape[t]-r[t])})),function(e,t,n){Hu(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Hu(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Hu(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},a=0;a<e.rank;++a)r(a)}(o,r,a);var i=o.shape;return Zl.runKernel((function(e){return e.slice(o,r,a)}),{$x:o},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-a[n]]);return{$x:function(){return e.pad(t)}}}))}}),rg=hf({slice1d_:function(e,t,n){var r=ef(e,"x","slice1d");return Hu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),ng(r,[t],[n])}}),ag=hf({slice2d_:function(e,t,n){var r=ef(e,"x","slice2d");return Hu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),ng(r,t,n)}}),og=hf({slice3d_:function(e,t,n){var r=ef(e,"x","slice3d");return Hu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),ng(r,t,n)}}),ig=hf({slice4d_:function(e,t,n){var r=ef(e,"x","slice4d");return Hu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),ng(r,t,n)}});function sg(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(of(t.shape,r))),e.rank<n.rank&&(e=e.reshape(of(e.shape,r))),{$x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var ug=hf({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","all","bool"),a=nl(t,r.shape),o=a,i=uf(o,r.rank);null!=i&&(r=r.transpose(i),o=cf(o.length,r.rank));var s=Zl.runKernel((function(e){return e.all(r,o)}),{$x:r});if(n){var u=of(s.shape,a);return s.reshape(u)}return s}}),lg=hf({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","any","bool"),a=nl(t,r.shape),o=a,i=uf(o,r.rank);null!=i&&(r=r.transpose(i),o=cf(o.length,r.rank));var s=Zl.runKernel((function(e){return e.any(r,o)}),{$x:r});if(n){var u=of(s.shape,a);return s.reshape(u)}return s}}),cg=hf({argMax_:function(e,t){void 0===t&&(t=0);var n=ef(e,"x","argMax");null==t&&(t=0);var r=nl(t,n.shape),a=uf(r,n.rank);return null!=a&&(n=n.transpose(a),r=cf(r.length,n.rank)),Zl.runKernel((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Tf(n)}}}))}}),fg=hf({argMin_:function(e,t){void 0===t&&(t=0);var n=ef(e,"x","argMin");null==t&&(t=0);var r=nl(t,n.shape),a=uf(r,n.rank);return null!=a&&(n=n.transpose(a),r=cf(r.length,n.rank)),Zl.runKernel((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Tf(n)}}}))}}),dg=hf({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","logSumExp"),a=nl(t,r.shape),o=r.max(a,!0),i=r.sub(o).exp().sum(a).log(),s=o.reshape(i.shape).add(i);if(n){var u=of(s.shape,a);return s.reshape(u)}return s}}),hg=hf({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","max"),a=r,o=nl(t,r.shape),i=o,s=uf(i,r.rank);null!=s&&(r=r.transpose(s),i=cf(i.length,r.rank));var u=Zl.runKernel((function(e,t){var n=e.max(r,i);return t([a,n]),n}),{$x:r},(function(e,t){return sg(e,t[1],t[0],o,s)}));if(n){var l=of(u.shape,o);u=u.reshape(l)}return u}}),pg=hf({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","mean"),a=nl(t,r.shape),o=Qu(af(r.shape,a)[1]);return jd((function(e){var r=bf(o);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(kf(e.shape,"float32")).div(o)}}}))(r)}}),mg=hf({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","min"),a=r,o=nl(t,r.shape),i=o,s=uf(i,r.rank);null!=s&&(r=r.transpose(s),i=cf(i.length,r.rank));var u=Zl.runKernel((function(e,t){var n=e.min(r,i);return t([a,n]),n}),{$x:r},(function(e,t){return sg(e,t[1],t[0],o,s)}));if(n){var l=of(u.shape,o);u=u.reshape(l)}return u}}),vg=hf({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=nl(t,(e=ef(e,"x","moments")).shape),a=e.mean(r,n),o=a.shape;n||(o=of(a.shape,r));var i=e.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:i.mean(r,n)}}}),gg=hf({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=nl(t,r.shape);return jd((function(e){var t=uf(a,e.rank),r=a,o=e;null!=t&&(o=e.transpose(t),r=cf(r.length,e.rank));var i=Zl.runKernel((function(e){return e.sum(o,r)}),{permutedX:o});if(n){var s=of(i.shape,a);i=i.reshape(s)}return{value:i,gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(kf(e.shape,"float32"))}}}))(r)}}),yg=hf({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ef(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=nl(t,r.shape),o=uf(a,r.rank),i=a,s=r;null!=o&&(s=r.transpose(o),i=cf(i.length,r.rank));var u=Zl.runKernel((function(e){return e.prod(s,i)}),{permutedX:s});if(n){var l=of(u.shape,a);u=u.reshape(l)}return u}}),bg=hf({equal_:function(e,t){var n,r=ef(e,"a","equal"),a=ef(t,"b","equal");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e){return e.equal(r,a)}),{$a:r,$b:a})}}),wg=hf({equalStrict_:function(e,t){var n=ef(e,"a","equalStrict"),r=ef(t,"b","equalStrict");return Yu(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),xg=hf({greater_:function(e,t){var n,r=ef(e,"a","greater"),a=ef(t,"b","greater");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e){return e.greater(r,a)}),{$a:r,$b:a})}}),Cg=hf({greaterEqual_:function(e,t){var n,r=ef(e,"a","greaterEqual"),a=ef(t,"b","greaterEqual");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return Tf(n)},$b:function(){return Tf(r)}}}))}}),_g=hf({greaterEqualStrict_:function(e,t){var n=ef(e,"a","greaterEqualStrict"),r=ef(t,"b","greaterEqualStrict");return Yu(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),kg=hf({greaterStrict_:function(e,t){var n=ef(e,"a","greaterStrict"),r=ef(t,"b","greaterStrict");return Yu(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Sg=hf({less_:function(e,t){var n,r=ef(e,"a","less"),a=ef(t,"b","less");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e){return e.less(r,a)}),{$a:r,$b:a})}}),Mg=hf({lessEqual_:function(e,t){var n,r=ef(e,"a","lessEqual"),a=ef(t,"b","lessEqual");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e){return e.lessEqual(r,a)}),{$a:r,$b:a})}}),Eg=hf({lessEqualStrict_:function(e,t){var n=ef(e,"a","lessEqualStrict"),r=ef(t,"b","lessEqualStrict");return Yu(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Ng=hf({lessStrict_:function(e,t){var n=ef(e,"a","lessStrict"),r=ef(t,"b","lessStrict");return Yu(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Tg=hf({notEqual_:function(e,t){var n,r=ef(e,"a","notEqual"),a=ef(t,"b","notEqual");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e){return e.notEqual(r,a)}),{$a:r,$b:a})}}),Ig=hf({notEqualStrict_:function(e,t){var n=ef(e,"a","notEqualStrict"),r=ef(t,"b","notEqualStrict");return Yu(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),jg=hf({add_:function(e,t){var n,r=ef(e,"a","add"),a=ef(t,"b","add");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e){return e.add(r,a)}),{$a:r,$b:a},(function(e){return{$a:function(){var t=e,n=Pd(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=Pd(a.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(a.shape)}}}))}}),Dg=hf({addN_:function(e){Hu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Hu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return ef(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Xu(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Zl.runKernel((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}))}}),Lg=hf({addStrict_:function(e,t){var n=ef(e,"a","addStrict"),r=ef(t,"b","addStrict");return Yu(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Ag=hf({atan2_:function(e,t){var n,r=ef(e,"a","atan2"),a=ef(t,"b","atan2");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e,t){var n=e.atan2(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=jg(n.square(),r.square()),a=e.mul(r.div(t)),i=Pd(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},$b:function(){var t=jg(n.square(),r.square()),a=nv(e.mul(n.div(t))),i=Pd(r.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(r.shape)}}}))}}),Rg=hf({div_:function(e,t){var n,r=ef(e,"a","div"),a=ef(t,"b","div");if(n=Gl(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return Og(r,a);var o=Od(r.shape,a.shape);return Zl.runKernel((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),a=Pd(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),a=Pd(r.shape,o);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}))}}),Pg=hf({divStrict_:function(e,t){var n=ef(e,"a","div"),r=ef(t,"b","div");return Yu(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Og=hf({floorDiv_:function(e,t){var n,r=ef(e,"a","floorDiv"),a=ef(t,"b","floorDiv");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),a=Pd(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),a=Pd(r.shape,o);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}))}}),Fg=hf({maximum_:function(e,t){var n,r=ef(e,"a","maximum"),a=ef(t,"b","maximum");return n=Gl(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Od(r.shape,a.shape),Zl.runKernel((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}}))}}),Bg=hf({maximumStrict_:function(e,t){var n=ef(e,"a","maximumStrict"),r=ef(t,"b","maximumStrict");return Yu(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),zg=hf({minimum_:function(e,t){var n,r=ef(e,"a","minimum"),a=ef(t,"b","minimum");return n=Gl(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),Od(r.shape,a.shape),Zl.runKernel((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}}))}}),Ug=hf({minimumStrict_:function(e,t){var n=ef(e,"a","minimumStrict"),r=ef(t,"b","minimumStrict");return Yu(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Wg=hf({mod_:function(e,t){var n,r=ef(e,"a","mod"),a=ef(t,"b","mod");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e,t){var n=e.mod(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Pd(n.shape,o);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=Pd(r.shape,o);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),Vg=hf({modStrict_:function(e,t){var n=ef(e,"a","modStrict"),r=ef(t,"b","modStrict");return Yu(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Hg=hf({mul_:function(e,t){var n,r=ef(e,"a","mul"),a=ef(t,"b","mul");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e,t){var n=e.multiply(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.mul(r.toFloat()),a=Pd(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),a=Pd(r.shape,o);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),Yg=hf({mulStrict_:function(e,t){var n=ef(e,"a","mul"),r=ef(t,"b","mul");return Yu(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Gg=hf({pow_:function(e,t){var n=ef(e,"base","pow"),r=ef(t,"exp","pow"),a=Od(n.shape,r.shape);return e=n.cast(Hl(n.dtype,r.dtype)),t=r.cast(Hl(n.dtype,r.dtype)),Zl.runKernel((function(e,t){var a=e.pow(n,r);return t([n,r,a]),a}),{$base:n,$exp:r},(function(e,t){var n=t[0],r=t[1],o=t[2];return{$base:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(bf(1))))),i=Pd(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$exp:function(){var t=n.greater(0),i=n.log().where(t,Tf(n)),s=e.mul(o.mul(i)),u=Pd(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}))}}),qg=hf({powStrict_:function(e,t){return Yu(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Qg=hf({squaredDifference_:function(e,t){var n,r=ef(e,"a","squaredDifference"),a=ef(t,"b","squaredDifference");return n=Gl(r,a),r=n[0],a=n[1],Od(r.shape,a.shape),Zl.runKernel((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1],a=bf(2);return{$a:function(){return e.mul(n.sub(r).mul(a))},$b:function(){return e.mul(r.sub(n).mul(a))}}}))}}),Xg=hf({squaredDifferenceStrict_:function(e,t){var n=ef(e,"a","squaredDifferenceStrict"),r=ef(t,"b","squaredDifferenceStrict");return Yu(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Kg=hf({sub_:function(e,t){var n,r=ef(e,"a","sub"),a=ef(t,"b","sub");n=Gl(r,a),r=n[0],a=n[1];var o=Od(r.shape,a.shape);return Zl.runKernel((function(e){return e.subtract(r,a)}),{$a:r,$b:a},(function(e){return{$a:function(){var t=e,n=Pd(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=Pd(a.shape,o);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}}))}}),Jg=hf({subStrict_:function(e,t){var n=ef(e,"a","subStrict"),r=ef(t,"b","subStrict");return Yu(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Zg=hf({logicalAnd_:function(e,t){var n=ef(e,"a","logicalAnd","bool"),r=ef(t,"b","logicalAnd","bool");return Od(n.shape,r.shape),Zl.runKernel((function(e){return e.logicalAnd(n,r)}),{$a:n,$b:r})}}),$g=hf({logicalNot_:function(e){var t=ef(e,"x","logicalNot","bool");return Zl.runKernel((function(e){return e.logicalNot(t)}),{$x:t})}}),ey=hf({logicalOr_:function(e,t){var n=ef(e,"a","logicalOr","bool"),r=ef(t,"b","logicalOr","bool");return Od(n.shape,r.shape),Zl.runKernel((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),ty=hf({logicalXor_:function(e,t){var n=ef(e,"a","logicalXor","bool"),r=ef(t,"b","logicalXor","bool");return Od(n.shape,r.shape),ey(e,t).logicalAnd(Zg(e,t).logicalNot())}}),ny=hf({where_:function(e,t,n){var r=ef(t,"a","where"),a=ef(n,"b","where"),o=ef(e,"condition","where","bool");return Yu(r.shape,a.shape,"Error in where: "),1===o.rank?Hu(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Yu(o.shape,a.shape,"Error in where: "),Zl.runKernel((function(e,t){var n=e.select(o,r,a);return t([o]),n}),{$condition:o,$a:r,$b:a},(function(e,t){var n=t[0];return{$condition:function(){return Tf(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),ry=hf({elu_:function(e){var t=ef(e,"x","elu");return Zl.runKernel((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Zl.runKernel((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),ay=hf({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=ef(e,"x","leakyRelu");return Fg(bf(t).mul(n),n)}}),oy=hf({prelu_:function(e,t){var n=ef(e,"x","prelu"),r=ef(t,"alpha","prelu");return Zl.runKernel((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{$x:n,$alpha:r},(function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{$x:function(){return ny(a,e,e.mul(r))},$alpha:function(){var t=ny(a,Tf(e),e.mul(n)),o=Pd(r.shape,e.shape);return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}}))}}),iy=hf({relu_:function(e){var t=ef(e,"x","relu");return"bool"===t.dtype?t.toInt():Zl.runKernel((function(e,n){var r=e.relu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.step().toFloat())}}}))}}),sy=hf({selu_:function(e){var t=ef(e,"x","selu");return Zl.runKernel((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(bf(0)),r=bf(xm),a=bf(Cm),o=e.mul(a),i=e.mul(r).mul(n.toFloat().exp());return ny(t,o,i)}}}))}}),uy=hf({transpose_:function(e,t){var n=ef(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Hu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Hu(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1?n.clone():Zl.runKernel((function(e){return e.transpose(n,t)}),{$x:n},(function(e){var n=lf(t);return{$x:function(){return e.transpose(n)}}}))}}),ly=hf({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var o=ef(e,"x","localResponseNormalization");Hu(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."})),Hu(Ku(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=o,s=!1;3===o.rank&&(s=!0,i=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=Zl.runKernel((function(e,o){var s=e.localResponseNormalization4D(i,t,n,r,a);return o([i,s]),s}),{x4D:i},(function(e,o){var i=o[0],s=o[1];return{x4D:function(){return Zl.runKernel((function(o){return o.LRNGrad(e,i,s,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),cy=hf({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(bf(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=ef(e,"x","norm"),t,n),o=a.shape;if(r){var i=nl(n,e.shape);o=of(a.shape,i)}return a.reshape(o)}});function fy(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function dy(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var hy=hf({gather_:function(e,t,n){void 0===n&&(n=0);var r=ef(e,"x","gather"),a=ef(t,"indices","gather","int32");n=nl(n,r.shape)[0];var o=function(e,t,n){for(var r=e.shape[n],a=[],o=1,i=1,s=0;s<n;s++)a.push(e.shape[s]),o*=e.shape[s];for(s=0;s<t.rank;s++)a.push(t.shape[s]);for(s=n+1;s<e.rank;s++)a.push(e.shape[s]),i*=e.shape[s];return{batchSize:o,sliceSize:i,dimSize:r,outputShape:a}}(r,a,n);return Zl.runKernel((function(e,t){var o=e.gather(r,a.flatten(),n);return t([a]),o}),{$x:r},(function(e,t){var a=t[0];return{$x:function(){var t=r.shape,o=a.size,i=t.slice(0,n),s=i.length,u=t.slice(n,t.length).slice(1),l=u.length,c=fy(0,s),f=fy(s+1,s+1+l),d=dy([i,[o],u]),h=e.reshape(d),p=a.reshape([o]),m=dy([[s],c,f]),v=h.transpose(m),g=py(v,p,r.shape[n]),y=lf(m);return g.transpose(y)}}})).reshape(o.outputShape)}}),py=hf({unsortedSegmentSum_:function(e,t,n){var r=ef(e,"x","unsortedSegmentSum"),a=ef(t,"segmentIds","unsortedSegmentSum","int32");return Hu(Ku(n),(function(){return"numSegments must be of dtype int"})),Zl.runKernel((function(e,t){var o=e.unsortedSegmentSum(r,a,n);return t([a]),o}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Fg(t,Tf(t)),r=hy(e,n),a=Cg(t,bf(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=$f(a,i+1);a=Zg(a,kf(r.shape,"bool"));var s=Tf(r);return ny(a,r,s)}(e,n)}}}))}}),my=hf({basicLSTMCell_:function(e,t,n,r,a,o){var i=ef(e,"forgetBias","basicLSTMCell"),s=ef(t,"lstmKernel","basicLSTMCell"),u=ef(n,"lstmBias","basicLSTMCell"),l=ef(r,"data","basicLSTMCell"),c=ef(a,"c","basicLSTMCell"),f=ef(o,"h","basicLSTMCell"),d=l.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,m=[h,p],v=d.slice([0,0],m),g=d.slice([0,p],m),y=d.slice([0,2*p],m),b=d.slice([0,3*p],m),w=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),vy=hf({multiRNNCell_:function(e,t,n,r){for(var a=ef(t,"data","multiRNNCell"),o=tf(n,"c","multiRNNCell"),i=tf(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,o[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],d=[];for(l=0;l<u.length;l+=2)f.push(u[l]),d.push(u[l+1]);return[f,d]}}),gy=hf({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var o=ef(e,"v","movingAverage"),i=ef(t,"x","movingAverage"),s=ef(n,"decay","movingAverage");ql(o,i),Hu(Xu(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=bf(1),l=u.sub(s),c=i.sub(o).mul(l);if(a){Hu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=ef(r,"step","movingAverage");c=c.div(u.sub(Gg(s,f)))}return o.add(c)}}),yy=hf({stridedSlice_:function(e,t,n,r,a,o,i,s,u){if(void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==i)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");var l=ef(e,"x","stridedSlice");if(r.every((function(e){return 1===e}))){var c=Md(l.shape,t,n,r,a,o,i,s,u),f=c[0],d=c[1],h=c[2],p=d.filter((function(e,t){return-1===h.indexOf(t)}));return ng(l,f,d).reshape(p)}return Zl.runKernel((function(e){return e.stridedSlice(l,t,n,r,a,o,i,s,u)}),{$x:l})}}),by=hf({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=ef(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var o=Zl.runKernel((function(e){return e.topk(r,t,n)}),{$x:r});return{values:o[0],indices:o[1]}}}),wy=hf({scatterND_:function(e,t,n){var r=ef(e,"indices","scatterND","int32"),a=ef(t,"updates","scatterND");return function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(o+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(o+" updates.shape["+(i+a)+"] ("+n.shape[i+a]+") != shape["+(i+a)+"] ("+e[i+a]+")")}(n,t,e)}(a,r,n),Zl.runKernel((function(e){return e.scatterND(r,a,n)}),{$indices:r,$updates:a})}}),xy=hf({fft_:function(e){Hu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Zl.runKernel((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Cy=hf({ifft_:function(e){Hu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Zl.runKernel((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),_y=hf({rfft_:function(e,t){Hu("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=e.slice(o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Sf(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=pf(n,u).as2D(a,r),c=xy(l),f=Math.floor(r/2)+1,d=mf(c),h=vf(c),p=d.split([f,r-f],d.shape.length-1),m=h.split([f,r-f],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,pf(p[0],m[0]).reshape(v)}}),ky=hf({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=Cy(r);return mf(a)}var o=[n,2*(t-1)],i=mf(e).as2D(n,t),s=vf(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(bf(-1)),c=i.concat(u,1),f=s.concat(l,1);return r=pf(c,f).as2D(o[0],o[1]),a=Cy(r),mf(a)}}),Sy=Object.freeze({fft:xy,ifft:Cy,rfft:_y,irfft:ky}),My=hf({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=ef(e,"sparseIndices","sparseToDense","int32"),o=ef(t,"sparseValues","sparseToDense"),i=ef(r,"defaultValue","sparseToDense",o.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,n,i),Zl.runKernel((function(e){return e.sparseToDense(a,o,n,i)}),{$sparseIndices:a,$sparseValues:o,$defaultValue:i})}}),Ey=hf({gatherND_:function(e,t){var n=ef(t,"indices","gatherND","int32"),r=ef(e,"x","gatherND");return Zl.runKernel((function(e){return e.gatherND(r,n)}),{$x:r,$indices:n})}}),Ny=hf({dropout_:function(e,t,n,r){if(null!=n&&!Xu(e.shape,n))throw new Error("Non-default noise shape is not implemented yet: "+JSON.stringify(n));var a=cd(e.shape,0,1,"float32",r).greater(t);return a=a.div(Kg(1,t)),e.mul(a)}});function Ty(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return wf(a,"float32")}var Iy,jy=hf({hannWindow_:function(e){return Ty(e,.5,.5)}}),Dy=hf({hammingWindow_:function(e){return Ty(e,.54,.46)}}),Ly=hf({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var o=0,i=[];o+t<=e.size;)i.push(ng(e,o,t)),o+=n;if(r){var s=o+t-e.size,u=If([ng(e,o,t-s),Mf([s],a)]);i.push(u)}return 0===i.length?xf([],[0,t]):If(i).as2D(i.length,t)}}),Ay=Object.freeze({hannWindow:jy,hammingWindow:Dy,frame:Ly});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Iy||(Iy={}));var Ry=hf({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Iy.SUM_BY_NONZERO_WEIGHTS);var a=ef(e,"labels","absoluteDifference"),o=ef(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=ef(n,"weights","absoluteDifference")),Yu(a.shape,o.shape,"Error in absoluteDifference: ");var s=a.sub(o).abs();return Py(s,i,r)}}),Py=hf({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Iy.SUM_BY_NONZERO_WEIGHTS);var r=ef(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=ef(t,"weights","computeWeightedLoss"));var o=null==a?r:r.mul(a);if(n===Iy.NONE)return o;if(n===Iy.SUM)return o.sum();if(n===Iy.MEAN){if(null==a)return o.mean();var i=r.size/a.size,s=o.sum().div(a.sum());return i>1?s.div(bf(i)):s}if(n===Iy.SUM_BY_NONZERO_WEIGHTS){if(null==a)return o.sum().div(bf(r.size));var u=a.mul(kf(r.shape)).notEqual(bf(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Oy=hf({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=Iy.SUM_BY_NONZERO_WEIGHTS);var o=ef(e,"labels","cosineDistance"),i=ef(t,"predictions","cosineDistance"),s=null;null!=r&&(s=ef(r,"weights","cosineDistance")),Yu(o.shape,i.shape,"Error in cosineDistance: ");var u=bf(1).sub(o.mul(i).sum(n,!0));return Py(u,s,a)}}),Fy=hf({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Iy.SUM_BY_NONZERO_WEIGHTS);var a=ef(e,"labels","hingeLoss"),o=ef(t,"predictions","hingeLoss"),i=null;null!=n&&(i=ef(n,"weights","hingeLoss")),Yu(a.shape,o.shape,"Error in hingeLoss: ");var s=bf(1);a=bf(2).mul(a).sub(s);var u=s.sub(a.mul(o)).relu();return Py(u,i,r)}}),By=hf({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=Iy.SUM_BY_NONZERO_WEIGHTS);var o=ef(e,"labels","huberLoss"),i=ef(t,"predictions","huberLoss"),s=null;null!=n&&(s=ef(n,"weights","huberLoss")),Yu(o.shape,i.shape,"Error in huberLoss: ");var u=bf(r),l=i.sub(o).abs(),c=zg(l,u),f=l.sub(c),d=bf(.5).mul(c.square()).add(u.mul(f));return Py(d,s,a)}}),zy=hf({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=Iy.SUM_BY_NONZERO_WEIGHTS);var o=ef(e,"labels","logLoss"),i=ef(t,"predictions","logLoss"),s=null;null!=n&&(s=ef(n,"weights","logLoss")),Yu(o.shape,i.shape,"Error in logLoss: ");var u=bf(1),l=bf(r),c=o.mul(i.add(l).log()).neg().sub(u.sub(o).mul(u.sub(i).add(l).log()));return Py(c,s,a)}}),Uy=hf({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Iy.SUM_BY_NONZERO_WEIGHTS);var a=ef(e,"labels","meanSquaredError"),o=ef(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=ef(n,"weights","meanSquaredError")),Yu(a.shape,o.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(o);return Py(s,i,r)}}),Wy=hf({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Iy.SUM_BY_NONZERO_WEIGHTS);var o=ef(e,"multiClassLabels","sigmoidCrossEntropy"),i=ef(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=ef(n,"weights","sigmoidCrossEntropy")),Yu(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=bf(r),l=bf(1),c=bf(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var f=function(e,t){var n=ef(e,"labels","sigmoidCrossEntropyWithLogits"),r=ef(t,"logits","sigmoidCrossEntropyWithLogits");Yu(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),o=r.mul(n),i=r.abs().neg().exp().log1p();return a.sub(o).add(i)}(o,i);return Py(f,s,a)}}),Vy=hf({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Iy.SUM_BY_NONZERO_WEIGHTS);var o=ef(e,"onehotLabels","softmaxCrossEntropy"),i=ef(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=ef(n,"weights","softmaxCrossEntropy")),Yu(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=bf(r),l=bf(1),c=bf(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return jd((function(e,t,r){var a=t.logSumExp([n],!0),o=t.toFloat().sub(a);return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],o=of(e.shape,[n]);return[e.reshape(o).mul(r.toFloat().sub(a.exp())),e.reshape(o).mul(a.exp().sub(r.toFloat()))]}}}))(e,t)}(o,i);return Py(f,s,a)}}),Hy=Object.freeze({get Reduction(){return Iy},absoluteDifference:Ry,computeWeightedLoss:Py,cosineDistance:Oy,hingeLoss:Fy,huberLoss:By,logLoss:zy,meanSquaredError:Uy,sigmoidCrossEntropy:Wy,softmaxCrossEntropy:Vy});function Yy(e,t){return void 0===t&&(t=!1),Zl.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=ed(n),o=e.clone(),i=xf([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(e){var t,u=o,l=s,c=a;t=Zl.tidy((function(){var t=o.slice([e,e],[n-e,1]),u=t.norm(),l=o.slice([e,e],[1,1]),c=l.sign().neg(),f=l.sub(c.mul(u)),d=t.div(f);s=1===d.shape[0]?i.clone():i.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var h=c.matMul(f).div(u).neg(),p=o.slice([e,0],[n-e,r]),m=h.mul(s);o=0===e?p.sub(m.matMul(s.transpose().matMul(p))):o.slice([0,0],[e,r]).concat(p.sub(m.matMul(s.transpose().matMul(p))),0);var v=a.slice([0,e],[n,a.shape[1]-e]);return a=0===e?v.sub(v.matMul(s).matMul(m.transpose())):a.slice([0,0],[n,e]).concat(v.sub(v.matMul(s).matMul(m.transpose())),1),[s,o,a]})),s=t[0],o=t[1],a=t[2],Kc([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[a,o]}))}var Gy=hf({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Hu(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Hu(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=Rf(e,e.shape[0],0).map((function(e){return hd(e,[0])}));Hu(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var o=[],i=e,s=function(e){o.push(Zl.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=gg(o[n].mulStrict(t)).mul(o[n]);t=t.sub(r)}return t.div(cy(t,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?pd(o,0):o}}),qy=hf({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Yy(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=gd(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach((function(e){var n=Yy(e,t),r=n[0],i=n[1];a.push(r),o.push(i)})),[pd(a,0).reshape(e.shape),pd(o,0).reshape(e.shape)]}}),Qy=Object.freeze({gramSchmidt:Gy,qr:qy});function Xy(e,t,n,r,a){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY);var o=e.shape[0];return n=Math.min(n,o),Hu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Hu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Hu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Hu(1===t.rank,(function(){return"scores must be a 1D tensor"})),Hu(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a}}var Ky=hf({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=ef(e,"images","resizeBilinear");Hu(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Hu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Zl.runKernel((function(e,t){return t([a]),e.resizeBilinear(a,i,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return Zl.runKernel((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Jy=hf({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=ef(e,"images","resizeNearestNeighbor");Hu(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Hu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Hu("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Zl.runKernel((function(e,t){return t([a]),e.resizeNearestNeighbor(a,i,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return Zl.runKernel((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Zy=hf({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var o=ef(e,"boxes","nonMaxSuppression"),i=ef(t,"scores","nonMaxSuppression"),s=Xy(o,i,n,r,a);return n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,Zl.runKernel((function(e){return e.nonMaxSuppression(o,i,n,r,a)}),{$boxes:o})}}),$y=hf({cropAndResize_:function(e,t,n,r,a,o){var i=ef(e,"image","cropAndResize","float32"),s=ef(t,"boxes","cropAndResize","float32"),u=ef(n,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var l=s.shape[0];return Hu(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),Hu(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),Hu(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),Hu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Hu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Hu("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a})),Zl.runKernel((function(e,t){return e.cropAndResize(i,s,u,r,a,o)}),{$image:i,$boxes:s})}}),eb=Object.freeze({resizeBilinear:Ky,resizeNearestNeighbor:Jy,nonMaxSuppression:Zy,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),Au(this,void 0,void 0,(function(){var o,i,s,u,l,c;return Ru(this,(function(f){switch(f.label){case 0:return o=ef(e,"boxes","nonMaxSuppressionAsync"),i=ef(t,"scores","nonMaxSuppressionAsync"),s=Xy(o,i,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,o.data()];case 1:return u=f.sent(),[4,i.data()];case 2:return l=f.sent(),c=th(u,l,n,r,a),o!==e&&o.dispose(),i!==t&&i.dispose(),[2,c]}}))}))},cropAndResize:$y}),tb=hf({matMul_:function(e,t,n,r,a,o){var i;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o="linear");var s=ef(e,"a","fused matMul"),u=ef(t,"b","fused matMul");i=Gl(s,u),s=i[0],u=i[1];var l=n?s.shape[s.rank-2]:s.shape[s.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?s.shape[s.rank-1]:s.shape[s.rank-2],d=r?u.shape[u.rank-2]:u.shape[u.rank-1],h=s.shape.slice(0,-2),p=u.shape.slice(0,-2),m=Qu(h),v=Qu(p);Hu(s.rank>=2&&u.rank>=2&&s.rank===u.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+s.rank+" and "+u.rank+"."})),Hu(Xu(h,p),(function(){return"Error in fused matMul: outer dimensions ("+h+") and ("+p+") of Tensors with shapes "+s.shape+" and "+u.shape+" must match."})),Hu(l===c,(function(){return"Error in fused matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+s.shape+" and "+u.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var g,y=s.shape.slice(0,-2).concat([f,d]),b=n?s.as3D(m,l,f):s.as3D(m,f,l),w=r?u.as3D(v,d,c):u.as3D(v,c,d);null!=a&&Od(y,(g=Gl(g=ef(a,"bias","fused matMul"),s)[0]).shape);var x={$a:b,$b:w};return null!=a&&(x.$bias=g),Zl.runKernel((function(e,t){var a=e.fusedBatchMatMul(b,w,n,r,g,o);return t([b,w,a]),a}),x,(function(e,t){var i,s=t[0],u=t[1],l=t[2];if(null==o||"linear"===o)i=e;else{if("relu"!==o)throw new Error("Gradient for activation "+o+" has not been implemented yet.");i=e.mul(l.step())}var c={};return null!=a&&(c={$bias:function(){var e=i,t=Pd(g.shape,i.shape);return t.length>0&&(e=e.sum(t)),e.reshape(g.shape)}}),n||r?!n&&r?Object.assign({$a:function(){return i.matMul(u,!1,!1)},$b:function(){return i.matMul(s,!0,!1)}},c):n&&!r?Object.assign({$a:function(){return u.matMul(i,!1,!0)},$b:function(){return s.matMul(i,!1,!1)}},c):Object.assign({$a:function(){return u.matMul(i,!0,!0)},$b:function(){return i.matMul(s,!0,!0)}},c):Object.assign({$a:function(){return i.matMul(u,!1,!0)},$b:function(){return s.matMul(i,!0,!1)}},c)})).reshape(y)}}),nb=Object.freeze({matMul:tb}),rb=Object.freeze({image:eb,linalg:Qy,losses:Hy,spectral:Sy,fused:nb,signal:Ay,op:hf,batchNormalization2d:Sv,batchNormalization3d:Mv,batchNormalization4d:Ev,batchNormalization:Nv,batchNorm:Tv,batchNorm2d:Iv,batchNorm3d:jv,batchNorm4d:Dv,complex:pf,real:mf,imag:vf,concat:If,concat1d:jf,concat2d:Df,concat3d:Lf,concat4d:Af,split:Rf,conv1d:Pv,conv2d:Ov,conv3d:Fv,conv2dDerFilter:Bv,depthwiseConv2d:zv,separableConv2d:Uv,conv2dTranspose:Wv,matMul:Vv,dot:Hv,outerProduct:Yv,reverse:Gv,reverse1d:qv,reverse2d:Qv,reverse3d:Xv,reverse4d:Kv,maxPool:$v,avgPool:eg,pool:tg,slice:ng,slice1d:rg,slice2d:ag,slice3d:og,slice4d:ig,abs:Fm,acos:Bm,acosh:zm,asin:Um,asinh:Wm,atan:Vm,atanh:Hm,ceil:Ym,clipByValue:Gm,cos:qm,cosh:Qm,erf:Xm,exp:Km,expm1:Jm,floor:Zm,log:$m,log1p:ev,logSigmoid:tv,neg:nv,reciprocal:rv,round:av,rsqrt:ov,sigmoid:iv,sign:sv,isNaN:uv,isInf:lv,isFinite:cv,sin:fv,sinh:dv,softplus:hv,sqrt:pv,square:mv,step:vv,tan:gv,tanh:yv,all:ug,any:lg,argMax:cg,argMin:fg,logSumExp:dg,max:hg,mean:pg,min:mg,moments:vg,sum:gg,prod:yg,equal:bg,equalStrict:wg,greater:xg,greaterEqual:Cg,greaterEqualStrict:_g,greaterStrict:kg,less:Sg,lessEqual:Mg,lessEqualStrict:Eg,lessStrict:Ng,notEqual:Tg,notEqualStrict:Ig,add:jg,addN:Dg,addStrict:Lg,atan2:Ag,div:Rg,divStrict:Pg,floorDiv:Og,maximum:Fg,maximumStrict:Bg,minimum:zg,minimumStrict:Ug,mod:Wg,modStrict:Vg,mul:Hg,mulStrict:Yg,pow:Gg,powStrict:qg,squaredDifference:Qg,squaredDifferenceStrict:Xg,sub:Kg,subStrict:Jg,elu:ry,leakyRelu:ay,prelu:oy,relu:iy,selu:sy,logicalAnd:Zg,logicalNot:$g,logicalOr:ey,logicalXor:ty,where:ny,whereAsync:function(e){return Au(this,void 0,void 0,(function(){var t,n,r;return Ru(this,(function(a){switch(a.label){case 0:return[4,(t=ef(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=ih(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},buffer:qf,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:Qf,cast:Xf,clone:Kf,cumsum:Jf,depthToSpace:Zf,expandDims:$f,eye:ed,multinomial:td,oneHot:nd,pad:rd,pad1d:ad,pad2d:od,pad3d:id,pad4d:sd,rand:ud,randomNormal:ld,randomUniform:cd,reshape:fd,spaceToBatchND:dd,squeeze:hd,stack:pd,tile:md,truncatedNormal:vd,unstack:gd,setdiff1dAsync:function(e,t){return Au(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f;return Ru(this,(function(d){switch(d.label){case 0:return n=ef(e,"x","setdiff1d"),r=ef(t,"y","setdiff1d"),Hu(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Hu(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Hu(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=d.sent(),[4,r.data()];case 2:for(o=d.sent(),i=new Set(o),s=0,c=0;c<a.length;c++)i.has(a[c])||s++;for(u=new Dl([s],n.dtype),l=new Dl([s],"int32"),c=0,f=0;c<a.length;c++)i.has(a[c])||(u.values[f]=a[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:Mf,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Zl.runKernel((function(r){return r.linspace(e,t,n)}),{})},ones:kf,range:Ef,scalar:bf,tensor:gf,tensor1d:wf,tensor2d:xf,tensor3d:Cf,tensor4d:_f,tensor5d:function(e,t,n){if(Gu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Zc(e);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return yf(e,t,r,n)},tensor6d:function(e,t,n){if(Gu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Zc(e);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return yf(e,t=t||r,r,n)},zeros:Sf,onesLike:Nf,zerosLike:Tf,transpose:uy,softmax:Dd,logSoftmax:Ld,localResponseNormalization:ly,norm:cy,gather:hy,unsortedSegmentSum:py,basicLSTMCell:my,multiRNNCell:vy,movingAverage:gy,stridedSlice:yy,topk:by,scatterND:wy,fft:xy,ifft:Cy,rfft:_y,irfft:ky,sparseToDense:My,gatherND:Ey,dropout:Ny,hannWindow:jy,hammingWindow:Dy,frame:Ly}),ab=function(){function e(){if(this.blockSize=48,this.firstUse=!0,Fu.get("IS_BROWSER")){var e=function(){if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}();this.fromPixels2DContext=e.getContext("2d")}this.data=new Ad(this,Zl)}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,Fu.get("IS_NODE")&&Jc("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n,r;if(Fu.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData||e.data instanceof Uint8Array)n=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=e.width,this.fromPixels2DContext.canvas.height=e.height,this.fromPixels2DContext.drawImage(e,0,0,e.width,e.height),n=this.fromPixels2DContext.getImageData(0,0,e.width,e.height).data}if(4===t)r=new Int32Array(n);else{var a=e.width*e.height;r=new Int32Array(a*t);for(var o=0;o<a;o++)for(var i=0;i<t;++i)r[o*t+i]=n[4*o+i]}return Cf(r,[e.height,e.width,t],"int32")},e.prototype.read=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){return[2,this.readSync(e)]}))}))},e.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?Jd(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},e.prototype.bufferSync=function(e){return qf(e.shape,e.dtype,this.readSync(e.dataId))},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){return t=kl(),e(),[2,{kernelMs:kl()-t}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(e,t){var n=Pl.make(e.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:Zl.keep(e.clone()),imag:Zl.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Hu("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))},e.prototype.slice=function(e,t,n){if(this.assertNotComplex(e,"slice"),Td(e.shape,t,n)){var r=Id(t,e.strides),a=Qu(n);return gf(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var o=qf(n,e.dtype),i=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s).map((function(e,n){return e+t[n]}));o.values[s]=i.get.apply(i,u)}return o.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s,u){this.assertNotComplex(e,"stridedSlice");var l=Md(e.shape,t,n,r,a,o,i,s,u),c=l[0],f=l[1],d=l[2],h=f.filter((function(e,t){return-1===d.indexOf(t)}));if(h.some((function(e){return 0===e})))return gf([],h);for(var p=qf(f,e.dtype),m=this.bufferSync(e),v=0;v<p.size;v++){for(var g=p.indexToLoc(v),y=new Array(g.length),b=0;b<y.length;b++)y[b]=g[b]*r[b]+c[b];p.set.apply(p,[m.get.apply(m,y)].concat(g))}return p.toTensor().reshape(h)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,o=0;o<e.rank;o++)o!==t&&(r[a++]=e.shape[o]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)i[t]=o,u[o]=this.slice(e,i,s).reshape(r);return u},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse");for(var n=qf(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var o=n.indexToLoc(a),i=o.slice();t.forEach((function(t){return i[t]=e.shape[t]-1-i[t]})),n.set.apply(n,[r.get.apply(r,i)].concat(o))},o=0;o<n.size;o++)a(o);return n.toTensor()},e.prototype.concat=function(e,t){var n=this;this.assertNotComplex(e,"concat");var r=e.map((function(e){var n=Qu(e.shape.slice(t));return e.as2D(-1,n)})),a=df(r.map((function(e){return e.shape})),1),o=qf(a,e[0].dtype).values;if(1===r[0].shape[0]){var i=0;r.forEach((function(e){o.set(n.readSync(e.dataId),i),i+=e.size}))}else{var s=0;r.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var u=i*a[1]+s,l=0;l<e.shape[1];++l)o[u+l]=t[r++];s+=e.shape[1]}))}var u=df(e.map((function(e){return e.shape})),t);return gf(o,u,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(bf(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Hl(e.dtype,t.dtype),(function(e,t){return e+t}))},e.prototype.addN=function(e){var t=this;this.assertNotComplex(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=qf(e[0].shape,e[0].dtype),a=r.values,o=0;o<e.length;o++)for(var i=n[o],s=0;s<a.length;s++)a[s]+=i[s];return r.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Hl(e.dtype,t.dtype),(function(e,t){return e-t}))},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=c[0],d=c[1],h=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],v=p[1],g=p[2],y=o*i,b=qf([s,o,i],e.dtype),w=b.values,x=this.blockSize,C=0;C<s;C++)for(var _=0;_<o;_+=x)for(var k=0;k<i;k+=x)for(var S=0;S<a;S+=x)for(var M=Math.min(_+x,o),E=Math.min(k+x,i),N=Math.min(S+x,a),T=_;T<M;T++)for(var I=k;I<E;I++){for(var j=0,D=S;D<N;D++)j+=u[C*f+T*d+D*h]*l[D*m+I*v+C*g];w[C*y+(T*i+I)]+=j}return b.toTensor()},e.prototype.fusedBatchMatMul=function(e,t,n,r,a,o){var i=this.batchMatMul(e,t,n,r);return a&&(i=this.add(i,a)),o&&(i=function(e,t,n){if("linear"===t)return e.linear(n);if("relu"===t)return e.relu(n);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}(this,o,i)),i},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Hl(e.dtype,t.dtype),(function(e,t){return e*t}))},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),sf("sum",t,e.rank);for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,Hl(e.dtype,"int32")),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=0,d=0;d<i;++d)f+=u[c+d];s[l]=f}return o},e.prototype.prod=function(e,t){this.assertNotComplex(e,"sum");for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,Hl(e.dtype,"int32")),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=1,d=0;d<i;++d)f*=u[c+d];s[l]=f}return o},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,o=0;o<a;++o)t=t.expandDims(o+1);for(o=0;o<n;++o){var i=bf(o,"int32"),s=bg(i,t).asType("float32").mul(e).sum(0);r.push(s)}return pd(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin");var n=[t];sf("argMin",n,e.rank);for(var r=af(e.shape,n),a=r[0],o=r[1],i=Sf(a,"int32"),s=Qu(o),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var f=c*s,d=l[f],h=0,p=0;p<s;++p){var m=l[f+p];m<d&&(d=m,h=p)}u[c]=h}return i},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax");var n=[t];sf("argMax",n,e.rank);for(var r=af(e.shape,n),a=r[0],o=r[1],i=Sf(a,"int32"),s=Qu(o),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var f=c*s,d=l[f],h=0,p=0;p<s;++p){var m=l[f+p];m>d&&(d=m,h=p)}u[c]=h}return i},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=Hl(e.dtype,"int32"),o=Sf(e.shape,a),i=this.readSync(o.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var f=0;f<u;f++){var d=l(c,f);if(0===f)i[d]=n?0:s[d];else{var h=l(c,f-1);i[d]=n?s[h]+i[h]:s[d]+i[h]}}return o},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return Pl.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),o=this.readSync(n.dataId),i=Sf(t.shape,Hl(t.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],c=0;c<r.length;c++)for(var f=0;f<l;f++)1===r[c]?s[u++]=a[c]:s[u++]=o[c];return i},e.prototype.where=function(e){this.assertNotComplex([e],"where");var t=this.readSync(e.dataId);return ih(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),oh(this.readSync(e.dataId),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),sf("min",t,e.rank);for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,e.dtype),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];h<f&&(f=h)}s[l]=f}return o},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),sf("max",t,e.rank);for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,e.dtype),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];h>f&&(f=h)}s[l]=f}return o},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),sf("all",t,e.rank);for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,e.dtype),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];f=f&&h}s[l]=f}return o},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),sf("any",t,e.rank);for(var n=af(e.shape,t),r=n[0],a=n[1],o=Sf(r,e.dtype),i=Qu(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];f=f||h}s[l]=f}return o},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return Pl.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return Pl.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return Pl.make(e.shape,{values:n})},e.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return Pl.make(e.shape,{values:n},"bool")},e.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return Pl.make(e.shape,{values:n},"bool")},e.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return Pl.make(e.shape,{values:n},"bool")},e.prototype.round=function(e){this.assertNotComplex(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return Pl.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return Pl.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return Pl.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return Pl.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return Pl.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return Pl.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return Pl.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=a*a}return Pl.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return Pl.make(e.shape,{values:n})},e.prototype.linear=function(e){return e},e.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var t=Sf(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},e.prototype.prelu=function(e,t){return this.assertNotComplex([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},e.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return Pl.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),o=0;o<r.length;++o){var i=r[o];n[o]=i>=1?a[o]:a[o]*(i+1)}return Pl.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var t=xm,n=Cm,r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var i=a[o];r[o]=i>=0?n*i:t*(Math.exp(i)-1)}return Pl.make(e.shape,{values:r})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var i=a[o];r[o]=i>n?n:i<t?t:i}return Pl.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],o=n[2*r+1];t[r]=Math.hypot(a,o)}return Pl.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return Pl.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return Pl.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var o,i=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);o=s?u:i?r[a]:Math.log(1+u),n[a]=o}return Pl.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Ju(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return Pl.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r],o=1/(1+.3275911*a);t[r]=1-((((1.061405429*o-1.453152027)*o+1.421413741)*o-.284496736)*o+.254829592)*o*Math.exp(-a*a)}return Pl.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var o=r[a];isNaN(o)?n[a]=NaN:n[a]=o>0?1:t}return Pl.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=qf(n.outShape,e.dtype),c=this.readSync(e.dataId),f=this.readSync(t.dataId),d=l.values,h=0;h<n.batchSize;++h)for(var p=h*e.strides[0],m=h*l.strides[0],v=0;v<n.outHeight;++v)for(var g=m+v*l.strides[1],y=v*n.strideHeight-u,b=0;b<r;b++){var w=y+b*o;if(!(w<0||w>=n.inHeight))for(var x=b*t.strides[0],C=p+w*e.strides[1],_=0;_<n.outWidth;++_)for(var k=g+_*n.outChannels,S=_*n.strideWidth-s,M=0;M<a;M++){var E=S+M*i;if(!(E<0||E>=n.inWidth))for(var N=x+M*t.strides[1],T=C+E*n.inChannels,I=N,j=0;j<n.inChannels;++j){for(var D=c[T+j],L=0;L<n.outChannels;++L)d[k+L]+=D*f[I+L];I+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,o=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,f=n.padInfo.top,d=qf(n.outShape,e.dtype),h=this.readSync(e.dataId),p=this.readSync(t.dataId),m=d.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*d.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*d.strides[1],x=b*n.strideDepth-l,C=0;C<r;C++){var _=x+C*i;if(!(_<0||_>=n.inDepth))for(var k=C*t.strides[0],S=g+_*e.strides[1],M=0;M<n.outHeight;++M)for(var E=w+M*d.strides[2],N=M*n.strideHeight-f,T=0;T<a;T++){var I=N+T*s;if(!(I<0||I>=n.inHeight))for(var j=k+T*t.strides[1],D=S+I*e.strides[2],L=0;L<n.outWidth;++L)for(var A=E+L*n.outChannels,R=L*n.strideWidth-c,P=0;P<o;P++){var O=R+P*u;if(!(O<0||O>=n.inWidth))for(var F=j+P*t.strides[2],B=D+O*n.inChannels,z=F,U=0;U<n.inChannels;++U){for(var W=h[B+U],V=0;V<n.outChannels;++V)m[A+V]+=W*p[z+V];z+=n.outChannels}}}}return d.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput");for(var r=qf(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=this.readSync(e.dataId),c=e.strides,f=c[0],d=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,C=n.inChannels,_=n.inHeight,k=n.inWidth,S=n.outChannels,M=n.outHeight,E=n.outWidth,N=n.strideHeight,T=n.strideWidth,I=w-1-n.padInfo.top,j=x-1-n.padInfo.left,D=0;D<b;++D)for(var L=0;L<C;++L)for(var A=0;A<_;++A)for(var R=A-I,P=Math.max(0,Math.ceil(R/N)),O=Math.min(M,(w+R)/N),F=0;F<k;++F){for(var B=F-j,z=Math.max(0,Math.ceil(B/T)),U=Math.min(E,(x+B)/T),W=0,V=P;V<O;++V)for(var H=V*N-R,Y=z;Y<U;++Y)for(var G=f*D+d*V+h*Y,q=v*(w-1-H)+g*(x-1-(Y*T-B))+y*L,Q=0;Q<S;++Q)W+=l[G+Q]*p[q+Q];a[i*D+s*A+u*F+L]=W}return r.toTensor()},e.prototype.conv3dDerInput=function(e,t,n){for(var r=qf(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=o[3],c=this.readSync(e.dataId),f=e.strides,d=f[0],h=f[1],p=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=n.batchSize,_=n.filterDepth,k=n.filterHeight,S=n.filterWidth,M=n.inChannels,E=n.inDepth,N=n.inHeight,T=n.inWidth,I=n.outChannels,j=n.outDepth,D=n.outHeight,L=n.outWidth,A=n.strideDepth,R=n.strideHeight,P=n.strideWidth,O=_-1-n.padInfo.front,F=k-1-n.padInfo.top,B=S-1-n.padInfo.left,z=0;z<C;++z)for(var U=0;U<M;++U)for(var W=0;W<E;++W)for(var V=W-O,H=Math.max(0,Math.ceil(V/A)),Y=Math.min(j,(_+V)/A),G=0;G<N;++G)for(var q=G-F,Q=Math.max(0,Math.ceil(q/R)),X=Math.min(D,(k+q)/R),K=0;K<T;++K){for(var J=K-B,Z=Math.max(0,Math.ceil(J/P)),$=Math.min(L,(S+J)/P),ee=0,te=H;te<Y;++te)for(var ne=te*A-V,re=Q;re<X;++re)for(var ae=re*R-q,oe=Z;oe<$;++oe)for(var ie=d*z+h*te+p*re+m*oe,se=y*(_-1-ne)+b*(k-1-ae)+w*(S-1-(oe*P-J))+x*U,ue=0;ue<I;++ue)ee+=c[ie+ue]*v[se+ue];a[i*z+s*W+u*G+l*K+U]=ee}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=qf(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=this.bufferSync(e),f=this.bufferSync(t),d=0;d<o;++d)for(var h=Math.max(0,Math.ceil((l-d)/r)),p=Math.min(n.outHeight,(n.inHeight+l-d)/r),m=0;m<i;++m)for(var v=Math.max(0,Math.ceil((u-m)/a)),g=Math.min(n.outWidth,(n.inWidth+u-m)/a),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var w=0,x=0;x<n.batchSize;++x)for(var C=h;C<p;++C)for(var _=d+C*r-l,k=v;k<g;++k){var S=m+k*a-u;w+=c.get(x,_,S,y)*f.get(x,C,k,b)}s.set(w,d,m,y,b)}return s.toTensor()},e.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,o=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=qf(n.filterShape,"float32"),c=l.values,f=l.strides,d=f[0],h=f[1],p=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=this.readSync(e.dataId),_=e.strides,k=_[0],S=_[1],M=_[2],E=_[3],N=n.padInfo.front,T=n.padInfo.left,I=n.padInfo.top,j=0;j<i;++j)for(var D=Math.max(0,Math.ceil((N-j)/r)),L=Math.min(n.outDepth,(n.inDepth+N-j)/r),A=j*d,R=0;R<s;++R)for(var P=Math.max(0,Math.ceil((I-R)/a)),O=Math.min(n.outHeight,(n.inHeight+I-R)/a),F=R*h+A,B=0;B<u;++B)for(var z=Math.max(0,Math.ceil((T-B)/o)),U=Math.min(n.outWidth,(n.inWidth+T-B)/o),W=B*p+F,V=0;V<n.inChannels;++V)for(var H=V*m+W,Y=0;Y<n.outChannels;++Y){for(var G=0,q=0;q<n.batchSize;++q)for(var Q=q*k,X=q*y,K=D;K<L;++K)for(var J=(j+K*r-N)*S+Q,Z=K*b+X,$=P;$<O;++$)for(var ee=(R+$*a-I)*M+J,te=$*w+Z,ne=z;ne<U;++ne){var re=ne*x+te;G+=C[(B+ne*o-T)*E+ee+V]*v[re+Y]}c[H+Y]=G}return l.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=qf(n.outShape,e.dtype),f=this.readSync(e.dataId),d=this.readSync(t.dataId),h=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*c.strides[1],b=g*n.strideHeight-s,w=0;w<r;++w){var x=b+w*o;if(!(x<0||x>=n.inHeight))for(var C=w*t.strides[0],_=m+x*e.strides[1],k=0;k<n.outWidth;++k)for(var S=y+k*c.strides[2],M=k*n.strideWidth-u,E=0;E<a;++E){var N=M+E*i;if(!(N<0||N>=n.inWidth))for(var T=C+E*t.strides[1],I=_+N*n.inChannels,j=S,D=T,L=0;L<n.inChannels;++L){for(var A=f[I+L],R=0;R<l;++R)h[j+R]+=A*d[D+R];j+=l,D+=l}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput");for(var r=qf(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=this.readSync(e.dataId),c=e.strides,f=c[0],d=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,C=n.inChannels,_=n.inHeight,k=n.inWidth,S=n.outChannels,M=n.outHeight,E=n.outWidth,N=n.strideHeight,T=n.strideWidth,I=w-1-n.padInfo.top,j=x-1-n.padInfo.left,D=S/C,L=0;L<b;++L)for(var A=0;A<C;++A)for(var R=0;R<_;++R)for(var P=R-I,O=Math.max(0,Math.ceil(P/N)),F=Math.min(M,(w+P)/N),B=0;B<k;++B){for(var z=B-j,U=Math.max(0,Math.ceil(z/T)),W=Math.min(E,(x+z)/T),V=0,H=O;H<F;++H)for(var Y=H*N-P,G=U;G<W;++G)for(var q=f*L+d*H+h*G,Q=v*(w-1-Y)+g*(x-1-(G*T-z))+y*A,X=0;X<D;++X)V+=l[q+(A*D+X)]*p[Q+X];a[i*L+s*R+u*B+A]=V}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=qf(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,f=this.bufferSync(e),d=this.bufferSync(t),h=0;h<o;++h)for(var p=Math.max(0,Math.ceil((l-h)/r)),m=Math.min(n.outHeight,(n.inHeight+l-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((u-v)/a)),y=Math.min(n.outWidth,(n.inWidth+u-v)/a),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),x=b%c,C=0,_=0;_<n.batchSize;++_)for(var k=p;k<m;++k)for(var S=h+k*r-l,M=g;M<y;++M){var E=v+M*a-u;C+=f.get(_,S,E,w)*d.get(_,k,M,b)}s.set(C,h,v,w,x)}return s.toTensor()},e.prototype.tile=function(e,t){return this.assertNotComplex(e,"tile"),ah(this.bufferSync(e),t)},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),o=this.bufferSync(e),i=qf(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),l=u.map((function(e,t){return e+a[t]}));i.set.apply(i,[o.get.apply(o,u)].concat(l))}return i.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var a=this.readSync(e.dataId),o=qf(n,e.dtype),i=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=i.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=o.locToIndex(u);o.values[c]=a[r]}return o.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var o=qf(r,e.dtype),i=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=i.locToIndex(l);o.values[s]=i.values[c]}return o.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=yd(e.shape,t,r),o=bd(a.length,t.length),i=wd(e.shape,t,r),s=xd(n,t.length),u=Cd(i,n,t.length);return e.reshape(a).transpose(o).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=yd(i.shape,t,r,!1),u=bd(s.length,t.length,!1),l=wd(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,f="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),h=qf(t.outShape,e.dtype),p=h.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],v=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,w=y*e.strides[0],x=0;x<t.inChannels;++x)for(var C=0;C<t.outHeight;++C)for(var _=C*r-l,k=Math.max(0,_),S=Math.min(t.inHeight,s+_),M=b+C*v,E=0;E<t.outWidth;++E){for(var N=E*a-c,T=Math.max(0,N),I=Math.min(t.inWidth,u+N),j=f,D=0,L=0,A=k;A<S;A+=o){for(var R=w+A*e.strides[1],P=T;P<I;P+=i){var O=d[R+P*e.strides[2]+x];"max"===n&&O>j?j=O:"avg"===n&&(D+=O,L++)}if(isNaN(j))break}p[M+E*g+x]="avg"===n?D/L:j}return h.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=qf(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,o=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,f=this.bufferSync(e),d=0;d<t.batchSize;++d)for(var h=0;h<t.inChannels;++h)for(var p=0;p<t.outHeight;++p){for(var m=p*r-l,v=m;v<0;)v+=o;for(var g=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*a-c,w=b;w<0;)w+=i;for(var x=Math.min(t.inWidth,u+b),C=Number.NEGATIVE_INFINITY,_=-1,k=v;k<g;k+=o)for(var S=k-m,M=w;M<x;M+=i){var E=M-b,N=f.get(d,k,M,h);N>C&&(C=N,_=S*u+E)}n.set(_,d,p,y,h)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),o=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=c-1-r.padInfo.left,d=l-1-r.padInfo.top,h=qf(t.shape,"float32"),p=this.bufferSync(a),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-d,x=b-f,C=0,_=0;_<l;_+=s){var k=(w+_)/o;if(!(k<0||k>=r.outHeight||Math.floor(k)!==k))for(var S=0;S<c;S+=u){var M=(x+S)/i;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var E=l*c-1-p.get(v,k,M,g)===_*c+S?1:0;0!==E&&(C+=m.get(v,k,M,g)*E)}}}h.set(C,v,y,b,g)}return h.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=c-1-n.padInfo.left,d=l-1-n.padInfo.top,h=qf(t.shape,"float32"),p=1/(o*i),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-d,x=b-f,C=0,_=0;_<l;_+=s){var k=(w+_)/r;if(!(k<0||k>=n.outHeight||Math.floor(k)!==k))for(var S=0;S<c;S+=u){var M=(x+S)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(C+=m.get(v,k,M,g))}}h.set(C*p,v,y,b,g)}return h.toTensor()},e.prototype.cast=function(e,t){return Qd(e,t,this)},e.prototype.reshape=function(e,t){return Xd(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(Qu([o,t,n,u])),f=[r&&t>1?i-1:i,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0,p=f[0]/d[0],m=f[1]/d[1],v=0;v<o;v++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),w=y-b,x=Math.min(i-1,Math.ceil(y)),C=v*e.strides[0]+b*e.strides[1],_=v*e.strides[0]+x*e.strides[1],k=0;k<n;k++)for(var S=m*k,M=Math.floor(S),E=S-M,N=Math.min(s-1,Math.ceil(S)),T=C+M*e.strides[2],I=_+M*e.strides[2],j=C+ +N*e.strides[2],D=_+N*e.strides[2],L=0;L<u;L++){var A=l[T+L],R=l[I+L],P=A+(l[j+L]-A)*E,O=P+(R+(l[D+L]-R)*E-P)*w;c[h++]=O}return gf(c,[o,t,n,u])},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=new Float32Array(a*o*i*s),d=[n&&l>1?o-1:o,n&&c>1?i-1:i],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=d[0]/h[0],m=d[1]/h[1],v=this.readSync(e.dataId),g=0,y=0;y<a;y++)for(var b=y*t.strides[0],w=0;w<l;w++)for(var x=w*p,C=Math.floor(x),_=Math.min(Math.ceil(x),o-1),k=b+C*t.strides[1],S=b+_*t.strides[1],M=x-C,E=1-M,N=0;N<c;N++)for(var T=N*m,I=Math.floor(T),j=Math.min(Math.ceil(T),i-1),D=T-I,L=1-D,A=k+I*t.strides[2],R=k+j*t.strides[2],P=S+I*t.strides[2],O=S+j*t.strides[2],F=E*L,B=E*D,z=M*L,U=M*D,W=0;W<s;W++){var V=v[g++];f[A+W]+=V*F,f[R+W]+=V*B,f[P+W]+=V*z,f[O+W]+=V*U}return _f(f,[a,i,o,s],t.dtype)},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(o*t*n*u),f=[r&&t>1?i-1:i,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=f[0]/d[0],p=f[1]/d[1],m=0,v=0;v<o;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=h*y,w=g+Math.min(i-1,r?Math.round(b):Math.floor(b))*e.strides[1],x=0;x<n;x++)for(var C=p*x,_=w+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],k=0;k<u;k++){var S=l[_+k];c[m++]=S}return gf(c,[o,t,n,u],e.dtype)},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=new Float32Array(a*o*i*s),d=this.readSync(e.dataId),h=[n&&l>1?o-1:o,n&&c>1?i-1:i],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/p[0],v=h[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2,x=0;x<a;x++)for(var C=x*t.strides[0],_=0;_<o;_++)for(var k=C+_*t.strides[1],S=Math.floor(_*g),M=Math.floor(S-b/2),E=0;E<i;E++)for(var N=k+E*t.strides[2],T=Math.floor(E*y),I=Math.floor(T-w/2),j=0;j<s;j++){for(var D=0,L=0;L<b;L++){var A=L+M;if(!(A<0||A>=l)){var R=C+A*e.strides[1],P=A*m;if(_===Math.min(o-1,n?Math.round(P):Math.floor(P)))for(var O=0;O<w;O++){var F=O+I;if(!(F<0||F>=c)){var B=R+F*e.strides[2],z=F*v;E===Math.min(i-1,n?Math.round(z):Math.floor(z))&&(D+=d[B+j])}}}}f[N+j]=D}return _f(f,t.shape,t.dtype)},e.prototype.batchNormalization=function(e,t,n,r,a,o){this.assertNotComplex([e,t,n,a,o],"batchNorm");for(var i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=a?this.readSync(a.dataId):new Float32Array([1]),c=o?this.readSync(o.dataId):new Float32Array([0]),f=new Float32Array(i.length),d=c.length,h=l.length,p=u.length,m=s.length,v=0,g=0,y=0,b=0,w=0;w<i.length;++w)f[w]=c[v++]+(i[w]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),v>=d&&(v=0),g>=m&&(g=0),y>=h&&(y=0),b>=p&&(b=0);return _f(f,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){this.assertNotComplex(e,"localResponseNormalization4D");var o=e.shape[3],i=o-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%o,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,i),u=0;r<=a;r++){var l=s[r];u+=l*l}return u}for(var f=0;f<u;f++){var d=c(f),h=s[f]*Math.pow(n+r*d,-a);l[f]=h}return _f(l,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){this.assertNotComplex(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),f=new Float32Array(e.size),d=e.size,h=0;h<d;h++){for(var p=h%s,m=h-p+Math.max(0,p-r),v=h-p+Math.min(s,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(l[y],2);for(g=o*g+a,y=m;y<v;y++){var b=-2*o*i*l[y]*c[h]/g;h===y&&(b+=Math.pow(g,-i)),b*=u[h],f[y]+=b}}return _f(f,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial");for(var a=t?e:Dd(e),o=a.shape[0],i=a.shape[1],s=Sf([o,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(a.dataId),c=0;c<o;++c){var f=c*i,d=new Float32Array(i-1);d[0]=l[f];for(var h=1;h<d.length;++h)d[h]=d[h-1]+l[f+h];for(var p=Hf(r.toString()),m=c*n,v=0;v<n;++v){var g=p();u[m+v]=d.length;for(var y=0;y<d.length;y++)if(g<d[y]){u[m+v]=y;break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var o=this.readSync(e.dataId),i=0;i<e.size;++i)o[i]>=0&&o[i]<t&&(a[i*t+o[i]]=n);return xf(a,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return this.assertNotComplex(e,"nonMaxSuppression"),th(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},e.prototype.fft=function(e){return this.fftBatch(e,!1)},e.prototype.ifft=function(e){return this.fftBatch(e,!0)},e.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=qf(e.shape,"float32"),o=qf(e.shape,"float32"),i=mf(e).as2D(n,r),s=vf(e).as2D(n,r),u=0;u<n;u++)for(var l=i.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),f=pf(l,c),d=this.readSync(this.fftImpl(f,t).dataId),h=0;h<r;h++){var p=Zd(d,h);a.values[u*r+h]=p.real,o.values[u*r+h]=p.imag}return pf(a.toTensor(),o.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=pf(mf(a).div(bf(r)),vf(a).div(bf(r)))),a}var o=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t));return pf(i.real,i.imag).as2D(e.shape[0],e.shape[1])},e.prototype.isExponentOf2=function(e){return 0==(e&e-1)},e.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),i=pf(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),u=pf(s.real,s.imag).as1D();i=this.fftRadix2(i,a,n),u=this.fftRadix2(u,a,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}(t,n),c=pf(l.real,l.imag).mul(u),f=i.add(c),d=i.sub(c),h=mf(f).concat(mf(d)),p=vf(f).concat(vf(d));return pf(h,p).as1D()},e.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=eh(a*s,t,n),l=Zd(e,s);o+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(o/=t,i/=t),$d(r,o,i,a)}return r},e.prototype.depthToSpace=function(e,t,n){Hu("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Hu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],a=e.shape[1],o=e.shape[2],i=e.shape[3],s=a*t,u=o*t,l=i/(t*t),c=this.readSync(e.dataId),f=new Float32Array(r*s*u*l),d=0,h=0;h<r;++h)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),v=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*l,w=0;w<l;++w){var x=w+b+i*(y+o*(m+a*h));f[d++]=c[x]}return _f(f,[r,s,u,l])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=Od(e.shape,t.shape),o=qf(a,n),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Rd(e.shape,a),l=Rd(t.shape,a),c=o.values;if(u.length+l.length===0)for(var f=0;f<c.length;++f)c[f]=r(i[f%i.length],s[f%s.length]);else{var d=this.bufferSync(e),h=this.bufferSync(t),p=function(n){var a=o.indexToLoc(n),f=a.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var p=d.locToIndex(f),m=a.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=h.locToIndex(m);c[n]=r(i[p],s[v])};for(f=0;f<c.length;++f)p(f)}return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Od(e.shape,t.shape),a=qf(r,"float32"),o=qf(r,"float32"),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Rd(e.shape,r),l=Rd(t.shape,r),c=a.values,f=o.values;if(u.length+l.length===0)for(var d=0;d<c.length;d++){var h=d%i.length,p=d%s.length,m=n(i[2*h],i[2*h+1],s[2*p],s[2*p+1]);c[d]=m.real,f[d]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=a.indexToLoc(r),d=o.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var h=v.locToIndex(d),p=o.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=g.locToIndex(p),y=n(i[2*h],i[2*h+1],s[2*m],s[2*m+1]);c[r]=y.real,f[r]=y.imag};for(d=0;d<c.length;d++)y(d)}return this.complex(a.toTensor(),o.toTensor())},e.prototype.split=function(e,t,n){return rh(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(e,t,n,r,a,o){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],f=t.shape[0],d=r[0],h=r[1],p=qf([f,d,h,c],e.dtype),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,w=0;w<f;w++){var x=4*w,C=m[x],_=m[x+1],k=m[x+2],S=m[x+3],M=v[w];if(!(M>=s))for(var E=d>1?(k-C)*(u-1)/(d-1):0,N=h>1?(S-_)*(l-1)/(h-1):0,T=0;T<d;T++){var I=d>1?C*(u-1)+T*E:.5*(C+k)*(u-1);if(I<0||I>u-1)for(var j=0;j<h;j++)for(var D=0;D<c;D++){var L=D+j*b[2]+T*b[1]+w*b[0];p.values[L]=o}else if("bilinear"===a){var A=Math.floor(I),R=Math.ceil(I),P=I-A;for(j=0;j<h;j++)if((Y=h>1?_*(l-1)+j*N:.5*(_+S)*(l-1))<0||Y>l-1)for(D=0;D<c;D++)L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=o;else{var O=Math.floor(Y),F=Math.ceil(Y),B=Y-O;for(D=0;D<c;D++){var z=g[L=D+O*y[2]+A*y[1]+M*y[0]],U=g[L=D+F*y[2]+A*y[1]+M*y[0]],W=g[L=D+O*y[2]+R*y[1]+M*y[0]],V=z+(U-z)*B,H=W+(g[L=D+F*y[2]+R*y[1]+M*y[0]]-W)*B;L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=V+(H-V)*P}}}else for(j=0;j<h;++j){var Y;if((Y=h>1?_*(l-1)+j*N:.5*(_+S)*(l-1))<0||Y>l-1)for(D=0;D<c;D++)L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=o;else{var G=Math.round(Y),q=Math.round(I);for(D=0;D<c;D++){var Q=D+G*y[2]+q*y[1]+M*y[0],X=D+j*b[2]+T*b[1]+w*b[0];p.values[X]=g[Q]}}}}}return p.toTensor()},e.prototype.sparseToDense=function(e,t,n,r){var a=Sd(0,e,n),o=a.sliceRank,i=a.numUpdates,s=a.sliceSize,u=a.strides,l=a.outputSize;return this.scatter(e,t,n,l,s,i,o,u,r,!1)},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=_d(e,t),o=a[0],i=a[1],s=a[2],u=a[3];if(0===i)return gf([],o,e.dtype);for(var l=new Dl([i,s],e.dtype),c=this.readSync(t.dataId),f=this.readSync(e.dataId),d=0;d<i;d++){for(var h=[],p=0,m=0;m<r;m++){var v=c[d*r+m];p+=v*u[m],h.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+h+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[d*s+g]=f[p*s+g]}return l.toTensor().reshape(o)},e.prototype.scatterND=function(e,t,n){var r=Sd(0,e,n),a=r.sliceRank,o=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=bf(0);return this.scatter(e,t,n,u,i,o,a,s,l,!0)},e.prototype.fill=function(e,t,n){var r=ol(n=n||vl(t),Qu(e));return r.fill(t),Pl.make(e,{values:r},n)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){var t=ol(e.dtype,Qu(e.shape));return Pl.make(e.shape,{values:t},e.dtype)},e.prototype.linspace=function(e,t,n){return Kd(e,t,n)},e.prototype.scatter=function(e,t,n,r,a,o,i,s,u,l){var c=[r/a,a],f=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return gf([],n,t.dtype);var h=new Dl(c,t.dtype);h.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<o;p++){for(var m=[],v=0,g=0;g<i;g++){var y=f[p*i+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<a;b++)l?h.values[v*a+b]+=d[p*a+b]:h.values[v*a+b]=0===t.rank?d[0]:d[p*a+b]}return h.toTensor().reshape(n)},e}();Zl.registerBackend("cpu",(function(){return new ab}),1);var ob=function(){function e(){this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return fetch(e,t)},e}();Fu.get("IS_BROWSER")&&Fu.setPlatform("browser",new ob);var ib,sb=function(){function e(){var e=n(745);this.textEncoder=new e.TextEncoder,this.textDecoder=new e.TextDecoder}return e.prototype.encodeUTF8=function(e){return this.textEncoder.encode(e)},e.prototype.decodeUTF8=function(e){return 0===e.length?"":this.textDecoder.decode(e)},e.prototype.fetch=function(e,t){return null!=Fu.global.fetch?Fu.global.fetch(e,t):(null==ib&&(ib=n(7318)),ib(e,t))},e}();Fu.get("IS_NODE")&&Fu.setPlatform("node",new sb);var ub={float32:4,int32:4,uint16:2,uint8:1,bool:1};function lb(e,t){for(var n={},r=0,a=function(t){var a=t.name,o=t.dtype,i=t.shape,s=Qu(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=ub[l.dtype],f=e.slice(r,r+s*c),d="uint8"===l.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===o)u=Float32Array.from(d,(function(e){return e*l.scale+l.min}));else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=Int32Array.from(d,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===o){var h=t,p=new Uint8Array(e.slice(r,r+h.byteLength));u=Fu.platform.decodeUTF8(p).split(h.delimiter),r+=h.byteLength}else{var m=ub[o];if(f=e.slice(r,r+s*m),"float32"===o)u=new Float32Array(f);else if("int32"===o)u=new Int32Array(f);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=new Uint8Array(f)}r+=s*m}n[a]=gf(u,i,o)},o=0,i=t;o<i.length;o++)a(i[o]);return n}function cb(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var fb="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function db(e){return fb?Buffer.byteLength(e):new Blob([e]).size}function hb(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function pb(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function mb(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:db(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:db(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var vb=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),gb="://",yb=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Hu(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(gb)&&(t=t.slice(0,t.indexOf(gb))),Hu(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Hu(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function bb(e){if(-1===e.indexOf(gb))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yb.getSchemes().join(","));return{scheme:e.split(gb)[0],path:e.split(gb)[1]}}function wb(e,t,n){return void 0===n&&(n=!1),Au(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,f;return Ru(this,(function(d){switch(d.label){case 0:return Hu(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Hu((r=vb.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Hu(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],Hu((o=vb.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Hu(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),i=o[0],s=bb(e).scheme,u=bb(e).path,l=s===bb(e).scheme,[4,a.load()];case 1:return c=d.sent(),n&&l?[4,yb.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,i.save(c)];case 4:return f=d.sent(),!n||l?[3,6]:[4,yb.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var xb="models_store",Cb="model_info_store";function _b(){if(!Fu.getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kb(e){var t=e.result;t.createObjectStore(xb,{keyPath:"modelPath"}),t.createObjectStore(Cb,{keyPath:"modelPath"})}var Sb=function(){function e(e){if(this.indexedDB=_b(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return kb(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(xb,"readonly"),s=i.objectStore(xb).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,l=mb(t),c=o.transaction(Cb,"readwrite"),f=c.objectStore(Cb),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});d.onsuccess=function(){var a=(u=o.transaction(xb,"readwrite")).objectStore(xb).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=c.objectStore(Cb)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},d.onerror=function(e){return o.close(),r(d.error)},c.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Mb=function(e){return Fu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Sb.URL_SCHEME)?(t=e.slice(Sb.URL_SCHEME.length),new Sb(t)):null;var t};vb.registerSaveRouter(Mb),vb.registerLoadRouter(Mb);var Eb=function(){function e(){this.indexedDB=_b()}return e.prototype.listModels=function(){return Au(this,void 0,void 0,(function(){var e=this;return Ru(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return kb(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(Cb,"readonly"),o=a.objectStore(Cb).getAll();o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Au(this,void 0,void 0,(function(){var t=this;return Ru(this,(function(n){var r;return e=(r=e).startsWith(Sb.URL_SCHEME)?r.slice(Sb.URL_SCHEME.length):r,[2,new Promise((function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return kb(a)},a.onsuccess=function(){var t,o=a.result,i=o.transaction(Cb,"readwrite"),s=i.objectStore(Cb),u=s.get(e);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),i=function(){var a=(t=o.transaction(xb,"readwrite")).objectStore(xb).delete(e);a.onsuccess=function(){return n(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(Fu.getBool("IS_BROWSER"))try{yb.registerManager(Sb.URL_SCHEME,new Eb)}catch(as){}var Nb="/",Tb="tensorflowjs_models",Ib="info",jb="model_topology",Db="weight_specs",Lb="weight_data",Ab="model_metadata";function Rb(e){return{info:[Tb,e,Ib].join(Nb),topology:[Tb,e,jb].join(Nb),weightSpecs:[Tb,e,Db].join(Nb),weightData:[Tb,e,Lb].join(Nb),modelMetadata:[Tb,e,Ab].join(Nb)}}function Pb(e){var t=e.split(Nb);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Nb)}var Ob=function(){function e(e){if(!Fu.getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Rb(this.modelPath)}return e.prototype.save=function(e){return Au(this,void 0,void 0,(function(){var t,n,r;return Ru(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=mb(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(o=e.weightData,fb?Buffer.from(o).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(o))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var o}))}))},e.prototype.load=function(){return Au(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return Ru(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(a),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(fb){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(i),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),Fb=function(e){return Fu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ob.URL_SCHEME)?(t=e.slice(Ob.URL_SCHEME.length),new Ob(t)):null;var t};vb.registerSaveRouter(Fb),vb.registerLoadRouter(Fb);var Bb=function(){function e(){Hu(Fu.getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Hu(void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Au(this,void 0,void 0,(function(){var e,t,n,r,a,o;return Ru(this,(function(i){for(e={},t=Tb+Nb,n=Nb+Ib,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(o=Pb(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Au(this,void 0,void 0,(function(){var t,n;return Ru(this,(function(r){var a;if(e=(a=e).startsWith(Ob.URL_SCHEME)?a.slice(Ob.URL_SCHEME.length):a,t=Rb(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Fu.getBool("IS_BROWSER"))try{yb.registerManager(Ob.URL_SCHEME,new Bb)}catch(as){}function zb(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Ub=function(){function e(t){if(!Fu.getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Au(this,void 0,void 0,(function(){var t,n,r,a,o,i;return Ru(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,zb((function(){return o.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,zb((function(){return i.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:mb(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),Wb=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Au(this,void 0,void 0,(function(){var e,t,n=this;return Ru(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var o=new FileReader;o.onload=function(o){var i=JSON.parse(o.target.result),s=i.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void a(e)}var c=[],f=[],d=[];u.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=f.indexOf(e);d[a]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:hb(d)})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return pb(e.name)})),a={},o=0,i=e;o<i.length;o++)i[o].paths.forEach((function(e){var o=pb(e);if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'");if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.");a[e]=t[r.indexOf(o)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function Vb(e,t,n,r){!function(e){Hu(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Hu(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Hu(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Hu(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function Hb(e,t){return Au(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c;return Ru(this,(function(f){switch(f.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Ml:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit)})),a=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,Vb(r,t.onProgress,a,o)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,Vb(s,t.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}}))}))}function Yb(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),Au(t,void 0,void 0,(function(){var t,o,i,s,u,l,c,f,d,h;return Ru(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),o={},i=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=ub[u]*Qu(e.shape),c=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),i[n]=!0)})):c(),s.push(e.name),r+=l}))})),!i.every((function(e){return e})))throw u=a.filter((function(e,t){return!i[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return f=p.sent(),d={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[h+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(f[h+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=lb(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),h+=t})),[2,d]}}))}))}}vb.registerSaveRouter((function(e){return Fu.getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ub.URL_SCHEME)?(void 0===(t=e.slice(Ub.URL_SCHEME.length))&&(t="model"),new Ub(t)):null;var t}));var Gb=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Hu("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Ml,Hu(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Hu(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Au(this,void 0,void 0,(function(){var t,n,r,a;return Ru(this,(function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:mb(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return Au(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s;return Ru(this,(function(u){switch(u.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=u.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");u.label=2;case 2:return u.trys.push([2,4,,5]),[4,e.json()];case 3:return t=u.sent(),[3,5];case 4:throw u.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:s=u.sent(),o=s[0],i=s[1],u.label=7;case 7:return[2,{modelTopology:r,weightSpecs:o,weightData:i}]}}))}))},e.prototype.loadWeights=function(e){return Au(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c,f;return Ru(this,(function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],o=this.weightPathPrefix||r,i=[],s=0,u=e;s<u.length;s++)l=u[s],i.push.apply(i,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(o+e+a)}))})),[4,Hb(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=d.sent(),[2,[i,hb(f)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function qb(e){return null!=e.match(Gb.URL_SCHEME_REGEX)}var Qb=function(e,t){return(Array.isArray(e)?e.every((function(e){return qb(e)})):qb(e))?Xb(e,{onProgress:t}):null};function Xb(e,t){return new Gb(e,t)}vb.registerSaveRouter(Qb),vb.registerLoadRouter(Qb);var Kb=function(){function e(e,t,n,r){this.modelTopology=e,this.weightSpecs=t,this.weightData=n,this.trainingConfig=r}return e.prototype.load=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){return e={},null!=this.modelTopology&&(e=Lu({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=Lu({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=Lu({weightData:this.weightData},e)),null!=this.trainingConfig&&(e=Lu({trainingConfig:this.trainingConfig},e)),[2,e]}))}))},e}(),Jb=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Zb=(Object.freeze({browserFiles:function(e){return new Wb(e)},browserHTTPRequest:function(e,t){return Xb(e,t)},concatenateArrayBuffers:hb,decodeWeights:lb,encodeWeights:function(e,t){return Au(this,void 0,void 0,(function(){var n,r,a,o,i,s=this;return Ru(this,(function(u){switch(u.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),o=function(o){var i=a[o],u=Array.isArray(e)?e[o].tensor:e[i];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+u.dtype);var l={name:i,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return Au(s,void 0,void 0,(function(){var t,n,r;return Ru(this,(function(a){switch(a.label){case 0:return t=l,[4,u.data()];case 1:return n=a.sent(),r=Fu.platform.encodeUTF8(n.join("\0")),t.byteLength=r.length,t.delimiter="\0",e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},i=0;i<a.length;++i)o(i);return[4,Promise.all(r)];case 1:return[2,{data:cb(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return new Kb(e,t,n,r)},getLoadHandlers:function(e,t){return vb.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:mb,getSaveHandlers:function(e){return vb.getSaveHandlers(e)},http:Xb,isHTTPScheme:qb,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Au(this,void 0,void 0,(function(){return Ru(this,(function(a){return[2,Yb((function(e){return Hb(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return vb.registerLoadRouter(e)},registerSaveRouter:function(e){return vb.registerSaveRouter(e)},weightsLoaderFactory:Yb,withSaveHandler:function(e){return new Jb(e)},copyModel:function(e,t){return Au(this,void 0,void 0,(function(){return Ru(this,(function(n){return[2,wb(e,t,!1)]}))}))},listModels:function(){return Au(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return Ru(this,(function(s){switch(s.label){case 0:e=yb.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,yb.getManager(a).listModels()]):[3,4];case 2:for(i in o=s.sent())t[a+gb+i]=o[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Au(this,void 0,void 0,(function(){return Ru(this,(function(n){return[2,wb(e,t,!0)]}))}))},removeModel:function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){return t=bb(e),[2,yb.getManager(t.scheme).removeModel(t.path)]}))}))}}),hf({confusionMatrix_:function(e,t,n){var r=ef(e,"labels","confusionMatrix"),a=ef(t,"predictions","confusionMatrix");Hu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Hu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Hu(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),Hu(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),Hu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var o=nd(r.asType("int32"),n),i=nd(a.asType("int32"),n);return o.transpose().matMul(i).asType("int32")}})),$b=(Object.freeze({confusionMatrix:Zb}),hf({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return Zl.fromPixels(e,t)}})),ew=Object.freeze({toPixels:function(e,t){return Au(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C,_,k;return Ru(this,(function(S){switch(S.label){case 0:if(n=ef(e,"img","toPixels"),e instanceof Pl||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],o=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=S.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=S.sent(),f=c[0],d=c[1],h=f[0],p=d[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m="float32"===n.dtype?255:1,v=new Uint8ClampedArray(o*a*4),g=0;g<a*o;++g)y=void 0,b=void 0,w=void 0,x=void 0,1===i?(y=s[g]*m,b=s[g]*m,w=s[g]*m,x=255):3===i?(y=s[3*g]*m,b=s[3*g+1]*m,w=s[3*g+2]*m,x=255):4===i&&(y=s[4*g]*m,b=s[4*g+1]*m,w=s[4*g+2]*m,x=s[4*g+3]*m),v[0+(C=4*g)]=Math.round(y),v[C+1]=Math.round(b),v[C+2]=Math.round(w),v[C+3]=Math.round(x);return null!=t&&(t.width=o,t.height=a,_=t.getContext("2d"),k=new ImageData(v,o,a),_.putImageData(k,0,0)),n!==e&&n.dispose(),[2,v]}}))}))},fromPixels:$b}),tw=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),nw=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function rw(e){Hu(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Hu("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Hu(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),nw.register(e)}Object.freeze({Serializable:tw,SerializationMap:nw,registerClass:rw});function aw(){return 32===Zl.backend.floatPrecision()?.001:.1}function ow(e,t,n){var r=!0;if((cl(e)||cl(t))&&(r=!1),cl(e)&&cl(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var i=Zc(e),s=Zc(t);if(!Xu(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=cl(e)?e:qu(e),l=cl(t)?t:qu(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var f=u[c],d=l[c];if(!n(f,d))throw new Error("Arrays differ: actual["+c+"] = "+f+", expected["+c+"] = "+d+".\nActual:   "+u+".\nExpected: "+l+".")}}function iw(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=aw()),ow(e,t,(function(e,t){return iw(e,t,n)}))},testEpsilon:aw,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return hl(e)||hl(e[0])||hl(t)||hl(t[0])?ow(e,n,(function(e,t){return e==t})):ow(e,t,(function(e,t){return iw(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=aw()),!iw(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:Fp,webgl_util:qc,MathBackendWebGL:Om,setWebGLContext:nc,GPGPUContext:Bp});var sw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Du(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return Kc(o),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Hu(gl(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Hu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Ol})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Zl.registeredVariables)t.push(Zl.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;Hu((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var i=Zl.gradients(e,t,null,!0),s=i.value,u=i.grads;Hu(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Hu(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&Kc(this.iterations_)},t.prototype.saveIterations=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:bf(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(tw);Object.defineProperty(sw,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var uw=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=Zl.backend.epsilon()),a}return Du(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Zl.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:Xc((function(){return Tf(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:Xc((function(){return Tf(a).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Xc((function(){var e=i.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(a);a.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Kc(this.accumulatedGrads.map((function(e){return e.variable}))),Kc(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(sw);rw(uw);var lw=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return Du(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Zl.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:Xc((function(){return Mf(a.shape,t.initialAccumulatorValue).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;Xc((function(){var e=i.add(o.square());i.assign(e);var n=o.div(e.add(Zl.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Kc(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(sw);rw(lw);var cw=function(e){function t(t,n,r,a){void 0===a&&(a=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],Xc((function(){o.accBeta1=bf(n).variable(),o.accBeta2=bf(r).variable()})),null==a&&(o.epsilon=Zl.backend.epsilon()),o}return Du(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Xc((function(){var r=Kg(1,t.accBeta1),a=Kg(1,t.accBeta2);n.forEach((function(n,o){var i=Zl.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Xc((function(){return Tf(i).variable(!1)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:Xc((function(){return Tf(i).variable(!1)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedSecondMoment[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),d=c.div(r),h=f.div(a);u.assign(c),l.assign(f);var p=d.div(h.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Kc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Kc(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){var t,n=this;return Ru(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),Xc((function(){n.accBeta1.assign(Gg(n.beta1,n.iterations_+1)),n.accBeta2.assign(Gg(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(sw);rw(cw);var fw=function(e){function t(t,n,r,a,o){void 0===a&&(a=null),void 0===o&&(o=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.decay=o,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Xc((function(){i.iteration=bf(0).variable(),i.accBeta1=bf(n).variable()})),null==a&&(i.epsilon=Zl.backend.epsilon()),i}return Du(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Xc((function(){var r=Kg(1,t.accBeta1),a=Rg(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,o){var i=Zl.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:Tf(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:Tf(i).variable(!1)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedWeightedInfNorm[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=l.mul(t.beta2),d=s.abs(),h=f.maximum(d);u.assign(c),l.assign(h);var p=a.div(r).mul(c.div(h.add(t.epsilon))).add(i);i.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Kc(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Kc(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(sw);rw(fw);var dw=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return Du(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=Zl.registeredVariables[n];Xc((function(){var e=t.c.mul(a).add(o);o.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Zl.keep(e)}(bf(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(sw);rw(dw);var hw=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=bf(a.momentum),a}return Du(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Zl.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:Xc((function(){return Tf(a).variable(!1)}))});var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&Xc((function(){var e,n=t.m.mul(o).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),o.assign(n),a.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Kc(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){return Ru(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){return Ru(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(dw);rw(hw);var pw=function(e){function t(t,n,r,a,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===o&&(o=!1);var i=e.call(this)||this;return i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=a,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=o,null==a&&(i.epsilon=Zl.backend.epsilon()),i}return Du(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Zl.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:Xc((function(){return Tf(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:Xc((function(){return Tf(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:Xc((function(){return Tf(a).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;Xc((function(){var e=i.mul(t.decay).add(o.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(o.mul(1-t.decay)),l=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(u),s.assign(l);var c=a.sub(l);a.assign(c)}else{var f=i.mul(t.decay).add(o.square().mul(1-t.decay));l=s.mul(t.momentum).add(o.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),i.assign(f),s.assign(l),c=a.sub(l),a.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Kc(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Kc(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Kc(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Au(this,void 0,void 0,(function(){var e;return Ru(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Au(this,void 0,void 0,(function(){var t;return Ru(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(sw);rw(pw);var mw=function(){function e(){}return e.sgd=function(e){return new dw(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new hw(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new pw(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new cw(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new uw(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new fw(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new lw(e,t)},e}();mw.sgd,mw.momentum,mw.adadelta,mw.adagrad,mw.rmsprop,mw.adamax,mw.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Al=rb;var vw=function(e,t){return(vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function gw(e,t){function n(){this.constructor=e}vw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function yw(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function bw(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var ww=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},e}();function xw(){return Cw}var Cw=null,_w=new Map,kw=new Map;function Sw(e,t){var n=Iw(e,t);return _w.get(n)}function Mw(e){return kw.get(e)}function Ew(e){for(var t=_w.entries(),n=[];;){var r=t.next(),a=r.done,o=r.value;if(a)break;var i=o[0],s=o[1];i.split("_")[0]===e&&n.push(s)}return n}function Nw(e){var t=e.kernelName,n=e.backendName,r=Iw(t,n);if(_w.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");_w.set(r,e)}function Tw(e){var t=e.kernelName;kw.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),kw.set(t,e)}function Iw(e,t){return t+"_"+e}function jw(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Dw(e,t,n){return Math.max(e,Math.min(t,n))}function Lw(e){return e%2==0?e:e+1}function Aw(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Rw(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Pw(e,t,n){void 0===n&&(n=""),Rw(zw(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Ow(e){Rw(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Fw(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||ex(e)&&!n)for(var r=0;r<e.length;++r)Fw(e[r],t,n);else t.push(e);return t}function Bw(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function zw(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Uw(e){return e%1==0}function Ww(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Vw(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Hw(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Yw(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var o=0,i=function(){if(e())r();else{o++;var s=t(o);null!=n&&o>=n?a():setTimeout(i,s)}};i()}))}function Gw(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function qw(e,t){var n=t.length;return Rw((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Rw(e.every((function(e){return Uw(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function Qw(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||a?null:qw(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=o){if(o[i]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==o[i]||o[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Xw(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Kw(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Jw(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Zw(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function $w(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function ex(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function tx(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function nx(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function rx(e){return"string"==typeof e||e instanceof String}function ax(e){return"boolean"==typeof e}function ox(e){return"number"==typeof e}function ix(e){return Array.isArray(e)?ix(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ox(e)?"float32":rx(e)?"string":ax(e)?"bool":"float32"}function sx(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ux(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function lx(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function cx(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Fw(e)),n&&Jw(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function fx(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var a=new Array;if(1===n.length)for(var o=n[0],i=0;i<o;i++)a[i]=r[t+i];else{o=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(i=0;i<o;i++)a[i]=e(t+i*u,s,r)}return a}(0,e,t)}function dx(e,t){for(var n=hx(e,t),r=0;r<n.length;r++)n[r]=1;return n}function hx(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function px(){return xw().platform.now()}function mx(e){e.forEach((function(t){Rw(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function vx(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",xw().platform.encode(e,t)}function gx(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",xw().platform.decode(e,t)}function yx(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function bx(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}Object.freeze({shuffle:jw,clamp:Dw,nearestLargerEven:Lw,sum:Aw,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:Rw,assertShapesMatch:Pw,assertNonNull:Ow,flatten:Fw,sizeFromShape:Bw,isScalarShape:function(e){return 0===e.length},arraysEqual:zw,isInt:Uw,tanh:Ww,sizeToSquarishShape:Vw,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return jw(t),t},rightPad:Hw,repeatedTry:Yw,inferFromImplicitShape:Gw,parseAxisParam:qw,squeezeShape:Qw,getTypedArrayFromDType:Xw,getArrayFromDType:Kw,checkConversionForErrors:Jw,isValidDtype:Zw,hasEncodingLoss:$w,isTypedArray:ex,bytesPerElement:tx,bytesFromStringArray:nx,isString:rx,isBoolean:ax,isNumber:ox,inferDtype:ix,isFunction:sx,nearestDivisor:ux,computeStrides:lx,toTypedArray:cx,toNestedArray:fx,makeOnesTypedArray:dx,makeZerosTypedArray:hx,now:px,assertNonNegativeIntegerDimensions:mx,fetch:function(e,t){return xw().platform.fetch(e,t)},encodeString:vx,decodeString:gx,locToIndex:yx,indexToLoc:bx});var wx=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new xx)}return e.prototype.profileKernel=function(e,t,n){var r,a=this,o=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),o.then((function(o){var i="";null!=o.getExtraProfileInfo&&(i=o.getExtraProfileInfo()),a.logger.logKernelProfile(e,n,r,o.kernelMs,t,i)}))}))})),r},e}(),xx=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,o){var i="number"==typeof r?Hw(r+"ms",9):r.error,s=Hw(e,25),u=t.rank,l=t.size,c=Hw(t.shape.toString(),14),f="";for(var d in a){var h=a[d].shape||t.shape,p=h.length;f+=d+": "+p+"D "+(p>0?h:"")+" "}console.log("%c"+s+"\t%c"+i+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+f+"\t%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function Cx(e,t,n){return Hw(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":rx(e)?"'"+e+"'":"bool"===n?_x(e):parseFloat(e.toFixed(7)).toString(),t)}function _x(e){return 0===e?"false":"true"}function kx(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Sx=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Bw(e),null!=n){var a=n.length;Rw(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Kw(t,this.size),this.strides=lx(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Rw(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var a=this.locToIndex(n);this.values[a]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,a=e;r<a.length;r++){var o=a[r];if(o<0||o>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Mx().makeTensor(this.values,this.shape,this.dtype)},e}(),Mx=null,Ex=null,Nx=null,Tx=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Bw(e),this.strides=lx(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Rw(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),this.reshape([e,t,n,r,a])},e.prototype.asType=function(e){return this.throwIfDisposed(),Ex.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ex.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Ex.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,fx(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return fx(this.shape,this.dataSync())},e.prototype.data=function(){return yw(this,void 0,void 0,(function(){var e,t;return bw(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Mx().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return gx(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Mx().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return gx(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Mx().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Mx().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Ex.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Ex.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Ex.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Ex.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Ex.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Ex.clone(this)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var a=lx(t),o=function(e,t,n,r){var a=Bw(t),o=r[r.length-1],i=new Array(o).fill(0),s=t.length,u="complex64"===n?kx(e):e;if(s>1)for(var l=0;l<a/o;l++)for(var c=l*o,f=0;f<o;f++)i[f]=Math.max(i[f],Cx(u[c+f],0,n).length);return i}(e,t,n,a),i=t.length,s=function e(t,n,r,a,o,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[Cx(kx(t)[0],0,r)]:"bool"===r?[_x(t[0])]:[t[0].toString()];if(1===l){if(u>20){var c=3*s,f=Array.from(t.slice(0,c)),d=Array.from(t.slice((u-3)*s,u*s));return"complex64"===r&&(f=kx(f),d=kx(d)),["["+f.map((function(e,t){return Cx(e,o[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return Cx(e,o[u-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?kx(t):Array.from(t)).map((function(e,t){return Cx(e,o[t],r)})).join(", ")+"]"]}var h=n.slice(1),p=a.slice(1),m=a[0]*s,v=[];if(u>20){for(var g=0;g<3;g++){var y=(b=g*m)+m;v.push.apply(v,e(t.slice(b,y),h,r,p,o,!1))}for(v.push("..."),g=u-3;g<u;g++)y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,o,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*m)+m,v.push.apply(v,e(t.slice(b,y),h,r,p,o,g===u-1))}var w=2===l?",":"";for(v[0]="["+v[0]+w,g=1;g<v.length-1;g++)v[g]=" "+v[g]+w;var x=",\n";for(g=2;g<l;g++)x+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":x),v}(e,t,n,a,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ex.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ex.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Ex.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ex.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Ex.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Ex.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ex.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ex.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Ex.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Ex.unstack(this,e)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),Nx("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,a,r,n)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ex.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ex.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ex.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Ex.cast(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Ex.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Ex.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Ex.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Ex.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Ex.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Ex.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Ex.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ex.mulStrict(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ex.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Ex.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Ex.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ex.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Ex.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ex.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Ex.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Ex.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ex.squaredDifferenceStrict(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Ex.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ex.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Ex.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ex.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Ex.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ex.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ex.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ex.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Ex.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ex.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ex.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ex.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ex.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ex.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ex.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ex.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Ex.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Ex.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ex.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ex.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ex.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ex.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ex.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ex.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ex.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ex.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ex.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ex.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ex.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ex.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ex.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ex.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ex.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ex.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Ex.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ex.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ex.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ex.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Ex.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Ex.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ex.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ex.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ex.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ex.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ex.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ex.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ex.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ex.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ex.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ex.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ex.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ex.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ex.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ex.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ex.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ex.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ex.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ex.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ex.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Ex.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ex.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ex.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ex.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ex.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,o){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),Ex.conv1d(this,e,t,n,r,a,o)},e.prototype.conv2d=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ex.conv2d(this,e,t,n,r,a,o)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),Ex.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),Ex.depthwiseConv2d(this,e,t,n,r,a,o)},e.prototype.separableConv2d=function(e,t,n,r,a,o){return void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),Ex.separableConv2d(this,e,t,n,r,a,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ex.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Ex.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ex.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),Ex.pool(this,e,t,n,r,a)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Mx().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Ex.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Ex.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ex.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Ex.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s){return void 0===r&&(r=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),Ex.stridedSlice(this,e,t,n,r,a,o,i,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ex.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Ex.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ex.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ex.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ex.spectral.irfft(this)},e}();Object.defineProperty(Tx,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ix,jx,Dx,Lx,Ax,Rx=function(e){function t(t,n,r,a){var o=e.call(this,t.shape,t.dtype,t.dataId,a)||this;return o.trainable=n,o.name=r,o}return gw(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!zw(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Mx().disposeTensor(this),this.dataId=e.dataId,Mx().incRef(this,null)},t.prototype.dispose=function(){Mx().disposeVariable(this),this.isDisposedInternal=!0},t}(Tx);Object.defineProperty(Rx,Symbol.hasInstance,{value:function(e){return e instanceof Tx&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ix||(Ix={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(jx||(jx={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Dx||(Dx={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Lx||(Lx={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Ax||(Ax={}));var Px={float32:Lx,int32:jx,bool:Dx,complex64:Ax};function Ox(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Px[e][t]}function Fx(e){return Ox(e,"int32")}function Bx(e,t){if(e.dtype===t.dtype)return[e,t];var n=Ox(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function zx(e,t){Rw(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Ux(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Tx)n.push(t);else if(a=t,Array.isArray(a)||"object"==typeof a){var a,o=t;for(var i in o){var s=o[i];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Bx,assertTypesMatch:zx,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:Ux});var Wx,Vx=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Hx=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Vx}return e.prototype.ready=function(){return yw(this,void 0,void 0,(function(){var e,t,n;return bw(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return yw(this,void 0,void 0,(function(){var t,n,r;return bw(this,(function(a){switch(a.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=a.sent(),[3,3];case 2:r=n,a.label=3;case 3:if(!r)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new wx(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;Ew(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;Ew(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var a=++this.pendingBackendInitId,o=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(a<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,o=r.asyncInit;if(o||a)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[],{}),t},e.prototype.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-a-o;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,a,o,i){var s,u=this,l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,d=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var p,m=Sw(r,this.backendName);if(null!=m)f=function(){var e=u.backend.numDataIds();p=m.kernelFunc({inputs:t,attrs:a,backend:u.backend});var n=Array.isArray(p)?p:[p];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)}));if(c){var f=u.getTensorsForGradient(r,t,s);if(null==f){null==i&&(i=[]);var d=s.filter((function(e,t){return i[t]}));f=(o||[]).slice().concat(d)}l=u.saveTensorsForBackwardMode(f)}return s};else{var v=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))};f=function(){var t=u.backend.numDataIds();p=u.tidy((function(){return e(u.backend,v)}));var n=Array.isArray(p)?p:[p];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return f()})):f()})),c&&this.addTapeNode(r,t,s,n,l,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(p)?s:s[0]},e.prototype.saveTensorsForBackwardMode=function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))},e.prototype.getTensorsForGradient=function(e,t,n){var r=Mw(e);if(null!=r){var a=r.inputsToSave||[],o=r.outputsToSave||[],i=void 0;r.saveAllInputs?(Rw(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),i=Object.keys(t).map((function(e){return t[e]}))):i=a.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return i.concat(s)}return null},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&rx(e[0])&&(a=e.map((function(e){return vx(e)})));var o=r.write(a,t,n),i=new Tx(t,n,o,this.nextTensorId());if(this.incRef(i,r),"string"===n){var s=this.state.tensorInfo.get(o),u=nx(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return i},e.prototype.makeTensorFromDataId=function(e,t,n,r){var a=new Tx(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var a=new Rx(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*tx(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Rx||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return yw(this,void 0,void 0,(function(){var t,n;return bw(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,a,o){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Mw(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=hx(r.size,r.dtype);return i.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,o)}),this.state.activeTape.push(s)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Ux(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var o=this.state.activeScope.track[a];o.kept||r.has(o.id)||o.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),Rw(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));Rw(o instanceof Tx,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(o=0;o<e.length;o++){var i=(p=e[o]).inputs;for(var s in i){for(var u=i[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){p.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,a[p.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var d={};for(o=e.length-1;o>=0;o--)for(i=(p=e[o]).inputs,c=0;c<p.outputs.length;c++)if(f[p.outputs[c].id]){for(var s in i)f[i[s].id]=!0,d[p.id]=!0;break}var h=[];for(o=0;o<e.length;o++){var p;if(a[(p=e[o]).id]&&d[p.id]){var m={};for(var s in p.inputs){var v=p.inputs[s];r[v.id]&&(m[s]=v)}var g=Object.assign({},p);g.inputs=m,g.outputs=p.outputs,h.push(g)}}return h}(this.state.activeTape,t,o);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[o.id]=null==n?(r=dx(Bw(e=o.shape),"float32"),Yx.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var a=t[r],o=[];if(a.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==a.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+a.kernelName+".");var i=a.gradient(o),s=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n((function(){return i[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var o=a.inputs[t];if(!zw(r.shape,o.shape))throw new Error("Error in gradient for op "+a.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==e[o.id])e[o.id]=r;else{var s=e[o.id];e[o.id]=s.add(r),s.dispose()}};for(var u in a.inputs)s(u)},a=t.length-1;a>=0;a--)r(a)}(s,i,(function(e){return a.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),a.state.activeTape=null),{value:o,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return Rw(sx(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];Rw(r.every((function(e){return e instanceof Tx})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc((function(t,a){return Rw((n=e.apply(void 0,r.concat([a]))).value instanceof Tx,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Rw(sx(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),o,(function(e,t){var a=n.gradFunc(e,t),o=Array.isArray(a)?a:[a];Rw(o.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Rw(o.every((function(e){return e instanceof Tx})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return o.forEach((function(e,t){i[t]=function(){return e}})),i}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return yw(this,void 0,void 0,(function(){var t,n;return bw(this,(function(r){switch(r.label){case 0:return t=px(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=px()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Vx,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Yx=function(){var e=function(){if(null==Wx){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Wx=e}return Wx}();if(null==e._tfengine){var t=new ww(e);e._tfengine=new Hx(t)}return function(e){Cw=e}(e._tfengine.ENV),Mx=function(){return e._tfengine},e._tfengine}();function Gx(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var qx=xw();qx.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),qx.registerFlag("IS_BROWSER",(function(){return Gx()})),qx.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),qx.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),qx.registerFlag("PROD",(function(){return!1})),qx.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return qx.getBool("DEBUG")})),qx.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),qx.registerFlag("IS_TEST",(function(){return!1}));var Qx,Xx,Kx,Jx={},Zx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function $x(e,t){Jx[e]=t}function eC(e){e in Jx||(Jx[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Jx[e]}),!1),1===e?t.getContext("webgl",Zx)||t.getContext("experimental-webgl",Zx):t.getContext("webgl2",Zx)}(e));var t=Jx[e];return t.isContextLost()?(delete Jx[e],eC(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Jx[e])}function tC(e,t){return[t,e]}function nC(e){var t=Bw(e);return Vw(Math.ceil(t/4))}function rC(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function aC(e,t){var n,r,a,o,i,s,u,l,c,f=e;return 2===xw().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,o=f.RGBA32F,i=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,o=f.RGBA,i=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function oC(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+sC(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Qx||(Qx={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Xx||(Xx={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Kx||(Kx={}));function iC(e){return!!(xw().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function sC(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function uC(e,t,n){return jC(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function lC(e,t,n){var r=jC(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(oC(e,t,(function(){return e.shaderSource(r,n)})),oC(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function cC(e,t,n){var r=jC(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(oC(e,t,(function(){return e.shaderSource(r,n)})),oC(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=hC.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map((function(e,t){return Hw((t+1).toString(),o)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),f=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+Hw(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var fC,dC,hC=/ERROR: [0-9]+:([0-9]+):/g;function pC(e,t){return jC(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function mC(e,t,n){if(oC(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function vC(e,t,n){if(oC(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function gC(e,t,n){var r=jC(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return oC(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),oC(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function yC(e,t,n){var r=jC(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return oC(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),oC(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function bC(e,t){return jC(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function wC(e,t){var n=xw().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function xC(e,t){return jC(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function CC(e,t,n,r,a,o,i,s){var u=e.getAttribLocation(n,r);return-1!==u&&(oC(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,a)})),oC(e,t,(function(){return e.vertexAttribPointer(u,o,e.FLOAT,!1,i,s)})),oC(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function _C(e,t,n,r){DC(e,r),oC(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function kC(e,t,n,r){return jC(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function SC(e,t,n){return e.getUniformLocation(t,n)}function MC(e,t,n,r,a,o){oC(e,t,(function(){return _C(e,t,r,o)})),oC(e,t,(function(){return e.uniform1i(a,o)}))}function EC(e,t,n,r){oC(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),oC(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function NC(e,t,n){oC(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),oC(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function TC(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+IC(e,t))}function IC(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function jC(e,t,n,r){var a=oC(e,t,(function(){return n()}));if(null==a)throw new Error(r);return a}function DC(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function LC(e,t){return void 0===t&&(t=2),Bw(e.slice(0,e.length-t))}function AC(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function RC(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[LC(e)].concat(AC(e))),t}function PC(e,t){var n;void 0===t&&(t=!1);var r=xw().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Lw(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=Qw(e);e=a.newShape}var o=Bw(e);if(e.length<=1&&o<=r)return[1,o];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=LC(e),s=2,u=2;return e.length&&(s=(n=AC(e))[0],u=n[1]),Vw(o=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return Vw(o)}function OC(e){return e%2==0}function FC(e,t){if(zw(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(OC(n)&&OC(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&OC(e[0])&&OC(t[0])}function BC(e){if(null==fC){var t=eC(e);fC=t.getParameter(t.MAX_TEXTURE_SIZE)}return fC}function zC(e){if(null==dC){var t=eC(e);dC=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,dC)}function UC(e){if(0===e)return 0;var t=eC(e);return WC(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:WC(t,"EXT_disjoint_timer_query")?1:0}function WC(e,t){return null!=e.getExtension(t)}function VC(e){try{if(null!=eC(e))return!0}catch(e){return!1}return!1}function HC(e){if(0===e)return!1;var t=eC(e);if(1===e){if(!WC(t,"OES_texture_float"))return!1}else if(!WC(t,"EXT_color_buffer_float"))return!1;return GC(t)}function YC(e){if(0===e)return!1;var t=eC(e);if(1!==e){if(WC(t,"EXT_color_buffer_float"))return GC(t);if(WC(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=aC(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),o}(t,n)}return!1}return!!WC(t,"OES_texture_float")&&!!WC(t,"WEBGL_color_buffer_float")&&GC(t)}function GC(e){var t=aC(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function qC(e){return 2===e&&null!=eC(e).fenceSync}var QC=Object.freeze({callAndCheck:oC,canBeRepresented:iC,getWebGLErrorMessage:sC,getExtensionOrThrow:uC,createVertexShader:lC,createFragmentShader:cC,createProgram:pC,linkProgram:mC,validateProgram:vC,createStaticVertexBuffer:gC,createStaticIndexBuffer:yC,getNumChannels:function(){return 2===xw().getNumber("WEBGL_VERSION")?1:4},createTexture:bC,validateTextureSize:wC,createFramebuffer:xC,bindVertexBufferToProgramAttribute:CC,bindTextureUnit:_C,unbindTextureUnit:function(e,t,n){DC(e,n),oC(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:kC,getProgramUniformLocation:SC,bindTextureToProgramUniformSampler:MC,bindCanvasToFramebuffer:function(e,t){oC(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),oC(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),oC(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:EC,unbindColorTextureFromFramebuffer:NC,validateFramebuffer:TC,getFramebufferErrorMessage:IC,getBatchDim:LC,getRowsCols:AC,getShapeAs3D:RC,getTextureShapeFromLogicalShape:PC,isReshapeFree:FC,getWebGLMaxTextureSize:BC,resetMaxTextureSize:function(){fC=null},resetMaxTexturesInShader:function(){dC=null},getMaxTexturesInShader:zC,getWebGLDisjointQueryTimerVersion:UC,hasExtension:WC,isWebGLVersionEnabled:VC,isCapableOfRenderingToFloatTexture:HC,isDownloadFloatTextureEnabled:YC,isWebGLFenceEnabled:qC}),XC=xw();function KC(e){xw().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function JC(e,t){return Yx.tidy(e,t)}function ZC(e){Ux(e).forEach((function(e){return e.dispose()}))}function $C(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];xw().getBool("IS_TEST")||console.warn.apply(console,e)}function e_(e,t){var n=e;if(ex(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ex(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&xw().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||ex(t)){Rw(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Rw(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var a=n.slice(1),o=0;o<t.length;++o)e(t[o],a,r.concat(o))}else Rw(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function t_(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function n_(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Tx)return t_(r,e.dtype,t,n),e;var a=ix(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),t_(r,a,t,n),null==e||!ex(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var i=e_(e,a);ex(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?cx(e,a,xw().getBool("DEBUG")):Fw(e,[],!0);return Yx.makeTensor(s,i,a)}function r_(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return n_(e,t+"["+r+"]",n)}),r)}function a_(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function o_(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[o++]):a.push(t[i++]);return a}function i_(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);return[n,t.map((function(t){return e[t]}))]}function s_(e,t){return o_(e,t.map((function(e){return 1})),t)}function u_(e,t,n){Rw(a_(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function l_(e,t){if(a_(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function c_(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function f_(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function d_(e,t){var n=e[0].length;e.forEach((function(e,t){Rw(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Rw(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var o=0;o<n;o++)Rw(o===t||e[o]===r[o],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function h_(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function p_(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Yx.startScope(n);try{var a=r.apply(void 0,e);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Yx.endScope(a),a}catch(e){throw Yx.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}XC.registerFlag("HAS_WEBGL",(function(){return XC.getNumber("WEBGL_VERSION")>0})),XC.registerFlag("WEBGL_VERSION",(function(){return VC(2)?2:VC(1)?1:0})),XC.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===XC.get("WEBGL_VERSION")})),XC.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),XC.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),XC.registerFlag("WEBGL_PACK",(function(){return XC.getBool("HAS_WEBGL")})),XC.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_CLIP",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),XC.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_PACK_REDUCE",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_CONV_IM2COL",(function(){return XC.getBool("WEBGL_PACK")})),XC.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return BC(XC.getNumber("WEBGL_VERSION"))})),XC.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return zC(XC.getNumber("WEBGL_VERSION"))})),XC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=XC.getNumber("WEBGL_VERSION");return 0===e?0:UC(e)})),XC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return XC.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),XC.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return HC(XC.getNumber("WEBGL_VERSION"))})),XC.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!XC.getBool("WEBGL_FORCE_F16_TEXTURES")&&XC.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),XC.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return YC(XC.getNumber("WEBGL_VERSION"))})),XC.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return qC(XC.getNumber("WEBGL_VERSION"))})),XC.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return XC.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Nx=KC;var m_=p_({complex_:function(e,t){var n=n_(e,"real","complex"),r=n_(t,"imag","complex");return Pw(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Yx.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),v_=p_({real_:function(e){var t=n_(e,"input","real");return Yx.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),g_=p_({imag_:function(e){var t=n_(e,"input","imag");return Yx.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function y_(e,t,n){return b_(e,t,e_(e,n),n)}function b_(e,t,n,r){if(null==r&&(r=ix(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ex(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){mx(t);var a=Bw(t),o=Bw(n);Rw(a===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+o}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==Bw(t.slice(i));Rw(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return ex(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?cx(e,r,xw().getBool("DEBUG")):Fw(e,[],!0),Yx.makeTensor(e,t,r)}function w_(e,t){if((ex(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ex(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return b_(e,[],[],t)}function x_(e,t){Ow(e);var n=e_(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return b_(e,null,n,t)}function C_(e,t,n){if(Ow(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=e_(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return b_(e,t,r,n)}function __(e,t,n){if(Ow(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=e_(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return b_(e,t,r,n)}function k_(e,t,n){if(Ow(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=e_(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return b_(e,t,r,n)}function S_(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=S_(e,"float32"),r=M_(e,"float32");return m_(n,r)}var a=dx(Bw(e),t);return Yx.makeTensor(a,e,t)}function M_(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=M_(e,"float32"),r=M_(e,"float32");return m_(n,r)}var a=hx(Bw(e),t);return Yx.makeTensor(a,e,t)}function E_(e,t,n){return Yx.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function N_(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return M_([0],r);var a=hx(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+n;return x_(a,r)}var T_=p_({onesLike_:function(e){var t=n_(e,"x","onesLike");if("complex64"===t.dtype){var n=T_(v_(t)),r=I_(g_(t));return m_(n,r)}return Yx.runKernelFunc((function(e){return e.onesLike(t)}),{x:t},(function(e,t){return{x:function(){return I_(e)}}}),"OnesLike")}}),I_=p_({zerosLike_:function(e){var t=n_(e,"x","zerosLike");return Yx.runKernelFunc((function(e){return e.zerosLike(t)}),{x:t},(function(e,t){return{x:function(){return I_(e)}}}),"ZerosLike")}}),j_=p_({concat_:function(e,t){void 0===t&&(t=0),Rw(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=r_(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=qw(t,n[0].shape)[0];var r=h_(n.map((function(e){return e.shape})),t);if(0===Bw(r))return y_([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var a=n.map((function(e){return e.shape}));d_(a,t);var o=n,i={axis:t};return Yx.runKernelFunc((function(e){return e.concat(n,t)}),o,(function(e){var n=a.map((function(e){return e[t]}));return P_(e,n,t).map((function(e){return function(){return e}}))}),"Concat",i)}}),D_=p_({concat1d_:function(e){return j_(e,0)}}),L_=p_({concat2d_:function(e,t){return j_(e,t)}}),A_=p_({concat3d_:function(e,t){return j_(e,t)}}),R_=p_({concat4d_:function(e,t){return j_(e,t)}}),P_=p_({split_:function(e,t,n){void 0===n&&(n=0);var r,a=n_(e,"x","split");return n=qw(n,a.shape)[0],"number"==typeof t?(Rw(a.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(a.shape[n]/t)):(Rw(a.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Yx.runKernelFunc((function(e){return e.split(a,r,n)}),{$x:a},(function(e){return{$x:function(){return j_(e,n)}}}))}});function O_(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",mx(e),new Sx(e,t,n)}var F_=p_({batchToSpaceND_:function(e,t,n){var r=n_(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));return Rw(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Rw(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Rw(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a})),Yx.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),B_=p_({cast_:function(e,t){var n=n_(e,"x","cast");if(!Zw(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Yx.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),z_=p_({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=n_(e,"x","cumsum"),o=l_([t|=0],a.rank),i=a;null!=o&&(i=a.transpose(o));var s=f_(1,a.rank)[0],u=Yx.runKernelFunc((function(e){return e.cumsum(i,s,n,r)}),{permutedX:i},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=o&&(u=u.transpose(o)),u}}),U_=p_({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=n_(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return Rw(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Rw(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Rw(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),Yx.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),W_=p_({expandDims_:function(e,t){void 0===t&&(t=0);var n=n_(e,"x","expandDims",null);Rw(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Rw(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),V_(n,r)}}),V_=p_({reshape_:function(e,t){var n=n_(e,"x","reshape",null);t=Gw(t,n.size),Rw(n.size===Bw(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Yx.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),H_=p_({spaceToBatchND_:function(e,t,n){var r=n_(e,"x","spaceToBatchND");return Rw(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Rw(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Rw(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Yx.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Y_=p_({squeeze_:function(e,t){var n=n_(e,"x","squeeze");return V_(n,Qw(n.shape,t).newShape)}}),G_=p_({stack_:function(e,t){void 0===t&&(t=0);var n=r_(e,"tensors","stack");if(Rw(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,o=n[0].dtype;Rw(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Pw(a,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Rw(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return j_(i,t)}}),q_=p_({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=n_(e,"x","unstack");Rw(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return Yx.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return G_(e,t)}}}),"Unpack",r)}});function Q_(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function X_(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{var o=[],i=[];for(a=1;a<e;++a)a>=2*t+1||a%2==1?i.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function K_(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function J_(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Z_(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var $_="Div",ek="SquaredDifference",tk="BroadcastTo",nk="OneHot",rk="Identity",ak="Tile",ok="PadV2",ik=p_({add_:function(e,t){var n,r=n_(e,"a","add"),a=n_(t,"b","add");n=Bx(r,a),r=n[0],a=n[1];var o={a:r,b:a};return Yx.runKernelFunc((function(e,t){var n=e.add(r,a);return t([r,a]),n}),o,null,"Add")}});function sk(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1;(t[t.length-1-a]||1)>1&&1===i&&r.unshift(o)}return r}function uk(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function lk(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}var ck=p_({abs_:function(e){var t=n_(e,"x","abs");return"complex64"===t.dtype?Yx.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Yx.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),fk=p_({acos_:function(e){var t=n_(e,"x","acos");return Yx.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(w_(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),dk=p_({acosh_:function(e){var t=n_(e,"x","acosh");return Yx.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),hk=p_({asin_:function(e){var t=n_(e,"x","asin");return Yx.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(w_(1).sub(n.toFloat().square()).sqrt())}}}))}}),pk=p_({asinh_:function(e){var t=n_(e,"x","asinh");return Yx.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(w_(1).add(n.toFloat().square()).sqrt())}}}))}}),mk=p_({atan_:function(e){var t=n_(e,"x","atan");return Yx.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),vk=p_({atanh_:function(e){var t=n_(e,"x","atanh");return Yx.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(w_(1).sub(n.toFloat().square()))}}}))}}),gk=p_({ceil_:function(e){var t=n_(e,"x","ceil");return Yx.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),yk=p_({clipByValue_:function(e,t,n){var r=n_(e,"x","clipByValue");Rw(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a=[r],o={min:t,max:n};return Yx.runKernelFunc((function(e,a){var o=e.clip(r,t,n);return a([r]),o}),{x:r},(function(e,r){var a=r[0];return{x:function(){return e.where(a.greaterEqual(t).logicalAnd(a.lessEqual(n)),I_(e))}}}),"ClipByValue",o,a)}}),bk=p_({cos_:function(e){var t=n_(e,"x","cos"),n=[t];return Yx.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),wk=p_({cosh_:function(e){var t=n_(e,"x","cosh");return Yx.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),xk=p_({erf_:function(e){var t=n_(e,"x","erf");return Rw("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Yx.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Ck=p_({exp_:function(e){var t=n_(e,"x","exp");return Yx.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),_k=p_({expm1_:function(e){var t=n_(e,"x","expm1");return Yx.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),kk=p_({floor_:function(e){var t=n_(e,"x","floor");return Yx.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),Sk=p_({log_:function(e){var t=n_(e,"x","log"),n=[t];return Yx.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Mk=p_({log1p_:function(e){var t=n_(e,"x","log1p");return Yx.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Ek=p_({logSigmoid_:function(e){var t=n_(e,"x","logSigmoid");return Yx.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),Nk=p_({neg_:function(e){var t=n_(e,"x","neg"),n=[t];return Yx.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Tk=p_({reciprocal_:function(e){var t=n_(e,"x","reciprocal");return Yx.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Ik=p_({round_:function(e){var t=n_(e,"x","round");return Yx.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),jk=p_({rsqrt_:function(e){var t=n_(e,"x","rsqrt"),n=[t];return Yx.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Dk=p_({sigmoid_:function(e){var t=n_(e,"x","sigmoid");return Yx.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(w_(1).sub(n)))}}}),"Sigmoid")}}),Lk=p_({sign_:function(e){var t=n_(e,"x","sign");return Yx.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),Ak=p_({isNaN_:function(e){var t=n_(e,"x","isNaN");return Yx.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),Rk=p_({isInf_:function(e){var t=n_(e,"x","isInf");return Yx.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),Pk=p_({isFinite_:function(e){var t=n_(e,"x","isFinite");return Yx.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return I_(e)}}}))}}),Ok=p_({sin_:function(e){var t=n_(e,"x","sin"),n=[t];return Yx.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),Fk=p_({sinh_:function(e){var t=n_(e,"x","sinh");return Yx.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),Bk=p_({softplus_:function(e){var t=n_(e,"x","softplus");return Yx.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),zk=p_({sqrt_:function(e){var t=n_(e,"x","sqrt");return Yx.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),Uk=p_({step_:function(e,t){void 0===t&&(t=0);var n=n_(e,"x","step");return Yx.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return I_(e)}}}))}}),Wk=p_({tan_:function(e){var t=n_(e,"x","tan");return Yx.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),Vk=p_({tanh_:function(e){var t=n_(e,"x","tanh");return Yx.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return w_(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}}),Hk=p_({addStrict_:function(e,t){var n=n_(e,"a","addStrict"),r=n_(t,"b","addStrict");return Pw(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Yk=p_({atan2_:function(e,t){var n,r=n_(e,"a","atan2"),a=n_(t,"b","atan2");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape);return Yx.runKernelFunc((function(e,t){var n=e.atan2(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=ik(n.square(),r.square()),a=e.mul(r.div(t)),i=uk(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},$b:function(){var t=ik(n.square(),r.square()),a=Nk(e.mul(n.div(t))),i=uk(r.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(r.shape)}}}))}}),Gk=p_({divStrict_:function(e,t){var n=n_(e,"a","div"),r=n_(t,"b","div");return Pw(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),qk=p_({floorDiv_:function(e,t){var n,r=n_(e,"a","floorDiv"),a=n_(t,"b","floorDiv");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape);return Yx.runKernelFunc((function(e,t){var n=e.floorDiv(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),a=uk(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=uk(r.shape,o);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}),"FloorDiv")}}),Qk=p_({maximum_:function(e,t){var n,r=n_(e,"a","maximum"),a=n_(t,"b","maximum");return n=Bx(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),lk(r.shape,a.shape),Yx.runKernelFunc((function(e,t){var n=e.maximum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Xk=p_({maximumStrict_:function(e,t){var n=n_(e,"a","maximumStrict"),r=n_(t,"b","maximumStrict");return Pw(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Kk=p_({minimum_:function(e,t){var n,r=n_(e,"a","minimum"),a=n_(t,"b","minimum");return n=Bx(r,a),r=n[0],a=n[1],"bool"===r.dtype&&(r=r.toInt(),a=a.toInt()),lk(r.shape,a.shape),Yx.runKernelFunc((function(e,t){var n=e.minimum(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Jk=p_({minimumStrict_:function(e,t){var n=n_(e,"a","minimumStrict"),r=n_(t,"b","minimumStrict");return Pw(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Zk=p_({mod_:function(e,t){var n,r=n_(e,"a","mod"),a=n_(t,"b","mod");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape);return Yx.runKernelFunc((function(e,t){var n=e.mod(r,a);return t([r,a]),n}),{$a:r,$b:a},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=uk(n.shape,o);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),a=uk(r.shape,o);return a.length>0?t.sum(a).reshape(r.shape):t}}}))}}),$k=p_({modStrict_:function(e,t){var n=n_(e,"a","modStrict"),r=n_(t,"b","modStrict");return Pw(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),eS=p_({mul_:function(e,t){var n,r=n_(e,"a","mul"),a=n_(t,"b","mul");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape);return Yx.runKernelFunc((function(e,t){var n=e.multiply(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),a=uk(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),a=uk(r.shape,o);return a.length>0?t.sum(a).reshape(r.shape):t}}}),"Mul")}}),tS=p_({mulStrict_:function(e,t){var n=n_(e,"a","mul"),r=n_(t,"b","mul");return Pw(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),nS=p_({pow_:function(e,t){var n,r=n_(e,"base","pow"),a=n_(t,"exp","pow");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape),i=[r,a];return Yx.runKernelFunc((function(e,t){var n=e.pow(r,a);return t([r,a,n]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1],a=t[2];return{a:function(){var t=r.toFloat(),a=e.mul(t.mul(n.pow(t.sub(w_(1))))),i=uk(n.shape,o);return i.length>0&&(a=a.sum(i)),a.reshape(n.shape)},b:function(){var t=n.greater(0),i=n.log().where(t,I_(n)),s=e.mul(a.mul(i)),u=uk(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},i,[!0])}}),rS=p_({powStrict_:function(e,t){return Pw(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),aS=p_({squaredDifferenceStrict_:function(e,t){var n=n_(e,"a","squaredDifferenceStrict"),r=n_(t,"b","squaredDifferenceStrict");return Pw(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),oS=p_({sub_:function(e,t){var n,r=n_(e,"a","sub"),a=n_(t,"b","sub");n=Bx(r,a),r=n[0],a=n[1];var o=lk(r.shape,a.shape);return Yx.runKernelFunc((function(e){return e.subtract(r,a)}),{a:r,b:a},(function(e){return{a:function(){var t=e,n=uk(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=uk(a.shape,o);return n.length>0&&(t=t.sum(n)),t.neg().reshape(a.shape)}}}),"Sub")}}),iS=p_({subStrict_:function(e,t){var n=n_(e,"a","subStrict"),r=n_(t,"b","subStrict");return Pw(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),sS=p_({div_:function(e,t){var n,r=n_(e,"a","div"),a=n_(t,"b","div");if(n=Bx(r,a),r=n[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return qk(r,a);var o={a:r,b:a};return Yx.runKernelFunc((function(e,t){var n=e.realDivide(r,a);return t([r,a]),n}),o,null,$_,{})}});function uS(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],a=1,o=0;o<n.length-1;++o)a*=n[o];var i=e.shape,s=n.slice();s.pop();var u=1;for(o=r;o<e.rank;++o)u*=i[o],s.push(i[o]);var l=lx(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,a,u,l]}Object.freeze({prepareAndValidate:uS});function lS(e){return e<=30?e:ux(e,Math.floor(Math.sqrt(e)))}function cS(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(o+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(o+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(o+" update.rank != "+(a+e.length-r));for(var i=0;i<a;++i)if(n.shape[i]!==t.shape[i])throw new Error(o+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-a;++i)if(n.shape[i+a]!==e[i+r])throw new Error(o+" updates.shape["+(i+a)+"] ("+n.shape[i+a]+") != shape["+(i+a)+"] ("+e[i+a]+")")}function fS(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}cS(n,t,e)}function dS(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,o=n.length,i=1,s=a;s<o;++s)i*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Bw(t.shape)/u,sliceSize:i,strides:lx(n.slice(0,a)).concat([1]),outputSize:Bw(n)}}Object.freeze({validateUpdateShape:cS,validateInput:fS,calculateShapes:dS});function hS(e,t,n){Rw(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Rw(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Rw(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},a=0;a<e.rank;++a)r(a)}function pS(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function mS(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function vS(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||null==o)&&(o=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),Dw(0,o,s-1)}function gS(e,t,n,r,a){var o=t[a],i=n[a]||1;(e&1<<a||null==o)&&(o=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[a];return o<0&&(o+=s),i>0?Dw(0,o,s):Dw(-1,o,s-1)}function yS(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function bS(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:hS,maskToAxes:pS,computeOutShape:mS,startForAxis:vS,stopForAxis:gS,isSliceContinous:yS,computeFlatOffset:bS});function wS(e){return Yx.customGrad(e)}var xS=p_({softmax_:function(e,t){void 0===t&&(t=-1);var n=n_(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Yx.runKernelFunc((function(e,r){var a=e.softmax(n,t);return r([a]),a}),{logits:n},(function(e,n){var r=n[0],a=e.mul(r);return{logits:function(){return a.sub(a.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),CS=p_({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=n_(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return wS((function(e,n){var r=e.max(t,!0),a=e.sub(r),o=a.toFloat().sub(a.exp().sum(t,!0).log());return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),_S=p_({transpose_:function(e,t){var n=n_(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Rw(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Rw(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return Yx.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},null,"Transpose",r)}}),kS=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),SS=function(){function e(){}return e.prototype.time=function(e){return MS("time")},e.prototype.read=function(e){return MS("read")},e.prototype.readSync=function(e){return MS("readSync")},e.prototype.numDataIds=function(){return MS("numDataIds")},e.prototype.disposeData=function(e){return MS("disposeData")},e.prototype.write=function(e,t,n){return MS("write")},e.prototype.move=function(e,t,n,r){return MS("move")},e.prototype.memory=function(){return MS("memory")},e.prototype.floatPrecision=function(){return MS("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return MS("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,MS("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return MS("slice")},e.prototype.stridedSlice=function(e,t,n,r){return MS("stridedSlice")},e.prototype.unstack=function(e,t){return MS("unstack")},e.prototype.reverse=function(e,t){return MS("reverse")},e.prototype.concat=function(e,t){return MS("concat")},e.prototype.neg=function(e){return MS("neg")},e.prototype.add=function(e,t){return MS("add")},e.prototype.addN=function(e){return MS("addN")},e.prototype.subtract=function(e,t){return MS("subtract")},e.prototype.multiply=function(e,t){return MS("multiply")},e.prototype.realDivide=function(e,t){return MS("realDivide")},e.prototype.floorDiv=function(e,t){return MS("floorDiv")},e.prototype.sum=function(e,t){return MS("sum")},e.prototype.prod=function(e,t){return MS("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return MS("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return MS("argMin")},e.prototype.argMax=function(e,t){return MS("argMax")},e.prototype.equal=function(e,t){return MS("equal")},e.prototype.notEqual=function(e,t){return MS("notEqual")},e.prototype.less=function(e,t){return MS("less")},e.prototype.lessEqual=function(e,t){return MS("lessEqual")},e.prototype.greater=function(e,t){return MS("greater")},e.prototype.greaterEqual=function(e,t){return MS("greaterEqual")},e.prototype.logicalNot=function(e){return MS("logicalNot")},e.prototype.logicalAnd=function(e,t){return MS("logicalAnd")},e.prototype.logicalOr=function(e,t){return MS("logicalOr")},e.prototype.where=function(e){return MS("where")},e.prototype.select=function(e,t,n){return MS("select")},e.prototype.topk=function(e,t,n){return MS("topk")},e.prototype.min=function(e,t){return MS("min")},e.prototype.minimum=function(e,t){return MS("minimum")},e.prototype.mod=function(e,t){return MS("mod")},e.prototype.max=function(e,t){return MS("max")},e.prototype.maximum=function(e,t){return MS("maximum")},e.prototype.all=function(e,t){return MS("all")},e.prototype.any=function(e,t){return MS("any")},e.prototype.squaredDifference=function(e,t){return MS("squaredDifference")},e.prototype.ceil=function(e){return MS("ceil")},e.prototype.floor=function(e){return MS("floor")},e.prototype.round=function(e){return MS("round")},e.prototype.sign=function(e){return MS("sign")},e.prototype.isNaN=function(e){return MS("isNaN")},e.prototype.isInf=function(e){return MS("isInf")},e.prototype.isFinite=function(e){return MS("isFinite")},e.prototype.pow=function(e,t){return MS("pow")},e.prototype.exp=function(e){return MS("exp")},e.prototype.expm1=function(e){return MS("expm1")},e.prototype.softmax=function(e,t){return MS("softmax")},e.prototype.log=function(e){return MS("log")},e.prototype.log1p=function(e){return MS("log1p")},e.prototype.sqrt=function(e){return MS("sqrt")},e.prototype.rsqrt=function(e){return MS("rsqrt")},e.prototype.square=function(e){return MS("square")},e.prototype.reciprocal=function(e){return MS("reciprocal")},e.prototype.relu=function(e){return MS("relu")},e.prototype.relu6=function(e){return MS("relu6")},e.prototype.prelu=function(e,t){return MS("prelu")},e.prototype.elu=function(e){return MS("elu")},e.prototype.eluDer=function(e,t){return MS("eluDer")},e.prototype.selu=function(e){return MS("selu")},e.prototype.int=function(e){return MS("int")},e.prototype.clip=function(e,t,n){return MS("clip")},e.prototype.abs=function(e){return MS("abs")},e.prototype.complexAbs=function(e){return MS("complexAbs")},e.prototype.sigmoid=function(e){return MS("sigmoid")},e.prototype.softplus=function(e){return MS("softplus")},e.prototype.sin=function(e){return MS("sin")},e.prototype.cos=function(e){return MS("cos")},e.prototype.tan=function(e){return MS("tan")},e.prototype.asin=function(e){return MS("asin")},e.prototype.acos=function(e){return MS("acos")},e.prototype.atan=function(e){return MS("atan")},e.prototype.atan2=function(e,t){return MS("atan2")},e.prototype.sinh=function(e){return MS("sinh")},e.prototype.cosh=function(e){return MS("cosh")},e.prototype.tanh=function(e){return MS("tanh")},e.prototype.asinh=function(e){return MS("asinh")},e.prototype.acosh=function(e){return MS("acosh")},e.prototype.atanh=function(e){return MS("atanh")},e.prototype.erf=function(e){return MS("erf")},e.prototype.step=function(e,t){return MS("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,MS("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return MS("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return MS("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return MS("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,MS("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return MS("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return MS("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return MS("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return MS("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return MS("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return MS("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return MS("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return MS("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return MS("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return MS("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return MS("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return MS("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return MS("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return MS("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return MS("reshape")},e.prototype.cast=function(e,t){return MS("cast")},e.prototype.tile=function(e,t){return MS("tile")},e.prototype.pad=function(e,t,n){return MS("pad")},e.prototype.transpose=function(e,t){return MS("transpose")},e.prototype.gather=function(e,t,n){return MS("gather")},e.prototype.gatherND=function(e,t){return MS("gatherND")},e.prototype.scatterND=function(e,t,n){return MS("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return MS("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return MS("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return MS("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return MS("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return MS("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return MS("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,a,o){return MS("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){return MS("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){return MS("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return MS("multinomial")},e.prototype.oneHot=function(e,t,n,r){return MS("oneHot")},e.prototype.cumsum=function(e,t,n,r){return MS("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){return MS("nonMaxSuppression")},e.prototype.fft=function(e){return MS("fft")},e.prototype.ifft=function(e){return MS("ifft")},e.prototype.complex=function(e,t){return MS("complex")},e.prototype.real=function(e){return MS("real")},e.prototype.imag=function(e){return MS("imag")},e.prototype.cropAndResize=function(e,t,n,r,a,o){return MS("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return MS("depthToSpace")},e.prototype.split=function(e,t,n){return MS("split")},e.prototype.sparseToDense=function(e,t,n,r){return MS("sparseToDense")},e.prototype.diag=function(e){return MS("diag")},e.prototype.fill=function(e,t,n){return MS("fill")},e.prototype.onesLike=function(e){return MS("onesLike")},e.prototype.zerosLike=function(e){return MS("zerosLike")},e.prototype.linspace=function(e,t,n){return MS("linspace")},e.prototype.dispose=function(){return MS("dispose")},e}();function MS(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ES(e,t,n,r,a,o,i){void 0===i&&(i="channelsLast");var s,u=DS(t),l=u[0],c=u[1];if("channelsLast"===i)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return TS(e,s,n,r,a,o,!1,i)}function NS(e,t,n,r,a,o,i){void 0===i&&(i="NDHWC");var s,u,l=LS(t),c=l[0],f=l[1],d=l[2];if("NDHWC"===i)u="channelsLast",s=[c,f,d,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[c,f,d,e[1],e[1]]}return IS(e,s,n,r,a,!1,u,o)}function TS(e,t,n,r,a,o,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3];if("channelsLast"===s)l=e[0],c=e[1],f=e[2],d=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],d=e[1],c=e[2],f=e[3]}var h,p=t[0],m=t[1],v=t[3],g=DS(n),y=g[0],b=g[1],w=DS(r),x=w[0],C=w[1],_=AS(p,x),k=AS(m,C),S=function(e,t,n,r,a,o,i,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=jS(e,t,n));var o=e[1],i=RS((e[0]-t+2*r)/n+1,a);Rw(Uw(i),(function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"}));var s=RS((o-t+2*r)/n+1,a);return Rw(Uw(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[i,s]}([t,n],o,r,e,s);l=f[0],c=f[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/a);var d=Math.max(0,(l-1)*r+o-t),h=Math.max(0,(c-1)*a+i-n),p=Math.floor(d/2),m=d-p,v=Math.floor(h/2);u={top:p,bottom:m,left:v,right:h-v,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),c=Math.ceil((n-i+1)/a)}return{padInfo:u,outHeight:l,outWidth:c}}(a,c,f,y,b,_,k,o),M=S.padInfo,E=S.outHeight,N=S.outWidth,T=i?v*d:v;return"channelsFirst"===s?h=[l,T,E,N]:"channelsLast"===s&&(h=[l,E,N,T]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:d,outHeight:E,outWidth:N,outChannels:T,padInfo:M,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:k,dilationHeight:x,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function IS(e,t,n,r,a,o,i,s){void 0===o&&(o=!1),void 0===i&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],d=u[3],h=u[4];if("channelsLast"===i)l=e[0],c=e[1],f=e[2],d=e[3],h=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);l=e[0],h=e[1],c=e[2],f=e[3],d=e[4]}var p,m=t[0],v=t[1],g=t[2],y=t[4],b=LS(n),w=b[0],x=b[1],C=b[2],_=LS(r),k=_[0],S=_[1],M=_[2],E=AS(m,k),N=AS(v,S),T=AS(g,M),I=function(e,t,n,r,a,o,i,s,u,l,c){var f,d,h,p;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,o){null==a&&(a=jS(e,t,r));var i=e[1],s=e[2],u=RS((e[0]-t+2*a)/r+1,o);Rw(Uw(u),(function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var l=RS((i-t+2*a)/r+1,o);Rw(Uw(l),(function(){return"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var c=RS((s-t+2*a)/r+1,o);return Rw(Uw(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[u,l,c,1]}([t,n,r,1],s,0,a,e,c);d=m[0],h=m[1],p=m[2]}else if("same"===e){var v=((d=Math.ceil(t/a))-1)*a+s-t,g=((h=Math.ceil(n/o))-1)*o+u-n,y=((p=Math.ceil(r/i))-1)*i+l-r,b=Math.floor(v/2),w=v-b,x=Math.floor(g/2),C=g-x,_=Math.floor(y/2);f={top:x,bottom:C,left:_,right:y-_,front:b,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/o),p=Math.ceil((r-l+1)/i)}return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}(a,c,f,d,w,x,C,E,N,T,s),j=I.padInfo,D=I.outDepth,L=I.outHeight,A=I.outWidth,R=o?y*h:y;return"channelsFirst"===i?p=[l,R,D,L,A]:"channelsLast"===i&&(p=[l,D,L,A,R]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:f,inWidth:d,inChannels:h,outDepth:D,outHeight:L,outWidth:A,outChannels:R,padInfo:j,strideDepth:w,strideHeight:x,strideWidth:C,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:E,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationDepth:k,dilationHeight:S,dilationWidth:M,inShape:e,outShape:p,filterShape:t}}function jS(e,t,n,r){void 0===r&&(r=1);var a=AS(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function DS(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function LS(e){return"number"==typeof e?[e,e,e]:e}function AS(e,t){return t<=1?e:e+(e-1)*(t-1)}function RS(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function PS(e){var t=DS(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function OS(e,t){return PS(e)||PS(t)}function FS(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function BS(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=M_(e.shape),a=e.toFloat(),o=n.complex(a,r);return r.dispose(),a.dispose(),o}if(!$w(e.dtype,t))return Yx.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var i=n.real(e);return o=i.cast(t),i.dispose(),o}if("int32"===t)return n.int(e);if("bool"===t){var s=w_(0,e.dtype);return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function zS(e,t){return Yx.makeTensorFromDataId(e.dataId,t,e.dtype)}function US(e,t,n){var r=(t-e)/(n-1),a=hx(n,"float32");a[0]=e;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return x_(a,"float32")}Object.freeze({castTensor:BS,reshapeTensor:zS,linspaceImpl:US,upcastType:Ox,axesAreInnerMostDims:a_,combineLocations:o_,computeOutAndReduceShapes:i_,expandShapeToKeepDim:s_,assertAxesAreInnerMostDims:u_,getAxesPermutation:l_,getUndoAxesPermutation:c_,getInnerMostAxes:f_,getBroadcastDims:sk,getReductionAxes:uk,assertAndGetBroadcastShape:lk,assertParamsConsistent:d_,computeOutShape:h_,computePool2DInfo:ES,computePool3DInfo:NS,computeConv2DInfo:TS,computeConv3DInfo:IS,computeDefaultPad:jS,tupleValuesAreOne:PS,eitherStridesOrDilationsAreOne:OS,convertConv2DDataFormat:FS,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:lS});function WS(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function VS(e,t){return{real:e[2*t],imag:e[2*t+1]}}function HS(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function YS(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function GS(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,o=0,i=!1;r<a;){var s=n(t,e[o=r+(a-r>>>1)]);s>0?r=o+1:(a=o,i=!s)}return i?r:-r-1}(e,t,n||qS)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function qS(e,t){return e>t?1:e<t?-1:0}function QS(e,t,n,r,a){return KS(e,t,n,r,a,0).selectedIndices}function XS(e,t,n,r,a,o){var i=KS(e,t,n,r,a,o,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function KS(e,t,n,r,a,o,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>a})).sort($S),l=o>0?-.5/o:0,c=[],f=[];c.length<n&&u.length>0;){var d=u.pop(),h=d.score,p=d.boxIndex,m=d.suppressBeginIndex;if(h<a)break;for(var v=!1,g=c.length-1;g>=m;--g){var y=JS(e,p,c[g]);if(y>=r){v=!0;break}if(d.score=d.score*ZS(r,l,y),d.score<=a)break}d.suppressBeginIndex=c.length,v||(d.score===h?(c.push(p),f.push(d.score)):d.score>a&&GS(u,d,$S))}var b=c.length;return s&&(c.fill(0,b),f.fill(0,b)),{selectedIndices:x_(c,"int32"),selectedScores:x_(f,"float32"),numValidOutputs:w_(b,"int32")}}function JS(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(s-o)*(u-i),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var m=Math.max(o,l),v=Math.max(i,c),g=Math.min(s,f),y=Math.min(u,d),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(h+p-b)}function ZS(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function $S(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function eM(e,t,n){var r=new Array(e.rank).fill(0),a=e.shape.slice();return t.map((function(t){a[n]=t;var o=e.slice(r,a);return r[n]+=t,o}))}function tM(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var a=O_(n,e.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=o[s]%e.shape[s];var u=e.locToIndex(i);a.values[r]=e.values[u]}return a.toTensor()}function nM(e,t,n,r,a){for(var o=t[t.length-1],i=[e.length/o,o],s=i[0],u=i[1],l=Xw(n,s*r),c=Xw("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=e.subarray(d,d+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort((function(e,t){return t.value-e.value}));var v=f*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=t.slice();return b[b.length-1]=r,[y_(l,b,n),y_(c,b,"int32")]}function rM(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var a=O_(e,"int32"),o=O_([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=a.indexToLoc(n[r]),s=r*e.length;o.values.set(i,s)}return o.toTensor()}var aM=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},oM=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},iM=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,o=e.inSize,i=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function sM(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function uM(e,t){return 1===t?[e]:sM(e,t)}function lM(){var e,t,n,r,a,o,i,s,u,l;return 2===xw().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",o="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",o="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:o,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function cM(e,t,n){void 0===n&&(n="index");var r=lx(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function fM(e){var t=lx(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var dM="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function hM(e,t,n,r){var a=[];e.forEach((function(e){var t=Bw(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var o,i,s=a.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?mM(e):pM(e);var a=e.shapeInfo.logicalShape,o=t.logicalShape;return a.length<=o.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=sk(e.shapeInfo.logicalShape,t.logicalShape),l=CM(s),c=s-i,f=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+f[e+c]+" = 0;"})).join("\n");var d;d=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+c]})).join(", ");var h="return outputValue;",p=1===Bw(e.shapeInfo.logicalShape),m=1===Bw(t.logicalShape);if(1!==i||p||m){if(p&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=i-2,g=i-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+d+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",o=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&zw(i,o))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=CM(u),f=sk(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords."+h[e+d]+" = 0;"})).join("\n");var p;return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+d]})).join(", "),"\n    float "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+p+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=lM(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+vM+"\n    "+gM+"\n    "+yM+"\n  "}(c);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(zw(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),o=a,i="",s="b, r, c",u=2;u<e.length-1;u++)i="\n      int b"+u+" = index / "+(o*=e[e.length-u-1])+";\n      index -= b"+u+" * "+o+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,o,i}(t.logicalShape,l),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return zw(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=cM(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=cM(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=cM(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=cM(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(d+=bM),[d,f,i,s,o,u,n].join("\n")}function pM(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===a&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+wM(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+xM(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],o=r[1];if(1===o&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=wM(t);return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+o+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&zw(t,a)){var o=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+o+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=Qw(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n      "+pM(_M(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+kM(["row","col"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+xM(e)+"\n      }\n    ";var c=a[0],f=a[1],d=wM(n);return 1===f?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+c+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],o=t[2],i=Qw(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length)return"\n        "+pM(_M(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+kM(["row","col","depth"],u)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+o+", 1)));\n        "+xM(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,f=c[0],d=c[1],h=e.shapeInfo.flatOffset;return d===a&&null==h?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===o&&null==h?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+o+" + depth + "+wM(n)+";\n        vec2 uv = uvFromFlat("+f+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],o=t[2]*a,i=t[1]*o,s=Qw(t),u=s.newShape,l=s.keptDims;if(u.length<t.length)return"\n      "+pM(_M(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+kM(["row","col","depth","depth2"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+o+", "+a+", 1)));\n        "+xM(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],h=f[1];return h===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===a&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+o+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+h+", index + "+wM(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],o=t[3]*a,i=t[2]*o,s=t[1]*i,u=Qw(t),l=u.newShape,c=u.keptDims;if(l.length<t.length)return"\n      "+pM(_M(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+kM(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+o+", "+a+")) +\n          depth3;\n        "+xM(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];return p===s&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+o+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===a&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+o+" +\n          depth2 * "+a+" + depth3 + "+wM(n)+";\n      vec2 uv = uvFromFlat("+h+", "+p+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Qw(t),o=a.newShape,i=a.keptDims;if(o.length<t.length)return"\n      "+pM(_M(e,o))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+kM(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=t[5],u=t[4]*s,l=t[3]*u,c=t[2]*l,f=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+c+", "+l+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+xM(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],m=h[1];return m===f&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+l+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+c+" + depth * "+l+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+wM(n)+";\n      vec2 uv = uvFromFlat("+p+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function mM(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+lM().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=lM();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=a[0],i=a[1],s=lM();if(null!=a&&zw(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0])return"\n        "+mM(_M(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+kM(["b","row","col"],[1,2])+");\n        }\n      ";var i=o[0],s=o[1],u=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(t[1]/2)+", "+u+", b, row, col);\n      return "+lM().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=i[0],u=i[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * "+c+" + (row / 2) * "+l+" + (col / 2)",h=2;h<n-1;h++)f="int b"+h+", "+f,d="b"+h+" * "+(c*=t[n-h-1])+" + "+d;return"\n    vec4 "+a+"("+f+") {\n      int index = "+d+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+lM().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var vM="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",gM="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",yM="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",bM="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function wM(e){return"offset"+e}function xM(e){var t=e.name,n=Bw(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function CM(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function _M(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function kM(e,t){return t.map((function(t){return e[t]})).join(", ")}var SM=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Rw(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=CM(l),f=uM("coords",l);if(1===o){var d=CM(s=l+1);i="\n        "+d+" sourceLocR = "+d+"("+f.join()+", 0);\n        ++"+f[l-1]+";\n        "+d+" sourceLocG = "+d+"("+f.join()+", 0);\n        ++"+f[l-2]+";\n        "+d+" sourceLocA = "+d+"("+f.join()+", 0);\n        --"+f[l-1]+";\n        "+d+" sourceLocB = "+d+"("+f.join()+", 0);\n        --"+f[l-2]+";"}else s=l,i="\n        "+c+" sourceLocR = coords;\n        ++"+f[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+f[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+f[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+f[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map((function(e){return"int "+e})),v=uM("sourceLocR",s-1).concat("inIdx.r"),g=uM("sourceLocG",s-1).concat("inIdx.g"),y=uM("sourceLocB",s-1).concat("inIdx.b"),b=uM("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",_=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+_+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+f[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+f[l-2]+" < "+(u[l-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+p+", sourceLocG"+p+",\n          sourceLocB"+p+", sourceLocA"+p+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},MM=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},EM=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,p=f-1-e.padInfo.top,m=d-1-e.padInfo.left,v=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+h+", "+p+", "+m+");\n      const float avgMultiplier = float("+v+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},NM=function(e,t,n,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],lk(e,t),lk(e,n);var i="0.0";null!=r&&(lk(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=a&&(lk(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},TM=function(e,t,n,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],lk(e,t),lk(e,n);var i="vec4(0.0)";null!=r&&(lk(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(lk(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},IM=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=lk(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},jM="return a + b;",DM="return a - b;",LM="return a * b;",AM="return (a < 0.) ? b * a : a;",RM=function(e,t,n){this.variableNames=["A","B"],this.outputShape=lk(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},PM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",OM=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=lk(t,n);var a=this.outputShape.length,o="";if(r)if(0===a||1===Bw(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+CM(a)+" coords = getOutputCoords();\n        ",1===a)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=uM("coords",a);o+="\n            bool nextRowOutOfBounds =\n              ("+i[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+i[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},FM=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),BM=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),zM=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},UM=function(e){this.outputShape=[],this.outputShape=h_(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var a=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+a+"));")}var o=t.length,i=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},WM=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=h_(e,t);var n=this.outputShape,r=n.length,a=CM(r),o=uM("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c=i.slice(-2),f=i.join(),d="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+c.join()+"));\n        }";for(u=1;u<s.length;u++){var h=s[u-1];d+="\n        if ("+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+VM(i,l,h)+"),\n            vec2("+VM(c,l,h)+"));\n        }"}var p=s.length,m=s[s.length-1];d+="\n        return getChannel(\n          getT"+p+"("+VM(i,l,m)+"),\n          vec2("+VM(c,l,m)+"));",this.userCode="\n      float getValue("+i.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            "+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "};function VM(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var HM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+o+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},YM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},GM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},QM=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},XM=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},KM=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.padInfo.top,o=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p="channelsLast"===e.dataFormat,m=p?1:2,v=p?2:3,g=p?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+v+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+p+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===h)+") {\n\n              if ("+p+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===h)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+p+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===h)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+p+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},JM=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,f=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+o+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===p)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===p)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===p)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ZM=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var a=e.inHeight,o=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,m="",v="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",v="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+a+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+v+"\n        setOutput(result);\n      }\n    "},$M=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var a=e.inHeight,o=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=h,m="int xR; int xC; int xCOffset;",v=0;v<d;v++)for(var g=0;g<h;g++)m+="\n          vec4 xTexelR"+v+"C"+2*g+" = vec4(0.);\n          vec4 wR"+v+"C"+g+" = vec4(0.);\n          vec4 xR"+v+"C"+g+" = vec4(0.);";for(v=0;v<d;v++)for(var y=0;y<p;y++){if(m+="\n          xR = xRCorner + "+v*c+";\n          xC = xCCorner + "+(g=2*y)*f+";\n        ",1===l){if(g<h&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    xTexelR"+v+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+a+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+".xy);\n                } else {\n                  xR"+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+a+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = xTexelR"+v+"C"+g+";\n              ",g+1<h)){var b=s%2==0?Lw(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+a+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+v+"C"+g+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+a+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+";\n                "}}else g<h&&(m+="\n              if(xR >= 0 && xR < "+a+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n              ",g+1<h&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+v+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+v+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+v+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+v+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+v+"C"+g+" = vec4(\n                  xTexelR"+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+".xy);\n              ",g+1<h&&(m+="\n                  xR"+v+"C"+(g+1)+" = vec4(\n                    xTexelR"+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+".zw);\n                ")),m+="}");g<h&&(m+="\n            vec4 wTexelR"+v+"C"+g+" = getW("+v+", "+g+", d1, q);\n            wR"+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+".xz);\n          ",g+1<h&&(m+="\n              vec4 wTexelR"+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+", d1, q);\n              wR"+v+"C"+(g+1)+" =\n                vec4(wTexelR"+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<d;v++)for(g=0;g<h;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var w="",x="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",x="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+x+"\n        setOutput(result);\n      }\n    "},eE=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var d="bilinear"===r?1:0,h=[i-1+".0",s-1+".0"],p=h[0],m=h[1],v=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],w=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=w[0],C=w[1],_=w[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+p+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},tE=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=e[e.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+a+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+CM(r)+" coords = getOutputCoords();\n        int end = "+nE(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+a+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+nE(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function nE(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var rE=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Qx.DENSE;var t=nC(e),n=lM();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+cM(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},aE=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Qx.DENSE;var t=nC(e),n=lM();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+cM(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},oE=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),iE=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},sE=function(e){this.variableNames=["A"],this.outTexUsage=Xx.DOWNLOAD;var t=lM();this.outputShape=e,this.userCode="\n      "+dM+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},uE=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Xx.DOWNLOAD;var t=lM();this.outputShape=e,this.userCode="\n      "+dM+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},lE=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=lM(),a=t[0],o=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+fM(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},cE=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=lM(),a=t[0],o=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+fM(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},fE=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+a+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},dE=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),hE=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var a=CM(this.rank),o=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=0;o<e.length;o++)o===t?a.push("int(getIndices("+r[o]+"))"):a.push(""+r[o]);return a.join()}(e,n);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},pE=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=CM(t.length),a=CM(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function mE(e,t){var n=lM();return lC(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function vE(e,t){return gC(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function gE(e,t){return yC(e,t,new Uint16Array([0,1,2,2,1,3]))}function yE(e,t,n,r,a,o,i){wC(n,r);var s=bC(e,t),u=e.TEXTURE_2D;return oC(e,t,(function(){return e.bindTexture(u,s)})),oC(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),oC(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),oC(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),oC(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),oC(e,t,(function(){return e.texImage2D(u,0,a,n,r,0,o,i,null)})),oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function bE(e,t,n,r,a){var o=tC(n,r);return yE(e,t,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,e.FLOAT)}function wE(e,t,n,r,a){var o=tC(n,r);return yE(e,t,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function xE(e,t,n,r,a){var o=tC(n,r);return yE(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function CE(e,t,n,r,a){var o=rC(n,r);return yE(e,t,o[0],o[1],a.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function _E(e,t,n,r,a){var o=rC(n,r);return yE(e,t,o[0],o[1],a.internalFormatPackedHalfFloat,e.RGBA,a.textureTypeHalfFloat)}function kE(e,t,n,r){return oC(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),CC(e,t,n,"clipSpacePos",r,3,20,0)&&CC(e,t,n,"uv",r,2,20,12)}function SE(e,t,n,r,a,o,i){var s,u,l;oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),o instanceof Uint8Array?(s=new Uint8Array(r*a*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*a*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(o),oC(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,a,0,e.RGBA,u,s)})),oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ME(e,t,n,r){oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?oC(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):oC(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),oC(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function EE(e,t,n,r,a){var o=e.createBuffer();oC(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)}));var i=16*n*r;return oC(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),oC(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),oC(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),o}function NE(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function TE(e,t,n,r,a){var o=tC(n,r),i=o[0],s=o[1],u=new Uint8Array(n*r*4);return oC(e,t,(function(){return e.readPixels(0,0,i,s,a.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function IE(e,t,n,r,a,o,i,s){var u=e,l=new Float32Array(function(e,t){var n=rC(e,t);return n[0]*n[1]*4}(o,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function jE(e,t,n,r){var a=new Float32Array(n*r*4);return oC(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,a)})),a}var DE=Object.freeze({createVertexShader:mE,createVertexBuffer:vE,createIndexBuffer:gE,createFloat32MatrixTexture:bE,createFloat16MatrixTexture:wE,createUnsignedBytesMatrixTexture:xE,createPackedMatrixTexture:CE,createFloat16PackedMatrixTexture:_E,bindVertexProgramAttributeStreams:kE,uploadDenseMatrixToTexture:SE,uploadPixelDataToTexture:ME,createBufferFromOutputTexture:EE,downloadFloat32MatrixFromBuffer:NE,downloadByteEncodedFloatMatrixFromOutputTexture:TE,downloadPackedMatrixFromBuffer:IE,downloadMatrixFromPackedOutputTexture:jE}),LE=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=xw().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,$x(t,e)):this.gl=eC(t);var n="WEBGL_color_buffer_float";if(1===xw().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=uC(this.gl,this.debug,"OES_texture_float"),WC(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=uC(this.gl,this.debug,"OES_texture_half_float");else if(xw().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),WC(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=uC(this.gl,this.debug,"EXT_color_buffer_half_float");else if(xw().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",WC(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!WC(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=vE(this.gl,this.debug),this.indexBuffer=gE(this.gl,this.debug),this.framebuffer=xC(this.gl,this.debug),this.textureConfig=aC(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return xw().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;oC(t,this.debug,(function(){return t.finish()})),oC(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),oC(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),oC(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),oC(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),oC(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),bE(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),wE(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),xE(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),ME(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),SE(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),_E(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),CE(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(NC(this.gl,this.debug,this.framebuffer),this.outputTexture=null),oC(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return TE(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,o){return IE(this.gl,e,0,0,0,a,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return NE(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=EE(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(xw().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return jE(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=cC(t,this.debug,e),r=mE(t,this.debug),a=pC(t,this.debug);return oC(t,this.debug,(function(){return t.attachShader(a,r)})),oC(t,this.debug,(function(){return t.attachShader(a,n)})),mC(t,this.debug,a),this.debug&&vC(t,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=kE(t,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&oC(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&vC(this.gl,this.debug,this.program),oC(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?kC(this.gl,this.debug,e,t):SC(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),oC(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),MC(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=rC(t,n),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&vC(this.gl,this.debug,this.program),TC(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),oC(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),oC(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=uC(this.gl,this.debug,2===xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2!==xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return yw(this,void 0,void 0,(function(){var t=this;return bw(this,(function(n){switch(n.label){case 0:return[4,Yw((function(){return t.disposed||t.isQueryAvailable(e,xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Yw((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),EC(this.gl,this.debug,e,this.framebuffer),this.debug&&TC(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(EC(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&TC(this.gl)):NC(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;EC(r,this.debug,e,this.framebuffer),this.debug&&TC(r),this.outputTexture=e,oC(r,this.debug,(function(){return r.viewport(0,0,t,n)})),oC(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),oC(this.gl,this.debug,(function(){return a.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function AE(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!zw(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match");if(!e.isUniform||!a.isUniform){var i=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!zw(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}}))}var RE=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,o=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,d=s.left,h=s.top,p=a*r,m=lM(),v="channelsLast"===f,g=v?0:1,y=v?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+w+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+i+" - "+h+";\n            d0 = offsetY + "+c+" * (pos / "+p+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+d+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+p+".) / "+a+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},PE=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},OE=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},FE=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";o=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},BE=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,i=a-1-e.padInfo.top,s=o-1-e.padInfo.left,u=a*o-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zE=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,f=u-1-e.padInfo.top,d=l-1-e.padInfo.left,h=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+f+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+h+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},UE=function(e,t,n,r,a,o,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===o&&(o=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";o&&(h=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",p="result = activation(result);");var m=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+h+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+d[0]+");\n          result += ("+f[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+p+"\n\n        setOutput(result);\n      }\n    "},WE=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),VE=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},HE=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=uM("rc",t),r=CM(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),o=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var o=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),i=2;i<e;i++)o=t[t.length-1-i]+","+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},YE=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=CM(r),o=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+o+");\n      "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},GE=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=CM(r),o=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=uM("rc",r),u=uM("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",f=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=1===r?2:4;p<m;p++)h+="\n        "+f[p]+"\n        if ("+d+") {\n          result["+p+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+p+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+o+");\n      const "+a+" end = "+a+"("+i+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},qE=function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,f=e.effectiveFilterWidth,d=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var p="avg"===t,m="((batch  * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + d",v="(xR * "+e.inWidth+" + xC) * "+e.inChannels+" + d",g="0.0";if(p||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+s+");\n        const ivec2 pads = ivec2("+d+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+l+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?a?m:v:"wR * "+f+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(o/4),w=o%4,x="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+d+", "+h+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+c+";\n            wR += "+u+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+b+"; wC += 4) {\n            int xC = xCCorner + wC * "+l+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              getValue(batch, xR, xC + 3 * "+l+", d)\n            );\n\n            "+x+"\n          }\n\n          int xC = xCCorner + "+b+";\n          if ("+(1===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+x+"\n          } else if ("+(2===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+x+"\n          } else if ("+(3===w)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              initializationValue\n            );\n\n            "+x+"\n          }\n        }\n        setOutput("+y+");\n      }\n    "}},QE=function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var o=e.filterWidth,i=e.strideDepth,s=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,f=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var y="avg"===t,b="0.0";if(y||(b="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+s+", "+u+");\n        const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+d+";\n              wD += "+l+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+c+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+f+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?a?"(((batch * "+e.inDepth+" + xD) * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"((xD * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"wD * "+h+" * "+p+" +\n                      wR * "+p+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var w=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(w="avgValue / count");var x=4*Math.floor(o/4),C=o%4,_="\n      if ("+y+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+s+", "+u+");\n      const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+d+";\n            wD += "+l+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+c+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+x+"; wC += 4) {\n              int xC = xCCorner + wC * "+f+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+f+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+f+", ch)\n              );\n\n              "+_+"\n            }\n\n            int xC = xCCorner + "+x+";\n            if ("+(1===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+_+"\n            } else if ("+(2===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+_+"\n            } else if ("+(3===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+f+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+f+", ch),\n                initializationValue\n              );\n\n              "+_+"\n            }\n          }\n          setOutput("+w+");\n        }\n      }\n    "}},XE=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=Math.ceil(a/n);this.outputShape=[r,o];var i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(i="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(i="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===c)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},KE=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+cM(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+fM(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},JE=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},ZE=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},$E=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},eN=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],d=l[1]/c[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,v=2*Math.ceil(p)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+h+");\n        const float invWidthScale = float("+p+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+v+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},tN=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},nN=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=CM(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},rN=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=uM("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],i=CM(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},aN=function(e,t,n,r,a,o,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=CM(a.length),u=CM(o.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var d="getUpdates("+f+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},oN=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,i=o*Math.ceil(a/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var f="";a%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},iN=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+o[u]),u<e&&i.push(""+o[u]);r=i.join(),a=s.join()}var l=CM(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "},sN=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=CM(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return uN.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+uN[t]+" = start["+t+"] + coords."+uN[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),uN=["x","y","z","w","u","v"],lN=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=CM(this.rank),n=uM("coords",this.rank),r=uM("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+a+")",i="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),cN=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=CM(n.length),o=CM(n.length),i="";if(1===r)i="coords * strides + begin";else{var s=0;i=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},fN=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,a=dN(t,n),o=hN(e,a,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[o].shift();return this.usedTextures[o].push(i),i}return this.numUsedTextures++,this.log(),a===Kx.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===Kx.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===Kx.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===Kx.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===Kx.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=hN(t,dN(n,r),r);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[a],i=o.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function dN(e,t){if(e===Xx.UPLOAD)return Kx.PACKED_2X2_FLOAT32;if(e===Xx.RENDER||null==e)return function(e){return xw().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Kx.PACKED_2X2_FLOAT32:Kx.UNPACKED_FLOAT32:e?Kx.PACKED_2X2_FLOAT16:Kx.UNPACKED_FLOAT16}(t);if(e===Xx.DOWNLOAD||e===Xx.PIXELS)return Kx.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function hN(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var pN=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=CM(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},mN=1.7580993408473768,vN=1.0507009873554805,gN=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},yN="if (isnan(x)) return x;",bN="return abs(x);",wN=yN+"\n  return (x < 0.0) ? 0.0 : x;\n",xN=yN+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",CN="return (x >= 0.0) ? x : (exp(x) - 1.0);",_N="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+mN+";\n  float scale = "+vN+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",kN="return -x;",SN="return ceil(x);",MN="return floor(x);",EN="return exp(x);",NN="return exp(x) - 1.0;",TN=yN+"\n  return sin(x);\n",IN=yN+"\n  return cos(x);\n",jN=yN+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",DN=yN+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",LN=yN+"\n  return atan(x);\n",AN=yN+"return log(x + sqrt(x * x + 1.0));",RN=yN+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",PN=yN+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",ON="return x;",FN="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",BN="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",zN="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",UN=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},WN=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=uM("rc",t),r=CM(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),i=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},VN={};function HN(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?FN:wN;if("elu"===e)return t?zN:CN;if("relu6"===e)return t?BN:xN;if("prelu"===e)return t?PM:AM;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var YN=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!xw().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=eC(xw().getNumber("WEBGL_VERSION"));r.binaryCache=((n=xw().getNumber("WEBGL_VERSION"))in VN||(VN[n]={}),VN[n]),r.gpgpu=new LE(a),r.canvas=a.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new fN(r.gpgpu),r.numMBBeforeWarning=null==xw().global.screen?1024:xw().global.screen.height*xw().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new kS(r,Yx),r}return gw(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(xw().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Xx.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(xw().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Xx.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensors,o=t.slice,i=t.shape,s=t.isPacked;if(null!=o){var u;u=s?new UN(i,ON):new gN(i,ON);var l=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeData(l.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,h=null!=this.activeTimers;return h&&(f=px()),d="complex64"===r?WS(a.real.dataSync(),a.imag.dataSync()):this.getValuesFromTexture(e),h&&(this.downloadWaitMs+=px()-f),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return yw(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C;return bw(this,(function(_){switch(_.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,a=n.shape,o=n.slice,i=n.dtype,s=n.complexTensors,u=n.isPacked,null!=o)return void 0,l=u?new UN(a,ON):new gN(a,ON),c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:i}],i),f=this.read(c.dataId),this.disposeData(c.dataId),[2,f];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!xw().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===xw().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==i&&xw().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(e),p=this.texData.get(h.dataId),d=(C=this.gpgpu).createBufferFromTexture.apply(C,[p.texture].concat(nC(a)))),this.pendingRead.set(e,[]),"complex64"===i?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:_.sent(),_.label=2;case 2:return"complex64"!==i?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return v=_.sent(),g=v[0],y=v[1],m=WS(g,y),[3,5];case 4:null==d?m=this.getValuesFromTexture(e):(b=Bw(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(d,b)),_.label=5;case 5:return null!=h&&this.disposeData(h.dataId),w=this.convertAndCacheOnCPU(e,m),x=this.pendingRead.get(e),this.pendingRead.delete(e),x.forEach((function(e){return e(w)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,w]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!iC(n)){if(xw().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,o=n.isPacked,i=Bw(r);if(xw().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),l=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(nC(r))).subarray(0,i);return this.disposeData(s.dataId),l}var c=xw().getBool("WEBGL_PACK")&&!0===o,f=c?RC(r):r,d=c?new uE(f):new sE(f),h=this.runWebGLProgram(d,[{shape:f,dtype:a,dataId:e}],"float32"),p=this.texData.get(h.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeData(h.dataId),m},t.prototype.time=function(e){return yw(this,void 0,void 0,(function(){var t,n,r,a,o,i,s;return bw(this,(function(u){switch(u.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=Fw(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Fw(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return s=u.sent(),i.kernelMs=Aw(s),i.getExtraProfileInfo=function(){return s.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:i.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,i]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:px(),endMs:null}},t.prototype.endTimer=function(e){return xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=px(),e)},t.prototype.getQueryTime=function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){return xw().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,o=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,o,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return xw().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Yx.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&Bw(e.shape)<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Yx.keep(e.clone()),imag:Yx.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Bw(n))return y_([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,a=yS(e.shape,t,n);if(r||!a){var o=xw().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lN(n):new sN(n),i=o.getCustomSetupFunc(t);return this.compileAndRun(o,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),a=this.makeOutput(n,e.dtype),o=this.texData.get(a.dataId);Object.assign(o,r),o.shape=n,o.dtype=e.dtype;var i=bS(t,e.strides);r.slice&&(i+=r.slice.flatOffset),o.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,s+1),a},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var a=mS(t,n,r);if(a.some((function(e){return 0===e})))return y_([],a);var o=new cN(t,r,a);return this.compileAndRun(o,[e])},t.prototype.reverse=function(e,t){var n=xw().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rN(e.shape,t):new nN(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return v_(e)})),r=e.map((function(e){return g_(e)}));return m_(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>xw().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(e.length/2),o=this.concat(e.slice(0,a),t),i=this.concat(e.slice(a),t);return this.concat([o,i],t)}if(xw().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new WM(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=h_(e.map((function(e){return e.shape})),t),l=e.map((function(e){return e.as2D(-1,Bw(e.shape.slice(t)))})),c=new UM(l.map((function(e){return e.shape})));return this.compileAndRun(c,l).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,kN,e.dtype);var t=new gN(e.shape,kN);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var a=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===a||1===o)&&i>1e3){n&&(e=_S(e,[0,2,1])),r&&(t=_S(t,[0,2,1]));var u=1===o?e:e.as3D(s,i,1),l=1===o?2:1,c=1===o?t.as3D(s,1,i):t;return this.multiply(u,c).sum(l,!0)}var f=Ox(e.dtype,t.dtype),d=new UE(e.shape,[s,a,o],n,r);return this.compileAndRun(d,[e,t],f)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.bias,i=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=a?n.shape[1]:n.shape[2],c=t.shape[0],f=Ox(t.dtype,n.dtype),d=null!=o,h=null!=s,p=i?HN(i,!0):null,m=new UE(t.shape,[c,u,l],r,a,d,p,h),v=[t,n];return o&&v.push(o),s&&v.push(s),this.compileAndRun(m,v,f)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new IM("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new IM("return areal * bimag + aimag * breal;",e.shape,t.shape),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(a,i),u=this.compileAndRun(o,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,LM,e.dtype);var c=new RM(LM,e.shape,t.shape);return this.compileAndRun(c,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,o){var i=[e,t,n],s=null;null!=o&&(s=o.shape,i.push(o));var u=null;if(null!=a&&(u=a.shape,i.push(a)),xw().getBool("WEBGL_PACK_NORMALIZATION")){var l=new TM(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var c=new NM(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,i)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){var o=xw().getBool("WEBGL_PACK_NORMALIZATION")?new FE(e.shape,t,n,r,a):new PE(e.shape,t,n,r,a);return this.compileAndRun(o,[e])},t.prototype.LRNGrad=function(e,t,n,r,a,o,i){var s=new OE(t.shape,r,a,o,i);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return gx(e)}));return tM(O_(e.shape,e.dtype,n),t)}var r=new pN(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=xw().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GE(e.shape,t,n):new YE(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new hE(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){Rw(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=Q_(e.shape,t,r),o=X_(a.length,t.length),i=K_(e.shape,t,r),s=J_(n,t.length),u=Z_(i,n,t.length);return _S(e.reshape(a),o).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){Rw(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=Q_(i.shape,t,r,!1),u=X_(s.length,t.length,!1),l=K_(i.shape,t,r,!1);return _S(i.reshape(s),u).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],o=lS(a),i=new XE({windowSize:o,inSize:a,batchSize:r},t),s=this.compileAndRun(i,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var o=lS(a),i=new iM({windowSize:o,inSize:a,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(i,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,a=lS(r[r.length-1]),o=new SM(r,a,t,null==n),i=null==n?[e]:[e,n],s=this.compileAndRun(o,i,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){u_("sum",t,e.rank);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a),i=Fx(e.dtype);return this.reduce(o,"sum",i).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a),i=Fx(e.dtype);return this.reduce(o,"prod",i).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=l_([r],e.rank),o=e;null!=a&&(o=_S(e,a),r=f_(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}(o.shape,r,n),s=Bw([o.shape[r]]),u=o.as2D(-1,s),l=Fx(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=a&&(c=_S(c,c_(a))),c},t.prototype.segOpCompute=function(e,t,n,r,a){var o=e.shape[0],i=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=ux(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ux(e,n+1);return n}(i,a),u=new oN({windowSize:s,inSize:i,batchSize:o,numSegments:a},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===a?l:(n=N_(0,a).tile([i/s]),this.segOpCompute(l,t,n,r,a))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(u_("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!xw().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var a=i_(e.shape,r),o=a[0],i=Bw(a[1]),s=e.as2D(-1,i);return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new tE(e.shape,n,r);return this.compileAndRun(a,[e])},t.prototype.equal=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new RM("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new RM("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new RM("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new RM("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new RM("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new RM("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new gN(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new RM("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new RM("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new iN(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Ox(t.dtype,n.dtype))},t.prototype.where=function(e){$C("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return rM(e.shape,t)},t.prototype.topk=function(e,t,n){return nM(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){u_("min",t,e.rank);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a);return this.reduce(o,"min",o.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new RM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new RM("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);u_("max",t,e.rank);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a);return this.reduce(o,"max",o.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new RM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){u_("all",t,e.rank);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a);return this.reduce(o,"all",o.dtype).reshape(r)},t.prototype.any=function(e,t){u_("any",t,e.rank);var n=i_(e.shape,t),r=n[0],a=Bw(n[1]),o=e.as2D(-1,a);return this.reduce(o,"any",o.dtype).reshape(r)},t.prototype.floorDiv=function(e,t){if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new RM("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,jM);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Ox(e.dtype,t.dtype);if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,jM,n);var r=new RM(jM,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new UN(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,a){void 0===a&&(a=!1);var o=new OM(n,e.shape,t.shape,a);return this.compileAndRun(o,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),o=this.texData.get(t.dataId),i=[[a.complexTensors.real,o.complexTensors.real],[a.complexTensors.imag,o.complexTensors.imag]].map((function(a){var o=a[0],i=a[1],s=r.makeComplexComponentTensorInfo(e,o),u=r.makeComplexComponentTensorInfo(t,i),l=new RM(n,e.shape,t.shape);return r.compileAndRun(l,[s,u],Ox(o.dtype,i.dtype))})),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>xw().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var a=e.map((function(e){return e.dtype})).reduce((function(e,t){return Ox(e,t)})),o=e.map((function(e){return e.shape})),i=xw().getBool("WEBGL_PACK")?new oM(e[0].shape,o):new aM(e[0].shape,o);return this.compileAndRun(i,e,a)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,DM);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Ox(e.dtype,t.dtype);if(xw().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,DM,e.dtype);var r=new RM(DM,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new RM("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Ox(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,SN,e.dtype);var t=new gN(e.shape,SN);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,MN,e.dtype);var t=new gN(e.shape,MN);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new gN(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new gN(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new gN(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new gN(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new gN(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,EN,e.dtype);var t=new gN(e.shape,EN);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,NN,e.dtype);var t=new gN(e.shape,NN);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=qw([t],e.shape),r=this.max(e,n),a=s_(r.shape,n),o=this.subtract(e,r.reshape(a)),i=this.exp(o),s=this.sum(i,n).reshape(a);return sS(i,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new gN(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new gN(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new gN(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new gN(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new gN(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=xw().getBool("WEBGL_PACK")?new UN(e.shape,FN):new gN(e.shape,wN),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=xw().getBool("WEBGL_PACK")?new UN(e.shape,BN):new gN(e.shape,xN),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM(PM,e.shape,t.shape):new RM(AM,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,zN,e.dtype);var t=new gN(e.shape,CN);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new RM("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new gN(e.shape,_N);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new gN(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,a=(r=xw().getBool("WEBGL_PACK_CLIP")?new BM(e.shape):new FM(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,a)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(xw().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,bN,e.dtype);var t=new gN(e.shape,bN);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new zM(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new gN(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new gN(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new gN(e.shape,TN);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new gN(e.shape,IN);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new gN(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new gN(e.shape,jN);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new gN(e.shape,DN);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new gN(e.shape,LN);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new RM("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new gN(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new gN(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new gN(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new gN(e.shape,AN);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new gN(e.shape,RN);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new gN(e.shape,PN);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new gN(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new gN(e.shape,function(e){return void 0===e&&(e=0),yN+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,a,o){var i=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,l=i[0]*i[1]*i[2],c=n.outChannels,f="channelsLast"===n.dataFormat,d=(1===l||1===c)&&u>1e3,h=i[2]%2!=0&&!!s.isPacked;if(d||!xw().getBool("WEBGL_LAZILY_UNPACK")||!xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var p=f?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],m=this.reshape(e,[1,p,n.inChannels]),v=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:v,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:o}),n.outShape)}var g=f?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),y={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,Rw(FC(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var w=this.reshape(t,[1,n.inChannels,n.outChannels]),x=this.fusedBatchMatMul({a:y,b:w,transposeA:!1,transposeB:!1,bias:r,activation:a,preluActivationWeights:o}),C=this.texData.get(x.dataId);return Rw(C.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,C.shape=n.outShape,Yx.makeTensorFromDataId(x.dataId,n.outShape,x.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,a,o){var i=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,f="channelsLast"===n.dataFormat,d=i*s*u,h=c*l,p=[d,h],m=e.squeeze([0]),v=t.reshape([1,d,-1]),g=new RE(p,m.shape,n),y=this.compileAndRun(g,[m]).reshape([1,p[0],p[1]]),b=null!=r,w=null!=o,x=a?HN(a,!0):null,C=new UE(y.shape,[1,h,n.outChannels],!0,!1,b,x,w),_=[y,v];r&&_.push(r),w&&_.push(o);var k=this.compileAndRun(C,_);return f?k.reshape([1,c,l,n.outChannels]):k.reshape([1,n.outChannels,c,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,o=e.activation,i=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,a,o,i);if(xw().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,a,o,i);var s=null!=a,u=null!=i,l=o?HN(o,!1):null,c=new KM(r,s,l,u),f=[t,n];return a&&f.push(a),i&&f.push(i),this.compileAndRun(c,f)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(xw().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new KM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new YM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new HM(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,a=e.convInfo,o=e.bias,i=e.activation,s=e.preluActivationWeights,u=xw().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,l=i?HN(i,u):null,c=[n,r],f=null!=o,d=null!=s;return f&&c.push(o),d&&c.push(s),u?(t=new $M(a,f,l,d),this.compileAndRun(t,c)):(t=new ZM(a,f,l,d),this.compileAndRun(t,c))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return xw().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new $M(n),this.compileAndRun(r,[e,t])):(r=new ZM(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new XM(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new QM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new JM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new qM(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new GM(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new qE(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new qE(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var a=new qE(r,"max",!0),o=this.compileAndRun(a,[t]),i=new BE(r),s=this.compileAndRun(i,[e,o],t.dtype);return o.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new MM(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return BS(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,o=0;o<e.rank;o++)o!==t&&(r[a++]=e.shape[o]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)i[t]=o,u[o]=this.slice(e,i,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new QE(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new EM(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new QE(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var a=new QE(r,"max",!0),o=this.compileAndRun(a,[t]),i=new zE(r),s=this.compileAndRun(i,[e,o],t.dtype);return o.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!FC(e.shape,t)&&(null===n.texture||!FC(n.shape,t))){var r=this.packedReshape(e,t);return Yx.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return zS(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var a=xw().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new $E(e.shape,t,n,r):new ZE(e.shape,t,n,r);return this.compileAndRun(a,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new JE(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new tN(e.shape,t,n,r);return this.compileAndRun(a,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new eN(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var a=t?e:xS(e),o=a.shape[0],i=a.shape[1],s=new WE(o,i,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var a=new VE(e.size,t,n,r);return this.compileAndRun(a,[e])},t.prototype.diag=function(e){var t=new iE(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return $C("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),QS(e.dataSync(),t.dataSync(),n,r,a)},t.prototype.cropAndResize=function(e,t,n,r,a,o){var i=new eE(e.shape,t.shape,r,a,o);return this.compileAndRun(i,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){Rw(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,u=o*t,l=i/(t*t),c=new oE("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return eM(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=dS(0,e,n),a=r.sliceRank,o=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/i,i],c=e.reshape([o,a]),f=t.reshape([o,i]);if(0===u)return zS(y_([]),n);var d=w_(0),h=new aN(o,a,c.rank,f.rank,s,l);return this.compileAndRun(h,[f,c,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var a=dS(0,e,n),o=a.sliceRank,i=a.numUpdates,s=a.strides,u=a.outputSize,l=new aN(i,o,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new fE("return real * expR - imag * expI;",e.shape,t),a=new fE("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],i=this.compileAndRun(r,o),s=this.compileAndRun(a,o),u=this.complex(i,s).as2D(e.shape[0],e.shape[1]);return i.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=uS(e,t),o=a[0],i=a[1],s=a[2],u=a[3],l=t.reshape([i,r]),c=e.reshape([e.size/s,s]),f=new pE(r,u,[i,s]);return this.compileAndRun(f,[c,l]).reshape(o)},t.prototype.fill=function(e,t,n){if("string"===(n=n||ix(t))){var r=Kw(n,Bw(e));return r.fill(t),Yx.makeTensor(r,e,n,this)}var a=new dE(e,t),o=a.getCustomSetupFunc(t);return this.compileAndRun(a,[],n,o)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return US(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Yx.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new WN(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new HE(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[LC(e.shape)].concat(AC(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[LC(t)].concat(AC(t)),o=new KE(a,n),i=this.runWebGLProgram(o,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,o=n.dtype,i=RC(a);return t=r?new aE(i):new rE(i),{dtype:o,shape:a,dataId:this.runWebGLProgram(t,[{shape:i,dtype:o,dataId:e}],o,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,a){var o=this;void 0===a&&(a=!1);var i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===Qx.DENSE){var u=nC(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Bw(i.shape))return s.values=Xw(i.dtype,0),i;var l=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=o.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Bw(t.shape)<=xw().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),l.push(t),n=o.texData.get(t.dataId);else if(n.isPacked&&!FC(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=o.packedReshape(t,a),l.push(t),n=o.texData.get(t.dataId),r.shape=a}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var f,d={shape:i.shape,texData:s,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode;return e.constructor.name+"_"+r+"_"+a}(e,c,d),p=this.getAndSaveBinary(h,(function(){return function(e,t,n,r){var a=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=hM(o,s,a,t.packedInputs),l=e.createProgram(u),c=null,f=e.getUniformLocation(l,"NAN",!1);1===xw().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var d={},h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];d[p]=e.getUniformLocation(l,p,!1),d["offset"+p]=e.getUniformLocation(l,"offset"+p,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:d,inShapeInfos:i,outShapeInfo:s,infLoc:c,nanLoc:f}}(o.gpgpu,e,c,d)})),m=null!=this.activeTimers;if(m&&(f=this.startTimer()),function(e,t,n,r,a){AE(t.inShapeInfos,n),AE([t.outShapeInfo],[r]);var o=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,i[0],i[1]):e.setOutputMatrixTexture(o,i[0],i[1]),e.setProgram(t.webGLProgram),1===xw().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],o=t.uniformLocations[a],i=t.uniformLocations["offset"+a];if(null!=o)if(n.isUniform)if(Bw(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,p,c,d,r),l.forEach((function(e){return o.disposeData(e.dataId)})),m&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!xw().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){var v=this.unpackTensor(i);return this.disposeData(i.dataId),v}return i},t.prototype.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var o=this.runWebGLProgram(e,t,n,r,a);return Yx.makeTensorFromDataId(o.dataId,o.shape,o.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(xw().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=JC((function(){if(!xw().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=xw().getBool("DEBUG");xw().set("DEBUG",!1);var n=e.abs(w_(1e-8)).dataSync()[0];if(xw().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,a=n.dtype,o=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=px());var f=n.texShape;if(null==f&&(f=PC(r,u),n.texShape=f),null!=o){var d=RC(r),h=void 0,p=f[1],m=f[0],v=o instanceof Uint8Array;u?(p=(t=rC(f[0],f[1]))[0],m=t[1],h=new cE(d,[m,p],v)):h=new lE(d,[m,p],v);var g=this.makeTensorInfo([m,p],a);this.texData.get(g.dataId).usage=v?Xx.PIXELS:Xx.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),p,m,o);var y=this.runWebGLProgram(h,[g],a,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=px()-l)}else{var w=this.acquireTexture(f,s,a,u);n.texture=w}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*tx(t)},t}(SS);function GN(e,t){return e(t={exports:{}},t.exports),t.exports}Gx()&&Yx.registerBackend("webgl",(function(){return new YN}),2),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var qN=GN((function(e){!function(e,t){function n(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var a=new n(e),o=t&&t.state,i=a.next;return i.int32=function(){return 4294967296*a.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.alea=a}(0,e)})),QN=GN((function(e){!function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor128=a}(0,e)})),XN=GN((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorwow=a}(0,e)})),KN=GN((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&(o.x&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xorshift7=a}(0,e)})),JN=GN((function(e){!function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,o=t.i;return t.w=r=r+1640531527|0,n=a[o+34&127],e=a[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,a=0==(n=s[127&o]^=r+i)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&(o.X&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.xor4096=a}(0,e)})),ZN=GN((function(e){!function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var a=new n(e),o=t&&t.state,i=function(){return(a.next()>>>0)/4294967296};return i.double=function(){do{var e=((a.next()>>>11)+(a.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=a.next,i.quick=i,o&&("object"==typeof o&&r(o,a),i.state=function(){return r(a,{})}),i}t&&t.exports?t.exports=a:this.tychei=a}(0,e)})),$N=GN((function(e){!function(t,r){var a,o=this,i=256,s="random",u=r.pow(i,6),l=r.pow(2,52),c=2*l,f=255;function d(e,n,f){var d=[],g=m(function e(t,n){var r,a=[],o=typeof t;if(n&&"object"==o)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,v(t)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(i):(e=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=o.navigator,r=n&&n.plugins;return[+new Date,o,r,o.screen,v(t)]}}():e,3),d),y=new h(d),b=function(){for(var e=y.g(6),t=u,n=0;e<l;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,m(v(y.S),t),(n.pass||f||function(e,t,n,a){return a&&(a.S&&p(a,y),e.state=function(){return p(y,{})}),n?(r[s]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[o=f&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,s=r.S;e--;)t=s[a=f&a+1],n=n*i+s[f&(s[a]=s[o=f&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=d,m(r.random(),t),e.exports){e.exports=d;try{a=n(3367)}catch(e){}}}([],Math)}));$N.alea=qN,$N.xor128=QN,$N.xorwow=XN,$N.xorshift7=KN,$N.xor4096=JN,$N.tychei=ZN;var eT=$N.alea,tT=p_({addN_:function(e){Rw(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Rw(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return n_(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!zw(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Yx.runKernelFunc((function(e,n){return e.addN(t)}),r,null,"AddN")}});function nT(){KC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function rT(e){return 0===e.rank||1===e.rank?e.as4D(1,1,1,e.size):2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function aT(e,t,n,r,a,o){null==o&&(o=.001);var i,s,u=n_(e,"x","batchNorm"),l=n_(t,"mean","batchNorm"),c=n_(n,"variance","batchNorm");null!=a&&(i=n_(a,"scale","batchNorm")),null!=r&&(s=n_(r,"offset","batchNorm")),Rw(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Rw(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Rw(null==i||l.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f={x:u,scale:i,offset:s,mean:l,variance:c},d={varianceEpsilon:o};return Yx.runKernelFunc((function(e,t){var n=rT(u),r=e.batchNormalization(n,oT(l),oT(c),o,oT(i),oT(s));return t([u,l,c,i]),r}),f,null,"FusedBatchNorm",d).reshape(u.shape)}function oT(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}var iT=p_({batchNormalization_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),nT(),aT(e,t,n,o,a,r)}}),sT=p_({batchNorm_:aT});function uT(e,t,n,r,a,o){var i,s,u=n_(e,"x","batchNorm"),l=n_(t,"mean","batchNorm"),c=n_(n,"variance","batchNorm");return null!=a&&(i=n_(a,"scale","batchNorm")),null!=r&&(s=n_(r,"offset","batchNorm")),Rw(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Rw(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),Rw(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=i&&Rw(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),null!=s&&Rw(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),sT(u,l,c,s,i,o)}var lT=p_({batchNormalization2d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),nT(),uT(e,t,n,o,a,r)}}),cT=p_({batchNorm2d_:uT});function fT(e,t,n,r,a,o){var i,s,u=n_(e,"x","batchNorm"),l=n_(t,"mean","batchNorm"),c=n_(n,"variance","batchNorm");return null!=a&&(i=n_(a,"scale","batchNorm")),null!=r&&(s=n_(r,"offset","batchNorm")),Rw(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Rw(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),Rw(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=i&&Rw(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),null!=s&&Rw(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),sT(u,l,c,s,i,o)}var dT=p_({batchNormalization3d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),nT(),fT(e,t,n,o,a,r)}}),hT=p_({batchNorm3d_:fT});function pT(e,t,n,r,a,o){var i,s,u=n_(e,"x","batchNorm"),l=n_(t,"mean","batchNorm"),c=n_(n,"variance","batchNorm");return null!=a&&(i=n_(a,"scale","batchNorm")),null!=r&&(s=n_(r,"offset","batchNorm")),Rw(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Rw(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),Rw(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=i&&Rw(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),null!=s&&Rw(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),sT(u,l,c,s,i,o)}var mT=p_({batchNormalization4d_:function(e,t,n,r,a,o){return void 0===r&&(r=.001),nT(),pT(e,t,n,o,a,r)}}),vT=p_({batchNorm4d_:pT}),gT=p_({broadcastTo_:function(e,t){var n=n_(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=n.reshape(a)}for(var o=n.shape,i=Array.from(t),s=t.length-1;s>=0;s--)if(o[s]===t[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var u=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return n.clone();var l={x:n},c={shape:t,inputShape:o};return Yx.runKernelFunc((function(e){return e.tile(n,i)}),l,(function(e){return{x:function(){return e.sum(u,!0)}}}),tk,c)}}),yT=p_({clone_:function(e){var t=n_(e,"x","clone",null);return Yx.runKernelFunc((function(){return Yx.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{x:t},null,rk)}}),bT=p_({logicalAnd_:function(e,t){var n=n_(e,"a","logicalAnd","bool"),r=n_(t,"b","logicalAnd","bool");return lk(n.shape,r.shape),Yx.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),wT=p_({logicalNot_:function(e){var t=n_(e,"x","logicalNot","bool");return Yx.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),xT=p_({logicalOr_:function(e,t){var n=n_(e,"a","logicalOr","bool"),r=n_(t,"b","logicalOr","bool");return lk(n.shape,r.shape),Yx.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),CT=p_({logicalXor_:function(e,t){var n=n_(e,"a","logicalXor","bool"),r=n_(t,"b","logicalXor","bool");return lk(n.shape,r.shape),xT(e,t).logicalAnd(bT(e,t).logicalNot())}}),_T=p_({where_:function(e,t,n){var r=n_(t,"a","where"),a=n_(n,"b","where"),o=n_(e,"condition","where","bool");return Pw(r.shape,a.shape,"Error in where: "),1===o.rank?Rw(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Pw(o.shape,a.shape,"Error in where: "),Yx.runKernelFunc((function(e,t){var n=e.select(o,r,a);return t([o]),n}),{$condition:o,$a:r,$b:a},(function(e,t){var n=t[0];return{$condition:function(){return I_(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),kT=function(e){return yw(this,void 0,void 0,(function(){var t,n,r;return bw(this,(function(a){switch(a.label){case 0:return[4,(t=n_(e,"condition","whereAsync","bool")).data()];case 1:return n=a.sent(),r=rM(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},ST=p_({divNoNan_:function(e,t){var n,r=n_(e,"a","div"),a=n_(t,"b","div");r=(n=Bx(r,a))[0],a=n[1];var o=sS(r,a),i=I_(o),s=a.equal(i);return _T(s,i,o)}}),MT=p_({tile_:function(e,t){var n=n_(e,"x","tile",null);Rw(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],a={x:n},o={reps:t};return Yx.runKernelFunc((function(e,r){var a=e.tile(n,t);return r([n]),a}),a,null,ak,o,r)}}),ET=p_({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=O_([e,t],r),o=e<=t?e:t,i=0;i<o;++i)a.set(1,i,i);var s=a.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return MT(W_(s,0),[n[0],1,1]);if(2===n.length)return MT(W_(W_(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return MT(W_(W_(W_(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),NT=p_({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=n_(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?a.as2D(1,-1):a,u=Yx.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===i?u.as1D():u}}),TT=p_({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a=n_(e,"indices","oneHot","int32"),o=a.shape.concat([t]),i={indices:a=a.flatten()},s={depth:t,onValue:n,offValue:r};return Yx.runKernelFunc((function(e,o){return o([a]),e.oneHot(a,t,n,r)}),i,null,nk,s).reshape(o)}}),IT=p_({pad_:function(e,t,n){void 0===n&&(n=0);var r=n_(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},o={x:r};return Yx.runKernelFunc((function(e,a){return a([r]),e.pad(r,t,n)}),o,null,ok,a)}}),jT=p_({pad1d_:function(e,t,n){return void 0===n&&(n=0),Rw(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),IT(e,[t],n)}}),DT=p_({pad2d_:function(e,t,n){return void 0===n&&(n=0),Rw(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),IT(e,t,n)}}),LT=p_({pad3d_:function(e,t,n){return void 0===n&&(n=0),Rw(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),IT(e,t,n)}}),AT=p_({pad4d_:function(e,t,n){return void 0===n&&(n=0),Rw(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),IT(e,t,n)}}),RT=p_({rand_:function(e,t,n){var r=Bw(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return Yx.makeTensor(a,e,n)}});function PT(){return 32===Yx.backend.floatPrecision()?.001:.1}function OT(e,t,n){var r=!0;if((ex(e)||ex(t))&&(r=!1),ex(e)&&ex(t)&&(r=!0),r){var a=e.constructor.name,o=t.constructor.name;if(a!==o)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var i=e_(e),s=e_(t);if(!zw(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=ex(e)?e:Fw(e),l=ex(t)?t:Fw(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var f=u[c],d=l[c];if(!n(f,d))throw new Error("Arrays differ: actual["+c+"] = "+f+", expected["+c+"] = "+d+".\nActual:   "+u+".\nExpected: "+l+".")}}function FT(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=PT()),OT(e,t,(function(e,t){return FT(e,t,n)}))},testEpsilon:PT,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return rx(e)||rx(e[0])||rx(t)||rx(t[0])?OT(e,n,(function(e,t){return e==t})):OT(e,t,(function(e,t){return FT(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=PT()),!FT(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}});var BT=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=a||Math.random();this.random=eT(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do{i=(a=2*this.random()-1)*a+(o=2*this.random()-1)*o}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),zT=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=eT(a.toString()),this.randn=new BT(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,a,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(a=this.randu())<t||Math.log(a)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),UT=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=eT(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}(),WT=p_({randomGamma_:function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var o=new zT(t,n,r,a),i=O_(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),VT=p_({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new BT(t,n,r,!1,a),i=O_(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),HT=p_({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=O_(e,r),i=new UT(t,n,null,a),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}}),YT=p_({square_:function(e){var t=n_(e,"x","square"),n=[t];return Yx.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),GT=p_({squaredDifference_:function(e,t){var n,r=n_(e,"a","squaredDifference"),a=n_(t,"b","squaredDifference");n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape);var o={a:r,b:a},i=[r,a];return Yx.runKernelFunc((function(e,t){var n=e.squaredDifference(r,a);return t([r,a]),n}),o,(function(e,t){var n=t[0],r=t[1],a=w_(2);return{a:function(){return e.mul(n.sub(r).mul(a))},b:function(){return e.mul(r.sub(n).mul(a))}}}),ek,{},i,[])}}),qT=p_({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var o=new BT(t,n,r,!0,a),i=O_(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}}),QT=p_({equal_:function(e,t){var n,r=n_(e,"a","equal"),a=n_(t,"b","equal");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e){return e.equal(r,a)}),{$a:r,$b:a})}}),XT=p_({equalStrict_:function(e,t){var n=n_(e,"a","equalStrict"),r=n_(t,"b","equalStrict");return Pw(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),KT=p_({greater_:function(e,t){var n,r=n_(e,"a","greater"),a=n_(t,"b","greater");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e){return e.greater(r,a)}),{a:r,b:a},null,"Greater")}}),JT=p_({greaterEqual_:function(e,t){var n,r=n_(e,"a","greaterEqual"),a=n_(t,"b","greaterEqual");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e,t){var n=e.greaterEqual(r,a);return t([r,a]),n}),{a:r,b:a},(function(e,t){var n=t[0],r=t[1];return{a:function(){return I_(n)},b:function(){return I_(r)}}}),"GreaterEqual")}}),ZT=p_({greaterEqualStrict_:function(e,t){var n=n_(e,"a","greaterEqualStrict"),r=n_(t,"b","greaterEqualStrict");return Pw(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),$T=p_({greaterStrict_:function(e,t){var n=n_(e,"a","greaterStrict"),r=n_(t,"b","greaterStrict");return Pw(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),eI=p_({less_:function(e,t){var n,r=n_(e,"a","less"),a=n_(t,"b","less");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e){return e.less(r,a)}),{a:r,b:a},null,"Less")}}),tI=p_({lessEqual_:function(e,t){var n,r=n_(e,"a","lessEqual"),a=n_(t,"b","lessEqual");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e,t){var n=e.lessEqual(r,a);return t([r,a]),n}),{a:r,b:a},null,"LessEqual")}}),nI=p_({lessEqualStrict_:function(e,t){var n=n_(e,"a","lessEqualStrict"),r=n_(t,"b","lessEqualStrict");return Pw(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),rI=p_({lessStrict_:function(e,t){var n=n_(e,"a","lessStrict"),r=n_(t,"b","lessStrict");return Pw(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),aI=p_({notEqual_:function(e,t){var n,r=n_(e,"a","notEqual"),a=n_(t,"b","notEqual");return n=Bx(r,a),r=n[0],a=n[1],lk(r.shape,a.shape),Yx.runKernelFunc((function(e){return e.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),oI=p_({notEqualStrict_:function(e,t){var n=n_(e,"a","notEqualStrict"),r=n_(t,"b","notEqualStrict");return Pw(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function iI(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function sI(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var uI=p_({gather_:function(e,t,n){void 0===n&&(n=0);var r=n_(e,"x","gather"),a=n_(t,"indices","gather","int32");n=qw(n,r.shape)[0];var o=function(e,t,n){for(var r=e.shape[n],a=[],o=1,i=1,s=0;s<n;s++)a.push(e.shape[s]),o*=e.shape[s];for(s=0;s<t.rank;s++)a.push(t.shape[s]);for(s=n+1;s<e.rank;s++)a.push(e.shape[s]),i*=e.shape[s];return{batchSize:o,sliceSize:i,dimSize:r,outputShape:a}}(r,a,n);return Yx.runKernelFunc((function(e,t){var o=e.gather(r,a.flatten(),n);return t([a]),o}),{x:r,indices:a},(function(e,t){var a=t[0];return{x:function(){var t=r.shape,o=a.size,i=t.slice(0,n),s=i.length,u=t.slice(n,t.length).slice(1),l=u.length,c=iI(0,s),f=iI(s+1,s+1+l),d=sI([i,[o],u]),h=e.reshape(d),p=a.reshape([o]),m=sI([[s],c,f]),v=h.transpose(m),g=lI(v,p,r.shape[n]),y=c_(m);return g.transpose(y)},indices:function(){return a}}}),"Gather",{axis:n}).reshape(o.outputShape)}}),lI=p_({unsortedSegmentSum_:function(e,t,n){var r=n_(e,"x","unsortedSegmentSum"),a=n_(t,"segmentIds","unsortedSegmentSum","int32");return Rw(Uw(n),(function(){return"numSegments must be of dtype int"})),Yx.runKernelFunc((function(e,t){var o=e.unsortedSegmentSum(r,a,n);return t([a]),o}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Qk(t,I_(t)),r=uI(e,n),a=JT(t,w_(0,"int32")),o=r.rank-a.rank,i=0;i<o;++i)a=W_(a,i+1);a=bT(a,S_(r.shape,"bool"));var s=I_(r);return _T(a,r,s)}(e,n)}}}))}});function cI(e,t,n,r,a,o,i){void 0===o&&(o="NHWC"),Rw(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),Rw(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),Rw(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),Rw(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===o?s[3]:s[1],f="NHWC"===o?u.shape[3]:u.shape[1];Rw(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),Rw(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),null!=i&&Rw(Uw(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var d=FS(o),h=TS(s,n.shape,r,1,a,i,!1,d),p=Yx.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,h);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return pI(e,n,r,a,o,1,i)},filter:function(){return vI(e,s,n.shape,r,a,o,i)}}}));return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function fI(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function dI(e,t,n,r,a){Rw(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var o=e,i=t,s=!1;4===t.rank&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var u=o[4],l=i.shape[4];Rw(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),Rw(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),Rw(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Rw(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Rw(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=IS(o,n.shape,r,1,a),f=Yx.runKernelFunc((function(e){return e.conv3dDerInput(i,n,c)}),{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var hI=p_({conv1d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NWC"),void 0===o&&(o=1);var s=n_(e,"x","conv1d"),u=n_(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),Rw(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),Rw(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=i&&Rw(Uw(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),Rw(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Rw(OS(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"})),Rw("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=pI(d,f,[1,n],r,"NHWC",[1,o],i);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),pI=p_({conv2d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NHWC"),void 0===o&&(o=[1,1]);var s=n_(e,"x","conv2d"),u=n_(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Rw(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),Rw(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=i&&Rw(Uw(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f="NHWC"===a?l.shape[3]:l.shape[1];Rw(f===u.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."})),Rw(OS(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}));var d=FS(a),h=TS(l.shape,u.shape,n,o,r,i,!1,d),p=[u,l],m=Yx.runKernelFunc((function(e,t){var n=e.conv2d(l,u,h);return t([u,l]),n}),{x:l,filter:u},(function(e,t){var i=t,s=i[0],u=i[1];return Rw(PS(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return gI(u.shape,e,s,n,r,a)},filter:function(){return vI(u,e,s.shape,n,r,a)}}}),"Conv2D",h,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),mI=p_({conv3d_:function(e,t,n,r,a,o){void 0===a&&(a="NDHWC"),void 0===o&&(o=[1,1,1]);var i=n_(e,"x","conv3d"),s=n_(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),Rw(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Rw(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Rw(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Rw(function(e,t){return fI(e)||fI(t)}(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),Rw("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var c=IS(u.shape,s.shape,n,o,r),f=Yx.runKernelFunc((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){Rw(fI(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var a=t[0],i=t[1];return{x:function(){return dI(a.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,a){var o=e;4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Rw(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."})),Rw(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."})),Rw(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Rw(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."})),Rw(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=IS(o.shape,n,r,1,a);return Yx.runKernelFunc((function(e){return e.conv3dDerFilter(o,i,s)}),{x5D:o,dy5D:i})}(a,e,i.shape,n,r)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),vI=p_({conv2dDerFilter_:function(e,t,n,r,a,o,i){void 0===o&&(o="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Rw(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),Rw(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),Rw(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?u.shape[3]:u.shape[1];Rw(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),Rw(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=i&&Rw(Uw(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var f=FS(o),d=TS(s.shape,n,r,1,a,i,!1,f);return Yx.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,d)}),{x4D:s,dy4D:u})}}),gI=p_({conv2dDerInput_:cI}),yI=p_({depthwiseConv2d_:function(e,t,n,r,a,o,i){void 0===a&&(a="NHWC"),void 0===o&&(o=[1,1]);var s=n_(e,"x","depthwiseConv2d"),u=n_(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Rw(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),Rw(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Rw(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==o&&(o=[1,1]),Rw(OS(n,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=i&&Rw(Uw(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var f=TS(l.shape,u.shape,n,o,r,i,!0),d=[l,u],h=Yx.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,u,f);return t([l,u]),n}),{x:l,filter:u},(function(e,t){Rw(PS(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var n=t[0],r=t[1];return{x:function(){return bI(n.shape,e,r,f)},filter:function(){return wI(n,e,r.shape,f)}}}),"DepthwiseConv2dNative",f,d);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),bI=p_({depthwiseConv2dDerInput_:function(e,t,n,r){var a=t,o=!1;3===t.rank&&(o=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Yx.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(a,n,r)}),{dy4D:a});return o?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),wI=p_({depthwiseConv2dDerFilter_:function(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Yx.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(a,o,r)}),{x4D:a,dy4D:o})}}),xI=p_({separableConv2d_:function(e,t,n,r,a,o,i){void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC");var s=n_(e,"x","separableConv2d"),u=n_(t,"depthwiseFilter","separableConv2d"),l=n_(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(3===s.rank&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Rw(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Rw(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Rw(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Rw(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),Rw(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var d=u.shape[2],h=u.shape[3];Rw(l.shape[2]===d*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+l.shape[2]+"."}));var p=yI(c,u,r,a,i,o),m=pI(p,l,1,"valid",i);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),CI=p_({conv2dTranspose_:function(e,t,n,r,a,o){return cI(n,n_(e,"x","conv2dTranspose"),n_(t,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),_I=p_({conv3dTranspose_:function(e,t,n,r,a){return dI(n,n_(e,"x","conv3dTranspose"),n_(t,"filter","conv3dTranspose"),r,a)}}),kI=p_({matMul_:function(e,t,n,r){var a;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=n_(e,"a","matMul"),i=n_(t,"b","matMul");a=Bx(o,i),o=a[0],i=a[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=o.shape.slice(0,-2),d=i.shape.slice(0,-2),h=Bw(f),p=Bw(d);Rw(o.rank>=2&&i.rank>=2&&o.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+i.rank+"."})),Rw(zw(f,d),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+o.shape+" and "+i.shape+" must match."})),Rw(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=o.shape.slice(0,-2).concat([l,c]),v=n?o.as3D(h,s,l):o.as3D(h,l,s),g=r?i.as3D(p,c,u):i.as3D(p,u,c),y={transposeA:n,transposeB:r};return Yx.runKernelFunc((function(e,t){var a=e.batchMatMul(v,g,n,r);return t([v,g]),a}),{a:v,b:g},(function(e,t){var a=t,o=a[0],i=a[1];return n||r?!n&&r?{a:function(){return e.matMul(i,!1,!1)},b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{a:function(){return i.matMul(e,!1,!0)},b:function(){return o.matMul(e,!1,!1)}}:{a:function(){return i.matMul(e,!0,!0)},b:function(){return e.matMul(o,!0,!0)}}:{a:function(){return e.matMul(i,!1,!0)},b:function(){return o.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(m)}}),SI=p_({dot_:function(e,t){var n=n_(e,"t1","dot"),r=n_(t,"t2","dot");Rw(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return Rw(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),MI=p_({outerProduct_:function(e,t){var n=n_(e,"v1","outerProduct"),r=n_(t,"v2","outerProduct");return Rw(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),EI=p_({reverse_:function(e,t){var n=n_(e,"x","reverse");if(0===n.rank)return n.clone();var r=qw(t,n.shape);return Yx.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),NI=p_({reverse1d_:function(e){var t=n_(e,"x","reverse");return Rw(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),EI(t,0)}}),TI=p_({reverse2d_:function(e,t){var n=n_(e,"x","reverse");return Rw(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),EI(n,t)}}),II=p_({reverse3d_:function(e,t){var n=n_(e,"x","reverse");return Rw(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),EI(n,t)}}),jI=p_({reverse4d_:function(e,t){var n=n_(e,"x","reverse");return Rw(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),EI(n,t)}});function DI(e,t,n,r,a,o){var i=n_(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),Rw(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),Rw(OS(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=o&&Rw(Uw(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=ES(s.shape,t,n,r,a,o);if(1===l.filterWidth&&1===l.filterHeight&&zw(l.inShape,l.outShape))return i.clone();var c=[s],f=Yx.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,o){var i=o[0],s=o[1];return{x:function(){return function(e,t,n,r,a,o,i,s){var u=n_(e,"dy","maxPoolBackprop"),l=n_(t,"input","maxPoolBackprop"),c=n_(n,"output","maxPoolBackprop");Rw(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==o&&(o=[1,1]),Rw(OS(a,o),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"})),Rw(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),Rw(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var f=ES(l.shape,r,a,o,i,s);return Yx.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,f)}),{$dy:u,$input:l})}(e,i,s,t,n,r,a)}}}),"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function LI(e,t,n,r,a,o){var i=n_(e,"x","avgPool","float32");null==r&&(r=[1,1]),Rw(OS(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Rw(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=o&&Rw(Uw(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var l=ES(s.shape,t,n,r,a,o);if(1===l.filterWidth&&1===l.filterHeight&&zw(l.inShape,l.outShape))return i.clone();var c=Yx.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,a,o){var i=n_(e,"dy","avgPoolBackprop"),s=n_(t,"input","avgPoolBackprop");Rw(s.rank===i.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"})),null==a&&(a=[1,1]),Rw(OS(r,a),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"}));var u=s,l=i,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Rw(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),Rw(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var f=ES(u.shape,n,r,a,o),d=Yx.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,f)}),{dy4D:l,input4D:u});return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,s,t,n,r,a)}}}),"AvgPool",l);return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var AI=p_({maxPool_:function(e,t,n,r,a){return DI(e,t,n,1,r,a)}}),RI=p_({avgPool_:function(e,t,n,r,a){return LI(e,t,n,1,r,a)}}),PI=p_({pool_:function(e,t,n,r,a,o){null==a&&(a=[1,1]),null==o&&(o=1),0===r&&(r="valid");var i=n_(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),Rw(OS(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}));var l,c=ES(s.shape,t,o,a,r),f=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),o=e.concat(r,a),i=t.map((function(e,t){return(e-o[t]%e)%e})),s=a.map((function(e,t){return e+i[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,i[t]]}))]}([c.inHeight,c.inWidth],f,l),p=h[0],m=h[1],v=d?r:"valid",g=d?s:H_(s,f,p),y=("avg"===n?function(){return LI(g,t,o,1,v)}:function(){return DI(g,t,o,1,v)})(),b=d?y:F_(y,f,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),OI=p_({maxPool3d_:function(e,t,n,r,a,o,i){void 0===o&&(o="NDHWC");var s=n_(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),Rw(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),Rw("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),Rw(OS(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=a&&Rw(Uw(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=NS(u.shape,t,n,i,r,a,o),f=Yx.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,o){var s=o[0],u=o[1];return{x:function(){return function(e,t,n,r,a,o,i,s){var u=n_(e,"dy","maxPool3dBackprop"),l=n_(t,"input","maxPool3dBackprop"),c=n_(n,"output","maxPool3dBackprop"),f=u,d=l,h=c,p=!1;4===l.rank&&(p=!0,f=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),Rw(5===f.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."})),Rw(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),Rw(5===h.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+h.rank+"."})),null==o&&(o=[1,1,1]),Rw(OS(a,o),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"})),null!=s&&Rw(Uw(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var m=NS(d.shape,r,a,o,i,s),v=Yx.runKernelFunc((function(e){return e.maxPool3dBackprop(f,d,h,m)}),{dy5D:f,input5D:d});return p?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}(e,s,u,t,n,i,r,a)}}}));return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),FI=p_({avgPool3d_:function(e,t,n,r,a,o,i){void 0===o&&(o="NDHWC");var s=n_(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),Rw(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),Rw("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),Rw(OS(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=a&&Rw(Uw(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c=NS(u.shape,t,n,i,r,a,o),f=Yx.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,a,o,i){var s=n_(e,"dy","avgPool3dBackprop"),u=n_(t,"input","avgPool3dBackprop"),l=s,c=u,f=!1;4===u.rank&&(f=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),Rw(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),Rw(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==a&&(a=[1,1,1]),Rw(OS(r,a),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=i&&Rw(Uw(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var d=NS(c.shape,n,r,a,o,i),h=Yx.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,d)}),{dy5D:l,input5D:c});return f?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}(e,u,t,n,i,r,a)}}}));return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),BI=p_({maxPoolWithArgmax_:function(e,t,n,r,a){void 0===a&&(a=!1);var o=n_(e,"x","maxPoolWithArgmax"),i={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=Yx.runKernel("MaxPoolWithArgmax",{x:o},i);return{result:s[0],indexes:s[1]}}}),zI=p_({slice_:function(e,t,n){var r,a,o=n_(e,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach((function(e){Rw(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Rw(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),o.shape[t]-r[t])})),hS(o,r,a);var i=o.shape,s={begin:r,size:a};return Yx.runKernelFunc((function(e){return e.slice(o,r,a)}),{x:o},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-a[n]]);return{x:function(){return IT(e,t)}}}),"Slice",s)}}),UI=p_({slice1d_:function(e,t,n){var r=n_(e,"x","slice1d");return Rw(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),zI(r,[t],[n])}}),WI=p_({slice2d_:function(e,t,n){var r=n_(e,"x","slice2d");return Rw(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),zI(r,t,n)}}),VI=p_({slice3d_:function(e,t,n){var r=n_(e,"x","slice3d");return Rw(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),zI(r,t,n)}}),HI=p_({slice4d_:function(e,t,n){var r=n_(e,"x","slice4d");return Rw(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),zI(r,t,n)}});function YI(e,t,n,r,a){return t.rank<n.rank&&(t=t.reshape(s_(t.shape,r))),e.rank<n.rank&&(e=e.reshape(s_(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==a?r:r.transpose(a)}}}var GI=p_({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","all","bool"),a=qw(t,r.shape),o=a,i=l_(o,r.rank);null!=i&&(r=r.transpose(i),o=f_(o.length,r.rank));var s=Yx.runKernelFunc((function(e){return e.all(r,o)}),{$x:r});if(n){var u=s_(s.shape,a);return s.reshape(u)}return s}}),qI=p_({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","any","bool"),a=qw(t,r.shape),o=a,i=l_(o,r.rank);null!=i&&(r=r.transpose(i),o=f_(o.length,r.rank));var s=Yx.runKernelFunc((function(e){return e.any(r,o)}),{$x:r});if(n){var u=s_(s.shape,a);return s.reshape(u)}return s}}),QI=p_({argMax_:function(e,t){void 0===t&&(t=0);var n=n_(e,"x","argMax");null==t&&(t=0);var r=qw(t,n.shape),a=l_(r,n.rank);null!=a&&(n=n.transpose(a),r=f_(r.length,n.rank));var o={axis:r[0]},i=[n];return Yx.runKernelFunc((function(e,t){var a=e.argMax(n,r[0]);return t([n]),a}),{x:n},(function(e,t){var n=t[0];return{x:function(){return I_(n)}}}),"ArgMax",o,i)}}),XI=p_({argMin_:function(e,t){void 0===t&&(t=0);var n=n_(e,"x","argMin");null==t&&(t=0);var r=qw(t,n.shape),a=l_(r,n.rank);return null!=a&&(n=n.transpose(a),r=f_(r.length,n.rank)),Yx.runKernelFunc((function(e,t){var a=e.argMin(n,r[0]);return t([n]),a}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return I_(n)}}}))}}),KI=p_({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","logSumExp"),a=qw(t,r.shape),o=r.max(a,!0),i=r.sub(o).exp().sum(a).log(),s=o.reshape(i.shape).add(i);if(n){var u=s_(s.shape,a);return s.reshape(u)}return s}}),JI=p_({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","max"),a=r,o=qw(t,r.shape),i=o,s=l_(i,r.rank);null!=s&&(r=r.transpose(s),i=f_(i.length,r.rank));var u=[r],l=Yx.runKernelFunc((function(e,t){var n=e.max(r,i);return t([a,n]),n}),{x:r},(function(e,t){return YI(e,t[1],t[0],o,s)}),"Max",{axes:i},u,[!0]);if(n){var c=s_(l.shape,o);l=l.reshape(c)}return l}}),ZI=p_({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","mean"),a=qw(t,r.shape),o=Bw(i_(r.shape,a)[1]);return wS((function(e){var r=w_(o);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(S_(e.shape,"float32")).div(o)}}}))(r)}}),$I=p_({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","min"),a=r,o=qw(t,r.shape),i=o,s=l_(i,r.rank);null!=s&&(r=r.transpose(s),i=f_(i.length,r.rank));var u=[r],l=Yx.runKernelFunc((function(e,t){var n=e.min(r,i);return t([a,n]),n}),{x:r},(function(e,t){return YI(e,t[1],t[0],o,s)}),"Min",{axes:i},u,[!0]);if(n){var c=s_(l.shape,o);l=l.reshape(c)}return l}}),ej=p_({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=qw(t,(e=n_(e,"x","moments")).shape),a=e.mean(r,n),o=a.shape;n||(o=s_(a.shape,r));var i=e.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:i.mean(r,n)}}}),tj=p_({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=qw(t,r.shape);return wS((function(e){var t=l_(a,e.rank),r=a,o=e;null!=t&&(o=e.transpose(t),r=f_(r.length,e.rank));var i=function(t){var n=e.shape.slice();return a.forEach((function(e){n[e]=1})),t.reshape(n).mul(S_(e.shape,"float32"))},s={axes:r},u=Yx.runKernelFunc((function(e){return e.sum(o,r)}),{x:o},(function(e){return{x:function(){return i(e)}}}),"Sum",s);if(n){var l=s_(u.shape,a);u=u.reshape(l)}return{value:u,gradFunc:i}}))(r)}}),nj=p_({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=n_(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var a=qw(t,r.shape),o=l_(a,r.rank),i=a,s=r;null!=o&&(s=r.transpose(o),i=f_(i.length,r.rank));var u=Yx.runKernelFunc((function(e){return e.prod(s,i)}),{permutedX:s});if(n){var l=s_(u.shape,a);u=u.reshape(l)}return u}}),rj=p_({elu_:function(e){var t=n_(e,"x","elu");return Yx.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Yx.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),aj=p_({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=n_(e,"x","leakyRelu");return Qk(w_(t).mul(n),n)}}),oj=p_({prelu_:function(e,t){var n=n_(e,"x","prelu"),r=n_(t,"alpha","prelu");return Yx.runKernelFunc((function(e,t){var a=e.prelu(n,r);return t([n,r]),a}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],a=n.greater(0);return{x:function(){return _T(a,e,e.mul(r))},alpha:function(){var t=_T(a,I_(e),e.mul(n)),o=uk(r.shape,e.shape);return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}}),"Prelu")}}),ij=p_({relu_:function(e){var t=n_(e,"x","relu");return"bool"===t.dtype?t.toInt():Yx.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),sj=p_({relu6_:function(e){var t=n_(e,"x","relu6");return"bool"===t.dtype?t.toInt():Yx.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),uj=p_({selu_:function(e){var t=n_(e,"x","selu");return Yx.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(w_(0)),r=w_(mN),a=w_(vN),o=e.mul(a),i=e.mul(r).mul(n.toFloat().exp());return _T(t,o,i)}}}))}}),lj=p_({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var o=n_(e,"x","localResponseNormalization");Rw(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."})),Rw(Uw(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=o,s=!1;3===o.rank&&(s=!0,i=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=Yx.runKernelFunc((function(e,o){var s=e.localResponseNormalization4D(i,t,n,r,a);return o([i,s]),s}),{x4D:i},(function(e,o){var i=o[0],s=o[1];return{x4D:function(){return Yx.runKernelFunc((function(o){return o.LRNGrad(e,i,s,t,n,r,a)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),cj=p_({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(w_(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=n_(e,"x","norm"),t,n),o=a.shape;if(r){var i=qw(n,e.shape);o=s_(a.shape,i)}return a.reshape(o)}}),fj=p_({basicLSTMCell_:function(e,t,n,r,a,o){var i=n_(e,"forgetBias","basicLSTMCell"),s=n_(t,"lstmKernel","basicLSTMCell"),u=n_(n,"lstmBias","basicLSTMCell"),l=n_(r,"data","basicLSTMCell"),c=n_(a,"c","basicLSTMCell"),f=n_(o,"h","basicLSTMCell"),d=l.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,m=[h,p],v=d.slice([0,0],m),g=d.slice([0,p],m),y=d.slice([0,2*p],m),b=d.slice([0,3*p],m),w=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),dj=p_({multiRNNCell_:function(e,t,n,r){for(var a=n_(t,"data","multiRNNCell"),o=r_(n,"c","multiRNNCell"),i=r_(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,o[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],d=[];for(l=0;l<u.length;l+=2)f.push(u[l]),d.push(u[l+1]);return[f,d]}}),hj=p_({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var o=n_(e,"v","movingAverage"),i=n_(t,"x","movingAverage"),s=n_(n,"decay","movingAverage");zx(o,i),Rw(zw(o.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=w_(1),l=u.sub(s),c=i.sub(o).mul(l);if(a){Rw(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=n_(r,"step","movingAverage");c=c.div(u.sub(nS(s,f)))}return o.add(c)}}),pj=p_({stridedSlice_:function(e,t,n,r,a,o,i,s,u){if(void 0===a&&(a=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var l=n_(e,"x","stridedSlice"),c=pS(s),f=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,f.splice(e,0,1)})),l=l.reshape(f);for(var d=0;d<l.rank;d++)t[d]=vS(a,t,r,l.shape,d),n[d]=gS(o,n,r,l.shape,d),r[d]=r[d]||1;var h=pS(u);h.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var p=mS(t,n,r),m=p.filter((function(e,t){return-1===h.indexOf(t)}));return r.every((function(e){return 1===e}))?zI(l,t,p).reshape(m):Yx.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(m)}}),mj=p_({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=n_(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var o=Yx.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:o[0],indices:o[1]}}}),vj=p_({scatterND_:function(e,t,n){var r=n_(e,"indices","scatterND","int32"),a=n_(t,"updates","scatterND");return fS(a,r,n),Yx.runKernelFunc((function(e){return e.scatterND(r,a,n)}),{indices:r,updates:a},null,"ScatterNd",{shape:n})}}),gj=p_({fft_:function(e){Rw("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Yx.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),yj=p_({ifft_:function(e){Rw("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Yx.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),bj=p_({rfft_:function(e,t){Rw("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=e.slice(o,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(M_(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=m_(n,u).as2D(a,r),c=gj(l),f=Math.floor(r/2)+1,d=v_(c),h=g_(c),p=d.split([f,r-f],d.shape.length-1),m=h.split([f,r-f],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,m_(p[0],m[0]).reshape(v)}}),wj=p_({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),a=yj(r);return v_(a)}var o=[n,2*(t-1)],i=v_(e).as2D(n,t),s=g_(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(w_(-1)),c=i.concat(u,1),f=s.concat(l,1);return r=m_(c,f).as2D(o[0],o[1]),a=yj(r),v_(a)}}),xj=Object.freeze({fft:gj,ifft:yj,rfft:bj,irfft:wj}),Cj=p_({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var a=n_(e,"sparseIndices","sparseToDense","int32"),o=n_(t,"sparseValues","sparseToDense"),i=n_(r,"defaultValue","sparseToDense",o.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,o,n,i),Yx.runKernelFunc((function(e){return e.sparseToDense(a,o,n,i)}),{$sparseIndices:a,$sparseValues:o,$defaultValue:i})}}),_j=p_({gatherND_:function(e,t){var n=n_(t,"indices","gatherND","int32"),r=n_(e,"x","gatherND");return Yx.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),kj=p_({diag_:function(e){var t=n_(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Yx.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Sj=p_({dropout_:function(e,t,n,r){var a=n_(e,"x","dropout");if(Rw("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),Rw(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Tx?a.clone():a;var o=function(e,t){if(null==t)return e.shape.slice();if(zw(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),i=1-t,s=HT(o,0,1,"float32",r).add(i).floor().div(i);return a.mul(s)}});function Mj(e,t,n){for(var r=1-e%2,a=new Float32Array(e),o=0;o<e;++o){var i=2*Math.PI*o/(e+r-1);a[o]=t-n*Math.cos(i)}return x_(a,"float32")}var Ej,Nj=p_({hannWindow_:function(e){return Mj(e,.5,.5)}}),Tj=p_({hammingWindow_:function(e){return Mj(e,.54,.46)}}),Ij=p_({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var o=0,i=[];o+t<=e.size;)i.push(zI(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,u=j_([zI(e,o,t-s),E_([s],a)]);i.push(u),o+=n}return 0===i.length?C_([],[0,t]):j_(i).as2D(i.length,t)}}),jj=p_({stft_:function(e,t,n,r,a){var o;void 0===a&&(a=Nj),null==r&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var i=Ij(e,t,n),s=eS(i,a(t)),u=[],l=0;l<i.shape[0];l++)u.push(bj(s.slice([l,0],[1,t]),r));return j_(u)}}),Dj=Object.freeze({hannWindow:Nj,hammingWindow:Tj,frame:Ij,stft:jj});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ej||(Ej={}));var Lj=p_({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Ej.SUM_BY_NONZERO_WEIGHTS);var a=n_(e,"labels","absoluteDifference"),o=n_(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=n_(n,"weights","absoluteDifference")),Pw(a.shape,o.shape,"Error in absoluteDifference: ");var s=a.sub(o).abs();return Aj(s,i,r)}}),Aj=p_({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Ej.SUM_BY_NONZERO_WEIGHTS);var r=n_(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=n_(t,"weights","computeWeightedLoss"));var o=null==a?r:r.mul(a);if(n===Ej.NONE)return o;if(n===Ej.SUM)return o.sum();if(n===Ej.MEAN){if(null==a)return o.mean();var i=r.size/a.size,s=o.sum().div(a.sum());return i>1?s.div(w_(i)):s}if(n===Ej.SUM_BY_NONZERO_WEIGHTS){if(null==a)return o.sum().div(w_(r.size));var u=a.mul(S_(r.shape)).notEqual(w_(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Rj=p_({cosineDistance_:function(e,t,n,r,a){void 0===a&&(a=Ej.SUM_BY_NONZERO_WEIGHTS);var o=n_(e,"labels","cosineDistance"),i=n_(t,"predictions","cosineDistance"),s=null;null!=r&&(s=n_(r,"weights","cosineDistance")),Pw(o.shape,i.shape,"Error in cosineDistance: ");var u=w_(1).sub(o.mul(i).sum(n,!0));return Aj(u,s,a)}}),Pj=p_({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Ej.SUM_BY_NONZERO_WEIGHTS);var a=n_(e,"labels","hingeLoss"),o=n_(t,"predictions","hingeLoss"),i=null;null!=n&&(i=n_(n,"weights","hingeLoss")),Pw(a.shape,o.shape,"Error in hingeLoss: ");var s=w_(1);a=w_(2).mul(a).sub(s);var u=s.sub(a.mul(o)).relu();return Aj(u,i,r)}}),Oj=p_({huberLoss_:function(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=Ej.SUM_BY_NONZERO_WEIGHTS);var o=n_(e,"labels","huberLoss"),i=n_(t,"predictions","huberLoss"),s=null;null!=n&&(s=n_(n,"weights","huberLoss")),Pw(o.shape,i.shape,"Error in huberLoss: ");var u=w_(r),l=i.sub(o).abs(),c=Kk(l,u),f=l.sub(c),d=w_(.5).mul(c.square()).add(u.mul(f));return Aj(d,s,a)}}),Fj=p_({logLoss_:function(e,t,n,r,a){void 0===r&&(r=1e-7),void 0===a&&(a=Ej.SUM_BY_NONZERO_WEIGHTS);var o=n_(e,"labels","logLoss"),i=n_(t,"predictions","logLoss"),s=null;null!=n&&(s=n_(n,"weights","logLoss")),Pw(o.shape,i.shape,"Error in logLoss: ");var u=w_(1),l=w_(r),c=o.mul(i.add(l).log()).neg().sub(u.sub(o).mul(u.sub(i).add(l).log()));return Aj(c,s,a)}}),Bj=p_({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Ej.SUM_BY_NONZERO_WEIGHTS);var a=n_(e,"labels","meanSquaredError"),o=n_(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=n_(n,"weights","meanSquaredError")),Pw(a.shape,o.shape,"Error in meanSquaredError: ");var s=a.squaredDifference(o);return Aj(s,i,r)}}),zj=p_({sigmoidCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ej.SUM_BY_NONZERO_WEIGHTS);var o=n_(e,"multiClassLabels","sigmoidCrossEntropy"),i=n_(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=n_(n,"weights","sigmoidCrossEntropy")),Pw(o.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=w_(r),l=w_(1),c=w_(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var f=function(e,t){var n=n_(e,"labels","sigmoidCrossEntropyWithLogits"),r=n_(t,"logits","sigmoidCrossEntropyWithLogits");Pw(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),o=r.mul(n),i=r.abs().neg().exp().log1p();return a.sub(o).add(i)}(o,i);return Aj(f,s,a)}}),Uj=p_({softmaxCrossEntropy_:function(e,t,n,r,a){void 0===r&&(r=0),void 0===a&&(a=Ej.SUM_BY_NONZERO_WEIGHTS);var o=n_(e,"onehotLabels","softmaxCrossEntropy"),i=n_(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=n_(n,"weights","softmaxCrossEntropy")),Pw(o.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=w_(r),l=w_(1),c=w_(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return wS((function(e,t,r){var a=t.logSumExp([n],!0),o=t.toFloat().sub(a);return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],a=t[1],o=s_(e.shape,[n]);return[e.reshape(o).mul(r.toFloat().sub(a.exp())),e.reshape(o).mul(a.exp().sub(r.toFloat()))]}}}))(e,t)}(o,i);return Aj(f,s,a)}}),Wj=Object.freeze({get Reduction(){return Ej},absoluteDifference:Lj,computeWeightedLoss:Aj,cosineDistance:Rj,hingeLoss:Pj,huberLoss:Oj,logLoss:Fj,meanSquaredError:Bj,sigmoidCrossEntropy:zj,softmaxCrossEntropy:Uj});function Vj(e,t){return void 0===t&&(t=!1),Yx.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=ET(n),o=e.clone(),i=C_([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(e){var t,u=o,l=s,c=a;t=Yx.tidy((function(){var t=o.slice([e,e],[n-e,1]),u=t.norm(),l=o.slice([e,e],[1,1]),c=C_([[-1]]).where(l.greater(0),C_([[1]])),f=l.sub(c.mul(u)),d=t.div(f);s=1===d.shape[0]?i.clone():i.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var h=c.matMul(f).div(u).neg(),p=o.slice([e,0],[n-e,r]),m=h.mul(s),v=s.transpose();if(0===e)o=p.sub(m.matMul(v.matMul(p)));else{var g=p.sub(m.matMul(v.matMul(p)));o=o.slice([0,0],[e,r]).concat(g,0)}var y=m.transpose(),b=a.slice([0,e],[n,a.shape[1]-e]);if(0===e)a=b.sub(b.matMul(s).matMul(y));else{var w=b.sub(b.matMul(s).matMul(y));a=a.slice([0,0],[n,e]).concat(w,1)}return[s,o,a]})),s=t[0],o=t[1],a=t[2],ZC([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=a.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[a,o]}))}var Hj=p_({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=n_(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),i=o[0],s=o[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=i),n<0&&(n=s);var u=N_(0,i,1,"int32").reshape([-1,1]),l=N_(0,s,1,"int32"),c=oS(u,l),f=bT(c.lessEqual(w_(+t,"int32")),c.greaterEqual(w_(-n,"int32"))),d=M_([i,s],r.dtype);return G_(q_(r.reshape([-1,i,s])).map((function(e){return _T(f,e,d)}))).reshape(a)}}),Yj=p_({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Rw(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Rw(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}else t=!0,e=P_(e,e.shape[0],0).map((function(e){return Y_(e,[0])}));Rw(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var o=[],i=e,s=function(e){o.push(Yx.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=tj(o[n].mulStrict(t)).mul(o[n]);t=t.sub(r)}return t.div(cj(t,"euclidean"))})))};for(a=0;a<e.length;++a)s(a);return t?G_(o,0):o}}),Gj=p_({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Vj(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=q_(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],o=[];return r.forEach((function(e){var n=Vj(e,t),r=n[0],i=n[1];a.push(r),o.push(i)})),[G_(a,0).reshape(e.shape),G_(o,0).reshape(e.shape)]}}),qj=Object.freeze({bandPart:Hj,gramSchmidt:Yj,qr:Gj});function Qj(e,t,n,r,a,o){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==o&&(o=0);var i=e.shape[0];return n=Math.min(n,i),Rw(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Rw(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Rw(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Rw(1===t.rank,(function(){return"scores must be a 1D tensor"})),Rw(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]})),Rw(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var Xj=p_({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=n_(e,"images","resizeBilinear");Rw(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Rw(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Yx.runKernelFunc((function(e,t){return t([a]),e.resizeBilinear(a,i,s,n)}),{x:a},(function(e,t){return{x:function(){return Yx.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Kj=p_({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=n_(e,"images","resizeNearestNeighbor");Rw(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Rw(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Rw("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Yx.runKernelFunc((function(e,t){return t([a]),e.resizeNearestNeighbor(a,i,s,n)}),{batchImages:a},(function(e,t){return{batchImages:function(){return Yx.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Jj=p_({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var o=n_(e,"boxes","nonMaxSuppression"),i=n_(t,"scores","nonMaxSuppression"),s=Qj(o,i,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return Yx.runKernelFunc((function(e){return e.nonMaxSuppression(o,i,n,r,a)}),{boxes:o,scores:i},null,"NonMaxSuppressionV3",u)}}),Zj=p_({nonMaxSuppressionWithScore_:function(e,t,n,r,a,o){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=0);var i=n_(e,"boxes","nonMaxSuppression"),s=n_(t,"scores","nonMaxSuppression"),u=Qj(i,s,n,r,a,o),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=Yx.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),$j=p_({cropAndResize_:function(e,t,n,r,a,o){var i=n_(e,"image","cropAndResize"),s=n_(t,"boxes","cropAndResize","float32"),u=n_(n,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var l=s.shape[0];return Rw(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),Rw(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),Rw(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),Rw(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Rw(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Rw("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a})),Yx.runKernelFunc((function(e,t){return e.cropAndResize(i,s,u,r,a,o)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),eD=Object.freeze({resizeBilinear:Xj,resizeNearestNeighbor:Kj,nonMaxSuppression:Jj,nonMaxSuppressionAsync:function(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),yw(this,void 0,void 0,(function(){var o,i,s,u,l,c,f;return bw(this,(function(d){switch(d.label){case 0:return o=n_(e,"boxes","nonMaxSuppressionAsync"),i=n_(t,"scores","nonMaxSuppressionAsync"),s=Qj(o,i,n,r,a),n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold,[4,Promise.all([o.data(),i.data()])];case 1:return u=d.sent(),l=u[0],c=u[1],f=QS(l,c,n,r,a),o!==e&&o.dispose(),i!==t&&i.dispose(),[2,f]}}))}))},nonMaxSuppressionWithScore:Zj,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,a,o){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),yw(this,void 0,void 0,(function(){var i,s,u,l,c,f,d;return bw(this,(function(h){switch(h.label){case 0:return i=n_(e,"boxes","nonMaxSuppressionAsync"),s=n_(t,"scores","nonMaxSuppressionAsync"),u=Qj(i,s,n,r,a,o),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return l=h.sent(),c=l[0],f=l[1],d=XS(c,f,n,r,a,o),i!==e&&i.dispose(),s!==t&&s.dispose(),[2,d]}}))}))},cropAndResize:$j}),tD=function(e,t){return!(e>0)||"linear"===t},nD=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},rD=function(e,t){var n=t,r=uk(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},aD=function(e,t,n){if("linear"===t)return e;if("relu"===t)return ij(e);if("elu"===t)return rj(e);if("relu6"===t)return sj(e);if("prelu"===t)return oj(e,n);throw new Error("Unknown fused activation "+t+".")},oD=p_({fusedMatMul_:function(e){var t,n=e.a,r=e.b,a=e.transposeA,o=void 0!==a&&a,i=e.transposeB,s=void 0!==i&&i,u=e.bias,l=e.activation,c=void 0===l?"linear":l,f=e.preluActivationWeights;if(!1===tD(Yx.state.gradientDepth,c)){var d=kI(n,r,o,s);return null!=u&&(d=ik(d,u)),aD(d,c,f)}var h=n_(n,"a","fused matMul"),p=n_(r,"b","fused matMul");t=Bx(h,p),h=t[0],p=t[1];var m=o?h.shape[h.rank-2]:h.shape[h.rank-1],v=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=o?h.shape[h.rank-1]:h.shape[h.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=h.shape.slice(0,-2),w=p.shape.slice(0,-2),x=Bw(b),C=Bw(w);Rw(h.rank>=2&&p.rank>=2&&h.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."})),Rw(zw(b,w),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."})),Rw(m===v,(function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."}));var _,k,S=h.shape.slice(0,-2).concat([g,y]),M=o?h.as3D(x,m,g):h.as3D(x,g,m),E=s?p.as3D(C,y,v):p.as3D(C,v,y);null!=u&&lk(S,(_=Bx(_=n_(u,"bias","fused matMul"),h)[0]).shape),null!=f&&(k=n_(f,"prelu weights","fused matMul"));var N={a:M,b:E};null!=u&&(N.bias=_),null!=f&&(N.preluActivationWeights=k);var T=[M,E];return Yx.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:M,b:E,transposeA:o,transposeB:s,bias:_,activation:c,preluActivationWeights:k});return t([M,E,n]),n}),N,(function(e,t){var n=t[0],r=t[1],a=t[2],i=nD(e,a,c),l={};return null!=u&&(l={bias:function(){return rD(_,i)}}),o||s?!o&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},l):o&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},l):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},l):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},l)}),"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},T,[!0]).reshape(S)}}),iD=p_({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights;if(d=d||"linear",!1===tD(Yx.state.gradientDepth,d)){var p=pI(t,n,r,a,i,u,l);return null!=c&&(p=ik(p,c)),aD(p,d,h)}var m=n_(t,"x","conv2d"),v=n_(n,"filter","conv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Rw(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),Rw(4===v.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."})),null!=l&&Rw(Uw(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+a+"."})),Rw(g.shape[3]===v.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."})),Rw(OS(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),Rw("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var b,w,x=TS(g.shape,v.shape,r,u,a,l);null!=c&&(b=Bx(b=n_(c,"bias","fused conv2d"),m)[0],lk(x.outShape,b.shape)),null!=h&&(w=n_(h,"prelu weights","fused conv2d"));var C={x:g,filter:v};null!=c&&(C.bias=b),null!=h&&(C.preluActivationWeights=w);var _=[v,g],k=Yx.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:v,convInfo:x,bias:b,activation:d,preluActivationWeights:w});return t([v,g,n]),n}),C,(function(e,t){var n=t,o=n[0],i=n[1],s=n[2],l=nD(e,s,d);Rw(PS(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var f={};return null!=c&&(f={bias:function(){return rD(b,l)}}),Object.assign({x:function(){return gI(i.shape,l,o,r,a)},filter:function(){return vI(i,l,o.shape,r,a)}},f)}),"FusedConv2D",{convInfo:x,activation:d},_,[!0]);return y?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),sD=p_({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,o=e.dataFormat,i=void 0===o?"NHWC":o,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights;if(!1===tD(Yx.state.gradientDepth,d)){var p=yI(t,n,r,a,i,u,l);return null!=c&&(p=ik(p,c)),aD(p,d,h)}var m=n_(t,"x","depthwiseConv2d"),v=n_(n,"filter","depthwiseConv2d"),g=m,y=!1;3===m.rank&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),Rw(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),Rw(4===v.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."})),Rw(g.shape[3]===v.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."})),null==u&&(u=[1,1]),Rw(OS(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&Rw(Uw(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+a+"."}));var b,w,x=TS(g.shape,v.shape,r,u,a,l,!0);null!=c&&(b=Bx(b=n_(c,"bias","fused conv2d"),m)[0],lk(x.outShape,b.shape)),null!=h&&(w=n_(h,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:v};null!=c&&(C.bias=b),null!=h&&(C.preluActivationWeights=w);var _=[v,g],k=Yx.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:v,convInfo:x,bias:b,activation:d,preluActivationWeights:w});return t([v,g,n]),n}),C,(function(e,t){Rw(PS(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],a=t[2],o=nD(e,a,d),i={};return null!=c&&(i={bias:function(){return rD(b,o)}}),Object.assign({x:function(){return bI(r.shape,o,n,x)},filter:function(){return wI(r,o,n.shape,x)}},i)}),"FusedDepthwiseConv2D",{convInfo:x,activation:d},_,[!0]);return y?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),uD=Object.freeze({matMul:oD,conv2d:iD,depthwiseConv2d:sD}),lD=Object.freeze({image:eD,linalg:qj,losses:Wj,spectral:xj,fused:uD,signal:Dj,add:ik,addN:tT,batchNorm:sT,batchNormalization:iT,batchNorm2d:cT,batchNormalization2d:lT,batchNorm3d:hT,batchNormalization3d:dT,batchNorm4d:vT,batchNormalization4d:mT,broadcastTo:gT,clone:yT,div:sS,divNoNan:ST,eye:ET,multinomial:NT,oneHot:TT,pad:IT,pad1d:jT,pad2d:DT,pad3d:LT,pad4d:AT,rand:RT,randomGamma:WT,randomNormal:VT,randomUniform:HT,square:YT,squaredDifference:GT,tile:MT,truncatedNormal:qT,conv1d:hI,conv2d:pI,conv3d:mI,depthwiseConv2d:yI,separableConv2d:xI,conv2dTranspose:CI,conv3dTranspose:_I,op:p_,booleanMaskAsync:function(e,t,n){return yw(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,f,d,h,p,m;return bw(this,(function(v){switch(v.label){case 0:for(r=n_(e,"tensor","boolMask"),a=n_(t,"mask","boolMask","bool"),o=null==n?0:n,i=a.rank,s=r.shape,Rw(i>0,(function(){return"mask cannot be scalar"})),Pw(s.slice(o,o+i),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+i;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+i)),f=r.reshape(c),d=a.reshape([-1]),[4,kT(d)];case 1:return h=v.sent(),p=h.squeeze([1]),m=uI(f,p,o),e!==r&&r.dispose(),t!==a&&a.dispose(),p.dispose(),f.dispose(),d.dispose(),h.dispose(),[2,m]}}))}))},complex:m_,real:v_,imag:g_,concat:j_,concat1d:D_,concat2d:L_,concat3d:A_,concat4d:R_,split:P_,matMul:kI,dot:SI,outerProduct:MI,reverse:EI,reverse1d:NI,reverse2d:TI,reverse3d:II,reverse4d:jI,maxPool:AI,avgPool:RI,pool:PI,maxPool3d:OI,avgPool3d:FI,maxPoolWithArgmax:BI,slice:zI,slice1d:UI,slice2d:WI,slice3d:VI,slice4d:HI,abs:ck,acos:fk,acosh:dk,asin:hk,asinh:pk,atan:mk,atanh:vk,ceil:gk,clipByValue:yk,cos:bk,cosh:wk,erf:xk,exp:Ck,expm1:_k,floor:kk,log:Sk,log1p:Mk,logSigmoid:Ek,neg:Nk,reciprocal:Tk,round:Ik,rsqrt:jk,sigmoid:Dk,sign:Lk,isNaN:Ak,isInf:Rk,isFinite:Pk,sin:Ok,sinh:Fk,softplus:Bk,sqrt:zk,step:Uk,tan:Wk,tanh:Vk,all:GI,any:qI,argMax:QI,argMin:XI,logSumExp:KI,max:JI,mean:ZI,min:$I,moments:ej,sum:tj,prod:nj,equal:QT,equalStrict:XT,greater:KT,greaterEqual:JT,greaterEqualStrict:ZT,greaterStrict:$T,less:eI,lessEqual:tI,lessEqualStrict:nI,lessStrict:rI,notEqual:aI,notEqualStrict:oI,addStrict:Hk,atan2:Yk,divStrict:Gk,floorDiv:qk,maximum:Qk,maximumStrict:Xk,minimum:Kk,minimumStrict:Jk,mod:Zk,modStrict:$k,mul:eS,mulStrict:tS,pow:nS,powStrict:rS,squaredDifferenceStrict:aS,sub:oS,subStrict:iS,elu:rj,leakyRelu:aj,prelu:oj,relu:ij,relu6:sj,selu:uj,logicalAnd:bT,logicalNot:wT,logicalOr:xT,logicalXor:CT,where:_T,whereAsync:kT,buffer:O_,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:F_,cast:B_,cumsum:z_,depthToSpace:U_,expandDims:W_,reshape:V_,spaceToBatchND:H_,squeeze:Y_,stack:G_,unstack:q_,setdiff1dAsync:function(e,t){return yw(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f;return bw(this,(function(d){switch(d.label){case 0:return n=n_(e,"x","setdiff1d"),r=n_(t,"y","setdiff1d"),Rw(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Rw(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Rw(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return a=d.sent(),[4,r.data()];case 2:for(o=d.sent(),i=new Set(o),s=0,c=0;c<a.length;c++)i.has(a[c])||s++;for(u=new Sx([s],n.dtype),l=new Sx([s],"int32"),c=0,f=0;c<a.length;c++)i.has(a[c])||(u.values[f]=a[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}}))}))},fill:E_,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Yx.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:S_,range:N_,scalar:w_,tensor:y_,tensor1d:x_,tensor2d:C_,tensor3d:__,tensor4d:k_,tensor5d:function(e,t,n){if(Ow(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=e_(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return b_(e,t,r,n)},tensor6d:function(e,t,n){if(Ow(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=e_(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return b_(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),Yx.makeVariable(e,t,n,r)},zeros:M_,onesLike:T_,zerosLike:I_,transpose:_S,softmax:xS,logSoftmax:CS,localResponseNormalization:lj,norm:cj,gather:uI,unsortedSegmentSum:lI,basicLSTMCell:fj,multiRNNCell:dj,movingAverage:hj,stridedSlice:pj,topk:mj,scatterND:vj,fft:gj,ifft:yj,rfft:bj,irfft:wj,sparseToDense:Cj,gatherND:_j,diag:kj,dropout:Sj,hannWindow:Nj,hammingWindow:Tj,frame:Ij,stft:jj,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),yw(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,f,d,h,p,m,v;return bw(this,(function(g){switch(g.label){case 0:return r=n_(e,"predictions","inTopK"),a=n_(t,"targets","inTopK"),Rw(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),Rw(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),Pw(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],Rw(n>0&&n<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n})),[4,r.data()];case 1:return i=g.sent(),[4,a.data()];case 2:for(s=g.sent(),u=[i.length/o,o],c=u[1],f=Xw("bool",l=u[0]),d=0;d<l;d++){for(h=d*c,p=i.subarray(h,h+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});for(m.sort((function(e,t){return t.value-e.value})),f[d]=0,v=0;v<n;v++)if(m[v].index===s[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),[2,y_(f,a.shape,"bool")]}}))}))}});function cD(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Rw("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function fD(e,t,n,r,a,o){for(var i=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,p="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=O_(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],w=0;w<a.batchSize;++w)for(var x=w*g,C=w*r[0],_=0;_<a.inChannels;++_)for(var k=0;k<a.outHeight;++k)for(var S=k*i-d,M=Math.max(0,S),E=Math.min(a.inHeight,c+S),N=x+k*y,T=0;T<a.outWidth;++T){for(var I=T*s-h,j=Math.max(0,I),D=Math.min(a.inWidth,f+I),L=p,A=0,R=0,P=M;P<E;P+=u){for(var O=C+P*r[1],F=j;F<D;F+=l){var B=e[O+F*r[2]+_];"max"===o&&B>L?L=B:"avg"===o&&(A+=B,R++)}if(isNaN(L))break}v[N+T*b+_]="avg"===o?A/R:L}return m}function dD(e,t,n,r,a,o){void 0===a&&(a=!1),void 0===o&&(o=!1);for(var i=O_(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=O_(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,w=b;w<0;)w+=l;for(var x=Math.min(r.inHeight,f+b),C=0;C<r.outWidth;++C){for(var _=C*u-p,k=_;k<0;)k+=c;for(var S=Math.min(r.inWidth,d+_),M=Number.NEGATIVE_INFINITY,E=-1,N=w;N<x;N+=l)for(var T=N-b,I=k;I<S;I+=c){var j=I-_,D=m.get(v,N,I,g);D>M&&(M=D,E=a?o?((v*r.inHeight+N)*r.inWidth+I)*r.inChannels+g:(N*r.inWidth+I)*r.inChannels+g:T*d+j)}i.set(E,v,y,C,g)}}return i}function hD(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var pD=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new kS(t,Yx),t}return gw(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,xw().get("IS_NODE")&&$C("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?WS(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return gx(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return O_(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Yx.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){return t=px(),e(),[2,{kernelMs:px()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Yx.keep(e.clone()),imag:Yx.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(cD(e,"slice"),yS(e.shape,t,n)){var r=bS(t,e.strides),a=Bw(n);return y_(this.readSync(e.dataId).subarray(r,r+a),n,e.dtype)}for(var o=O_(n,e.dtype),i=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s).map((function(e,n){return e+t[n]}));o.values[s]=i.get.apply(i,u)}return o.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){cD(e,"stridedSlice");var a=mS(t,n,r);if(a.some((function(e){return 0===e})))return y_([],a);for(var o=O_(a,e.dtype),i=this.bufferSync(e),s=0;s<o.size;s++){for(var u=o.indexToLoc(s),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[c]*r[c]+t[c];o.set.apply(o,[i.get.apply(i,l)].concat(u))}return o.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=O_([e.size,e.size],e.dtype),r=n.values,a=0;a<t.length;a++)r[a*e.size+a]=t[a];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),a=0,o=0;o<e.rank;o++)o!==t&&(r[a++]=e.shape[o]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(o=0;o<u.length;o++)i[t]=o,u[o]=this.slice(e,i,s).reshape(r);return u},t.prototype.reverse=function(e,t){cD(e,"reverse");for(var n=O_(e.shape,e.dtype),r=this.bufferSync(e),a=function(a){var o=n.indexToLoc(a),i=o.slice();t.forEach((function(t){return i[t]=e.shape[t]-1-i[t]})),n.set.apply(n,[r.get.apply(r,i)].concat(o))},o=0;o<n.size;o++)a(o);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return v_(e)})),a=e.map((function(e){return g_(e)}));return m_(this.concat(r,t),this.concat(a,t))}var o=e.map((function(e){var n=Bw(e.shape.slice(t));return e.as2D(-1,n)})),i=h_(o.map((function(e){return e.shape})),1),s=O_(i,e[0].dtype).values;if(1===o[0].shape[0]){var u=0;o.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var l=0;o.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,a=0;a<e.shape[0];++a)for(var o=a*i[1]+l,u=0;u<e.shape[1];++u)s[o+u]=t[r++];l+=e.shape[1]}))}var c=h_(e.map((function(e){return e.shape})),t);return y_(s,c,e[0].dtype)},t.prototype.neg=function(e){return cD(e,"neg"),this.multiply(w_(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Ox(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;cD(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=O_(e[0].shape,e[0].dtype),a=r.values,o=0;o<e.length;o++)for(var i=n[o],s=0;s<a.length;s++)a[s]+=i[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=qw([t],e.shape),r=this.max(e,n),a=s_(r.shape,n),o=this.subtract(e,r.reshape(a)),i=this.exp(o),s=this.sum(i,n).reshape(a);return sS(i,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Ox(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return cD([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){cD([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=c[0],d=c[1],h=c[2],p=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=p[0],v=p[1],g=p[2],y=o*i,b=O_([s,o,i],e.dtype),w=b.values,x=this.blockSize,C=0;C<s;C++)for(var _=0;_<o;_+=x)for(var k=0;k<i;k+=x)for(var S=0;S<a;S+=x)for(var M=Math.min(_+x,o),E=Math.min(k+x,i),N=Math.min(S+x,a),T=_;T<M;T++)for(var I=k;I<E;I++){for(var j=0,D=S;D<N;D++)j+=u[C*f+T*d+D*h]*l[D*m+I*v+C*g];w[C*y+(T*i+I)]+=j}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,o=e.bias,i=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,a);return o&&(u=this.add(u,o)),i&&(u=hD(this,u,i,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Ox(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.floorDiv=function(e,t){return cD([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){cD(e,"sum"),u_("sum",t,e.rank);for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,Ox(e.dtype,"int32")),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=0,d=0;d<i;++d)f+=u[c+d];s[l]=f}return o},t.prototype.prod=function(e,t){cD(e,"sum");for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,Ox(e.dtype,"int32")),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=1,d=0;d<i;++d)f*=u[c+d];s[l]=f}return o},t.prototype.unsortedSegmentSum=function(e,t,n){cD(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,o=0;o<a;++o)t=t.expandDims(o+1);for(o=0;o<n;++o){var i=w_(o,"int32"),s=QT(i,t).asType("float32").mul(e).sum(0);r.push(s)}return G_(r)},t.prototype.argMin=function(e,t){cD(e,"argMin");var n=[t];u_("argMin",n,e.rank);for(var r=i_(e.shape,n),a=r[0],o=r[1],i=M_(a,"int32"),s=Bw(o),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var f=c*s,d=l[f],h=0,p=0;p<s;++p){var m=l[f+p];m<d&&(d=m,h=p)}u[c]=h}return i},t.prototype.argMax=function(e,t){cD(e,"argMax");var n=[t];u_("argMax",n,e.rank);for(var r=i_(e.shape,n),a=r[0],o=r[1],i=M_(a,"int32"),s=Bw(o),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var f=c*s,d=l[f],h=0,p=0;p<s;++p){var m=l[f+p];m>d&&(d=m,h=p)}u[c]=h}return i},t.prototype.cumsum=function(e,t,n,r){if(cD(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=Ox(e.dtype,"int32"),o=M_(e.shape,a),i=this.readSync(o.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var f=0;f<u;f++){var d=l(c,f);if(0===f)i[d]=n?0:s[d];else{var h=l(c,f-1);i[d]=n?s[h]+i[h]:s[d]+i[h]}}return o},t.prototype.equal=function(e,t){return cD([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return cD([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return cD([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return cD([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return cD([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return cD([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){cD(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return cD([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return cD([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){cD([e,t,n],"select");for(var r=this.readSync(e.dataId),a=this.readSync(t.dataId),o=this.readSync(n.dataId),i=M_(t.shape,Ox(t.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:Bw(t.shape.slice(1)),c=0;c<r.length;c++)for(var f=0;f<l;f++)1===r[c]?s[u++]=a[c]:s[u++]=o[c];return i},t.prototype.where=function(e){cD([e],"where");var t=this.readSync(e.dataId);return rM(e.shape,t)},t.prototype.topk=function(e,t,n){return cD(e,"topk"),nM(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){cD(e,"min"),u_("min",t,e.rank);for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,e.dtype),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];h<f&&(f=h)}s[l]=f}return o},t.prototype.minimum=function(e,t){return cD([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return cD([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){cD(e,"max"),u_("max",t,e.rank);for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,e.dtype),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];h>f&&(f=h)}s[l]=f}return o},t.prototype.maximum=function(e,t){return cD([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){cD(e,"all"),u_("all",t,e.rank);for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,e.dtype),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];f=f&&h}s[l]=f}return o},t.prototype.any=function(e,t){cD(e,"any"),u_("any",t,e.rank);for(var n=i_(e.shape,t),r=n[0],a=n[1],o=M_(r,e.dtype),i=Bw(a),s=this.readSync(o.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,f=u[c],d=0;d<i;++d){var h=u[c+d];f=f||h}s[l]=f}return o},t.prototype.squaredDifference=function(e,t){return cD([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){cD(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){cD(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){cD(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){cD(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){cD(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){cD(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){cD(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):n[r]=a%2==0?a:a+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){cD(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){cD(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){cD(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){cD(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){cD(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){cD(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){cD(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){cD(e,"relu");for(var t=M_(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},t.prototype.relu6=function(e){cD(e,"relu");for(var t=M_(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),a=0;a<r.length;++a)n[a]=Math.min(Math.max(0,r[a]),6);return t},t.prototype.prelu=function(e,t){return cD([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){cD(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=n[r];t[r]=a>=0?a:Math.exp(a)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){cD([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),a=this.readSync(e.dataId),o=0;o<r.length;++o){var i=r[o];n[o]=i>=1?a[o]:a[o]*(i+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){cD(e,"selu");for(var t=mN,n=vN,r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var i=a[o];r[o]=i>=0?n*i:t*(Math.exp(i)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){cD(e,"clip");for(var r=new Float32Array(e.size),a=this.readSync(e.dataId),o=0;o<a.length;++o){var i=a[o];r[o]=i>n?n:i<t?t:i}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var a=n[2*r],o=n[2*r+1];t[r]=Math.hypot(a,o)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){cD(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){cD(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){cD(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var o,i=r[a]>-t,s=r[a]<t,u=Math.exp(r[a]);o=s?u:i?r[a]:Math.log(1+u),n[a]=o}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){cD(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){cD(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){cD(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){cD(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){cD(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){cD(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return cD([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){cD(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){cD(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){cD(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Ww(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){cD(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){cD(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){cD(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){cD(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var a=Math.sign(n[r]),o=Math.abs(n[r]),i=1/(1+.3275911*o);t[r]=a*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-o*o))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),cD(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),a=0;a<r.length;++a){var o=r[a];isNaN(o)?n[a]=NaN:n[a]=o>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,o=e.activation,i=e.preluActivationWeights,s=this.conv2d(t,n,r);return a&&(s=this.add(s,a)),o&&(s=hD(this,s,o,i)),s},t.prototype.conv2d=function(e,t,n){cD([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=O_(n.outShape,e.dtype),f=e.strides[0],d=l?e.strides[1]:e.strides[2],h=l?e.strides[2]:1,p=l?1:e.strides[1],m=c.strides[0],v=l?c.strides[1]:c.strides[2],g=l?c.strides[2]:1,y=l?1:c.strides[1],b=this.readSync(e.dataId),w=this.readSync(t.dataId),x=c.values,C=0;C<n.batchSize;++C)for(var _=C*f,k=C*m,S=0;S<n.outHeight;++S)for(var M=k+S*v,E=S*n.strideHeight-u,N=0;N<r;N++){var T=E+N*o;if(!(T<0||T>=n.inHeight))for(var I=N*t.strides[0],j=_+T*d,D=0;D<n.outWidth;++D)for(var L=M+D*g,A=D*n.strideWidth-s,R=0;R<a;R++){var P=A+R*i;if(!(P<0||P>=n.inWidth))for(var O=j+P*h,F=I+R*t.strides[1],B=0;B<n.inChannels;++B){for(var z=b[O+B*p],U=0;U<n.outChannels;++U)x[L+U*y]+=z*w[F+U];F+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,a=n.filterHeight,o=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,f=n.padInfo.top,d=O_(n.outShape,e.dtype),h=this.readSync(e.dataId),p=this.readSync(t.dataId),m=d.values,v=0;v<n.batchSize;++v)for(var g=v*e.strides[0],y=v*d.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*d.strides[1],x=b*n.strideDepth-l,C=0;C<r;C++){var _=x+C*i;if(!(_<0||_>=n.inDepth))for(var k=C*t.strides[0],S=g+_*e.strides[1],M=0;M<n.outHeight;++M)for(var E=w+M*d.strides[2],N=M*n.strideHeight-f,T=0;T<a;T++){var I=N+T*s;if(!(I<0||I>=n.inHeight))for(var j=k+T*t.strides[1],D=S+I*e.strides[2],L=0;L<n.outWidth;++L)for(var A=E+L*n.outChannels,R=L*n.strideWidth-c,P=0;P<o;P++){var O=R+P*u;if(!(O<0||O>=n.inWidth))for(var F=j+P*t.strides[2],B=D+O*n.inChannels,z=F,U=0;U<n.inChannels;++U){for(var W=h[B+U],V=0;V<n.outChannels;++V)m[A+V]+=W*p[z+V];z+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){cD([e,t],"conv2dDerInput");for(var r=O_(n.inShape,"float32"),a=r.values,o=this.readSync(e.dataId),i=this.readSync(t.dataId),s=t.strides,u=s[0],l=s[1],c=s[2],f=n.batchSize,d=n.filterHeight,h=n.filterWidth,p=n.inChannels,m=n.inHeight,v=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,w=n.strideHeight,x=n.strideWidth,C=n.dataFormat,_=d-1-n.padInfo.top,k=h-1-n.padInfo.left,S="channelsLast"===C,M=r.strides[0],E=S?r.strides[1]:r.strides[2],N=S?r.strides[2]:1,T=S?1:r.strides[1],I=e.strides[0],j=S?e.strides[1]:e.strides[2],D=S?e.strides[2]:1,L=S?1:e.strides[1],A=0;A<f;++A)for(var R=0;R<p;++R)for(var P=0;P<m;++P)for(var O=P-_,F=Math.max(0,Math.ceil(O/w)),B=Math.min(y,(d+O)/w),z=0;z<v;++z){for(var U=z-k,W=Math.max(0,Math.ceil(U/x)),V=Math.min(b,(h+U)/x),H=0,Y=F;Y<B;++Y)for(var G=Y*w-O,q=W;q<V;++q)for(var Q=I*A+j*Y+D*q,X=u*(d-1-G)+l*(h-1-(q*x-U))+c*R,K=0;K<g;++K)H+=o[Q+L*K]*i[X+K];a[M*A+E*P+N*z+T*R]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=O_(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=o[3],c=this.readSync(e.dataId),f=e.strides,d=f[0],h=f[1],p=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=n.batchSize,_=n.filterDepth,k=n.filterHeight,S=n.filterWidth,M=n.inChannels,E=n.inDepth,N=n.inHeight,T=n.inWidth,I=n.outChannels,j=n.outDepth,D=n.outHeight,L=n.outWidth,A=n.strideDepth,R=n.strideHeight,P=n.strideWidth,O=_-1-n.padInfo.front,F=k-1-n.padInfo.top,B=S-1-n.padInfo.left,z=0;z<C;++z)for(var U=0;U<M;++U)for(var W=0;W<E;++W)for(var V=W-O,H=Math.max(0,Math.ceil(V/A)),Y=Math.min(j,(_+V)/A),G=0;G<N;++G)for(var q=G-F,Q=Math.max(0,Math.ceil(q/R)),X=Math.min(D,(k+q)/R),K=0;K<T;++K){for(var J=K-B,Z=Math.max(0,Math.ceil(J/P)),$=Math.min(L,(S+J)/P),ee=0,te=H;te<Y;++te)for(var ne=te*A-V,re=Q;re<X;++re)for(var ae=re*R-q,oe=Z;oe<$;++oe)for(var ie=d*z+h*te+p*re+m*oe,se=y*(_-1-ne)+b*(k-1-ae)+w*(S-1-(oe*P-J))+x*U,ue=0;ue<I;++ue)ee+=c[ie+ue]*v[se+ue];a[i*z+s*W+u*G+l*K+U]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){cD([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s="channelsLast"===n.dataFormat,u=O_(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,f=this.bufferSync(e),d=this.bufferSync(t),h=0;h<o;++h)for(var p=Math.max(0,Math.ceil((c-h)/r)),m=Math.min(n.outHeight,(n.inHeight+c-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((l-v)/a)),y=Math.min(n.outWidth,(n.inWidth+l-v)/a),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var x=0,C=0;C<n.batchSize;++C)for(var _=p;_<m;++_)for(var k=h+_*r-c,S=g;S<y;++S){var M=v+S*a-l;x+=s?f.get(C,k,M,b)*d.get(C,_,S,w):f.get(C,b,k,M)*d.get(C,w,_,S)}u.set(x,h,v,b,w)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,a=n.strideHeight,o=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=O_(n.filterShape,"float32"),c=l.values,f=l.strides,d=f[0],h=f[1],p=f[2],m=f[3],v=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=this.readSync(e.dataId),_=e.strides,k=_[0],S=_[1],M=_[2],E=_[3],N=n.padInfo.front,T=n.padInfo.left,I=n.padInfo.top,j=0;j<i;++j)for(var D=Math.max(0,Math.ceil((N-j)/r)),L=Math.min(n.outDepth,(n.inDepth+N-j)/r),A=j*d,R=0;R<s;++R)for(var P=Math.max(0,Math.ceil((I-R)/a)),O=Math.min(n.outHeight,(n.inHeight+I-R)/a),F=R*h+A,B=0;B<u;++B)for(var z=Math.max(0,Math.ceil((T-B)/o)),U=Math.min(n.outWidth,(n.inWidth+T-B)/o),W=B*p+F,V=0;V<n.inChannels;++V)for(var H=V*m+W,Y=0;Y<n.outChannels;++Y){for(var G=0,q=0;q<n.batchSize;++q)for(var Q=q*k,X=q*y,K=D;K<L;++K)for(var J=(j+K*r-N)*S+Q,Z=K*b+X,$=P;$<O;++$)for(var ee=(R+$*a-I)*M+J,te=$*w+Z,ne=z;ne<U;++ne){var re=ne*x+te;G+=C[(B+ne*o-T)*E+ee+V]*v[re+Y]}c[H+Y]=G}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,a=e.bias,o=e.activation,i=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return a&&(s=this.add(s,a)),o&&(s=hD(this,s,o,i)),s},t.prototype.depthwiseConv2D=function(e,t,n){cD([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=O_(n.outShape,e.dtype),f=this.readSync(e.dataId),d=this.readSync(t.dataId),h=c.values,p=0;p<n.batchSize;++p)for(var m=p*e.strides[0],v=p*c.strides[0],g=0;g<n.outHeight;++g)for(var y=v+g*c.strides[1],b=g*n.strideHeight-s,w=0;w<r;++w){var x=b+w*o;if(!(x<0||x>=n.inHeight))for(var C=w*t.strides[0],_=m+x*e.strides[1],k=0;k<n.outWidth;++k)for(var S=y+k*c.strides[2],M=k*n.strideWidth-u,E=0;E<a;++E){var N=M+E*i;if(!(N<0||N>=n.inWidth))for(var T=C+E*t.strides[1],I=_+N*n.inChannels,j=S,D=T,L=0;L<n.inChannels;++L){for(var A=f[I+L],R=0;R<l;++R)h[j+R]+=A*d[D+R];j+=l,D+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){cD([e,t],"depthwiseConv2DDerInput");for(var r=O_(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=this.readSync(e.dataId),c=e.strides,f=c[0],d=c[1],h=c[2],p=this.readSync(t.dataId),m=t.strides,v=m[0],g=m[1],y=m[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,C=n.inChannels,_=n.inHeight,k=n.inWidth,S=n.outChannels,M=n.outHeight,E=n.outWidth,N=n.strideHeight,T=n.strideWidth,I=w-1-n.padInfo.top,j=x-1-n.padInfo.left,D=S/C,L=0;L<b;++L)for(var A=0;A<C;++A)for(var R=0;R<_;++R)for(var P=R-I,O=Math.max(0,Math.ceil(P/N)),F=Math.min(M,(w+P)/N),B=0;B<k;++B){for(var z=B-j,U=Math.max(0,Math.ceil(z/T)),W=Math.min(E,(x+z)/T),V=0,H=O;H<F;++H)for(var Y=H*N-P,G=U;G<W;++G)for(var q=f*L+d*H+h*G,Q=v*(w-1-Y)+g*(x-1-(G*T-z))+y*A,X=0;X<D;++X)V+=l[q+(A*D+X)]*p[Q+X];a[i*L+s*R+u*B+A]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){cD([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=O_(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,f=this.bufferSync(e),d=this.bufferSync(t),h=0;h<o;++h)for(var p=Math.max(0,Math.ceil((l-h)/r)),m=Math.min(n.outHeight,(n.inHeight+l-h)/r),v=0;v<i;++v)for(var g=Math.max(0,Math.ceil((u-v)/a)),y=Math.min(n.outWidth,(n.inWidth+u-v)/a),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),x=b%c,C=0,_=0;_<n.batchSize;++_)for(var k=p;k<m;++k)for(var S=h+k*r-l,M=g;M<y;++M){var E=v+M*a-u;C+=f.get(_,S,E,w)*d.get(_,k,M,b)}s.set(C,h,v,w,x)}return s.toTensor()},t.prototype.tile=function(e,t){return cD(e,"tile"),tM(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){cD(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),a=t.map((function(e){return e[0]})),o=this.bufferSync(e),i=O_(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),l=u.map((function(e,t){return e+a[t]}));i.set.apply(i,[o.get.apply(o,u)].concat(l))}return i.toTensor()},t.prototype.gather=function(e,t,n){cD([e,t],"gather");var r=e.shape.slice(),a=this.readSync(t.dataId);r[n]=a.length;for(var o=O_(r,e.dtype),i=this.bufferSync(e),s=0;s<o.size;++s){var u=o.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=i.locToIndex(l);o.values[s]=i.values[c]}return o.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){cD([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),a=Q_(e.shape,t,r),o=X_(a.length,t.length),i=K_(e.shape,t,r),s=J_(n,t.length),u=Z_(i,n,t.length);return _S(e.reshape(a),o).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){cD([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=Q_(i.shape,t,r,!1),u=X_(s.length,t.length,!1),l=K_(i.shape,t,r,!1);return _S(i.reshape(s),u).reshape(l)},t.prototype.maxPool=function(e,t){return cD(e,"maxPool"),fD(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"max").toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){cD([t,n],"maxPoolBackprop");for(var a=this.readSync(t.dataId),o=O_(r.outShape,t.dtype,dD(a,t.shape,t.dtype,r).values),i=r.strideHeight,s=r.strideWidth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,f=r.effectiveFilterWidth,d=f-1-r.padInfo.left,h=c-1-r.padInfo.top,p=O_(t.shape,"float32"),m=this.bufferSync(e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-h,x=b-d,C=0,_=0;_<c;_+=u){var k=(w+_)/i;if(!(k<0||k>=r.outHeight||Math.floor(k)!==k))for(var S=0;S<f;S+=l){var M=(x+S)/s;if(!(M<0||M>=r.outWidth||Math.floor(M)!==M)){var E=c*f-1-o.get(v,k,M,g)===_*f+S?1:0;0!==E&&(C+=m.get(v,k,M,g)*E)}}}p.set(C,v,y,b,g)}return p.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){cD([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,f=c-1-n.padInfo.left,d=l-1-n.padInfo.top,h=O_(t.shape,"float32"),p=1/(o*i),m=this.bufferSync(e),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-d,x=b-f,C=0,_=0;_<l;_+=s){var k=(w+_)/r;if(!(k<0||k>=n.outHeight||Math.floor(k)!==k))for(var S=0;S<c;S+=u){var M=(x+S)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(C+=m.get(v,k,M,g))}}h.set(C*p,v,y,b,g)}return h.toTensor()},t.prototype.pool3d=function(e,t,n){cD(e,"pool3d");for(var r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(e.dataId),g=O_(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],C=t.outShape[4],_=0;_<t.batchSize;++_)for(var k=_*b,S=_*e.strides[0],M=0;M<t.inChannels;++M)for(var E=0;E<t.outDepth;++E){for(var N=E*r-d,T=N;T<0;)T+=i;for(var I=Math.min(t.inDepth,l+N),j=k+E*w,D=0;D<t.outHeight;++D){for(var L=D*a-h,A=L;A<0;)A+=s;for(var R=Math.min(t.inHeight,c+L),P=j+D*x,O=0;O<t.outWidth;++O){for(var F=O*o-p,B=F;B<0;)B+=u;for(var z=Math.min(t.inWidth,f+F),U=P+O*C,W=m,V=0,H=0,Y=T;Y<I;Y+=i){for(var G=S+Y*e.strides[1],q=A;q<R;q+=s){for(var Q=G+q*e.strides[2],X=B;X<z;X+=u){var K=v[Q+X*e.strides[3]+M];if("max"===n&&K>W?W=K:"avg"===n&&(V+=K,H++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}y[U+M]="avg"===n?V/H:W}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return cD(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){cD([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,a=n.strideHeight,o=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,h=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=d-1-n.padInfo.front,v=p-1-n.padInfo.left,g=h-1-n.padInfo.top,y=O_(t.shape,"float32"),b=1/(i*s*u),w=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var C=0;C<n.inChannels;++C)for(var _=0;_<n.inDepth;++_)for(var k=0;k<n.inHeight;++k)for(var S=0;S<n.inWidth;++S){for(var M=_-m,E=k-g,N=S-v,T=0,I=0;I<d;I+=l){var j=(M+I)/r;if(!(j<0||j>=n.outDepth||Math.floor(j)!==j))for(var D=0;D<h;D+=c){var L=(E+D)/a;if(!(L<0||L>=n.outHeight||Math.floor(L)!==L))for(var A=0;A<p;A+=f){var R=(N+A)/o;R<0||R>=n.outWidth||Math.floor(R)!==R||(T+=w.get(x,j,L,R,C))}}}y.set(T*b,x,_,k,S,C)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return cD(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=O_(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,o=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,m=this.bufferSync(e),v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-d,w=b;w<0;)w+=i;for(var x=Math.min(t.inDepth,l+b),C=0;C<t.outHeight;++C){for(var _=C*a-h,k=_;k<0;)k+=s;for(var S=Math.min(t.inHeight,c+_),M=0;M<t.outWidth;++M){for(var E=M*o-p,N=E;N<0;)N+=u;for(var T=Math.min(t.inWidth,f+E),I=Number.NEGATIVE_INFINITY,j=-1,D=w;D<x;D+=i)for(var L=D-b,A=k;A<S;A+=s)for(var R=A-_,P=N;P<T;P+=u){var O=P-E,F=m.get(v,D,A,P,g);F>=I&&(I=F,j=L*c*f+R*c+O)}n.set(j,v,y,C,M,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){cD([t,n],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(t,r),o=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=f-1-r.padInfo.front,m=h-1-r.padInfo.left,v=d-1-r.padInfo.top,g=O_(t.shape,"float32"),y=this.bufferSync(a),b=this.bufferSync(e),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var C=0;C<r.inDepth;++C)for(var _=0;_<r.inHeight;++_)for(var k=0;k<r.inWidth;++k){for(var S=C-p,M=_-v,E=k-m,N=0,T=0;T<f;T+=u){var I=(S+T)/o;if(!(I<0||I>=r.outDepth||Math.floor(I)!==I))for(var j=0;j<d;j+=l){var D=(M+j)/i;if(!(D<0||D>=r.outHeight||Math.floor(D)!==D))for(var L=0;L<h;L+=c){var A=(E+L)/s;if(!(A<0||A>=r.outWidth||Math.floor(A)!==A)){var R=f*d*h-1-y.get(w,I,D,A,x)===T*d*h+j*h+L?1:0;0!==R&&(N+=b.get(w,I,D,A,x)*R)}}}}g.set(N,w,C,_,k,x)}return g.toTensor()},t.prototype.cast=function(e,t){return BS(e,t,this)},t.prototype.reshape=function(e,t){return zS(e,t)},t.prototype.avgPool=function(e,t){return cD(e,"avgPool"),cD(e,"maxPool"),fD(this.readSync(e.dataId),e.shape,e.dtype,e.strides,t,"avg").toTensor().toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){cD(e,"resizeBilinear");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(Bw([o,t,n,u])),f=[r&&t>1?i-1:i,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0,p=f[0]/d[0],m=f[1]/d[1],v=0;v<o;v++)for(var g=0;g<t;g++)for(var y=p*g,b=Math.floor(y),w=y-b,x=Math.min(i-1,Math.ceil(y)),C=v*e.strides[0]+b*e.strides[1],_=v*e.strides[0]+x*e.strides[1],k=0;k<n;k++)for(var S=m*k,M=Math.floor(S),E=S-M,N=Math.min(s-1,Math.ceil(S)),T=C+M*e.strides[2],I=_+M*e.strides[2],j=C+N*e.strides[2],D=_+N*e.strides[2],L=0;L<u;L++){var A=l[T+L],R=l[I+L],P=A+(l[j+L]-A)*E,O=P+(R+(l[D+L]-R)*E-P)*w;c[h++]=O}return y_(c,[o,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){cD([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=new Float32Array(a*o*i*s),d=[n&&l>1?o-1:o,n&&c>1?i-1:i],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],p=d[0]/h[0],m=d[1]/h[1],v=this.readSync(e.dataId),g=0,y=0;y<a;y++)for(var b=y*t.strides[0],w=0;w<l;w++)for(var x=w*p,C=Math.floor(x),_=Math.min(Math.ceil(x),o-1),k=b+C*t.strides[1],S=b+_*t.strides[1],M=x-C,E=1-M,N=0;N<c;N++)for(var T=N*m,I=Math.floor(T),j=Math.min(Math.ceil(T),i-1),D=T-I,L=1-D,A=k+I*t.strides[2],R=k+j*t.strides[2],P=S+I*t.strides[2],O=S+j*t.strides[2],F=E*L,B=E*D,z=M*L,U=M*D,W=0;W<s;W++){var V=v[g++];f[A+W]+=V*F,f[R+W]+=V*B,f[P+W]+=V*z,f[O+W]+=V*U}return k_(f,[a,i,o,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){cD(e,"resizeNearestNeighbor");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=this.readSync(e.dataId),c=new Float32Array(o*t*n*u),f=[r&&t>1?i-1:i,r&&n>1?s-1:s],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=f[0]/d[0],p=f[1]/d[1],m=0,v=0;v<o;v++)for(var g=v*e.strides[0],y=0;y<t;y++)for(var b=h*y,w=g+Math.min(i-1,r?Math.round(b):Math.floor(b))*e.strides[1],x=0;x<n;x++)for(var C=p*x,_=w+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],k=0;k<u;k++){var S=l[_+k];c[m++]=S}return y_(c,[o,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){cD([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],f=new Float32Array(a*o*i*s),d=this.readSync(e.dataId),h=[n&&l>1?o-1:o,n&&c>1?i-1:i],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/p[0],v=h[1]/p[1],g=1/m,y=1/v,b=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2,x=0;x<a;x++)for(var C=x*t.strides[0],_=0;_<o;_++)for(var k=C+_*t.strides[1],S=Math.floor(_*g),M=Math.floor(S-b/2),E=0;E<i;E++)for(var N=k+E*t.strides[2],T=Math.floor(E*y),I=Math.floor(T-w/2),j=0;j<s;j++){for(var D=0,L=0;L<b;L++){var A=L+M;if(!(A<0||A>=l)){var R=C+A*e.strides[1],P=A*m;if(_===Math.min(o-1,n?Math.round(P):Math.floor(P)))for(var O=0;O<w;O++){var F=O+I;if(!(F<0||F>=c)){var B=R+F*e.strides[2],z=F*v;E===Math.min(i-1,n?Math.round(z):Math.floor(z))&&(D+=d[B+j])}}}}f[N+j]=D}return k_(f,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,a,o){cD([e,t,n,a,o],"batchNorm");for(var i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=a?this.readSync(a.dataId):new Float32Array([1]),c=o?this.readSync(o.dataId):new Float32Array([0]),f=new Float32Array(i.length),d=c.length,h=l.length,p=u.length,m=s.length,v=0,g=0,y=0,b=0,w=0;w<i.length;++w)f[w]=c[v++]+(i[w]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),v>=d&&(v=0),g>=m&&(g=0),y>=h&&(y=0),b>=p&&(b=0);return k_(f,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,a){cD(e,"localResponseNormalization4D");var o=e.shape[3],i=o-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%o,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,i),u=0;r<=a;r++){var l=s[r];u+=l*l}return u}for(var f=0;f<u;f++){var d=c(f),h=s[f]*Math.pow(n+r*d,-a);l[f]=h}return k_(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,a,o,i){cD(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),f=new Float32Array(e.size),d=e.size,h=0;h<d;h++){for(var p=h%s,m=h-p+Math.max(0,p-r),v=h-p+Math.min(s,p+r+1),g=0,y=m;y<v;y++)g+=Math.pow(l[y],2);for(g=o*g+a,y=m;y<v;y++){var b=-2*o*i*l[y]*c[h]/g;h===y&&(b+=Math.pow(g,-i)),b*=u[h],f[y]+=b}}return k_(f,e.shape)},t.prototype.multinomial=function(e,t,n,r){cD(e,"multinomial");for(var a=t?e:xS(e),o=a.shape[0],i=a.shape[1],s=M_([o,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(a.dataId),c=0;c<o;++c){var f=c*i,d=new Float32Array(i-1);d[0]=l[f];for(var h=1;h<d.length;++h)d[h]=d[h-1]+l[f+h];for(var p=eT(r.toString()),m=c*n,v=0;v<n;++v){var g=p();u[m+v]=d.length;for(var y=0;y<d.length;y++)if(g<d[y]){u[m+v]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){cD(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var o=this.readSync(e.dataId),i=0;i<e.size;++i)o[i]>=0&&o[i]<t&&(a[i*t+o[i]]=n);return C_(a,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,a){return cD(e,"nonMaxSuppression"),QS(this.readSync(e.dataId),this.readSync(t.dataId),n,r,a)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],a=O_(e.shape,"float32"),o=O_(e.shape,"float32"),i=v_(e).as2D(n,r),s=g_(e).as2D(n,r),u=0;u<n;u++)for(var l=i.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),f=m_(l,c),d=this.readSync(this.fftImpl(f,t).dataId),h=0;h<r;h++){var p=VS(d,h);a.values[u*r+h]=p.real,o.values[u*r+h]=p.imag}return m_(a.toTensor(),o.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var a=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(a=m_(v_(a).div(w_(r)),g_(a).div(w_(r)))),a}var o=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t));return m_(i.real,i.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),a=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),i=m_(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(r),u=m_(s.real,s.imag).as1D();i=this.fftRadix2(i,a,n),u=this.fftRadix2(u,a,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var o=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(o),r[a]=Math.sin(o)}return{real:n,imag:r}}(t,n),c=m_(l.real,l.imag).mul(u),f=i.add(c),d=i.sub(c),h=v_(f).concat(v_(d)),p=g_(f).concat(g_(d));return m_(h,p).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var o=0,i=0,s=0;s<t;s++){var u=YS(a*s,t,n),l=VS(e,s);o+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(o/=t,i/=t),HS(r,o,i,a)}return r},t.prototype.depthToSpace=function(e,t,n){Rw("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Rw(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],a=e.shape[1],o=e.shape[2],i=e.shape[3],s=a*t,u=o*t,l=i/(t*t),c=this.readSync(e.dataId),f=new Float32Array(r*s*u*l),d=0,h=0;h<r;++h)for(var p=0;p<s;++p)for(var m=Math.floor(p/t),v=p%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(v*t+g%t)*l,w=0;w<l;++w){var x=w+b+i*(y+o*(m+a*h));f[d++]=c[x]}return k_(f,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=lk(e.shape,t.shape),o=O_(a,n),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sk(e.shape,a),l=sk(t.shape,a),c=o.values;if(u.length+l.length===0)for(var f=0;f<c.length;++f)c[f]=r(i[f%i.length],s[f%s.length]);else{var d=this.bufferSync(e),h=this.bufferSync(t),p=function(n){var a=o.indexToLoc(n),f=a.slice(-e.rank);u.forEach((function(e){return f[e]=0}));var p=d.locToIndex(f),m=a.slice(-t.rank);l.forEach((function(e){return m[e]=0}));var v=h.locToIndex(m);c[n]=r(i[p],s[v])};for(f=0;f<c.length;++f)p(f)}return o.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=lk(e.shape,t.shape),a=O_(r,"float32"),o=O_(r,"float32"),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=sk(e.shape,r),l=sk(t.shape,r),c=a.values,f=o.values;if(u.length+l.length===0)for(var d=0;d<c.length;d++){var h=d%i.length,p=d%s.length,m=n(i[2*h],i[2*h+1],s[2*p],s[2*p+1]);c[d]=m.real,f[d]=m.imag}else{var v=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=a.indexToLoc(r),d=o.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var h=v.locToIndex(d),p=o.slice(-t.rank);l.forEach((function(e){return p[e]=0}));var m=g.locToIndex(p),y=n(i[2*h],i[2*h+1],s[2*m],s[2*m+1]);c[r]=y.real,f[r]=y.imag};for(d=0;d<c.length;d++)y(d)}return this.complex(a.toTensor(),o.toTensor())},t.prototype.split=function(e,t,n){return eM(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,a,o){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],f=t.shape[0],d=r[0],h=r[1],p=O_([f,d,h,c],"float32"),m=this.readSync(t.dataId),v=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=p.strides,w=0;w<f;w++){var x=4*w,C=m[x],_=m[x+1],k=m[x+2],S=m[x+3],M=v[w];if(!(M>=s))for(var E=d>1?(k-C)*(u-1)/(d-1):0,N=h>1?(S-_)*(l-1)/(h-1):0,T=0;T<d;T++){var I=d>1?C*(u-1)+T*E:.5*(C+k)*(u-1);if(I<0||I>u-1)for(var j=0;j<h;j++)for(var D=0;D<c;D++){var L=D+j*b[2]+T*b[1]+w*b[0];p.values[L]=o}else if("bilinear"===a){var A=Math.floor(I),R=Math.ceil(I),P=I-A;for(j=0;j<h;j++)if((Y=h>1?_*(l-1)+j*N:.5*(_+S)*(l-1))<0||Y>l-1)for(D=0;D<c;D++)L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=o;else{var O=Math.floor(Y),F=Math.ceil(Y),B=Y-O;for(D=0;D<c;D++){var z=g[L=D+O*y[2]+A*y[1]+M*y[0]],U=g[L=D+F*y[2]+A*y[1]+M*y[0]],W=g[L=D+O*y[2]+R*y[1]+M*y[0]],V=z+(U-z)*B,H=W+(g[L=D+F*y[2]+R*y[1]+M*y[0]]-W)*B;L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=V+(H-V)*P}}}else for(j=0;j<h;++j){var Y;if((Y=h>1?_*(l-1)+j*N:.5*(_+S)*(l-1))<0||Y>l-1)for(D=0;D<c;D++)L=D+j*b[2]+T*b[1]+w*b[0],p.values[L]=o;else{var G=Math.round(Y),q=Math.round(I);for(D=0;D<c;D++){var Q=D+G*y[2]+q*y[1]+M*y[0],X=D+j*b[2]+T*b[1]+w*b[0];p.values[X]=g[Q]}}}}}return p.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var a=dS(0,e,n),o=a.sliceRank,i=a.numUpdates,s=a.sliceSize,u=a.strides,l=a.outputSize;return this.scatter(e,t,n,l,s,i,o,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],a=uS(e,t),o=a[0],i=a[1],s=a[2],u=a[3];if(0===i)return y_([],o,e.dtype);for(var l=new Sx([i,s],e.dtype),c=this.readSync(t.dataId),f=this.readSync(e.dataId),d=0;d<i;d++){for(var h=[],p=0,m=0;m<r;m++){var v=c[d*r+m];p+=v*u[m],h.push(v)}if(p<0||p>=e.size/s)throw new Error("Invalid indices: "+h+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[d*s+g]=f[p*s+g]}return l.toTensor().reshape(o)},t.prototype.scatterND=function(e,t,n){var r=dS(0,e,n),a=r.sliceRank,o=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=w_(0);return this.scatter(e,t,n,u,i,o,a,s,l,!0)},t.prototype.fill=function(e,t,n){var r=Kw(n=n||ix(t),Bw(e));return r.fill(t),Yx.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=Kw(e.dtype,Bw(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return US(e,t,n)},t.prototype.scatter=function(e,t,n,r,a,o,i,s,u,l){var c=[r/a,a],f=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return y_([],n,t.dtype);var h=new Sx(c,t.dtype);h.values.fill(this.readSync(u.dataId)[0]);for(var p=0;p<o;p++){for(var m=[],v=0,g=0;g<i;g++){var y=f[p*i+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<a;b++)l?h.values[v*a+b]+=d[p*a+b]:h.values[v*a+b]=0===t.rank?d[0]:d[p*a+b]}return h.toTensor().reshape(n)},t}(SS);function mD(e,t){return{kernelName:e,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,a=n.backend,o=r,i=o.a,s=o.b,u=a;cD([i,s],e);var l=u.data.get(i.dataId).values,c=u.data.get(s.dataId).values,f=t(i.shape,s.shape,l,c,i.dtype),d=f[0],h=f[1];return{dataId:u.write(d,h,i.dtype),shape:h,dtype:i.dtype}}}}function vD(e){return function(t,n,r,a,o){var i=lk(t,n),s=i.length,u=lx(i),l=Xw(o,Bw(i)),c=t.length,f=n.length,d=lx(t),h=lx(n),p=sk(t,i),m=sk(n,i);if(p.length+m.length===0)for(var v=0;v<l.length;++v)l[v]=e(r[v%r.length],a[v%a.length]);else{var g=function(t){var n=bx(t,s,u),o=n.slice(-c);p.forEach((function(e){return o[e]=0}));var i=yx(o,c,d),v=n.slice(-f);m.forEach((function(e){return v[e]=0}));var g=yx(v,f,h);l[t]=e(r[i],a[g])};for(v=0;v<l.length;++v)g(v)}return[l,i]}}Yx.registerBackend("cpu",(function(){return new pD}),1);var gD=vD((function(e,t){return e/t})),yD=mD($_,gD),bD={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n,i=o.filterSize,s=o.strides,u=o.pad,l=o.includeBatchInIndex,c=r;cD(a,"MaxPoolWithArgmax");var f=c.data.get(a.dataId).values,d=ES(a.shape,i,s,[1,1],u),h=function(e,t,n,r,a){var o=fD(e,0,n,lx(t),a,"max"),i=dD(e,t,n,a,!0,r);return[o.values,i.values]}(f,a.shape,a.dtype,l,d),p=h[0],m=h[1],v=c.write(p,d.outShape,a.dtype),g=c.write(m,d.outShape,a.dtype);return[{dataId:v,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}},wD={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t,o=a.boxes,i=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n;cD(o,"NonMaxSuppressionWithScore");var h=XS(d.data.get(o.dataId).values,d.data.get(i.dataId).values,u,l,c,f);return[h.selectedIndices,h.selectedScores]}},xD={kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;cD(r,"square");for(var o=a.data.get(r.dataId).values,i=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];i[s]=u*u}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},CD=vD((function(e,t){var n=e-t;return n*n}));function _D(e,t,n,r,a){for(var o=Bw(t),i=t.length,s=lx(t),u=lx(a),l=Xw(n,Bw(a)),c=0;c<o;++c){for(var f=bx(c,i,s),d=new Array(f.length),h=0;h<d.length;h++)d[h]=f[r[h]];l[yx(d,i,u)]=e[c]}return l}for(var kD=0,SD=[wD,xD,mD(ek,CD),yD,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n.perm,i=r;cD(a,"transpose");for(var s=a.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=a.shape[o[l]];var c=_D(i.data.get(a.dataId).values,a.shape,a.dtype,o,u);return{dataId:i.write(c,u,a.dtype),shape:u,dtype:a.dtype}}},bD];kD<SD.length;kD++)Nw(SD[kD]);for(var MD,ED=function(e){this.variableNames=["A"];var t=lM(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},ND=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=lM(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},TD=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=CM(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},ID=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=CM(this.rank),o=sM("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=o[r];var s="vec2("+i.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},jD=0,DD=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,o=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u=i?[a.videoWidth,a.videoHeight]:[a.width,a.height],l=u[0],c=u[1],f=[c,l],d=[c,l,o];(s||i)&&(null==MD&&(MD=document.createElement("canvas").getContext("2d")),MD.canvas.width=l,MD.canvas.height=c,MD.drawImage(a,0,0,l,c),a=MD.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=Xx.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var p=xw().getBool("WEBGL_PACK")?new ND(d):new ED(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:$_,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;return function(e,t,n){var r=new RM("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new OM("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",e.shape,t.shape,!0)),n.runWebGLProgram(r,[e,t],"float32")}(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;$C("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=t,o=a.boxes,i=a.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,d=n,h=XS(d.readSync(o.dataId),d.readSync(i.dataId),u,l,c,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,o=new gN(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:ek,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=r.a,o=r.b,i=n,s=xw().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new OM("return (a - b) * (a - b);",a.shape,o.shape):new RM("return (a - b) * (a - b);",a.shape,o.shape);return i.compileAndRun(s,[a,o])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(e){for(var t,n=e.inputs,r=e.attrs,a=e.backend,o=n.x,i=r.perm,s=a,u=o.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=o.shape[i[c]];if(s.shouldExecuteOnCPU([o])){var f=_D(s.texData.get(o.dataId).values,o.shape,o.dtype,i,l);t=s.makeTensorInfo(l,o.dtype),s.texData.get(t.dataId).values=f}else t=function(e,t,n){var r=xw().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ID(e.shape,t):new TD(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}(o,i,s);return t}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,o=n,i=o.filterSize,s=o.strides,u=o.pad,l=o.includeBatchInIndex,c=r;Rw(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank "+a.shape.length+"."}));var f=[1,1];Rw(OS(s,f),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+f+"'"}));var d=ES(a.shape,i,s,f,u),h=function(e,t,n,r){var a=new qE(n,"max",!1),o=r.runWebGLProgram(a,[e],"float32");return a=new qE(n,"max",!0,!0,t),[o,r.runWebGLProgram(a,[e],"float32")]}(a,l,d,c);return[h[0],h[1]]}}];jD<DD.length;jD++)Nw(DD[jD]);for(var LD=0,AD=[{kernelName:"Add",inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=lk(n.shape,r.shape);return{a:function(){var t=e,r=uk(n.shape,a);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},b:function(){var t=e,n=uk(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},{kernelName:tk,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,o=r.shape,i=Array.from(o),s=a.length-1;s>=0;s--)if(a[s]===o[s])i[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): ["+a+"] cannot be broadcast to ["+o+"].");var u=[];for(s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return e.sum(u,!0)}}}},{kernelName:$_,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=lk(n.shape,r.shape);return{a:function(){var t=sS(e,r.toFloat()),o=uk(n.shape,a);return o.length>0?tj(t,o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=uk(r.shape,a);o.length>0&&(t=tj(t,o).reshape(r.shape));var i=YT(r);return Nk(sS(t,i.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=t[0],o=t[1],i=t[2],s=t[3],u=rT(a),l=null==s?w_(1):s,c=uk(o.shape,u.shape),f=[];if(1===o.rank){for(var d=0;d<u.shape.length-1;++d)f.push(u.shape[d]);f.push(1)}var h=oS(a,o),p=eS(e,l),m=jk(ik(i,w_(r))),v=eS(eS(eS(m,m),m),w_(-.5));return{x:function(){return 1===o.rank?V_(eS(eS(e,MT(m.as4D(1,1,1,o.shape[0]),f)),l),a.shape):V_(eS(eS(e,m),l),a.shape)},mean:function(){var e=eS(eS(m,w_(-1)),p);return 1===o.rank&&(e=tj(e,c)),V_(e,o.shape)},variance:function(){var e=eS(eS(v,h),p);return 1===o.rank&&(e=tj(e,c)),V_(e,o.shape)},scale:function(){var t=eS(h,m),n=eS(e,t);return 1===o.rank&&(n=tj(n,c)),V_(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=tj(t,c)),V_(t,o.shape)}}}},{kernelName:rk,gradFunc:function(e){return{x:function(){return e.toFloat()}}}},{kernelName:nk,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return M_(n.shape,"float32")}}}},{kernelName:ok,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return e.slice(a,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:ek,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=w_(2);return{a:function(){return eS(e,eS(a,oS(n,r)))},b:function(){return eS(e,eS(a,oS(r,n)))}}}},{kernelName:ak,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.reps;return{x:function(){var t=I_(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=t.add(e.slice([n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(n=0;n<a[0];++n)for(var o=0;o<a[1];++o)t=t.add(e.slice([n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(n=0;n<a[0];++n)for(o=0;o<a[1];++o)for(var i=0;i<a[2];++i)t=t.add(e.slice([n*r.shape[0],o*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(n=0;n<a[0];++n)for(o=0;o<a[1];++o)for(i=0;i<a[2];++i)for(var s=0;s<a[3];++s)t=t.add(e.slice([n*r.shape[0],o*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:"Transpose",gradFunc:function(e,t,n){var r=c_(n.perm);return{x:function(){return _S(e,r)}}}}];LD<AD.length;LD++)Tw(AD[LD]);var RD=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();xw().get("IS_BROWSER")&&xw().setPlatform("browser",new RD);var PD,OD=function(){function e(){this.util=n(7184),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=xw().global.fetch?xw().global.fetch(e,t):(null==PD&&(PD=n(7531)),PD(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();xw().get("IS_NODE")&&xw().setPlatform("node",new OD);var FD={float32:4,int32:4,uint16:2,uint8:1,bool:1};function BD(e,t){for(var n={},r=0,a=function(t){var a=t.name,o=t.dtype,i=t.shape,s=Bw(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=FD[l.dtype],f=e.slice(r,r+s*c),d="uint8"===l.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===o)u=Float32Array.from(d,(function(e){return e*l.scale+l.min}));else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=Int32Array.from(d,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===o){var h=Bw(t.shape);u=[];for(var p=0;p<h;p++){var m=new Uint32Array(e.slice(r,r+4))[0];r+=4;var v=new Uint8Array(e.slice(r,r+m));u.push(v),r+=m}}else{var g=FD[o];if(f=e.slice(r,r+s*g),"float32"===o)u=new Float32Array(f);else if("int32"===o)u=new Int32Array(f);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=new Uint8Array(f)}r+=s*g}n[a]=y_(u,i,o)},o=0,i=t;o<i.length;o++)a(i[o]);return n}function zD(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var UD="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function WD(e){return UD?Buffer.byteLength(e):new Blob([e]).size}function VD(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function HD(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function YD(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:WD(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:WD(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var GD=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),qD="://",QD=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Rw(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(qD)&&(t=t.slice(0,t.indexOf(qD))),Rw(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Rw(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function XD(e){if(-1===e.indexOf(qD))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+QD.getSchemes().join(","));return{scheme:e.split(qD)[0],path:e.split(qD)[1]}}function KD(e,t,n){return void 0===n&&(n=!1),yw(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,f;return bw(this,(function(d){switch(d.label){case 0:return Rw(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Rw((r=GD.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Rw(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),a=r[0],Rw((o=GD.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Rw(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),i=o[0],s=XD(e).scheme,u=XD(e).path,l=s===XD(e).scheme,[4,a.load()];case 1:return c=d.sent(),n&&l?[4,QD.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,i.save(c)];case 4:return f=d.sent(),!n||l?[3,6]:[4,QD.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var JD="models_store",ZD="model_info_store";function $D(){if(!xw().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function eL(e){var t=e.result;t.createObjectStore(JD,{keyPath:"modelPath"}),t.createObjectStore(ZD,{keyPath:"modelPath"})}var tL=function(){function e(e){if(this.indexedDB=$D(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return eL(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(JD,"readonly"),s=i.objectStore(JD).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},i.oncomplete=function(){return o.close()}}else{var u,l=YD(t),c=o.transaction(ZD,"readwrite"),f=c.objectStore(ZD),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});d.onsuccess=function(){var a=(u=o.transaction(JD,"readwrite")).objectStore(JD).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=c.objectStore(ZD)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(a.error)},t.onerror=function(e){return o.close(),r(a.error)}}},d.onerror=function(e){return o.close(),r(d.error)},c.oncomplete=function(){null==u?o.close():u.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}}))},e.URL_SCHEME="indexeddb://",e}(),nL=function(e){return xw().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tL.URL_SCHEME)?(t=e.slice(tL.URL_SCHEME.length),new tL(t)):null;var t};GD.registerSaveRouter(nL),GD.registerLoadRouter(nL);var rL=function(){function e(){this.indexedDB=$D()}return e.prototype.listModels=function(){return yw(this,void 0,void 0,(function(){var e=this;return bw(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return eL(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(ZD,"readonly"),o=a.objectStore(ZD).getAll();o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return yw(this,void 0,void 0,(function(){var t=this;return bw(this,(function(n){var r;return e=(r=e).startsWith(tL.URL_SCHEME)?r.slice(tL.URL_SCHEME.length):r,[2,new Promise((function(n,r){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return eL(a)},a.onsuccess=function(){var t,o=a.result,i=o.transaction(ZD,"readwrite"),s=i.objectStore(ZD),u=s.get(e);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),i=function(){var a=(t=o.transaction(JD,"readwrite")).objectStore(JD).delete(e);a.onsuccess=function(){return n(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}}))]}))}))},e}();if(xw().getBool("IS_BROWSER"))try{QD.registerManager(tL.URL_SCHEME,new rL)}catch(as){}var aL="/",oL="tensorflowjs_models",iL="info",sL="model_topology",uL="weight_specs",lL="weight_data",cL="model_metadata";function fL(e){return{info:[oL,e,iL].join(aL),topology:[oL,e,sL].join(aL),weightSpecs:[oL,e,uL].join(aL),weightData:[oL,e,lL].join(aL),modelMetadata:[oL,e,cL].join(aL)}}function dL(e){var t=e.split(aL);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(aL)}var hL=function(){function e(e){if(!xw().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=fL(this.modelPath)}return e.prototype.save=function(e){return yw(this,void 0,void 0,(function(){var t,n,r;return bw(this,(function(a){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=YD(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(UD)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}}))}))},e.prototype.load=function(){return yw(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return bw(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(a),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,t.userDefinedMetadata=o.userDefinedMetadata),null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(UD){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}(i),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),pL=function(e){return xw().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(hL.URL_SCHEME)?(t=e.slice(hL.URL_SCHEME.length),new hL(t)):null;var t};GD.registerSaveRouter(pL),GD.registerLoadRouter(pL);var mL=function(){function e(){Rw(xw().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Rw("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return yw(this,void 0,void 0,(function(){var e,t,n,r,a,o;return bw(this,(function(i){for(e={},t=oL+aL,n=aL+iL,r=0;r<this.LS.length;++r)(a=this.LS.key(r)).startsWith(t)&&a.endsWith(n)&&(o=dL(a),e[o]=JSON.parse(this.LS.getItem(a)));return[2,e]}))}))},e.prototype.removeModel=function(e){return yw(this,void 0,void 0,(function(){var t,n;return bw(this,(function(r){var a;if(e=(a=e).startsWith(hL.URL_SCHEME)?a.slice(hL.URL_SCHEME.length):a,t=fL(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(xw().getBool("IS_BROWSER"))try{QD.registerManager(hL.URL_SCHEME,new mL)}catch(as){}function vL(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var gL=function(){function e(t){if(!xw().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return yw(this,void 0,void 0,(function(){var t,n,r,a,o,i;return bw(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=a,[4,vL((function(){return o.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((i=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,i.href=t,[4,vL((function(){return i.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:YD(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),yL=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return yw(this,void 0,void 0,(function(){var e,t,n=this;return bw(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,a){var o=new FileReader;o.onload=function(o){var i=JSON.parse(o.target.result),s=i.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void a(e)}var c=[],f=[],d=[];u.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=f.indexOf(e);d[a]=n,-1===d.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:VD(d),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},t.onerror=function(t){return a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return HD(e.name)})),a={},o=0,i=e;o<i.length;o++)i[o].paths.forEach((function(e){var o=HD(e);if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'");if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.");a[e]=t[r.indexOf(o)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return a},e}();function bL(e,t,n,r){!function(e){Rw(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Rw(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Rw(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Rw(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(o){return o.then((function(o){var i=n+ ++a/e.length*(r-n);return t(i),o})),o})))}function wL(e,t){return yw(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c;return bw(this,(function(f){switch(f.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?xw().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),a=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,bL(r,t.onProgress,a,o)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,bL(s,t.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}}))}))}function xL(e){var t=this;return function(n,r,a){return void 0===r&&(r=""),yw(t,void 0,void 0,(function(){var t,o,i,s,u,l,c,f,d,h;return bw(this,(function(p){switch(p.label){case 0:if(t=n.map((function(){return!1})),o={},i=null!=a?a.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var u="quantization"in e?e.quantization.dtype:e.dtype,l=FD[u]*Bw(e.shape),c=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),i[n]=!0)})):c(),s.push(e.name),r+=l}))})),!i.every((function(e){return e})))throw u=a.filter((function(e,t){return!i[t]})),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return f=p.sent(),d={},h=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[h+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(f[h+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=BD(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),h+=t})),[2,d]}}))}))}}GD.registerSaveRouter((function(e){return xw().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(gL.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new gL(e)}(e.slice(gL.URL_SCHEME.length)):null}));var CL=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Rw("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=xw().platform.fetch,Rw(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Rw(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return yw(this,void 0,void 0,(function(){var t,n,r,a;return bw(this,(function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((a=o.sent()).ok)return[2,{modelArtifactsInfo:YD(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}}))}))},e.prototype.load=function(){return yw(this,void 0,void 0,(function(){var e,t,n,r,a,o,i,s,u,l,c,f;return bw(this,(function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,a=t.weightsManifest,o=t.generatedBy,i=t.convertedBy,s=t.format,u=t.userDefinedMetadata,null==r&&null==a)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==a?[3,7]:[4,this.loadWeights(a)];case 6:f=d.sent(),l=f[0],c=f[1],d.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:c,userDefinedMetadata:u,generatedBy:o,convertedBy:i,format:s}]}}))}))},e.prototype.loadWeights=function(e){return yw(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c,f;return bw(this,(function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],a=n[1],o=this.weightPathPrefix||r,i=[],s=0,u=e;s<u.length;s++)l=u[s],i.push.apply(i,l.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(o+e+a)}))})),[4,wL(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=d.sent(),[2,[i,VD(f)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function _L(e){return null!=e.match(CL.URL_SCHEME_REGEX)}var kL=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return _L(e)})):_L(e))?SL(e,{onProgress:t}):null};function SL(e,t){return new CL(e,t)}GD.registerSaveRouter(kL),GD.registerLoadRouter(kL);var ML,EL=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),NL=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),TL=Object.freeze({browserFiles:function(e){return new yL(e)},browserHTTPRequest:function(e,t){return SL(e,t)},concatenateArrayBuffers:VD,decodeWeights:BD,encodeWeights:function(e,t){return yw(this,void 0,void 0,(function(){var n,r,a,o,i,s=this;return bw(this,(function(u){switch(u.label){case 0:for(n=[],r=[],a=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),o=function(o){var i=a[o],u=Array.isArray(e)?e[o].tensor:e[i];if("float32"!==u.dtype&&"int32"!==u.dtype&&"bool"!==u.dtype&&"string"!==u.dtype)throw new Error("Unsupported dtype in weight '"+i+"': "+u.dtype);var l={name:i,shape:u.shape,dtype:u.dtype};if("string"===u.dtype){var c=new Promise((function(e){return yw(s,void 0,void 0,(function(){var t,n,r,a,o,i,s;return bw(this,(function(l){switch(l.label){case 0:return[4,u.bytes()];case 1:for(t=l.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),a=0,o=0;o<t.length;o++)i=t[o],s=new Uint8Array(new Uint32Array([i.length]).buffer),r.set(s,a),a+=4,r.set(i,a),a+=i.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(u.data());null!=t&&(l.group=t),n.push(l)},i=0;i<a.length;++i)o(i);return[4,Promise.all(r)];case 1:return[2,{data:zD(u.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new EL(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EL({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new EL({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return GD.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:YD,getSaveHandlers:function(e){return GD.getSaveHandlers(e)},http:SL,isHTTPScheme:_L,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),yw(this,void 0,void 0,(function(){return bw(this,(function(a){return[2,xL((function(e){return wL(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return GD.registerLoadRouter(e)},registerSaveRouter:function(e){return GD.registerSaveRouter(e)},weightsLoaderFactory:xL,withSaveHandler:function(e){return new NL(e)},copyModel:function(e,t){return yw(this,void 0,void 0,(function(){return bw(this,(function(n){return[2,KD(e,t,!1)]}))}))},listModels:function(){return yw(this,void 0,void 0,(function(){var e,t,n,r,a,o,i;return bw(this,(function(s){switch(s.label){case 0:e=QD.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(a=r[n],[4,QD.getManager(a).listModels()]):[3,4];case 2:for(i in o=s.sent())t[a+qD+i]=o[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return yw(this,void 0,void 0,(function(){return bw(this,(function(n){return[2,KD(e,t,!0)]}))}))},removeModel:function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){return t=XD(e),[2,QD.getManager(t.scheme).removeModel(t.path)]}))}))}}),IL=p_({confusionMatrix_:function(e,t,n){var r=n_(e,"labels","confusionMatrix"),a=n_(t,"predictions","confusionMatrix");Rw(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Rw(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Rw(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),Rw(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),Rw(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var o=TT(r.asType("int32"),n),i=TT(a.asType("int32"),n);return o.transpose().matMul(i).asType("int32")}}),jL=(Object.freeze({confusionMatrix:IL}),p_({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,o=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Sw("FromPixels",Yx.backendName))return Yx.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],f=l[1];if(i?s=e.getContext("2d").getImageData(0,0,c,f).data:r||n?s=e.data:(o||a)&&(null==ML&&(ML=document.createElement("canvas").getContext("2d")),ML.canvas.width=c,ML.canvas.height=f,ML.drawImage(e,0,0,c,f),s=ML.getImageData(0,0,c,f).data),4===t)u=new Int32Array(s);else{var d=c*f;u=new Int32Array(d*t);for(var h=0;h<d;h++)for(var p=0;p<t;++p)u[h*t+p]=s[4*h+p]}return __(u,[f,c,t],"int32")}})),DL=Object.freeze({toPixels:function(e,t){return yw(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C,_,k;return bw(this,(function(S){switch(S.label){case 0:if(n=n_(e,"img","toPixels"),e instanceof Tx||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],o=r[1],(i=2===n.rank?1:n.shape[2])>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=S.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=S.sent(),f=c[0],d=c[1],h=f[0],p=d[0],u.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m="float32"===n.dtype?255:1,v=new Uint8ClampedArray(o*a*4),g=0;g<a*o;++g)y=void 0,b=void 0,w=void 0,x=void 0,1===i?(y=s[g]*m,b=s[g]*m,w=s[g]*m,x=255):3===i?(y=s[3*g]*m,b=s[3*g+1]*m,w=s[3*g+2]*m,x=255):4===i&&(y=s[4*g]*m,b=s[4*g+1]*m,w=s[4*g+2]*m,x=s[4*g+3]*m),v[0+(C=4*g)]=Math.round(y),v[C+1]=Math.round(b),v[C+2]=Math.round(w),v[C+3]=Math.round(x);return null!=t&&(t.width=o,t.height=a,_=t.getContext("2d"),k=new ImageData(v,o,a),_.putImageData(k,0,0)),n!==e&&n.dispose(),[2,v]}}))}))},fromPixels:jL}),LL=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),AL=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function RL(e){Rw(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Rw("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Rw(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),AL.register(e)}Object.freeze({Serializable:LL,SerializationMap:AL,registerClass:RL}),Object.freeze({gpgpu_util:DE,webgl_util:QC,forceHalfFloat:function(){xw().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:YN,setWebGLContext:$x,GPGPUContext:LE});var PL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gw(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,o=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(i)}else this.applyGradients(o);return ZC(o),t?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Rw(sx(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Rw(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Rx})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Yx.registeredVariables)t.push(Yx.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,o=t.length;Rw((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var i=Yx.gradients(e,t,null,!0),s=i.value,u=i.grads;Rw(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Rw(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&ZC(this.iterations_)},t.prototype.saveIterations=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:w_(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(LL);Object.defineProperty(PL,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var OL=function(e){function t(t,n,r){void 0===r&&(r=null);var a=e.call(this)||this;return a.learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=Yx.backend.epsilon()),a}return gw(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Yx.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:JC((function(){return I_(a).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:JC((function(){return I_(a).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;JC((function(){var e=i.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(a);a.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(ZC(this.accumulatedGrads.map((function(e){return e.variable}))),ZC(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(PL);RL(OL);var FL=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return gw(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Yx.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:JC((function(){return E_(a.shape,t.initialAccumulatorValue).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedGrads[r].variable;JC((function(){var e=i.add(o.square());i.assign(e);var n=o.div(e.add(Yx.backend.epsilon()).sqrt()).mul(-t.learningRate).add(a);a.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&ZC(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(PL);RL(FL);var BL=function(e){function t(t,n,r,a){void 0===a&&(a=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],JC((function(){o.accBeta1=w_(n).variable(),o.accBeta2=w_(r).variable()})),null==a&&(o.epsilon=Yx.backend.epsilon()),o}return gw(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);JC((function(){var r=oS(1,t.accBeta1),a=oS(1,t.accBeta2);n.forEach((function(n,o){var i=Yx.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:JC((function(){return I_(i).variable(!1)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:JC((function(){return I_(i).variable(!1)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedSecondMoment[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),d=c.div(r),h=f.div(a);u.assign(c),l.assign(f);var p=d.div(h.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(p)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&ZC(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&ZC(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){var t,n=this;return bw(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),JC((function(){n.accBeta1.assign(nS(n.beta1,n.iterations_+1)),n.accBeta2.assign(nS(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(PL);RL(BL);var zL=function(e){function t(t,n,r,a,o){void 0===a&&(a=null),void 0===o&&(o=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.decay=o,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],JC((function(){i.iteration=w_(0).variable(),i.accBeta1=w_(n).variable()})),null==a&&(i.epsilon=Yx.backend.epsilon()),i}return gw(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);JC((function(){var r=oS(1,t.accBeta1),a=sS(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,o){var i=Yx.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:I_(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:I_(i).variable(!1)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[o].variable,l=t.accumulatedWeightedInfNorm[o].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),f=l.mul(t.beta2),d=s.abs(),h=f.maximum(d);u.assign(c),l.assign(h);var p=a.div(r).mul(c.div(h.add(t.epsilon))).add(i);i.assign(p)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&ZC(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&ZC(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(PL);RL(zL);var UL=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return gw(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var o=Yx.registeredVariables[n];JC((function(){var e=t.c.mul(a).add(o);o.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Yx.keep(e)}(w_(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(PL);RL(UL);var WL=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=w_(a.momentum),a}return gw(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Yx.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:JC((function(){return I_(a).variable(!1)}))});var o=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&JC((function(){var e,n=t.m.mul(o).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(a):t.c.mul(n).add(a),o.assign(n),a.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&ZC(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){return bw(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){return bw(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(UL);RL(WL);var VL=function(e){function t(t,n,r,a,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===o&&(o=!1);var i=e.call(this)||this;if(i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=a,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=o,null==a&&(i.epsilon=Yx.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return gw(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Yx.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:JC((function(){return I_(a).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:JC((function(){return I_(a).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:JC((function(){return I_(a).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;JC((function(){var e=i.mul(t.decay).add(o.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(o.mul(1-t.decay)),l=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(u),s.assign(l);var c=a.sub(l);a.assign(c)}else{var f=i.mul(t.decay).add(o.square().mul(1-t.decay));l=s.mul(t.momentum).add(o.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),i.assign(f),s.assign(l),c=a.sub(l),a.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&ZC(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&ZC(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&ZC(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return yw(this,void 0,void 0,(function(){var e;return bw(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return yw(this,void 0,void 0,(function(){var t;return bw(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(PL);RL(VL);var HL=function(){function e(){}return e.sgd=function(e){return new UL(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new WL(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new VL(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new BL(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new OL(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new zL(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new FL(e,t)},e}();HL.sgd,HL.momentum,HL.adadelta,HL.adagrad,HL.rmsprop,HL.adamax,HL.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Tx.prototype.add=function(e){return ik(this,e)},Tx.prototype.broadcastTo=function(e){return gT(this,e)},Tx.prototype.div=function(e){return sS(this,e)},Tx.prototype.divNoNan=function(e){return ST(this,e)},Tx.prototype.squaredDifference=function(e){return GT(this,e)},Tx.prototype.tile=function(e){return MT(this,e)},Tx.prototype.oneHot=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),TT(this,e,t,n)},Tx.prototype.transpose=function(e){return _S(this,e)},Tx.prototype.pad=function(e,t){return IT(this,e,t)},Tx.prototype.batchNorm=function(e,t,n,r,a){return sT(this,e,t,n,r,a)},Ex=lD;var YL=function(){function e(e,t){if(!tA(e)||!tA(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}(),GL=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}();function qL(e,t){return e instanceof Tx&&e.shape.length===t}function QL(e){return qL(e,3)}function XL(e){return qL(e,4)}function KL(e){return e%2===0}function JL(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function ZL(e){return e&&e.width&&e.height}function $L(e){return e.reduce((function(e,t){return e.add(t)}),new GL(0,0)).div(new GL(e.length,e.length))}function eA(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function tA(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function nA(e){return tA(e)&&0<=e&&e<=1}var rA,aA=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},a=[r.left,r.top,r.right,r.bottom].every(tA),o=[r.x,r.y,r.width,r.height].every(tA);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],c=i[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(tA)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new GL(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new GL(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new GL(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new GL(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,a=t.width,o=t.height,i=Math.abs(a-o);return a<o&&(n-=i/2,a+=i),o<a&&(r-=i/2,o+=i),new e({x:n,y:r,width:a,height:o})},e.prototype.rescale=function(t){var n=ZL(t)?t.width:t,r=ZL(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,a=r.x,o=r.y,i=r.right,s=r.bottom,u=Math.max(a,0),l=Math.max(o,0),c=i-u,f=s-l;return new e({x:u,y:l,width:Math.min(c,t-u),height:Math.min(f,n-l)}).floor()},e.prototype.shift=function(t,n){var r=this.width,a=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,a=n,o=r,i=this.left,s=this.top,u=this.right,l=this.bottom;return u>t&&(a=-u+t+n,u=t),l>e&&(o=-l+e+r,l=e),i<1&&(o=2-i,i=1),s<1&&(o=2-s,s=1),{dy:1,edy:o,dx:1,edx:a,y:s,ey:l,x:i,ex:u,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),oA=function(e){function t(t,n,r,a,o){return void 0===o&&(o=!1),e.call(this,{left:t,top:n,right:r,bottom:a},o)||this}return Mu(t,e),t}(aA),iA=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Mu(t,e),t.assertIsValidLabeledBox=function(e,t){if(aA.assertIsValidBox(e,t),!tA(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(aA),sA=function(){function e(e,t,n,r,a){this._imageDims=new YL(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new aA(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new aA(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),uA=(function(e){function t(t,n,r,a){var o=e.call(this,t,n)||this;return o._score=r,o._classScore=a,o}Mu(t,e),t.assertIsValidPredictedBox=function(e,t){if(iA.assertIsValidLabeledBox(e,t),!nA(e.score)||!nA(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(iA),function(e){function t(t,n,r,a,o){return void 0===o&&(o=!1),e.call(this,{x:t,y:n,width:r,height:a},o)||this}return Mu(t,e),t}(aA));function lA(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function cA(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(O$){t=O$.toString()}var r=e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function fA(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=cA();return Eu({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},a)}function dA(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function hA(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function pA(e){rA=e}function mA(){dA()&&pA(lA()),hA()&&pA(fA())}var vA,gA={getEnv:function(){if(!rA)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return rA},setEnv:pA,initialize:mA,createBrowserEnv:lA,createFileSystem:cA,createNodejsEnv:fA,monkeyPatch:function(e){if(rA||mA(),!rA)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?rA.Canvas:t,r=e.Image,a=void 0===r?rA.Image:r;rA.Canvas=n,rA.Image=a,rA.createCanvasElement=e.createCanvasElement||function(){return new n},rA.createImageElement=e.createImageElement||function(){return new a},rA.ImageData=e.ImageData||rA.ImageData,rA.Video=e.Video||rA.Video,rA.fetch=e.fetch||rA.fetch,rA.readFile=e.readFile||rA.readFile},isBrowser:dA,isNodejs:hA};function yA(e){return gA.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function bA(e){var t=gA.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=yA(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=r.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}mA(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(vA||(vA={}));var wA=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,a=e.fontSize,o=e.fontStyle,i=e.padding;this.anchorPosition=t||vA.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=o||"Georgia",this.padding=i||4},xA=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new wA(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===vA.BOTTOM_RIGHT||n===vA.TOP_RIGHT,a=n===vA.BOTTOM_LEFT||n===vA.BOTTOM_RIGHT,o=this.measureWidth(e),i=this.measureHeight(),s=r?this.anchor.x-o:this.anchor.x,u=a?this.anchor.y-i:this.anchor.y;if(t){var l=t.width,c=t.height;return{x:Math.max(Math.min(s,l-o),0),y:Math.max(Math.min(u,c-i),0)}}return{x:s,y:u}},e.prototype.draw=function(e){var t=yA(e),n=bA(t),r=this.options,a=r.backgroundColor,o=r.fontColor,i=r.fontSize,s=r.fontStyle,u=r.padding;n.font=i+"px "+s;var l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=a;var f=this.getUpperLeft(n,t);n.fillRect(f.x,f.y,l,c),n.fillStyle=o,this.text.forEach((function(e,t){var r=u+f.x,a=u+f.y+(t+1)*i;n.fillText(e,r,a)}))},e}(),CA=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,a=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var o={anchorPosition:vA.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new wA(Object.assign({},o,a))},_A=function(){function e(e,t){void 0===t&&(t={}),this.box=new aA(e),this.options=new CA(t)}return e.prototype.draw=function(e){var t=bA(e),n=this.options,r=n.boxColor,a=n.lineWidth,o=this.box,i=o.x,s=o.y,u=o.width,l=o.height;t.strokeStyle=r,t.lineWidth=a,t.strokeRect(i,s,u,l);var c=this.options.label;c&&new xA([c],{x:i-a/2,y:s},this.options.drawLabelOptions).draw(e)},e}();function kA(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),JC((function(){var a=ik(pI(e,t.filters,[1,1],n),t.bias);return r?ij(a):a}))}function SA(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function MA(e,t){return function(n,r,a,o){var i=k_(e(n*r*a*a),[a,a,n,r]),s=x_(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:i,bias:s}}}function EA(e,t){return function(n,r,a){var o=C_(e(n*r),[n,r]),i=x_(e(r));return t.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:i}}}var NA=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function TA(e,t){return function(n,r,a){var o=k_(e(9*n),[3,3,n,1]),i=k_(e(n*r),[1,1,n,r]),s=x_(e(r));return t.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new NA(o,i,s)}}function IA(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),a=e(t+"/bias",1);return new NA(n,r,a)}}function jA(e,t){return function(n,r,a){var o=e[n];if(!qL(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:n,paramPath:a||n}),o}}function DA(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function LA(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter((function(e){return e})),o=e.endsWith(".json")?a[a.length-1]:n,i=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return{modelBaseUri:i=e.startsWith("/")?"/"+i:i,manifestUri:"/"===i?"/"+o:i+"/"+o}}function AA(e){var t=gA.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function RA(e){var t=gA.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new YL(e.naturalWidth,e.naturalHeight):e instanceof r?new YL(e.videoWidth,e.videoHeight):new YL(e.width,e.height)}function PA(e){var t=e.width,n=e.height,r=(0,gA.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function OA(e,t){var n=gA.getEnv().ImageData;if(!(e instanceof n)&&!AA(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||RA(e),a=r.width,o=r.height,i=PA({width:a,height:o});return e instanceof n?bA(i).putImageData(e,0,0):bA(i).drawImage(e,0,0,a,o),i}function FA(e,t){return Nu(this,void 0,void 0,(function(){var n;return Tu(this,(function(r){switch(r.label){case 0:return[4,(0,gA.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function BA(e){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(t){switch(t.label){case 0:return[4,FA(e)];case 1:return[2,t.sent().json()]}}))}))}function zA(e,t){return Nu(this,void 0,void 0,(function(){var n,r,a,o,i,s;return Tu(this,(function(u){switch(u.label){case 0:return n=t||gA.getEnv().createCanvasElement(),r=e.shape.slice(XL(e)?1:0),a=r[0],o=r[1],i=r[2],s=JC((function(){return e.as3D(a,o,i).toInt()})),[4,DL.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function UA(e){var t=gA.getEnv(),n=t.Image,r=t.Canvas,a=t.Video;return e instanceof n||e instanceof r||e instanceof a}function WA(e,t){return Nu(this,void 0,void 0,(function(){var n,r,a,o;return Tu(this,(function(i){switch(i.label){case 0:return n=LA(e,t),r=n.manifestUri,a=n.modelBaseUri,[4,BA(r)];case 1:return o=i.sent(),[2,TL.loadWeights(o,a)]}}))}))}var VA=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(QL(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(XL(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var a=e instanceof gA.getEnv().Canvas?e:OA(e);n._canvases[t]=a,n._inputDimensions[t]=[a.height,a.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return eA(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,a=t/Math.max(r,n);return new YL(Math.round(n*a),Math.round(r*a))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,JC((function(){var r=eA(n.batchSize,0,1).map((function(r){var a=n.getInput(r);if(a instanceof Tx){var o=XL(a)?a:a.expandDims();return o=function(e,t){return void 0===t&&(t=!1),JC((function(){var n=e.shape.slice(1),r=n[0],a=n[1];if(r===a)return e;var o=Math.abs(r-a),i=Math.round(o*(t?.5:1)),s=r>a?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,E_(n,0)},l=u(i),c=o-l.shape[s],f=[t&&c?u(c):null,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return j_(f,s)}))}(o,t),o.shape[1]===e&&o.shape[2]===e||(o=eD.resizeBilinear(o,[e,e])),o.as3D(e,e,3)}if(a instanceof gA.getEnv().Canvas)return DL.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=gA.getEnv(),a=r.Image,o=r.Canvas;if(!(e instanceof a||e instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=RA(e),s=t/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,c=PA({width:t,height:t}),f=e instanceof o?e:OA(e),d=Math.abs(u-l)/2,h=n&&u<l?d:0,p=n&&l<u?d:0;return bA(c).drawImage(f,h,p,u,l),c}(a,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)})),a=G_(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return a}))},e}();function HA(e){return Nu(this,void 0,void 0,(function(){var t,n,r;return Tu(this,(function(a){switch(a.label){case 0:if(e instanceof VA)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(yA)).forEach((function(e,r){if(!UA(e)&&!QL(e)&&!XL(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(XL(e)){var a=e.shape[0];if(1!==a)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return UA(e)&&(t=e,new Promise((function(e,n){if(t instanceof gA.getEnv().Canvas||AA(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",a),e(t))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",a),n(e))}t.addEventListener("load",r),t.addEventListener("error",a)})));var t})))];case 1:return a.sent(),[2,new VA(r,Array.isArray(e))]}}))}))}var YA=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,a=n.objProp;r[a].dispose(),r[a]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Rx}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Rx)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,a=y_(r.dataSync());r.dispose(),e.reassignParamFromPath(n,a)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,WA(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Nu(this,void 0,void 0,(function(){var t,n,r,a,o,i,s,u,l,c;return Tu(this,(function(f){switch(f.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=gA.getEnv().readFile,n=LA(e,this.getDefaultModelName()),r=n.manifestUri,a=n.modelBaseUri,o=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},i=TL.weightsLoaderFactory(o),l=(u=JSON).parse,[4,t(r)];case 1:return s=l.apply(u,[f.sent().toString()]),[4,i(s,a)];case 2:return c=f.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Tx))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function GA(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function qA(e,t,n,r){void 0===r&&(r=!0);for(var a=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),o=[],i=function(){var t=a.pop();o.push(t);for(var i=a,s=[],u=0;u<i.length;u++){var l=i[u],c=e[t],f=e[l];s.push(GA(c,f,r))}a=a.filter((function(e,t){return s[t]<=n}))};a.length>0;)i();return o}function QA(e,t){return JC((function(){var n=t[0],r=t[1],a=t[2],o=E_(Iu(e.shape.slice(0,3),[1]),n),i=E_(Iu(e.shape.slice(0,3),[1]),r),s=E_(Iu(e.shape.slice(0,3),[1]),a),u=j_([o,i,s],3);return oS(e,u)}))}function XA(e){return 1/(1+Math.exp(-e))}var KA,JA=function(e){return"number"===typeof e};function ZA(e){return JC((function(){var t=eS(e,w_(.10000000149011612));return ik(ij(oS(e,t)),t)}))}function $A(e,t){return JC((function(){var n=IT(e,[[0,0],[1,1],[1,1],[0,0]]);return n=pI(n,t.conv.filters,[1,1],"valid"),n=oS(n,t.bn.sub),n=eS(n,t.bn.truediv),ZA(n=ik(n,t.conv.bias))}))}function eR(e,t){return JC((function(){var n=IT(e,[[0,0],[1,1],[1,1],[0,0]]);return n=xI(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),ZA(n=ik(n,t.bias))}))}function tR(e,t){var n=MA(e,t);var r=TA(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,o){var i=n(r,a,3,o+"/conv"),s=function(n,r){var a=x_(e(n)),o=x_(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:a,truediv:o}}(a,o+"/bn");return{conv:i,bn:s}},extractSeparableConvParams:r}}function nR(e,t){var n=jA(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),a=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:a}},extractSeparableConvParams:IA(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(KA||(KA={}));var rR=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),aR=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!JA(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return JA(e.x)&&JA(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(JA)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Mu(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=$A(e,t.conv0);return n=$A(n=AI(n,[2,2],[2,2],"same"),t.conv1),n=$A(n=AI(n,[2,2],[2,2],"same"),t.conv2),n=$A(n=AI(n,[2,2],[2,2],"same"),t.conv3),n=$A(n=AI(n,[2,2],[2,2],"same"),t.conv4),n=$A(n=AI(n,[2,2],[2,2],"same"),t.conv5),n=$A(n=AI(n,[2,2],[1,1],"same"),t.conv6),kA(n=$A(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?ZA(kA(e,t.conv0,"valid",!1)):eR(e,t.conv0);return n=eR(n=AI(n,[2,2],[2,2],"same"),t.conv1),n=eR(n=AI(n,[2,2],[2,2],"same"),t.conv2),n=eR(n=AI(n,[2,2],[2,2],"same"),t.conv3),n=eR(n=AI(n,[2,2],[2,2],"same"),t.conv4),n=eR(n=AI(n,[2,2],[2,2],"same"),t.conv5),n=AI(n,[2,2],[1,1],"same"),n=t.conv6?eR(n,t.conv6):n,kA(n=t.conv7?eR(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return JC((function(){var a=e.toBatchTensor(t,!1).toFloat();return a=(a=n.config.meanRgb?QA(a,n.config.meanRgb):a).div(w_(256)),n.config.withSeparableConvs?n.runMobilenet(a,r):n.runTinyYolov2(a,r)}))},t.prototype.forward=function(e,t){return Nu(this,void 0,void 0,(function(){var n;return Tu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,HA(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Nu(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f,d,h,p,m=this;return Tu(this,(function(v){switch(v.label){case 0:return n=new rR(t),r=n.inputSize,a=n.scoreThreshold,[4,HA(e)];case 1:return o=v.sent(),[4,this.forwardInput(o,r)];case 2:return i=v.sent(),s=JC((function(){return q_(i)[0].expandDims()})),u={width:o.getInputWidth(0),height:o.getInputHeight(0)},[4,this.extractBoxes(s,o.getReshapedInputDimensions(0),a)];case 3:return l=v.sent(),i.dispose(),s.dispose(),c=l.map((function(e){return e.box})),f=l.map((function(e){return e.score})),d=l.map((function(e){return e.classScore})),h=l.map((function(e){return m.config.classes[e.label]})),p=qA(c.map((function(e){return e.rescale(r)})),f,this.config.iouThreshold,!0),[2,p.map((function(e){return new sA(f[e],d[e],h[e],c[e],u)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],a=nR(e,r),o=a.extractConvParams,i=a.extractConvWithBatchNormParams,s=a.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?o("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:o("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return SA(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var a,o=DA(e),i=o.extractWeights,s=o.getRemainingWeights,u=[],l=tR(i,u),c=l.extractConvParams,f=l.extractConvWithBatchNormParams,d=l.extractSeparableConvParams;if(t.withSeparableConvs){var h=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8];a={conv0:t.isFirstLayerConv2d?c(h,p,3,"conv0"):d(h,p,"conv0"),conv1:d(p,m,"conv1"),conv2:d(m,v,"conv2"),conv3:d(v,g,"conv3"),conv4:d(g,y,"conv4"),conv5:d(y,b,"conv5"),conv6:w?d(b,w,"conv6"):void 0,conv7:x?d(w,x,"conv7"):void 0,conv8:c(x||w||b,5*n,1,"conv8")}}else h=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8],a={conv0:f(h,p,"conv0"),conv1:f(p,m,"conv1"),conv2:f(m,v,"conv2"),conv3:f(v,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,b,"conv5"),conv6:f(b,w,"conv6"),conv7:f(w,x,"conv7"),conv8:c(x,5*n,1,"conv8")};if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:a,paramMappings:u}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Nu(this,void 0,void 0,(function(){var r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C,_,k,S,M,E,N,T,I,j,D=this;return Tu(this,(function(L){switch(L.label){case 0:return r=t.width,a=t.height,o=Math.max(r,a),i=o/r,s=o/a,u=e.shape[1],l=this.config.anchors.length,c=JC((function(){var t=e.reshape([u,u,l,D.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),D.withClassScores?xS(t.slice([0,0,0,5],[u,u,l,D.config.classes.length]),3):w_(0)]})),f=c[0],d=c[1],h=c[2],p=[],[4,d.array()];case 1:return m=L.sent(),[4,f.array()];case 2:v=L.sent(),g=0,L.label=3;case 3:if(!(g<u))return[3,12];y=0,L.label=4;case 4:if(!(y<u))return[3,11];b=0,L.label=5;case 5:return b<l?(w=XA(m[g][y][b][0]),!n||w>n?(x=(y+XA(v[g][y][b][0]))/u*i,C=(g+XA(v[g][y][b][1]))/u*s,_=Math.exp(v[g][y][b][2])*this.config.anchors[b].x/u*i,k=Math.exp(v[g][y][b][3])*this.config.anchors[b].y/u*s,S=x-_/2,M=C-k/2,E={row:g,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(h,E)]:[3,7]):[3,9]):[3,10];case 6:return j=L.sent(),[3,8];case 7:j={classScore:1,label:0},L.label=8;case 8:T=(N=j).classScore,I=N.label,p.push(Eu({box:new oA(S,M,S+_,M+k),score:w,classScore:w*T,label:I},E)),L.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return f.dispose(),d.dispose(),h.dispose(),[2,p]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Nu(this,void 0,void 0,(function(){var n,r,a,o;return Tu(this,(function(i){switch(i.label){case 0:return n=t.row,r=t.col,a=t.anchor,[4,e.array()];case 1:return o=i.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return o[n][r][a][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(YA);function oR(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var a=n.x,o=n.y,i=t[r];e.moveTo(i.x,i.y),e.lineTo(a,o)})),n){var r=t[t.length-1],a=t[0];if(!r||!a)return;e.moveTo(r.x,r.y),e.lineTo(a.x,a.y)}e.stroke()}var iR=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Mu(t,e),t.prototype.forSize=function(n,r){var a=e.prototype.forSize.call(this,n,r);return new t(a.score,a.relativeBox,a.imageDims)},t}(sA);function sR(e){return e.detection instanceof iR}function uR(e,t){var n={detection:t};return Object.assign({},e,n)}function lR(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof iR?t.score:sR(t)?t.detection.score:void 0,r=t instanceof iR?t.box:sR(t)?t.detection.box:new aA(t),a=n?""+JL(n):void 0;new _A(r,{label:a}).draw(e)}))}function cR(e,t,n){return Xc((function(){var r=Uv(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=jg(r,t.bias)}))}function fR(e,t,n){return void 0===n&&(n=!1),Xc((function(){var r=iy(n?jg(Ov(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):cR(e,t.conv0,[2,2])),a=cR(r,t.conv1,[1,1]),o=cR(iy(jg(r,a)),t.conv2,[1,1]);return iy(jg(r,jg(a,o)))}))}function dR(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),Xc((function(){var a=iy(n?jg(Ov(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):cR(e,t.conv0,r?[2,2]:[1,1])),o=cR(a,t.conv1,[1,1]),i=cR(iy(jg(a,o)),t.conv2,[1,1]),s=cR(iy(jg(a,jg(o,i))),t.conv3,[1,1]);return iy(jg(a,jg(o,jg(i,s))))}))}function hR(e,t){var n=MA(e,t),r=TA(e,t);function a(e,t,a,o){return void 0===o&&(o=!1),{conv0:o?n(e,t,3,a+"/conv0"):r(e,t,a+"/conv0"),conv1:r(t,t,a+"/conv1"),conv2:r(t,t,a+"/conv2")}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n,o){void 0===o&&(o=!1);var i=a(e,t,n,o);return{conv0:i.conv0,conv1:i.conv1,conv2:i.conv2,conv3:r(t,t,n+"/conv3")}}}}function pR(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function mR(e,t){var n=jA(e,t),r=pR(n),a=IA(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):a(e+"/conv0"),conv1:a(e+"/conv1"),conv2:a(e+"/conv2"),conv3:a(e+"/conv3")}}}}var vR=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Xc((function(){var n=dR(QA(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(bf(255)),t.dense0,!0);return n=dR(n,t.dense1),n=dR(n,t.dense2),n=dR(n,t.dense3),n=eg(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=mR(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return SA(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=DA(e),r=n.extractWeights,a=n.getRemainingWeights,o=hR(r,t).extractDenseBlock4Params,i=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2"),l=o(128,256,"dense3");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}(e)},t}(YA);function gR(e,t){return Xc((function(){return jg(Vv(e,t.weights),t.bias)}))}function yR(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var bR=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Mu(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Xc((function(){var r=e instanceof VA?t.faceFeatureExtractor.forwardInput(e):e;return gR(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],a=DA(e),o=a.extractWeights,i=a.getRemainingWeights,s=EA(o,r)(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=yR(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=jA(e,n),a={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return SA(e,n),{params:a,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},t}(YA),wR=["neutral","happy","sad","angry","fearful","disgusted","surprised"],xR=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);wR.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return wR.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),CR=function(e){function t(t){return void 0===t&&(t=new vR),e.call(this,"FaceExpressionNet",t)||this}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this;return Xc((function(){return Dd(t.runNet(e))}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Nu(this,void 0,void 0,(function(){var t,n,r,a,o=this;return Tu(this,(function(i){switch(i.label){case 0:return[4,HA(e)];case 1:return t=i.sent(),[4,this.forwardInput(t)];case 2:return n=i.sent(),[4,Promise.all(gd(n).map((function(e){return Nu(o,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=i.sent(),n.dispose(),a=r.map((function(e){return new xR(e)})),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(bR);function _R(e,t){var n={expressions:t};return Object.assign({},e,n)}function kR(e,t,n,r){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach((function(t){var a=t instanceof xR?t:t.expressions instanceof xR?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var o=a.asSortedArray().filter((function(e){return e.probability>n})),i=sR(t)?t.detection.box.bottomLeft:r||new GL(0,0),s=new xA(o.map((function(e){return e.expression+" ("+JL(e.probability)+")"})),i);s.draw(e)}))}var SR=function(){function e(e,t,n){void 0===n&&(n=new GL(0,0));var r=t.width,a=t.height;this._imgDims=new YL(r,a),this._shift=n,this._positions=e.map((function(e){return e.mul(new GL(r,a)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new GL(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new GL(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new GL(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof iR?e.box.floor():new aA(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),a=r.useDlibAlignment,o=r.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],a=function(e){return r.sub(e).magnitude()},o=(a(t)+a(n))/2,i=Math.floor(o/.45),s=$L(e),u=Math.floor(Math.max(0,s.x-.5*i)),l=Math.floor(Math.max(0,s.y-.43*i));return new uA(u,l,Math.min(i,this.imageWidth+u),Math.min(i,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),a=n.reduce((function(e,t){return t<e?t:e}),1/0),o=t.reduce((function(e,t){return e<t?t:e}),0),i=n.reduce((function(e,t){return e<t?t:e}),0);return new oA(r,a,o,i)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),MR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map($L)},t}(SR);function ER(e){return sR(e)&&e.landmarks instanceof SR&&e.unshiftedLandmarks instanceof SR&&e.alignedRect instanceof iR}function NR(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),a=r.align(),o=e.detection.imageDims,i={landmarks:r,unshiftedLandmarks:t,alignedRect:new iR(e.detection.score,a.rescale(o.reverse()),o)};return Object.assign({},e,i)}var TR=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,a=void 0===r||r,o=e.lineWidth,i=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=a,this.lineWidth=o||1,this.pointSize=s||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"},IR=function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new TR(t)}return e.prototype.draw=function(e){var t=bA(e),n=this.options,r=n.drawLines,a=n.drawPoints,o=n.lineWidth,i=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof MR&&(t.strokeStyle=i,t.lineWidth=o,oR(t,this.faceLandmarks.getJawOutline()),oR(t,this.faceLandmarks.getLeftEyeBrow()),oR(t,this.faceLandmarks.getRightEyeBrow()),oR(t,this.faceLandmarks.getNose()),oR(t,this.faceLandmarks.getLeftEye(),!0),oR(t,this.faceLandmarks.getRightEye(),!0),oR(t,this.faceLandmarks.getMouth(),!0)),a){t.strokeStyle=u,t.fillStyle=u;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()}))}},e}();function jR(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){var n=t instanceof SR?t:ER(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new IR(n).draw(e)}))}function DR(e,t){var n=[],r=DA(e),a=r.extractWeights,o=r.getRemainingWeights,i=function(e,t){var n=MA(e,t),r=TA(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,a+"/separable_conv0"),separable_conv1:r(t,t,a+"/separable_conv1"),expansion_conv:n(e,t,1,a+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(a,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,c=i.extractMainBlockParams,f={conv_in:s(3,32,3,"entry_flow/conv_in"),reduction_block_0:l(32,64,"entry_flow/reduction_block_0"),reduction_block_1:l(64,128,"entry_flow/reduction_block_1")},d={};eA(t,0,1).forEach((function(e){d["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var h={reduction_block:l(128,256,"exit_flow/reduction_block"),separable_conv:u(256,512,"exit_flow/separable_conv")};if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:f,middle_flow:d,exit_flow:h}}}function LR(e,t){var n=[],r=function(e,t){var n=jA(e,t),r=pR(n),a=IA(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:a(e+"/separable_conv0"),separable_conv1:a(e+"/separable_conv1"),separable_conv2:a(e+"/separable_conv2")}}}}(e,n),a=r.extractConvParams,o=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u={conv_in:a("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},l={};eA(t,0,1).forEach((function(e){l["main_block_"+e]=s("middle_flow/main_block_"+e)}));var c={reduction_block:i("exit_flow/reduction_block"),separable_conv:o("exit_flow/separable_conv")};return SA(e,n),{params:{entry_flow:u,middle_flow:l,exit_flow:c},paramMappings:n}}function AR(e,t,n){return jg(Ov(e,t.filters,n,"same"),t.bias)}function RR(e,t,n){void 0===n&&(n=!0);var r=n?iy(e):e;return r=cR(r,t.separable_conv0,[1,1]),r=cR(iy(r),t.separable_conv1,[1,1]),r=$v(r,[3,3],[2,2],"same"),r=jg(r,AR(e,t.expansion_conv,[2,2]))}var PR,OR=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return Xc((function(){var r=QA(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(bf(256)),a=iy(AR(r,n.entry_flow.conv_in,[2,2]));return a=RR(a,n.entry_flow.reduction_block_0,!1),a=RR(a,n.entry_flow.reduction_block_1),eA(t._numMainBlocks,0,1).forEach((function(e){a=function(e,t){var n=cR(iy(e),t.separable_conv0,[1,1]);return n=cR(iy(n),t.separable_conv1,[1,1]),n=cR(iy(n),t.separable_conv2,[1,1]),jg(n,e)}(a,n.middle_flow["main_block_"+e])})),a=RR(a,n.exit_flow.reduction_block),a=iy(cR(a,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return LR(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return DR(e,this._numMainBlocks)},t}(YA);!function(e){e.FEMALE="female",e.MALE="male"}(PR||(PR={}));var FR=function(e){function t(t){void 0===t&&(t=new OR(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Mu(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return Xc((function(){var r=e instanceof VA?t.faceFeatureExtractor.forwardInput(e):e,a=eg(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:gR(a,n.fc.age).as1D(),gender:gR(a,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return Xc((function(){var n=t.runNet(e),r=n.age,a=n.gender;return{age:r,gender:Dd(a)}}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Nu(this,void 0,void 0,(function(){var t,n,r,a,o,i,s=this;return Tu(this,(function(u){switch(u.label){case 0:return[4,HA(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=gd(n.age),a=gd(n.gender),o=r.map((function(e,t){return{ageTensor:e,genderTensor:a[t]}})),[4,Promise.all(o.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Nu(s,void 0,void 0,(function(){var e,r,a,o,i;return Tu(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],o=(a=r>.5)?PR.MALE:PR.FEMALE,i=a?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:o,genderProbability:i}]}}))}))})))];case 3:return i=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?i:i[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=DA(e),r=n.extractWeights,a=n.getRemainingWeights,o=EA(r,t),i=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=yR(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=jA(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return SA(e,t),{params:a,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(YA),BR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],$L([e[3],e[4]])]},t}(SR),zR=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+JL(this.distance)+")":"")},e}(),UR=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e}();function WR(e,t){return Nu(this,void 0,void 0,(function(){var n,r,a,o,i,s;return Tu(this,(function(u){switch(u.label){case 0:return n=gA.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,HA(e)];case 1:if((a=u.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(o=a.getInput(0))instanceof n?(i=o,[3,4]):[3,2];case 2:return[4,zA(o)];case 3:i=u.sent(),u.label=4;case 4:r=i,u.label=5;case 5:return s=bA(r),[2,t.map((function(e){return e instanceof iR?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,a=e.height,o=PA({width:r,height:a});return bA(o).putImageData(s.getImageData(t,n,r,a),0,0),o}))]}}))}))}function VR(e,t){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(n){if(!QL(e)&&!XL(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(XL(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Xc((function(){var n=e.shape.slice(XL(e)?1:0),r=n[0],a=n[1],o=n[2],i=t.map((function(e){return e instanceof iR?e.forSize(a,r).box:e})).map((function(e){return e.clipAtImageBorders(a,r)})).map((function(t){var n=t.x,i=t.y,s=t.width,u=t.height;return og(e.as3D(r,a,o),[i,n,0],[u,s,o])}));return i}))]}))}))}var HR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,a=t/Math.max(r,n);return{width:n*a,height:r*a}})),a=r.length;return Xc((function(){var n=function(e,t){return pd([Mf([68],e),Mf([68],t)],1).as2D(1,136).as1D()},o=function(e,t){var n=r[e],a=n.width,o=n.height;return t(a,o)?Math.abs(a-o)/2:0},i=e.mul(Mf([a,136],t)).sub(pd(Array.from(Array(a),(function(e,t){return n(function(e){return o(e,(function(e,t){return e<t}))}(t),function(e){return o(e,(function(e,t){return t<e}))}(t))})))).div(pd(Array.from(Array(a),(function(e,t){return n(r[t].width,r[t].height)}))));return i}))},t.prototype.forwardInput=function(e){var t=this;return Xc((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Nu(this,void 0,void 0,(function(){var t,n,r,a=this;return Tu(this,(function(o){switch(o.label){case 0:return[4,HA(e)];case 1:return t=o.sent(),n=Xc((function(){return gd(a.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Nu(a,void 0,void 0,(function(){var r,a,o,i,s;return Tu(this,(function(u){switch(u.label){case 0:return o=(a=Array).from,[4,e.data()];case 1:return r=o.apply(a,[u.sent()]),i=r.filter((function(e,t){return KL(t)})),s=r.filter((function(e,t){return!KL(t)})),[2,new MR(Array(68).fill(0).map((function(e,t){return new GL(i[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=o.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(bR),YR=function(e){function t(t){return void 0===t&&(t=new vR),e.call(this,"FaceLandmark68Net",t)||this}return Mu(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(HR);var GR=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Xc((function(){var n=fR(QA(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(bf(255)),t.dense0,!0);return n=fR(n,t.dense1),n=fR(n,t.dense2),n=eg(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=mR(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return SA(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=DA(e),r=n.extractWeights,a=n.getRemainingWeights,o=hR(r,t).extractDenseBlock3Params,i=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u}}}(e)},t}(YA),qR=function(e){function t(t){return void 0===t&&(t=new GR),e.call(this,"FaceLandmark68TinyNet",t)||this}return Mu(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(HR);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Mu(t,e)}(YR);function QR(e,t,n,r,a){void 0===a&&(a="same");var o=t.conv,i=o.filters,s=o.bias,u=Ov(e,i,n,a);return u=function(e,t){return jg(Hg(e,t.weights),t.biases)}(u=jg(u,s),t.scale),r?iy(u):u}function XR(e,t){return QR(e,t,[1,1],!1)}function KR(e,t){return QR(e,t,[2,2],!0,"valid")}function JR(e,t){function n(n,r,a,o){var i=function(t,n,r){var a=e(t),o=a.length/(n*r*r);if(o%1!==0)throw new Error("depth has to be an integer: "+o+", weights.length: "+a.length+", numFilters: "+n+", filterSize: "+r);return Xc((function(){return uy(_f(a,[n,o,r,r]),[2,3,1,0])}))}(n,r,a),s=wf(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:i,bias:s}}function r(r,a,o,i){var s=n(r,a,o,i+"/conv"),u=function(n,r){var a=wf(e(n)),o=wf(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:a,biases:o}}(a,i+"/scale");return{conv:s,scale:u}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a,o){return void 0===o&&(o=!1),{conv1:r((o?.5:1)*e,t,n,a+"/conv1"),conv2:r(e,t,n,a+"/conv2")}}}}function ZR(e,t){var n=jA(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),a=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function $R(e){var t=[],n=ZR(e,t),r=n.extractConvLayerParams,a=n.extractResidualLayerParams,o=r("conv32_down"),i=a("conv32_1"),s=a("conv32_2"),u=a("conv32_3"),l=a("conv64_down"),c=a("conv64_1"),f=a("conv64_2"),d=a("conv64_3"),h=a("conv128_down"),p=a("conv128_1"),m=a("conv128_2"),v=a("conv256_down"),g=a("conv256_1"),y=a("conv256_2"),b=a("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!qL(w,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var x={conv32_down:o,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:v,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:w};return SA(e,t),{params:x,paramMappings:t}}function eP(e,t){var n=function(e,t){return QR(e,t,[1,1],!0)}(e,t.conv1);return n=XR(n,t.conv2),n=jg(n,e),n=iy(n)}function tP(e,t){var n=KR(e,t.conv1);n=XR(n,t.conv2);var r=eg(e,2,2,"valid"),a=Sf(r.shape),o=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var i=n.shape.slice();i[1]=1;var s=Sf(i),u=(n=If([n,s],1)).shape.slice();u[2]=1;var l=Sf(u);n=If([n,l],2)}return r=o?If([r,a],3):r,n=jg(r,n),n=iy(n)}var nP=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Xc((function(){var n=KR(QA(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(bf(256)),t.conv32_down);n=eP(n=$v(n,3,2,"valid"),t.conv32_1),n=eP(n,t.conv32_2),n=eP(n,t.conv32_3),n=eP(n=tP(n,t.conv64_down),t.conv64_1),n=eP(n,t.conv64_2),n=eP(n,t.conv64_3),n=eP(n=tP(n,t.conv128_down),t.conv128_1),n=eP(n,t.conv128_2),n=eP(n=tP(n,t.conv256_down),t.conv256_1);var r=(n=tP(n=eP(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return Vv(r,t.fc)}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Nu(this,void 0,void 0,(function(){var t,n,r,a=this;return Tu(this,(function(o){switch(o.label){case 0:return[4,HA(e)];case 1:return t=o.sent(),n=Xc((function(){return gd(a.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=o.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return $R(e)},t.prototype.extractParams=function(e){return function(e){var t=DA(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],o=JR(n,a),i=o.extractConvLayerParams,s=o.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),v=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),_=Xc((function(){return uy(xf(n(32768),[128,256]),[1,0])}));if(a.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:d,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:v,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:w,conv256_2:x,conv256_down_out:C,fc:_},paramMappings:a}}(e)},t}(YA);var rP=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,a=t.maxNumScales,o=t.scoreThresholds,i=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=a||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=i,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function aP(e,t){function n(n,r,a,o,i){var s=_f(e(n*r*a*a),[a,a,n,r]),u=wf(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/"+(i?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function r(e,t,r,a){var o=n(e,t,r,a,!0);return{filters:o.filters,batch_norm_offset:o.bias}}function a(n,a,o){var i=function(n,r){var a=_f(e(9*n),[3,3,n,1]),o=wf(e(n)),i=wf(e(n)),s=wf(e(n)),u=wf(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:a,batch_norm_scale:o,batch_norm_offset:i,batch_norm_mean:s,batch_norm_variance:u}}(n,o+"/depthwise_conv");return{depthwise_conv:i,pointwise_conv:r(n,a,1,o+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function oP(e){var t=[],n=function(e,t){var n=jA(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function a(e){var t="mobilenetv1/conv_"+e,a="MobilenetV1/Conv2d_"+e+"_depthwise",o=t+"/depthwise_conv",i=t+"/pointwise_conv";return{depthwise_conv:{filters:n(a+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:n(a+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:n(a+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:n(a+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:n(a+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,i)}}function o(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function i(e){return{box_encoding_predictor:o("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:o("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:i(0),box_predictor_1:i(1),box_predictor_2:i(2),box_predictor_3:i(3),box_predictor_4:i(4),box_predictor_5:i(5)}}}}(e,t),r=n.extractMobilenetV1Params,a=n.extractPredictionLayerParams,o=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!QL(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var i={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return SA(e,t),{params:i,paramMappings:t}}function iP(e,t,n){return Xc((function(){var r=Ov(e,t.filters,n,"same");return r=jg(r,t.batch_norm_offset),Gm(r,0,6)}))}function sP(e,t){return Xc((function(){var n=null,r=iP(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var a=t+1,o=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(a);r=function(e,t,n){return Xc((function(){var r=zv(e,t.filters,n,"same");return r=Tv(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Gm(r,0,6)}))}(r,e.depthwise_conv,o),r=iP(r,e.pointwise_conv,[1,1]),11===a&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function uP(e,t,n){var r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(i-a)*(s-o),h=(c-u)*(f-l);if(d<=0||h<=0)return 0;var p=Math.max(a,u),m=Math.max(o,l),v=Math.min(i,c),g=Math.min(s,f),y=Math.max(v-p,0)*Math.max(g-m,0);return y/(d+h-y)}function lP(e,t){var n=function(e){var t=gd(uy(e,[1,0])),n=[Kg(t[2],t[0]),Kg(t[3],t[1])];return{sizes:n,centers:[jg(t[0],Rg(n[0],bf(2))),jg(t[1],Rg(n[1],bf(2)))]}}(e),r=n.sizes,a=n.centers,o=gd(uy(t,[1,0])),i=Rg(Hg(Km(Rg(o[2],bf(5))),r[0]),bf(2)),s=jg(Hg(Rg(o[0],bf(10)),r[0]),a[0]),u=Rg(Hg(Km(Rg(o[3],bf(5))),r[1]),bf(2)),l=jg(Hg(Rg(o[1],bf(10)),r[1]),a[1]);return uy(pd([Kg(s,i),Kg(l,u),jg(s,i),jg(l,u)]),[1,0])}function cP(e,t){return Xc((function(){var n=e.shape[0];return{boxPredictionEncoding:fd(kA(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:fd(kA(e,t.class_predictor),[n,-1,3])}}))}var fP=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),dP=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Mu(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Xc((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=sP(Kg(Hg(n,bf(.007843137718737125)),bf(1)),t.mobilenetv1),a=function(e,t,n){return Xc((function(){var r=iP(e,n.conv_0,[1,1]),a=iP(r,n.conv_1,[2,2]),o=iP(a,n.conv_2,[1,1]),i=iP(o,n.conv_3,[2,2]),s=iP(i,n.conv_4,[1,1]),u=iP(s,n.conv_5,[2,2]),l=iP(u,n.conv_6,[1,1]),c=iP(l,n.conv_7,[2,2]),f=cP(t,n.box_predictor_0),d=cP(e,n.box_predictor_1),h=cP(a,n.box_predictor_2),p=cP(i,n.box_predictor_3),m=cP(u,n.box_predictor_4),v=cP(c,n.box_predictor_5);return{boxPredictions:If([f.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding],1),classPredictions:If([f.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,v.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Xc((function(){var r=e.shape[0],a=lP(fd(md(n.extra_dim,[r,1,1]),[-1,4]),fd(e,[-1,4]));a=fd(a,[r,a.shape[0]/r,4]);var o=iv(ng(t,[0,0,1],[-1,-1,-1])),i=ng(o,[0,0,0],[-1,-1,1]);return i=fd(i,[r,i.shape[1]]),{boxes:gd(a),scores:gd(i)}}))}(a.boxPredictions,a.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,HA(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Nu(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x;return Tu(this,(function(C){switch(C.label){case 0:return n=new fP(t),r=n.maxResults,a=n.minConfidence,[4,HA(e)];case 1:for(o=C.sent(),i=this.forwardInput(o),s=i.boxes,u=i.scores,l=s[0],c=u[0],f=1;f<s.length;f++)s[f].dispose(),u[f].dispose();return p=(h=Array).from,[4,c.data()];case 2:return d=p.apply(h,[C.sent()]),m=function(e,t,n,r,a){var o=e.shape[0],i=Math.min(n,o),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>a})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},l=[];return s.forEach((function(t){if(!(l.length>=i)){for(var n=t.score,r=l.length-1;r>=0;--r){var o=uP(e,t.boxIndex,l[r]);if(0!==o&&(t.score*=u(o),t.score<=a))break}n===t.score&&l.push(t.boxIndex)}})),l}(l,d,r,.5,a),v=o.getReshapedInputDimensions(0),g=o.inputSize,y=g/v.width,b=g/v.height,w=l.arraySync(),x=m.map((function(e){var t=[Math.max(0,w[e][0]),Math.min(1,w[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],a=[Math.max(0,w[e][1]),Math.min(1,w[e][3])].map((function(e){return e*y})),i=a[0],s=a[1];return new iR(d[e],new uA(i,n,s-i,r-n),{height:o.getInputHeight(0),width:o.getInputWidth(0)})})),l.dispose(),c.dispose(),[2,x]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return oP(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=DA(e),r=n.extractWeights,a=n.getRemainingWeights,o=aP(r,t),i=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,u=i(),l=s(),c={extra_dim:Cf(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:c},paramMappings:t}}(e)},t}(YA);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Mu(t,e)}(dP);var hP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Mu(t,e),t}(rR),pP=function(){function e(){}return e.prototype.then=function(e){return Nu(this,void 0,void 0,(function(){var t;return Tu(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function mP(e,t){var n={descriptor:t};return Object.assign({},e,n)}function vP(e,t,n,r,a){return void 0===a&&(a=function(e){return e.alignedRect}),Nu(this,void 0,void 0,(function(){var o,i,s,u,l;return Tu(this,(function(c){switch(c.label){case 0:return o=e.map((function(e){return ER(e)?a(e):e.detection})),(s=r)?[3,5]:t instanceof Pl?[4,VR(t,o)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,WR(t,o)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return[4,n(i=s)];case 6:return l=c.sent(),i.forEach((function(e){return e instanceof Pl&&e.dispose()})),[2,l]}}))}))}function gP(e,t,n,r,a){return Nu(this,void 0,void 0,(function(){var o=this;return Tu(this,(function(i){return[2,vP([e],t,(function(e){return Nu(o,void 0,void 0,(function(){return Tu(this,(function(t){return[2,n(e[0])]}))}))}),r,a)]}))}))}function yP(e){var t=DA(e),n=t.extractWeights,r=t.getRemainingWeights,a=[],o=function(e,t){var n=MA(e,t),r=EA(e,t);function a(n,r){var a=wf(e(n));return t.push({paramPath:r}),a}function o(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=o([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Eu({},e,{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=o([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),i=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return Eu({},e,{fc1:t,prelu4_alpha:n,fc2_1:i,fc2_2:s})},extractONetParams:function(){var e=o([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),i=a(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=a(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),f=r(256,10,"onet/fc2_3");return Eu({},e,{conv4:t,prelu4_alpha:i,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:f})}}}(n,a),i=o.extractPNetParams,s=o.extractRNetParams,u=o.extractONetParams,l=i(),c=s(),f=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:a}}function bP(e){var t=[],n=function(e,t){var n=jA(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function a(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function o(e){return n(e,1)}function i(e){return{conv1:r(e+"/conv1"),prelu1_alpha:o(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:o(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:o(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Eu({},e,{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=i("rnet"),t=a("rnet/fc1"),n=o("rnet/prelu4_alpha"),r=a("rnet/fc2_1"),s=a("rnet/fc2_2");return Eu({},e,{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=i("onet"),t=r("onet/conv4"),n=o("onet/prelu4_alpha"),s=a("onet/fc1"),u=o("onet/prelu5_alpha"),l=a("onet/fc2_1"),c=a("onet/fc2_2"),f=a("onet/fc2_3");return Eu({},e,{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:f})}}}(e,t),r=n.extractPNetParams,a=n.extractRNetParams,o=n.extractONetParams,i=r(),s=a(),u=o();return SA(e,t),{params:{pnet:i,rnet:s,onet:u},paramMappings:t}}function wP(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var xP=function(e){function t(t,n,r,a){return e.call(this,{left:t,top:n,right:r,bottom:a},!0)||this}return Mu(t,e),t}(aA);function CP(e){return Xc((function(){return Hg(Kg(e,bf(127.5)),bf(.0078125))}))}function _P(e,t){return Xc((function(){return jg(iy(e),Hg(t,nv(iy(nv(e)))))}))}function kP(e,t,n){return void 0===n&&(n=!1),Xc((function(){var r=kA(e,t.conv1,"valid");return r=_P(r,t.prelu1_alpha),r=_P(r=kA(r=$v(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=_P(r=kA(r=n?r:$v(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function SP(e,t,n,r,a){a.stage1=[];var o=t.map((function(t){return Xc((function(){var n={scale:t},a=function(e,t){return Xc((function(){var n=wP(t,e.shape.slice(1)),r=n.height,a=n.width,o=CP(eb.resizeBilinear(e,[r,a]));return uy(o,[0,2,1,3])}))}(e,t),o=Date.now(),i=function(e,t){return Xc((function(){var n=kP(e,t,!0),r=kA(n,t.conv4_1,"valid"),a=$f(hg(r,3),3);return{prob:Dd(Kg(r,a),3),regions:kA(n,t.conv4_2,"valid")}}))}(a,r),s=i.prob,u=i.regions;return n.pnet=Date.now()-o,{scoresTensor:gd(gd(s,3)[1])[0],regionsTensor:gd(u)[0],scale:t,statsForScale:n}}))})),i=o.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,o=e.scale,i=e.statsForScale,s=function(e,t,n,r){for(var a=[],o=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)o[i][s]>=r&&a.push(new GL(s,i));return a.map((function(e){var r=new oA(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),a=o[e.y][e.x],i=t.arraySync();return{cell:r,score:a,region:new xP(i[e.y][e.x][0],i[e.y][e.x][1],i[e.y][e.x][2],i[e.y][e.x][3])}}))}(t,r,o,n);if(t.dispose(),r.dispose(),!s.length)return a.stage1.push(i),[];var u=Date.now(),l=qA(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return i.nms=Date.now()-u,i.numBoxes=l.length,a.stage1.push(i),l.map((function(e){return s[e]}))})),s=i.reduce((function(e,t){return e.concat(t)}),[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=qA(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);a.stage1_nms=Date.now()-c,l=f.map((function(e){return s[e].score})),u=f.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new oA(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:l}}function MP(e,t,n){var r=n.width,a=n.height;return Nu(this,void 0,void 0,(function(){var n,o,i,s=this;return Tu(this,(function(u){switch(u.label){case 0:return n=bA(e),[4,Promise.all(t.map((function(t){return Nu(s,void 0,void 0,(function(){var r,a,o,i,s,u,l,c;return Tu(this,(function(f){return r=t.padAtBorders(e.height,e.width),a=r.y,o=r.ey,i=r.x,s=r.ex,u=i-1,l=a-1,c=n.getImageData(u,l,s-u,o-l),[2,gA.isNodejs()?OA(c):createImageBitmap(c)]}))}))})))];case 1:return o=u.sent(),i=[],o.forEach((function(e){var t=bA(PA({width:r,height:a}));t.drawImage(e,0,0,r,a);for(var n=t.getImageData(0,0,r,a).data,o=[],s=0;s<n.length;s+=4)o.push(n[s+2]),o.push(n[s+1]),o.push(n[s]);i.push(o)})),[2,i.map((function(e){return Xc((function(){return CP(uy(_f(e,[1,r,a,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function EP(e,t,n,r,a){return Nu(this,void 0,void 0,(function(){var o,i,s,u,l,c,f,d,h,p,m,v,g,y;return Tu(this,(function(b){switch(b.label){case 0:return o=Date.now(),[4,MP(e,t,{width:24,height:24})];case 1:return i=b.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=i.map((function(e){var t=function(e,t){return Xc((function(){var n=kP(e,t),r=_P(gR(fd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),a=gR(r,t.fc2_1),o=$f(hg(a,1),1),i=Dd(Kg(a,o),1),s=gR(r,t.fc2_2);return{scores:gd(i,1)[1],regions:s}}))}(e,r);return e.dispose(),t})),a.stage2_rnet=Date.now()-o,u=s.length>1?If(s.map((function(e){return e.scores}))):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[b.sent()]),u.dispose(),d=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),h=d.map((function(e){return t[e]})),p=d.map((function(e){return l[e]})),m=[],v=[],h.length>0&&(o=Date.now(),g=qA(h,p,.7),a.stage2_nms=Date.now()-o,y=g.map((function(e){var t=s[d[e]].regions.arraySync();return new xP(t[0][0],t[0][1],t[0][2],t[0][3])})),v=g.map((function(e){return p[e]})),m=g.map((function(e,t){return h[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:m,scores:v}]}}))}))}function NP(e,t,n,r,a){return Nu(this,void 0,void 0,(function(){var o,i,s,u,l,c,f,d,h,p,m,v,g,y,b;return Tu(this,(function(w){switch(w.label){case 0:return o=Date.now(),[4,MP(e,t,{width:48,height:48})];case 1:return i=w.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=i.map((function(e){var t=function(e,t){return Xc((function(){var n=kP(e,t);n=_P(n=kA(n=$v(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=_P(gR(fd(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),a=gR(r,t.fc2_1),o=$f(hg(a,1),1),i=Dd(Kg(a,o),1),s=gR(r,t.fc2_2),u=gR(r,t.fc2_3);return{scores:gd(i,1)[1],regions:s,points:u}}))}(e,r);return e.dispose(),t})),a.stage3_onet=Date.now()-o,u=s.length>1?If(s.map((function(e){return e.scores}))):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[w.sent()]),u.dispose(),d=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),h=d.map((function(e){var t=s[e].regions.arraySync();return new xP(t[0][0],t[0][1],t[0][2],t[0][3])})),p=d.map((function(e,n){return t[e].calibrate(h[n])})),m=d.map((function(e){return l[e]})),v=[],g=[],y=[],p.length>0&&(o=Date.now(),b=qA(p,m,.7,!1),a.stage3_nms=Date.now()-o,v=b.map((function(e){return p[e]})),g=b.map((function(e){return m[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var a=s[e].points.arraySync();return new GL(a[0][r]*(v[t].width+1)+v[t].left,a[0][r+5]*(v[t].height+1)+v[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:v,scores:g,points:y}]}}))}))}var TP=function(e){function t(){return e.call(this,"Mtcnn")||this}return Mu(t,e),t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Nu(this,void 0,void 0,(function(){var n,r,a,o,i,s,u,l,c,f,d,h,p,m,v,g,y,b,w,x,C;return Tu(this,(function(_){switch(_.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},o=Date.now(),i=Xc((function(){return e=$f(ew.fromPixels(r)).toFloat(),Xc((function(){return pd(gd(e,3).reverse(),3)}));var e})),s=function(e){return i.dispose(),a.total=Date.now()-o,e},u=i.shape.slice(1),l=u[0],c=u[1],f=new rP(t),d=f.minFaceSize,h=f.scaleFactor,p=f.maxNumScales,m=f.scoreThresholds,v=f.scaleSteps,g=(v||function(e,t,n){for(var r=n[0],a=n[1],o=12/e,i=[],s=Math.min(r,a)*o,u=0;s>=12;)i.push(o*Math.pow(t,u)),s*=t,u+=1;return i}(d,h,[l,c])).filter((function(e){var t=wP(e,[l,c]);return Math.min(t.width,t.height)>12})).slice(0,p),a.scales=g,a.pyramid=g.map((function(e){return wP(e,[l,c])})),y=Date.now(),[4,SP(i,g,m[0],n.pnet,a)];case 1:return b=_.sent(),a.total_stage1=Date.now()-y,b.boxes.length?(a.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,EP(r,b.boxes,m[1],n.rnet,a)]):[2,s({results:[],stats:a})];case 2:return w=_.sent(),a.total_stage2=Date.now()-y,w.boxes.length?(a.stage3_numInputBoxes=w.boxes.length,y=Date.now(),[4,NP(r,w.boxes,m[2],n.onet,a)]):[2,s({results:[],stats:a})];case 3:return x=_.sent(),a.total_stage3=Date.now()-y,C=x.boxes.map((function(e,t){return NR(uR({},new iR(x.scores[t],new uA(e.left/c,e.top/l,e.width/c,e.height/l),{height:l,width:c})),new BR(x.points[t].map((function(t){return t.sub(new GL(e.left,e.top)).div(new GL(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:C,stats:a})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Nu(this,void 0,void 0,(function(){var n;return Tu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,HA(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Nu(this,void 0,void 0,(function(){var n;return Tu(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,HA(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return bP(e)},t.prototype.extractParams=function(e){return yP(e)},t}(YA),IP=[new GL(1.603231,2.094468),new GL(6.041143,7.080126),new GL(2.882459,3.518061),new GL(4.266906,5.178857),new GL(9.041765,10.66308)],jP=[117.001,114.697,97.404],DP=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:IP,meanRgb:jP,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Mu(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new iR(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(aR),LP=[new GL(.738768,.874946),new GL(2.42204,2.65704),new GL(4.30971,7.04493),new GL(10.246,4.59428),new GL(12.6868,11.8741)],AP=[new GL(1.603231,2.094468),new GL(6.041143,7.080126),new GL(2.882459,3.518061),new GL(4.266906,5.178857),new GL(9.041765,10.66308)],RP=[117.001,114.697,97.404],PP=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:AP,meanRgb:RP}:{anchors:LP,withClassScores:!0});return e.call(this,n)||this}return Mu(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Nu(this,void 0,void 0,(function(){return Tu(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new iR(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(aR);var OP={ssdMobilenetv1:new dP,tinyFaceDetector:new DP,tinyYolov2:new PP,mtcnn:new TP,faceLandmark68Net:new YR,faceLandmark68TinyNet:new qR,faceRecognitionNet:new nP,faceExpressionNet:new CR,ageGenderNet:new FR};function FP(e,t){var n={age:t};return Object.assign({},e,n)}function BP(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var zP=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Mu(t,e),t}(pP),UP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n=this;return Tu(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,vP(e=r.sent(),this.input,(function(e){return Nu(n,void 0,void 0,(function(){return Tu(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return OP.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return _R(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new GP(this,this.input)},t}(zP),WP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t;return Tu(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,gP(e,this.input,(function(e){return OP.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,_R(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new qP(this,this.input)},t}(zP),VP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.withAgeAndGender=function(){return new QP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new JP(this,this.input)},t}(UP),HP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.withAgeAndGender=function(){return new XP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ZP(this,this.input)},t}(WP),YP=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.extractedFaces=r,a}return Mu(t,e),t}(pP),GP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n=this;return Tu(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,vP(e=r.sent(),this.input,(function(e){return Nu(n,void 0,void 0,(function(){return Tu(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return OP.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],a=r.age;return FP(BP(e,r.gender,r.genderProbability),a)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new UP(this,this.input)},t}(YP),qP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n,r,a;return Tu(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return(e=o.sent())?[4,gP(e,this.input,(function(e){return OP.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=o.sent(),n=t.age,r=t.gender,a=t.genderProbability,[2,FP(BP(e,r,a),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new WP(this,this.input)},t}(YP),QP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new JP(this,this.input)},t}(GP),XP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.withFaceExpressions=function(){return new HP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ZP(this,this.input)},t}(qP),KP=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Mu(t,e),t}(pP),JP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e;return Tu(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,vP(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return OP.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return mP(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withAgeAndGender=function(){return new QP(this,this.input)},t}(KP),ZP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t;return Tu(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,gP(e,this.input,(function(e){return OP.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,mP(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new HP(this,this.input)},t.prototype.withAgeAndGender=function(){return new XP(this,this.input)},t}(KP),$P=function(e){function t(t,n,r){var a=e.call(this)||this;return a.parentTask=t,a.input=n,a.useTinyLandmarkNet=r,a}return Mu(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?OP.faceLandmark68TinyNet:OP.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(pP),eO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n,r,a,o=this;return Tu(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Pl?[4,VR(this.input,t)]:[3,3];case 2:return r=i.sent(),[3,5];case 3:return[4,WR(this.input,t)];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return o.landmarkNet.detectLandmarks(e)})))];case 6:return a=i.sent(),n.forEach((function(e){return e instanceof Pl&&e.dispose()})),[2,e.map((function(e,t){return NR(e,a[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new VP(this,this.input)},t.prototype.withAgeAndGender=function(){return new QP(this,this.input)},t.prototype.withFaceDescriptors=function(){return new JP(this,this.input)},t}($P),tO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n,r,a;return Tu(this,(function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return(e=o.sent())?(t=e.detection,this.input instanceof Pl?[4,VR(this.input,[t])]:[3,3]):[2];case 2:return r=o.sent(),[3,5];case 3:return[4,WR(this.input,[t])];case 4:r=o.sent(),o.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=o.sent(),n.forEach((function(e){return e instanceof Pl&&e.dispose()})),[2,NR(e,a)]}}))}))},t.prototype.withFaceExpressions=function(){return new HP(this,this.input)},t.prototype.withAgeAndGender=function(){return new XP(this,this.input)},t.prototype.withFaceDescriptor=function(){return new ZP(this,this.input)},t}($P),nO=function(e){function t(t,n){void 0===n&&(n=new fP);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Mu(t,e),t}(pP),rO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t,n,r;return Tu(this,(function(a){switch(a.label){case 0:return t=(e=this).input,(n=e.options)instanceof rP?[4,OP.mtcnn.forward(t,n)]:[3,2];case 1:return[2,a.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof hP?function(e){return OP.tinyFaceDetector.locateFaces(e,n)}:n instanceof fP?function(e){return OP.ssdMobilenetv1.locateFaces(e,n)}:n instanceof rR?function(e){return OP.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Nu(e,void 0,void 0,(function(){var e;return Tu(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return uR({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new eO(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new UP(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new GP(this.runAndExtendWithFaceDetections(),this.input)},t}(nO);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Mu(t,e),t.prototype.run=function(){return Nu(this,void 0,void 0,(function(){var e,t;return Tu(this,(function(n){switch(n.label){case 0:return[4,new rO(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Nu(e,void 0,void 0,(function(){var e;return Tu(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?uR({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new tO(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new WP(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new qP(this.runAndExtendWithFaceDetection(),this.input)}}(nO);!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,a=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof UR)return e;if(e instanceof Float32Array)return new UR(a(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new UR(a(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,a=n.label;return new zR(a,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new zR("unknown",t.distance)}}();Eu({},r,a);var aO=n(6593),oO=n.n(aO),iO=n(7029),sO=n.n(iO);const uO=e=>{let{friendProfile:t,isActive:n,room:r,lastSeen:a,friendProfilePic:i}=e;const[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[f,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[m,v]=(0,o.useState)(!1),[g,y]=(0,o.useState)(i),[b,w]=(0,o.useState)(!0),[x,C]=(0,o.useState)(!1),[_,k]=(0,o.useState)(!0),[S,M]=(0,o.useState)(!0),[E,N]=(0,o.useState)(),[T,I]=(0,o.useState)(!1),[j,D]=(0,o.useState)(""),[L,A]=(0,o.useState)(!1),[R,P]=(0,o.useState)(),[O,F]=(0,o.useState)(!1),[B,z]=(0,o.useState)("auto"),U=(0,o.useRef)(null),W=Ye(),V=(0,o.useRef)(),H=(0,o.useRef)(),Y=(0,o.useRef)(),G=(0,o.useRef)(),q=(0,o.useRef)(),Q=fo(),X=qe(),K=dn((e=>e.setting)),J=dn((e=>e.profile)),Z=J._id,$=(0,o.useCallback)((()=>{w((e=>!e))}),[]),ee=(0,o.useCallback)((()=>{E&&E.getVideoTracks().forEach((e=>e.stop())),k((e=>!e))}),[E]),te=()=>{null===q||void 0===q||q.current.play()},ne=()=>{null===q||void 0===q||q.current.pause()},re=(0,o.useCallback)((e=>{I(!0),ne();const t=new(oO())({initiator:!1,trickle:!1,stream:E});t.on("signal",(t=>{Ui.emit("answer-call",{signal:t,to:e.from})})),t.on("stream",(e=>{H.current.srcObject=e})),t.signal(e.signal),Y.current=t}),[E]);(0,o.useEffect)((()=>(Ui.on("call-accepted",(e=>{if(I(!0),ne(),Y.current&&!Y.current.destroyed)try{Y.current.signal(e)}catch(O$){console.error("Error signaling accepted call:",O$)}})),Ui.on("receive-call",(e=>{P(e.from),F(!0),te(),re(e)})),Ui.on("videoCallEnd",(()=>{var e;null===(e=G.current)||void 0===e||e.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!1}))})),null===q||void 0===q||q.current.setAttribute("src","https://programmerikram.com/wp-content/uploads/2025/05/calling-beep.mp3"),()=>{Ui.off("call-accepted"),Ui.off("receive-call"),Ui.off("videoCallEnd")})),[re]),(0,o.useEffect)((()=>{E&&R&&!Y.current&&(e=>{const t=new(oO())({initiator:!0,trickle:!1,stream:E});t.on("signal",(t=>{Ui.emit("call-user",{userToCall:e,signalData:t,from:j,name:J.fullName||"",isVideoCall:!0})})),t.on("stream",(e=>{H.current.srcObject=e})),Y.current=t})(R)}),[E,R]),(0,o.useEffect)((()=>{O&&navigator.mediaDevices.enumerateDevices().then((e=>{var t;const n=e.filter((e=>"videoinput"===e.kind)),r=n.find((e=>/back|environment/i.test(e.label))),a=x&&(null===r||void 0===r?void 0:r.deviceId)||(null===(t=n[0])||void 0===t?void 0:t.deviceId);navigator.mediaDevices.getUserMedia({video:{deviceId:a},audio:b}).then((e=>{N(e),V.current&&(V.current.srcObject=e)}))}))}),[O,b]);const ae=(0,o.useCallback)((e=>{const t=e.currentTarget.dataset.id;P(t),F(!0),te()}),[]),oe=(0,o.useCallback)((()=>{ne(),Ui.emit("leaveVideoCall",f),null===E||void 0===E||E.getTracks().forEach((e=>e.stop())),V.current&&(V.current.srcObject=null),H.current&&(H.current.srcObject=null),N(null),I(!1),F(!1),Y.current&&(Y.current.destroy(),Y.current=null)}),[f,E]),ie=()=>{setTimeout((()=>{setInterval((async()=>{if(null!==U&&void 0!==U&&U.current){const n=await(e=U.current,t=new hP,void 0===t&&(t=new fP),new rO(e,t)).withFaceExpressions();if(n.length>0){const e=n[0].expressions,t=Object.entries(e).reduce(((e,t)=>e[1]>t[1]?e:t))[0];r&&l!==t&&c(t)}}var e,t}),100)}),3e3)};(0,o.useEffect)((()=>{D(J._id)}),[J]);const se=(0,o.useCallback)((()=>{Ui.emit("bump",t,J)}),[t,J]);(0,o.useEffect)((()=>{r&&K.isShareEmotion&&(U.current&&navigator.mediaDevices.enumerateDevices().then((e=>{var t;const n=e.filter((e=>"videoinput"===e.kind)),r=n.find((e=>/back|environment/i.test(e.label))),a=x&&(null===r||void 0===r?void 0:r.deviceId)||(null===(t=n[0])||void 0===t?void 0:t.deviceId);navigator.mediaDevices.getUserMedia({video:{deviceId:a},audio:b}).then((e=>{U.current.srcObject=e}))})),(async()=>{await OP.tinyFaceDetector.loadFromUri("/models"),await OP.faceExpressionNet.loadFromUri("/models"),ie()})())}),[r,K]),(0,o.useEffect)((()=>{(()=>{var e;if(!U.current)return;const t=null===(e=U.current)||void 0===e?void 0:e.srcObject;null===t||void 0===t||t.getTracks().forEach((e=>e.stop())),U.current.srcObject=null})()}),[W]),(0,o.useEffect)((()=>{d(t._id),p(!!t._id),y(t.profilePic),Ui.emit("last_emotion",{friendId:t._id,profileId:Z})}),[t]),(0,o.useEffect)((()=>{bs(g)?Nn(g,v):y("")}),[g]),(0,o.useEffect)((()=>{l&&f&&Ui.emit("emotion_change",{profileId:Z,emotion:l,friendId:f})}),[l,f]),(0,o.useEffect)((()=>{const e=e=>u(e),t=e=>u(e.lastEmotion&&" L: ".concat(e.lastEmotion));return Ui.on("emotion_change",e),Ui.on("last_emotion",t),()=>{Ui.off("emotion_change",e),Ui.off("last_emotion",t)}}),[]);const ue=(0,o.useCallback)((()=>{C((e=>!e))}),[]),le=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=e=>{le.current&&!le.current.contains(e.target)&&A(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const ce=(0,o.useCallback)((()=>A((e=>!e))),[]),fe=(0,o.useCallback)((async()=>{200===(await ao.post("friend/block",{friendId:f})).status&&alert("User Blocked")}),[f]),de=(0,o.useCallback)((async()=>{200===(await ao.post("friend/unblock",{friendId:f})).status&&alert("User unblocked")}),[f]),he=(0,o.useCallback)((()=>X("/".concat(f))),[X,f]);return(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{className:"chat-header-user ".concat("skleton-card"),children:[(0,Lt.jsx)("div",{className:"chat-header-profilePic",children:h?(0,Lt.jsx)(Tn,{profilePic:"".concat(g),hasStory:!1,profile:t._id,active:!!n}):(0,Lt.jsx)("div",{className:"skeleton-header",children:(0,Lt.jsx)("div",{className:"skeleton-avatar"})})}),1==h?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"chat-header-user-info",children:[(0,Lt.jsxs)("h4",{className:"chat-header-username",children:[" ","".concat(1==t?(null===t||void 0===t?void 0:t.fullName)||"":t.user&&t.user.firstName+" "+t.user.surname)]}),Q?(0,Lt.jsx)(Lt.Fragment,{children:s?(0,Lt.jsx)("span",{className:"chat-header-active-status text-capitalized",children:s}):(0,Lt.jsx)(Lt.Fragment,{children:a&&(0,Lt.jsxs)("span",{className:"chat-header-active-status text-capitalized",children:["Last Seen: ",a]})})}):(0,Lt.jsxs)(Lt.Fragment,{children:[s&&(0,Lt.jsxs)("span",{className:"chat-header-active-status text-capitalized",children:[s," |"]}),a&&(0,Lt.jsxs)("span",{className:"chat-header-active-status text-capitalized",children:[" Last Seen: ",a]})]})," "]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"chat-header-user-info",children:(0,Lt.jsxs)("div",{className:"skeleton-lines",children:[(0,Lt.jsx)("div",{className:"skeleton-line short"}),(0,Lt.jsx)("div",{className:"skeleton-line medium"})]})})})]}),(0,Lt.jsxs)("div",{className:"chat-header-action",children:[(0,Lt.jsxs)("div",{className:"chat-header-action-btn-container",children:[(0,Lt.jsx)("div",{onClick:se,className:"bump-button action-button",title:"bump",children:(0,Lt.jsx)("i",{className:"fas fa-record-vinyl"})}),(0,Lt.jsx)("div",{className:"call-button action-button",children:(0,Lt.jsx)("i",{className:"fas fa-phone-alt"})}),(0,Lt.jsx)("div",{onClick:ae,"data-id":f,className:"video-call-button action-button",children:(0,Lt.jsx)("i",{className:"fas fa-video"})}),(0,Lt.jsx)("div",{onClick:ce.bind(void 0),className:"info-button action-button",children:(0,Lt.jsx)("i",{className:"fas fa-info-circle"})}),L&&(0,Lt.jsx)("div",{className:"chat-option-menu",ref:le,children:(0,Lt.jsxs)("ul",{children:[(0,Lt.jsx)("li",{onClick:he.bind(void 0),children:"View Profile"}),null!==J&&void 0!==J&&J.blockedUsers.includes(f)?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("li",{onClick:de.bind(void 0),children:["Unblock ",t.user.firstName]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("li",{onClick:fe.bind(void 0),children:["Block ",t.user.firstName]})}),(0,Lt.jsxs)("li",{children:["Report ",t.user.firstName]})]})})]}),(0,Lt.jsx)(En,{title:"Video Call",style:{width:Q?"95%":"600px",top:"50%",borderRadius:"10px",height:B},isOpen:O||T,onRequestClose:()=>{},id:"videoCallModal",children:(0,Lt.jsxs)("div",{className:"".concat(T?"call-accepted":""),style:{padding:0},children:[(0,Lt.jsxs)("h2",{className:"text-center vc-modal-heading",children:["Video Call - ",t&&t.fullName]}),(0,Lt.jsx)("p",{className:"fs-3 text-center",children:!T&&(0,Lt.jsxs)(Lt.Fragment,{children:["Calling ",t&&t.fullName]})}),(0,Lt.jsxs)("div",{className:"video-call-container ".concat(Q?"mobile":""),children:[(0,Lt.jsx)("video",{playsInline:!0,ref:H,className:"friends-video",autoPlay:!0,style:{width:"100%",display:T?"block":"none"}}),(0,Lt.jsx)(sO(),{playsInline:!0,muted:!0,ref:V,autoPlay:!0,className:"my-video",style:{width:"150px"}})]}),(0,Lt.jsxs)("div",{className:"call-buttons",children:[(0,Lt.jsx)("button",{onClick:oe.bind(void 0),ref:G,className:"call-button-ends call-button bg-danger",children:(0,Lt.jsx)("i",{className:"fa fa-phone"})}),T&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:$.bind(void 0),className:"call-button-microphone call-button",children:b?(0,Lt.jsx)("i",{className:"fa fa-microphone"}):(0,Lt.jsx)("i",{className:"fa fa-microphone-slash"})}),S&&(0,Lt.jsx)("button",{onClick:ee,className:"call-button-camera call-button",children:_?(0,Lt.jsx)("i",{className:"fa fa-video"}):(0,Lt.jsx)("i",{className:"fa fa-video-slash"})}),(0,Lt.jsx)("button",{onClick:ue.bind(void 0),className:"call-button-switch call-button",children:(0,Lt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 24 24",children:[(0,Lt.jsx)("path",{d:"M11 7H5a2 2 0 0 0-2 2v4"}),(0,Lt.jsx)("path",{d:"M13 17h6a2 2 0 0 0 2-2v-4"}),(0,Lt.jsx)("polyline",{points:"16 3 21 3 21 8"}),(0,Lt.jsx)("polyline",{points:"8 21 3 21 3 16"}),(0,Lt.jsx)("path",{d:"M21 3l-6.5 6.5"}),(0,Lt.jsx)("path",{d:"M3 21l6.5-6.5"})]})})]})]})]})})]}),!0===K.isShareEmotion&&(0,Lt.jsx)("video",{style:{display:"none"},ref:U,autoPlay:!0,muted:!0,width:"600",height:"400"}),(0,Lt.jsx)("audio",{ref:q,src:"",loop:!0})]})},lO="LOAD_SETTINGS",cO=e=>({type:lO,payload:e});function fO(e){return[].concat(e)}function dO(e){return e.startsWith(":")}function hO(e){return gO(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||yO(e))}function pO(e,t){return(gO(t)||"number"===typeof t)&&!vO(e)&&!dO(e)&&!mO(e)}function mO(e){return e.startsWith("@media")}function vO(e){return"--"===e}function gO(e){return e+""===e}function yO(e){return gO(e)&&(e.startsWith("&")||dO(e))}function bO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.filter(Boolean).join(t)}function wO(e,t){let n=0;if(0===t.length)return n.toString();for(let r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return"".concat(null!==e&&void 0!==e?e:"cl","_").concat(n.toString(36))}function xO(e,t){return"".concat(e,":").concat(t)}var CO=class e{constructor(e,t,n,r){this.sheet=e,this.property=t,this.value=n,this.selector=r,this.property=t,this.value=n,this.joined=xO(t,n);const a=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:wO(this.sheet.name,this.joined),this.key=bO([this.joined,a,this.hash])}toString(){let t=_O(this.selector.preconditions,{right:this.hash});return t=_O(this.selector.postconditions,{left:t}),"".concat(t," {").concat(e.genRule(this.property,this.value),"}")}static genRule(e,t){return xO(e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),function(e,t){return"content"===e?'"'.concat(t,'"'):t}(e,t))+";"}};function _O(e){let{left:t="",right:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.reduce(((e,t)=>dO(t)?e+t:yO(t)?e+t.slice(1):bO([e,t]," ")),t);return bO([r,(a=n,a?".".concat(a):"")]," ");var a}var kO,SO=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{preconditions:n,postconditions:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=n?fO(n):[],this.postconditions=r?fO(r):[],this.setScope(t)}setScope(e){return e?(this.scopeClassName||(this.scopeName=e,this.scopeClassName=wO(this.sheet.name,e+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new e(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new e(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new e(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(e,t){return new CO(this.sheet,e,t,this)}},MO=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id="flairup-".concat(e),this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t,n;this.style=(t=this.style,n=e,t?"".concat(t,"\n").concat(n):n)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){var e;if("undefined"===typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;const t=document.createElement("style");return t.type="text/css",t.id=this.id,(null!==(e=this.rootNode)&&void 0!==e?e:document.head).appendChild(t),t}addRule(e){const t=this.storedClasses[e.key];return gO(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function EO(e,t){for(const n in e)t(n.trim(),e[n])}function NO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t instanceof Set?e.push(...t):"string"===typeof t?e.push(t):Array.isArray(t)?e.push(NO(...t)):"object"===typeof t&&Object.entries(t).forEach((t=>{let[n,r]=t;r&&e.push(n)})),e)),[]);return bO(r," ").trim()}function TO(e,t){const n=new MO(e,t);return{create:function(e){const t={};return IO(n,e,new SO(n)).forEach((e=>{let[r,a,o]=e;jO(n,a,o).forEach((e=>{!function(e,n){var r;t[e]=null!==(r=t[e])&&void 0!==r?r:new Set,t[e].add(n)}(r,e)}))})),n.apply(),t},getStyle:n.getStyle.bind(n),isApplied:n.isApplied.bind(n)}}function IO(e,t,n){const r=[];return EO(t,((a,o)=>{if(hO(a))return IO(e,o,n.addPrecondition(a)).forEach((e=>r.push(e)));r.push([a,t[a],n.addScope(a)])})),r}function jO(e,t,n){const r=new Set;return EO(t,((t,a)=>{let o=[];if(hO(t))o=jO(e,a,n.addPostcondition(t));else if(function(e){return"."===e}(t))o=fO(a);else if(mO(t))o=function(e,t,n,r){e.append(n+" {");const a=jO(e,t,r);return e.append("}"),a}(e,a,t,n);else if(vO(t))o=function(e,t,n){const r=new Set,a=[];if(EO(t,((t,o)=>{if(pO(t,o))return void a.push(CO.genRule(t,o));DO(jO(e,null!==o&&void 0!==o?o:{},n),r)})),!n.scopeClassName)return r;if(a.length){const t=a.join(" ");e.append("".concat(_O(n.preconditions,{right:n.scopeClassName})," {").concat(t,"}"))}return r.add(n.scopeClassName),r}(e,a,n);else if(pO(t,a)){const o=n.createRule(t,a);e.addRule(o),r.add(o.hash)}return DO(o,r)})),r}function DO(e,t){return e.forEach((e=>t.add(e))),t}function LO(){return LO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LO.apply(this,arguments)}function AO(e,t){return AO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},AO(e,t)}function RO(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function PO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OO(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return PO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PO(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function FO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return"."+e})).join("")}!function(e){e.hiddenOnSearch="epr-hidden-on-search",e.searchActive="epr-search-active",e.hidden="epr-hidden",e.visible="epr-visible",e.active="epr-active",e.emoji="epr-emoji",e.category="epr-emoji-category",e.label="epr-emoji-category-label",e.categoryContent="epr-emoji-category-content",e.emojiHasVariations="epr-emoji-has-variations",e.scrollBody="epr-body",e.emojiList="epr-emoji-list",e.external="__EmojiPicker__",e.emojiPicker="EmojiPickerReact",e.open="epr-open",e.vertical="epr-vertical",e.horizontal="epr-horizontal",e.variationPicker="epr-emoji-variation-picker",e.darkTheme="epr-dark-theme",e.autoTheme="epr-auto-theme"}(kO||(kO={}));var BO=TO("epr",null),zO={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},UO=BO.create({hidden:LO({".":kO.hidden},zO)}),WO=(0,o.memo)((function(){return(0,o.createElement)("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:BO.getStyle()}})})),VO=BO.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:LO({".":kO.hiddenOnSearch},zO)},":has(input(:placeholder-shown))":{visibleOnSearchOnly:zO}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:LO({".":"epr-visible-on-search-only"},zO)}});function HO(e,t){var n,r;return{".epr-dark-theme":(n={},n[e]=t,n),".epr-auto-theme":(r={},r[e]={"@media (prefers-color-scheme: dark)":t},r)}}function YO(e,t){var n,r,a=null!=(n=e.customEmojis)?n:[],o=null!=(r=t.customEmojis)?r:[];return e.open===t.open&&e.emojiVersion===t.emojiVersion&&e.reactionsDefaultOpen===t.reactionsDefaultOpen&&e.searchPlaceHolder===t.searchPlaceHolder&&e.searchPlaceholder===t.searchPlaceholder&&e.defaultSkinTone===t.defaultSkinTone&&e.skinTonesDisabled===t.skinTonesDisabled&&e.autoFocusSearch===t.autoFocusSearch&&e.emojiStyle===t.emojiStyle&&e.theme===t.theme&&e.suggestedEmojisMode===t.suggestedEmojisMode&&e.lazyLoadEmojis===t.lazyLoadEmojis&&e.className===t.className&&e.height===t.height&&e.width===t.width&&e.style===t.style&&e.searchDisabled===t.searchDisabled&&e.skinTonePickerLocation===t.skinTonePickerLocation&&a.length===o.length}var GO,qO,QO,XO,KO,JO,ZO,$O=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"];!function(e){e.RECENT="recent",e.FREQUENT="frequent"}(GO||(GO={})),function(e){e.NATIVE="native",e.APPLE="apple",e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook"}(qO||(qO={})),function(e){e.DARK="dark",e.LIGHT="light",e.AUTO="auto"}(QO||(QO={})),function(e){e.NEUTRAL="neutral",e.LIGHT="1f3fb",e.MEDIUM_LIGHT="1f3fc",e.MEDIUM="1f3fd",e.MEDIUM_DARK="1f3fe",e.DARK="1f3ff"}(XO||(XO={})),function(e){e.SUGGESTED="suggested",e.CUSTOM="custom",e.SMILEYS_PEOPLE="smileys_people",e.ANIMALS_NATURE="animals_nature",e.FOOD_DRINK="food_drink",e.TRAVEL_PLACES="travel_places",e.ACTIVITIES="activities",e.OBJECTS="objects",e.SYMBOLS="symbols",e.FLAGS="flags"}(KO||(KO={})),function(e){e.SEARCH="SEARCH",e.PREVIEW="PREVIEW"}(JO||(JO={}));var eF=[KO.SUGGESTED,KO.CUSTOM,KO.SMILEYS_PEOPLE,KO.ANIMALS_NATURE,KO.FOOD_DRINK,KO.TRAVEL_PLACES,KO.ACTIVITIES,KO.OBJECTS,KO.SYMBOLS,KO.FLAGS],tF={name:"Recently Used",category:KO.SUGGESTED},nF=((ZO={})[KO.SUGGESTED]={category:KO.SUGGESTED,name:"Frequently Used"},ZO[KO.CUSTOM]={category:KO.CUSTOM,name:"Custom Emojis"},ZO[KO.SMILEYS_PEOPLE]={category:KO.SMILEYS_PEOPLE,name:"Smileys & People"},ZO[KO.ANIMALS_NATURE]={category:KO.ANIMALS_NATURE,name:"Animals & Nature"},ZO[KO.FOOD_DRINK]={category:KO.FOOD_DRINK,name:"Food & Drink"},ZO[KO.TRAVEL_PLACES]={category:KO.TRAVEL_PLACES,name:"Travel & Places"},ZO[KO.ACTIVITIES]={category:KO.ACTIVITIES,name:"Activities"},ZO[KO.OBJECTS]={category:KO.OBJECTS,name:"Objects"},ZO[KO.SYMBOLS]={category:KO.SYMBOLS,name:"Symbols"},ZO[KO.FLAGS]={category:KO.FLAGS,name:"Flags"},ZO);function rF(e){return eF.map((function(t){return LO({},nF[t],e&&e[t]&&e[t])}))}function aF(e){return e.category}function oF(e){return e.name}function iF(e,t){return void 0===t&&(t={}),Object.assign(nF[e],t)}var sF,uF={custom:[],smileys_people:[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["footprints"],u:"1f463",a:"0.6"}],animals_nature:[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"}],food_drink:[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["mushroom"],u:"1f344",a:"0.6"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],travel_places:[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],activities:[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],objects:[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue worker\u2019s helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],symbols:[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],flags:[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","\xe5land islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barth\xe9lemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","c\xf4te d\u2019ivoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","cura\xe7ao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","r\xe9union flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","s\xe3o tom\xe9 & pr\xedncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","turkey flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}]},lF=[XO.NEUTRAL,XO.LIGHT,XO.MEDIUM_LIGHT,XO.MEDIUM,XO.MEDIUM_DARK,XO.DARK],cF=Object.entries(XO).reduce((function(e,t){var n=t[0];return e[t[1]]=n,e}),{}),fF=lF.reduce((function(e,t){var n;return Object.assign(e,((n={})[t]=t,n))}),{});!function(e){e.name="n",e.unified="u",e.variations="v",e.added_in="a",e.imgUrl="imgUrl"}(sF||(sF={}));var dF={};function hF(e){pF(e).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("").forEach((function(t){var n;dF[t]=null!=(n=dF[t])?n:{},dF[t][gF(e)]=e}))}function pF(e){var t;return null!=(t=e[sF.name])?t:[]}function mF(e){return e?pF(e)[0]:""}function vF(e){var t=e.split("-"),n=t.splice(1,1)[0];return fF[n]?t.join("-"):e}function gF(e,t){var n,r=e[sF.unified];return t&&xF(e)&&null!=(n=function(e,t){return t?wF(e).find((function(e){return e.includes(t)})):gF(e)}(e,t))?n:r}function yF(e){var t;return null!=(t=null==uF?void 0:uF[e])?t:[]}function bF(e,t){return""+function(e){switch(e){case qO.TWITTER:return"https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/";case qO.GOOGLE:return"https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";case qO.FACEBOOK:return"https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/";case qO.APPLE:default:return"https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/"}}(t)+e+".png"}function wF(e){var t;return null!=(t=e[sF.variations])?t:[]}function xF(e){return wF(e).length>0}function CF(e){if(e){if(SF[e])return SF[e];var t=vF(e);return SF[t]}}setTimeout((function(){_F.reduce((function(e,t){return hF(t),e}),dF)}));var _F=Object.values(uF).flat();function kF(e){uF[KO.CUSTOM].length=0,e.forEach((function(e){var t=function(e){var t;return(t={})[sF.name]=e.names.map((function(e){return e.toLowerCase()})),t[sF.unified]=e.id.toLowerCase(),t[sF.added_in]="0",t[sF.imgUrl]=e.imgUrl,t}(e);uF[KO.CUSTOM].push(t),SF[t[sF.unified]]||(_F.push(t),SF[t[sF.unified]]=t,hF(t))}))}var SF={};setTimeout((function(){_F.reduce((function(e,t){return e[gF(t)]=t,xF(t)&&wF(t).forEach((function(n){e[n]=t})),e}),SF)}));var MF=["2640-fe0f","2642-fe0f","2695-fe0f"],EF="Search",NF=" found. Use up and down arrow keys to navigate.",TF="1 result"+NF,IF="%n results"+NF;function jF(e){var t,n;void 0===e&&(e={});var r=DF(),a=Object.assign(r.previewConfig,null!=(t=e.previewConfig)?t:{}),o=Object.assign(r,e),i=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t={});var r={};t.suggestionMode===GO.RECENT&&(r[KO.SUGGESTED]=tF);var a=rF(r);return null!=(n=e)&&n.length?e.map((function(e){return"string"===typeof e?iF(e,r[e]):LO({},iF(e.category,r[e.category]),e)})):a}(e.categories,{suggestionMode:o.suggestedEmojisMode});o.hiddenEmojis.forEach((function(e){o.unicodeToHide.add(e)})),kF(null!=(n=o.customEmojis)?n:[]);var s=o.searchDisabled?JO.PREVIEW:o.skinTonePickerLocation;return LO({},o,{categories:i,previewConfig:a,skinTonePickerLocation:s})}function DF(){return{autoFocusSearch:!0,categories:rF(),className:"",customEmojis:[],defaultSkinTone:XO.NEUTRAL,emojiStyle:qO.APPLE,emojiVersion:null,getEmojiUrl:bF,height:450,lazyLoadEmojis:!1,previewConfig:LO({},LF),searchDisabled:!1,searchPlaceHolder:EF,searchPlaceholder:EF,skinTonePickerLocation:JO.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:GO.FREQUENT,theme:QO.LIGHT,unicodeToHide:new Set(MF),width:350,reactionsDefaultOpen:!1,reactions:$O,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var LF={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},AF=["children"],RF=(0,o.createContext)(DF());function PF(e){var t=e.children,n=function(e){var t,n=(0,o.useState)((function(){return jF(e)})),r=n[0],a=n[1];return(0,o.useEffect)((function(){YO(r,e)||a(jF(e))}),[null==(t=e.customEmojis)?void 0:t.length,e.open,e.emojiVersion,e.reactionsDefaultOpen,e.searchPlaceHolder,e.searchPlaceholder,e.defaultSkinTone,e.skinTonesDisabled,e.autoFocusSearch,e.emojiStyle,e.theme,e.suggestedEmojisMode,e.lazyLoadEmojis,e.className,e.height,e.width,e.searchDisabled,e.skinTonePickerLocation,e.allowExpandReactions]),r}(RO(e,AF));return(0,o.createElement)(RF.Provider,{value:n},t)}function OF(){return(0,o.useContext)(RF)}var FF,BF=o.createContext({});function zF(){return o.useContext(BF)}function UF(){}function WF(){return OF().allowExpandReactions}function VF(){return OF().skinTonesDisabled}function HF(){return OF().emojiStyle}function YF(){return OF().categories}function GF(){return OF().previewConfig}function qF(){return OF().searchDisabled}function QF(){return OF().skinTonePickerLocation}function XF(){return OF().getEmojiUrl}function KF(e){return"number"===typeof e?e+"px":e}function JF(e,t){void 0===t&&(t=0);var n=(0,o.useState)(e),r=n[0],a=n[1],i=(0,o.useRef)(null);return[r,function(e){return new Promise((function(n){var r;i.current&&clearTimeout(i.current),i.current=null==(r=window)?void 0:r.setTimeout((function(){a(e),n(e)}),t)}))}]}function ZF(){var e=OF().unicodeToHide;return function(t){return e.has(t)}}function $F(){var e=(0,o.useRef)({}),t=OF().emojiVersion;return(0,o.useMemo)((function(){var n=parseFloat(""+t);return!t||Number.isNaN(n)?e.current:_F.reduce((function(e,t){return function(e,t){return function(e){return parseFloat(e[sF.added_in])}(e)>t}(t,n)&&(e[gF(t)]=!0),e}),e.current)}),[t])}function eB(e){var t,n=e.children,r=$F(),a=OF().defaultSkinTone,i=OF().reactionsDefaultOpen,s=(0,o.useRef)(dF),u=(0,o.useRef)(!1),l=(0,o.useRef)(!1),c=(0,o.useRef)(r),f=JF(Date.now(),200),d=JF("",100),h=(0,o.useState)(!1),p=(0,o.useState)(a),m=(0,o.useState)(null),v=(0,o.useState)(new Set),g=(0,o.useState)(null),y=(0,o.useState)(i),b=(0,o.useState)(!1),w=b[0],x=b[1];return t=x,(0,o.useEffect)((function(){t(!0)}),[t]),(0,o.createElement)(tB.Provider,{value:{activeCategoryState:m,activeSkinTone:p,disallowClickRef:u,disallowMouseRef:l,disallowedEmojisRef:c,emojiVariationPickerState:g,emojisThatFailedToLoadState:v,filterRef:s,isPastInitialLoad:w,searchTerm:d,skinToneFanOpenState:h,suggestedUpdateState:f,reactionsModeState:y}},n)}!function(e){e.REACTIONS="reactions",e.PICKER="picker"}(FF||(FF={}));var tB=(0,o.createContext)({activeCategoryState:[null,function(){}],activeSkinTone:[XO.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise((function(){}))}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}]});function nB(){return(0,o.useContext)(tB).filterRef}function rB(){return(0,o.useContext)(tB).disallowMouseRef}function aB(){return(0,o.useContext)(tB).reactionsModeState}function oB(){return(0,o.useContext)(tB).searchTerm}function iB(){return(0,o.useContext)(tB).activeSkinTone}function sB(){return(0,o.useContext)(tB).emojisThatFailedToLoadState}function uB(){return(0,o.useContext)(tB).emojiVariationPickerState}function lB(){return(0,o.useContext)(tB).skinToneFanOpenState}function cB(){var e=(0,o.useContext)(tB).suggestedUpdateState,t=e[0],n=e[1];return[t,function(){n(Date.now())}]}function fB(){return!!oB()[0]}function dB(e){e&&requestAnimationFrame((function(){e.focus()}))}function hB(e){e&&dB(e.previousElementSibling)}function pB(e){e&&dB(e.nextElementSibling)}function mB(e){e&&dB(e.firstElementChild)}function vB(){return document.activeElement}function gB(e){var t=e.children,n=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(null),i=(0,o.useRef)(null),s=(0,o.useRef)(null),u=(0,o.useRef)(null),l=(0,o.useRef)(null),c=(0,o.useRef)(null);return(0,o.createElement)(bB.Provider,{value:{AnchoredEmojiRef:r,BodyRef:a,CategoryNavigationRef:u,PickerMainRef:n,SearchInputRef:i,SkinTonePickerRef:s,VariationPickerRef:l,ReactionsRef:c}},t)}var yB,bB=(0,o.createContext)({AnchoredEmojiRef:(0,o.createRef)(),BodyRef:(0,o.createRef)(),CategoryNavigationRef:(0,o.createRef)(),PickerMainRef:(0,o.createRef)(),SearchInputRef:(0,o.createRef)(),SkinTonePickerRef:(0,o.createRef)(),VariationPickerRef:(0,o.createRef)(),ReactionsRef:(0,o.createRef)()});function wB(){return(0,o.useContext)(bB)}function xB(){return wB().PickerMainRef}function CB(){return wB().AnchoredEmojiRef}function _B(){var e=CB();return function(t){null===t&&null!==e.current&&dB(e.current),e.current=t}}function kB(){return wB().BodyRef}function SB(){return wB().SearchInputRef}function MB(){return wB().SkinTonePickerRef}function EB(){return wB().CategoryNavigationRef}function NB(e,t){void 0===t&&(t=0);var n=xz(e);n&&requestAnimationFrame((function(){n.scrollTop=t}))}function TB(e){if(e&&function(e){if(!e)return!1;return Cz(e)<wz(Fz(e))}(e)&&!e.closest(FO(kO.variationPicker))){var t=_z(e),n=Cz(e);!function(e,t){var n=xz(e);n&&requestAnimationFrame((function(){n.scrollTop=n.scrollTop+t}))}(t,-(wz(Fz(e))-n))}}function IB(e){var t=Rz(e);dB(t),TB(t)}function jB(e){if(e){var t=Lz(e);if(!t)return IB(Oz(e));dB(t),TB(t)}}function DB(e){if(e){var t=Az(e);if(t)dB(t),TB(t);else dB(Dz(Pz(e)))}}function LB(e,t){if(e){var n=function(e){if(!e)return null;var t=Bz(e),n=Fz(t),r=lz(t,e),a=cz(t,e),o=uz(t,e);if(0===a){var i=Pz(n);return i?dz(jz(i),-1,o,r):null}return function(e,t,n,r){var a=fz(e,t-1,n);return a[r]||a[a.length-1]||null}(jz(t),a,o,r)}(e);if(!n)return t();dB(n),TB(n)}}function AB(e){if(e){var t=function(e){if(!e)return null;var t=Bz(e),n=Fz(t),r=lz(t,e),a=cz(t,e),o=uz(t,e);if(!function(e,t){if(!e||!t)return!1;var n=t.getBoundingClientRect().height,r=t.getBoundingClientRect().top,a=e.getBoundingClientRect().top,o=e.getBoundingClientRect().height;return Math.round(r-a+n)<o}(t,e)){var i=Oz(n);return i?dz(jz(i),0,o,r):null}return function(e,t,n,r){var a=function(e,t,n){var r=t+1;if(r*n>e.length)return[];return fz(e,r,n)}(e,t,n);return a[r]||a[a.length-1]||null}(jz(t),a,o,r)}(e);return dB(t)}}function RB(){var e=uB(),t=e[0],n=e[1],r=lB(),a=r[0],i=r[1];return(0,o.useCallback)((function(){t&&n(null),a&&i(!1)}),[t,a,n,i])}function PB(){var e=uB()[0],t=lB()[0];return function(){return!!e||t}}function OB(){var e=rB();return function(){e.current=!1}}function FB(){var e=rB();return function(){return e.current}}function BB(){var e=SB();return(0,o.useCallback)((function(){dB(e.current)}),[e])}function zB(){var e=EB();return(0,o.useCallback)((function(){e.current&&mB(e.current)}),[e])}function UB(){var e=VB(),t=SB(),n=BB();return function(){t.current&&(t.current.value=""),e(""),n()}}function WB(){var e=SB(),t=nB(),n=function(){var e=nB();return function t(n){if("function"===typeof n)return t(n(e.current));e.current=n}}(),r=VB(),a=oB()[0],o=function(e,t){var n;if(null==e||!e[t])return"";var r=(null==(n=Object.entries(null==e?void 0:e[t]))?void 0:n.length)||0;return function(e){return e>0?e>1?IF.replace("%n",e.toString()):TF:"No results found"}(r)}(t.current,a);return{onChange:function(e){var a=t.current,o=e.toLowerCase();if(null!=a&&a[o]||o.length<=1)return r(o);var i=function(e,t){if(!t)return null;if(t[e])return t[e];var n=Object.keys(t).sort((function(e,t){return t.length-e.length})).find((function(t){return e.includes(t)}));if(n)return t[n];return null}(o,a);if(!i)return r(o);n((function(e){var t;return Object.assign(e,((t={})[o]=function(e,t){var n={};for(var r in e){var a=e[r];HB(a,t)&&(n[r]=a)}return n}(i,o),t))})),r(o)},searchTerm:a,SearchInputRef:e,statusSearchResults:o}}function VB(){var e=oB()[1],t=xB();return function(n){requestAnimationFrame((function(){e(n?null==n?void 0:n.toLowerCase():n).then((function(){NB(t.current,0)}))}))}}function HB(e,t){return pF(e).some((function(e){return e.includes(t)}))}function YB(e){return e&&"string"===typeof e?e.trim().toLowerCase():""}function GB(){var e=_B(),t=uB()[1];return function(n){var r=gz(n)[0];r&&(e(n),t(r))}}function qB(){return QF()===JO.SEARCH}function QB(){return QF()===JO.PREVIEW}function XB(){!function(){var e=xB(),t=UB(),n=function(){var e=kB();return(0,o.useCallback)((function(t){requestAnimationFrame((function(){e.current&&(e.current.scrollTop=t)}))}),[e])}(),r=SB(),a=BB(),i=PB(),s=function(){var e=rB();return function(){e.current=!0}}(),u=RB(),l=(0,o.useMemo)((function(){return function(e){var r=e.key;if(s(),r===yB.Escape){if(e.preventDefault(),i())return void u();t(),n(0),a()}}}),[n,t,u,a,i,s]);(0,o.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("keydown",l),function(){t.removeEventListener("keydown",l)}}),[e,r,n,l])}(),function(){var e=function(){var e=MB();return(0,o.useCallback)((function(){e.current&&mB(e.current)}),[e])}(),t=xB(),n=kB(),r=SB(),a=lB()[1],i=KB(),s=qB(),u=(0,o.useMemo)((function(){return function(t){switch(t.key){case yB.ArrowRight:if(!s)return;t.preventDefault(),a(!0),e();break;case yB.ArrowDown:t.preventDefault(),i();break;case yB.Enter:t.preventDefault(),function(e){var t=Rz(e);dB(t),null==t||t.click()}(n.current)}}}),[e,i,a,n,s]);(0,o.useEffect)((function(){var e=r.current;if(e)return e.addEventListener("keydown",u),function(){e.removeEventListener("keydown",u)}}),[t,r,u])}(),function(){var e=MB(),t=BB(),n=SB(),r=KB(),a=lB(),i=a[0],s=a[1],u=QB(),l=qB(),c=$B(),f=(0,o.useMemo)((function(){return function(e){var n=e.key;if(l)switch(n){case yB.ArrowLeft:if(e.preventDefault(),!i)return t();JB(t);break;case yB.ArrowRight:if(e.preventDefault(),!i)return t();ZB();break;case yB.ArrowDown:e.preventDefault(),i&&s(!1),r();break;default:c(e)}if(u)switch(n){case yB.ArrowUp:if(e.preventDefault(),!i)return t();JB(t);break;case yB.ArrowDown:if(e.preventDefault(),!i)return t();ZB();break;default:c(e)}}}),[i,t,s,r,c,u,l]);(0,o.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("keydown",f),function(){t.removeEventListener("keydown",f)}}),[e,n,i,f])}(),function(){var e=BB(),t=EB(),n=kB(),r=$B(),a=(0,o.useMemo)((function(){return function(t){switch(t.key){case yB.ArrowUp:t.preventDefault(),e();break;case yB.ArrowRight:t.preventDefault(),pB(vB());break;case yB.ArrowLeft:t.preventDefault(),hB(vB());break;case yB.ArrowDown:t.preventDefault(),IB(n.current);break;default:r(t)}}}),[n,e,r]);(0,o.useEffect)((function(){var e=t.current;if(e)return e.addEventListener("keydown",a),function(){e.removeEventListener("keydown",a)}}),[t,n,a])}(),function(){var e=kB(),t=function(){var e=BB(),t=zB(),n=fB();return(0,o.useCallback)((function(){return n?e():t()}),[e,n,t])}(),n=GB(),r=PB(),a=RB(),i=$B(),s=(0,o.useMemo)((function(){return function(e){var o=e.key,s=vz(vB());switch(o){case yB.ArrowRight:e.preventDefault(),jB(s);break;case yB.ArrowLeft:e.preventDefault(),DB(s);break;case yB.ArrowDown:if(e.preventDefault(),r()){a();break}AB(s);break;case yB.ArrowUp:if(e.preventDefault(),r()){a();break}LB(s,t);break;case yB.Space:e.preventDefault(),n(e.target);break;default:i(e)}}}),[t,i,n,r,a]);(0,o.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("keydown",s),function(){t.removeEventListener("keydown",s)}}),[e,s])}()}function KB(){var e=zB(),t=fB(),n=kB();return(0,o.useCallback)((function(){return t?IB(n.current):e()}),[n,e,t])}function JB(e){var t=vB();t&&(t.nextElementSibling||e(),pB(t))}function ZB(){var e=vB();e&&hB(e)}function $B(){var e=function(){var e=SB(),t=VB();return function(n){e.current?(e.current.value=""+e.current.value+n,t(YB(e.current.value))):t(YB(n))}}(),t=BB(),n=qF(),r=RB();return function(a){var o=a.key;(function(e){var t=e.metaKey,n=e.ctrlKey,r=e.altKey;return t||n||r})(a)||n||o.match(/(^[a-zA-Z0-9]$){1}/)&&(a.preventDefault(),r(),t(),e(o))}}function ez(e,t,n){if(t&&n!==qO.NATIVE){var r=gF(t);tz.has(r)||(wF(t).forEach((function(t){!function(e){(new Image).src=e}(e(t,n))})),tz.add(r))}}!function(e){e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.Escape="Escape",e.Enter="Enter",e.Space=" "}(yB||(yB={}));var tz=new Set;var nz=["width","height"],rz=40;function az(e){var t=e.children;return(0,o.createElement)(eB,null,(0,o.createElement)(oz,null,t))}function oz(e){var t,n=e.children,r=aB()[0],a=OF().theme,i=fB(),s=xB(),u=OF().className,l=function(){var e=OF(),t=e.height,n=e.width,r=e.style;return LO({height:KF(t),width:KF(n)},r)}();XB(),function(){var e=kB(),t=HF(),n=XF();(0,o.useEffect)((function(){if(t!==qO.NATIVE){var r=e.current;return null==r||r.addEventListener("focusin",a),function(){null==r||r.removeEventListener("focusin",a)}}function a(e){var r=vz(e.target);if(r){var a=gz(r)[0];a&&xF(a)&&ez(n,a,t)}}}),[e,t,n])}();var c=l||{},f=c.width,d=c.height,h=RO(c,nz);return(0,o.createElement)("aside",{className:NO(sz.main,sz.baseVariables,a===QO.DARK&&sz.darkTheme,a===QO.AUTO&&sz.autoThemeDark,(t={},t[kO.searchActive]=i,t),r&&sz.reactionsMenu,u),ref:s,style:LO({},h,!r&&{height:d,width:f})},n)}var iz={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},sz=BO.create({main:{".":["epr-main",kO.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"all 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-search-border-color":"var(--epr-highlight-color)","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":rz+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#FFFFFF"}},autoThemeDark:{".":kO.autoTheme,"@media (prefers-color-scheme: dark)":{"--":iz}},darkTheme:{".":kO.darkTheme,"--":iz},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function uz(e,t){if(!e||!t)return 0;var n=e.getBoundingClientRect().width,r=t.getBoundingClientRect().width;return Math.floor(n/r)}function lz(e,t){if(!e||!t)return 0;var n=t.getBoundingClientRect().width,r=t.getBoundingClientRect().left,a=e.getBoundingClientRect().left;return Math.floor((r-a)/n)}function cz(e,t){if(!e||!t)return 0;var n=t.getBoundingClientRect().height,r=t.getBoundingClientRect().top,a=e.getBoundingClientRect().top;return Math.round((r-a)/n)}function fz(e,t,n){if(-1===t){var r=Math.floor((e.length-1)/n)*n,a=e.length-1;return e.slice(r,a+1)}return e.slice(t*n,(t+1)*n)}function dz(e,t,n,r){var a=fz(e,t,n);return a[r]||a[a.length-1]||null}function hz(e,t,n){if(void 0===n&&(n=0),!e||!t.length)return null;var r=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom,o=r+function(e){for(var t=Array.from(e.querySelectorAll(FO(kO.label))),n=0,r=t;n<r.length;n++){var a=r[n].getBoundingClientRect().height;if(a>0)return a}return rz}(e);return t.find((function(e){var t=e.getBoundingClientRect().top,i=e.getBoundingClientRect().bottom,s=e.clientHeight*n,u=t+s,l=i-s;return!(u<o)&&(u>=r&&u<=a||l>=r&&l<=a)}))||null}var pz="button"+FO(kO.emoji),mz=[pz,FO(kO.visible),":not("+FO(kO.hidden)+")"].join("");function vz(e){var t;return null!=(t=null==e?void 0:e.closest(pz))?t:null}function gz(e){var t=Ez(e),n=Mz(e);if(!t)return[];var r=CF(null!=n?n:t);return r?[r,n]:[]}function yz(e){var t;return null!=(t=null==e?void 0:e.clientHeight)?t:0}function bz(e){if(!e)return 0;var t=vz(e),n=Fz(t),r=wz(n);return kz(t)+kz(n)+r}function wz(e){var t,n;if(!e)return 0;var r=e.querySelector(FO(kO.categoryContent));return(null!=(t=null==e?void 0:e.clientHeight)?t:0)-(null!=(n=null==r?void 0:r.clientHeight)?n:0)}function xz(e){return e?e.matches(FO(kO.scrollBody))?e:e.querySelector(FO(kO.scrollBody)):null}function Cz(e){var t,n;return e?bz(e)-(null!=(t=null==(n=_z(e))?void 0:n.scrollTop)?t:0):0}function _z(e){var t;return e&&null!=(t=e.closest(FO(kO.scrollBody)))?t:null}function kz(e){var t;return null!=(t=null==e?void 0:e.offsetTop)?t:0}function Sz(e){var t;return null!=(t=null==e?void 0:e.offsetLeft)?t:0}function Mz(e){var t;return null!=(t=function(e,t){var n;return null!=(n=function(e){var t;return null!=(t=null==e?void 0:e.dataset)?t:{}}(e)[t])?n:null}(vz(e),"unified"))?t:null}function Ez(e){var t=Mz(e);return t?vF(t):null}function Nz(e){return e?{unified:Mz(e),originalUnified:Ez(e)}:{unified:null,originalUnified:null}}function Tz(e){return e.classList.contains(kO.visible)}function Iz(e){return!e||e.classList.contains(kO.hidden)}function jz(e){return e?Array.from(e.querySelectorAll(mz)):[]}function Dz(e){if(!e)return null;var t=jz(e).slice(-1)[0];return t?Tz(t)?t:Az(t):null}function Lz(e){var t=e.nextElementSibling;return t?Tz(t)?t:Lz(t):Rz(Oz(e))}function Az(e){var t=e.previousElementSibling;return t?Tz(t)?t:Az(t):Dz(Pz(e))}function Rz(e){return e?hz(e,jz(e),.1):null}function Pz(e){var t=Fz(e);if(!t)return null;var n=t.previousElementSibling;return n?Iz(n)?Pz(n):n:null}function Oz(e){var t=Fz(e);if(!t)return null;var n=t.nextElementSibling;return n?Iz(n)?Oz(n):n:null}function Fz(e){return e?e.closest(FO(kO.category)):null}function Bz(e){return e?e.closest(FO(kO.categoryContent)):null}function zz(e){return e.split("-").map((function(e){return String.fromCodePoint(parseInt(e,16))})).join("")}var Uz="epr_suggested";function Wz(e){try{var t,n,r;if(null==(t=window)||!t.localStorage)return[];var a=JSON.parse(null!=(n=null==(r=window)?void 0:r.localStorage.getItem(Uz))?n:"[]");return e===GO.FREQUENT?a.sort((function(e,t){return t.count-e.count})):a}catch(o){return[]}}function Vz(e){return void 0!==e.imgUrl}function Hz(e,t){var n=(0,o.useRef)(),r=GB(),a=(0,o.useContext)(tB).disallowClickRef,i=uB()[1],s=RB(),u=iB()[0],l=function(e){var t,n=zF().current;return(null!=(t=e===FF.REACTIONS?n.onReactionClick:n.onEmojiClick)?t:n.onEmojiClick)||function(){}}(t),c=cB()[1],f=XF(),d=HF(),h=(0,o.useCallback)((function(e){if(!a.current){s();var t=Yz(e),n=t[0],r=t[1];if(n&&r){var o=function(e){var t=e.split("-")[1];return lF.includes(t)?t:null}(r)||u;c(),function(e,t){var n,r=Wz(),a=gF(e,t),o=gF(e),i=r.find((function(e){return e.unified===a}));n=i?[i].concat(r.filter((function(e){return e!==i}))):[i={unified:a,original:o,count:0}].concat(r),i.count++,n.length=Math.min(n.length,14);try{var s;null==(s=window)||s.localStorage.setItem(Uz,JSON.stringify(n))}catch(u){}}(n,o),l(function(e,t,n,r){var a=pF(e);if(Vz(e)){var o=gF(e);return{activeSkinTone:t,emoji:o,getImageUrl:function(){return e.imgUrl},imageUrl:e.imgUrl,isCustom:!0,names:a,unified:o,unifiedWithoutSkinTone:o}}var i=gF(e,t);return{activeSkinTone:t,emoji:zz(i),getImageUrl:function(e){return void 0===e&&(e=null!=n?n:qO.APPLE),r(i,e)},imageUrl:r(i,null!=n?n:qO.APPLE),isCustom:!1,names:a,unified:i,unifiedWithoutSkinTone:gF(e)}}(n,o,d,f),e)}}}),[u,s,a,l,c,f,d]),p=(0,o.useCallback)((function(e){var t;n.current&&clearTimeout(n.current);var o=Yz(e)[0];o&&xF(o)&&(n.current=null==(t=window)?void 0:t.setTimeout((function(){a.current=!0,n.current=void 0,s(),r(e.target),i(o)}),500))}),[a,s,r,i]),m=(0,o.useCallback)((function(){n.current?(clearTimeout(n.current),n.current=void 0):a.current&&requestAnimationFrame((function(){a.current=!1}))}),[a]);(0,o.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("click",h,{passive:!0}),t.addEventListener("mousedown",p,{passive:!0}),t.addEventListener("mouseup",m,{passive:!0}),function(){null==t||t.removeEventListener("click",h),null==t||t.removeEventListener("mousedown",p),null==t||t.removeEventListener("mouseup",m)}}}),[e,h,p,m])}function Yz(e){var t=null==e?void 0:e.target;return function(e){var t;return Boolean((null==e?void 0:e.matches(pz))||(null==e||null==(t=e.parentElement)?void 0:t.matches(pz)))}(t)?gz(t):[]}function Gz(e){return(0,o.createElement)("button",Object.assign({type:"button"},e,{className:NO(qz.button,e.className)}),e.children)}var qz=BO.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function Qz(e){var t,n=e.emojiNames,r=e.unified,a=e.hidden,i=e.hiddenOnSearch,s=e.showVariations,u=void 0===s||s,l=e.hasVariations,c=e.children,f=e.className,d=e.noBackground,h=void 0!==d&&d;return(0,o.createElement)(Gz,{className:NO(Kz.emoji,a&&UO.hidden,i&&VO.hiddenOnSearch,(t={},t[kO.visible]=!a&&!i,t),!(!l||!u)&&Kz.hasVariations,h&&Kz.noBackground,f),"data-unified":r,"aria-label":Xz(n),"data-full-name":n},c)}function Xz(e){var t;return e[0].match("flag-")&&null!=(t=e[1])?t:e[0]}var Kz=BO.create({emoji:{".":kO.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":kO.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),Jz=BO.create({external:{".":kO.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function Zz(e){var t=e.emojiName,n=e.style,r=e.lazyLoad,a=void 0!==r&&r,i=e.imgUrl,s=e.onError,u=e.className;return(0,o.createElement)("img",{src:i,alt:t,className:NO($z.emojiImag,Jz.external,Jz.common,u),loading:a?"lazy":"eager",onError:s,style:n})}var $z=BO.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function eU(e){var t=e.unified,n=e.style,r=e.className;return(0,o.createElement)("span",{className:NO(tU.nativeEmoji,Jz.common,Jz.external,r),"data-unified":t,style:n},zz(t))}var tU=BO.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function nU(e){var t=e.emoji,n=e.unified,r=e.emojiStyle,a=e.size,i=e.lazyLoad,s=e.getEmojiUrl,u=void 0===s?bF:s,l=e.className,c=sB()[1],f={};a&&(f.width=f.height=f.fontSize=a+"px");var d=t||CF(n);return d?Vz(d)?(0,o.createElement)(Zz,{style:f,emojiName:n,emojiStyle:qO.NATIVE,lazyLoad:i,imgUrl:d.imgUrl,onError:h,className:l}):(0,o.createElement)(o.Fragment,null,r===qO.NATIVE?(0,o.createElement)(eU,{unified:n,style:f,className:l}):(0,o.createElement)(Zz,{style:f,emojiName:mF(d),emojiStyle:r,lazyLoad:i,imgUrl:u(n,r),onError:h,className:l})):null;function h(){c((function(e){return new Set(e).add(n)}))}}function rU(e){var t=e.emoji,n=e.unified,r=e.hidden,a=e.hiddenOnSearch,i=e.emojiStyle,s=e.showVariations,u=void 0===s||s,l=e.size,c=e.lazyLoad,f=e.getEmojiUrl,d=e.className,h=e.noBackground,p=void 0!==h&&h,m=xF(t);return(0,o.createElement)(Qz,{hasVariations:m,showVariations:u,hidden:r,hiddenOnSearch:a,emojiNames:pF(t),unified:n,noBackground:p},(0,o.createElement)(nU,{unified:n,emoji:t,size:l,emojiStyle:i,lazyLoad:c,getEmojiUrl:f,className:d}))}function aU(){var e=aB()[1];return(0,o.createElement)(Gz,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:NO(oU.plusSign),onClick:function(){return e(!1)}})}var oU=BO.create(LO({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=)",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},HO("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function iU(){var e=aB()[0],t=wB().ReactionsRef,n=OF().reactions;Hz(t,FF.REACTIONS);var r=HF(),a=WF(),i=XF();return e?(0,o.createElement)("ul",{className:NO(sU.list,!e&&UO.hidden),ref:t},n.map((function(e){return(0,o.createElement)("li",{key:e},(0,o.createElement)(rU,{emoji:CF(e),emojiStyle:r,unified:e,showVariations:!1,className:NO(sU.emojiButton),noBackground:!0,getEmojiUrl:i}))})),a?(0,o.createElement)("li",null,(0,o.createElement)(aU,null)):null):null}var sU=BO.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function uU(){var e=sB()[0],t=function(){var e=nB().current,t=oB()[0];return function(n){return function(e,t,n){var r;return!(!t||!n)&&!(null!=(r=t[n])&&r[e])}(n,e,t)}}();return function(n){var r=gF(n),a=e.has(r),o=t(r);return{failedToLoad:a,filteredOut:o,hidden:a||o}}}function lU(e){var t=e.categoryConfig,n=e.children,r=e.hidden,a=e.hiddenOnSearch,i=aF(t),s=oF(t);return(0,o.createElement)("li",{className:NO(cU.category,r&&UO.hidden,a&&VO.hiddenOnSearch),"data-name":i,"aria-label":s},(0,o.createElement)("h2",{className:NO(cU.label)},s),(0,o.createElement)("div",{className:NO(cU.categoryContent)},n))}var cU=BO.create({category:{".":kO.category,":not(:has(.epr-visible))":{display:"none"}},categoryContent:{".":kO.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":kO.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}}),fU=!1;function dU(e){var t=e.categoryConfig,n=cB()[0],r=function(){var e=(0,o.useState)(fU),t=e[0],n=e[1];return(0,o.useEffect)((function(){n(!0),fU=!0}),[]),t||fU}(),a=OF().suggestedEmojisMode,i=XF(),s=(0,o.useMemo)((function(){var e;return null!=(e=Wz(a))?e:[]}),[n,a]),u=HF();return r?(0,o.createElement)(lU,{categoryConfig:t,hiddenOnSearch:!0,hidden:0===s.length},s.map((function(e){var t=CF(e.original);return t?(0,o.createElement)(rU,{showVariations:!1,unified:e.unified,emojiStyle:u,emoji:t,key:e.unified,getEmojiUrl:i}):null}))):null}function hU(){var e=YF(),t=(0,o.useRef)(0);return(0,o.createElement)("ul",{className:NO(vU.emojiList)},e.map((function(e){var n=aF(e);return n===KO.SUGGESTED?(0,o.createElement)(dU,{key:n,categoryConfig:e}):(0,o.createElement)(o.Suspense,{key:n},(0,o.createElement)(pU,{category:n,categoryConfig:e,renderdCategoriesCountRef:t}))})))}function pU(e){var t=e.category,n=e.categoryConfig,r=e.renderdCategoriesCountRef,a=uU(),i=OF().lazyLoadEmojis,s=HF(),u=(0,o.useContext)(tB).isPastInitialLoad,l=iB()[0],c=function(){var e=$F(),t=ZF();return function(n){var r=vF(gF(n));return Boolean(e[r]||t(r))}}(),f=XF(),d=!VF(),h=!u&&r.current>0?[]:yF(t);h.length>0&&r.current++;var p=0,m=h.map((function(e){var t=gF(e,l),n=a(e),r=n.failedToLoad,u=n.filteredOut,h=n.hidden,m=c(e);return(h||m)&&p++,m?null:(0,o.createElement)(rU,{showVariations:d,key:t,emoji:e,unified:t,hidden:r,hiddenOnSearch:u,emojiStyle:s,lazyLoad:i,getEmojiUrl:f})}));return(0,o.createElement)(lU,{categoryConfig:n,hidden:p===m.length},m)}var mU,vU=BO.create({emojiList:{".":kO.emojiList,listStyle:"none",margin:"0",padding:"0"}});function gU(){var e,t,n=CB(),r=wB().VariationPickerRef,a=uB()[0],i=HF(),s=function(e){var t=CB(),n=kB(),r=mU.Up;return{getMenuDirection:a,getTop:o};function a(){return r}function o(){r=mU.Up;var a=0;if(!e.current)return 0;var o=yz(e.current);if(t.current){var i,s=n.current,u=vz(t.current),l=yz(u);a=bz(u),(null!=(i=null==s?void 0:s.scrollTop)?i:0)>a-o&&(r=mU.Down,a+=l+o)}return a-o}}(r),u=s.getTop,l=s.getMenuDirection,c=_B(),f=function(e){var t=CB();return function(){var n={};if(!e.current)return n;if(t.current){var r=vz(t.current),a=function(e){var t=vz(e),n=Fz(t);return Sz(t)+Sz(n)}(r);if(!r)return n;n.left=a+(null==r?void 0:r.clientWidth)/2}return n}}(r),d=XF(),h=vz(n.current),p=Boolean(a&&h&&xF(a)&&h.classList.contains(kO.emojiHasVariations));return(0,o.useEffect)((function(){p&&IB(r.current)}),[r,p,n]),!p&&n.current?c(null):(e=u(),t=f()),(0,o.createElement)("div",{ref:r,className:NO(yU.variationPicker,l()===mU.Down&&yU.pointingUp,p&&yU.visible),style:{top:e}},p&&a?[gF(a)].concat(wF(a)).slice(0,6).map((function(e){return(0,o.createElement)(rU,{key:e,emoji:a,unified:e,emojiStyle:i,showVariations:!1,getEmojiUrl:d})})):null,(0,o.createElement)("div",{className:NO(yU.pointer),style:t}))}!function(e){e[e.Up=0]="Up",e[e.Down=1]="Down"}(mU||(mU={}));var yU=BO.create(LO({variationPicker:{".":kO.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=)"}},HO("pointer",{backgroundPosition:"-25px 0"})));function bU(){var e=kB();return function(e){var t=RB();(0,o.useEffect)((function(){var n=e.current;if(n)return n.addEventListener("scroll",r,{passive:!0}),function(){null==n||n.removeEventListener("scroll",r)};function r(){t()}}),[e,t])}(e),Hz(e,FF.PICKER),function(){var e=kB(),t=OB(),n=FB();(0,o.useEffect)((function(){var r=e.current;function a(){n()&&t()}return null==r||r.addEventListener("mousemove",a,{passive:!0}),function(){null==r||r.removeEventListener("mousemove",a)}}),[e,t,n])}(),(0,o.createElement)("div",{className:NO(CU.body,VO.hiddenOnReactions),ref:e},(0,o.createElement)(gU,null),(0,o.createElement)(hU,null))}var wU,xU,CU=BO.create({body:{".":kO.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function _U(e,t){var n=kB(),r=FB(),a=OB();(0,o.useEffect)((function(){if(e){var a=n.current;return null==a||a.addEventListener("keydown",s,{passive:!0}),null==a||a.addEventListener("mouseover",u,!0),null==a||a.addEventListener("focus",o,!0),null==a||a.addEventListener("mouseout",i,{passive:!0}),null==a||a.addEventListener("blur",i,!0),function(){null==a||a.removeEventListener("mouseover",u),null==a||a.removeEventListener("mouseout",i),null==a||a.removeEventListener("focus",o,!0),null==a||a.removeEventListener("blur",i,!0),null==a||a.removeEventListener("keydown",s)}}function o(e){var n=vz(e.target);if(!n)return i();var r=Nz(n),a=r.unified,o=r.originalUnified;if(!a||!o)return i();t({unified:a,originalUnified:o})}function i(e){if(e&&!vz(e.relatedTarget))return t(null);t(null)}function s(e){"Escape"===e.key&&t(null)}function u(e){if(!r()){var n=vz(e.target);if(n){var o=function(e,t){if(!e||!t)return 0;var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.height-(n.y-r.y)}(n,a);if(o<n.getBoundingClientRect().height)return function(e,t){var n,r=Nz(e),a=r.unified,o=r.originalUnified;if(!a||!o)return;null==(n=document.activeElement)||null==n.blur||n.blur(),t({unified:a,originalUnified:o})}(n,t);dB(n)}}}}),[n,e,t,r,a])}function kU(e){var t=e.children,n=e.className,r=e.style,a=void 0===r?{}:r,i=e.direction,s=void 0===i?xU.ROW:i;return(0,o.createElement)("div",{style:LO({},a),className:NO(SU.flex,n,SU[s])},t)}!function(e){e.ROW="FlexRow",e.COLUMN="FlexColumn"}(xU||(xU={}));var SU=BO.create(((wU={flex:{display:"flex"}})[xU.ROW]={flexDirection:"row"},wU[xU.COLUMN]={flexDirection:"column"},wU));function MU(e){var t=e.className,n=e.style,r=void 0===n?{}:n;return(0,o.createElement)("div",{style:LO({flex:1},r),className:NO(t)})}function EU(e){var t=e.children,n=e.className,r=e.style;return(0,o.createElement)("div",{style:LO({},r,{position:"absolute"}),className:n},t)}function NU(e){var t=e.children,n=e.className,r=e.style;return(0,o.createElement)("div",{style:LO({},r,{position:"relative"}),className:n},t)}function TU(e){var t=e.isOpen,n=e.onClick,r=e.isActive,a=e.skinToneVariation,i=e.style;return(0,o.createElement)(Gz,{style:i,onClick:n,className:NO("epr-tone-"+a,jU.tone,!t&&jU.closedTone,r&&jU.active),"aria-pressed":r,"aria-label":"Skin tone "+cF[a]})}var IU,jU=BO.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}});function DU(){return(0,o.createElement)(NU,{style:{height:28}},(0,o.createElement)(EU,{style:{bottom:0,right:0}},(0,o.createElement)(LU,{direction:IU.VERTICAL})))}function LU(e){var t=e.direction,n=void 0===t?IU.HORIZONTAL:t,r=MB(),a=VF(),i=lB(),s=i[0],u=i[1],l=iB(),c=l[0],f=l[1],d=zF().current.onSkinToneChange||function(){},h=RB(),p=BB();if(a)return null;var m=28*lF.length+"px",v=s?m:"28px",g=n===IU.VERTICAL;return(0,o.createElement)(NU,{className:NO(AU.skinTones,g&&AU.vertical,s&&AU.open,g&&s&&AU.verticalShadow),style:g?{flexBasis:v,height:v}:{flexBasis:v}},(0,o.createElement)("div",{className:NO(AU.select),ref:r},lF.map((function(e,t){var n=e===c;return(0,o.createElement)(TU,{key:e,skinToneVariation:e,isOpen:s,style:{transform:NO(g?"translateY(-"+t*(s?28:0)+"px)":"translateX(-"+t*(s?28:0)+"px)",s&&n&&"scale(1.3)")},isActive:n,onClick:function(){s?(f(e),d(e),p()):u(!0),h()}})}))))}!function(e){e.VERTICAL="epr-vertical",e.HORIZONTAL="epr-horizontal"}(IU||(IU={}));var AU=BO.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function RU(){var e=GF(),t=QB();return e.showPreview?(0,o.createElement)(kU,{className:NO(OU.preview,VO.hiddenOnReactions)},(0,o.createElement)(PU,null),(0,o.createElement)(MU,null),t?(0,o.createElement)(DU,null):null):null}function PU(){var e,t=GF(),n=(0,o.useState)(null),r=n[0],a=n[1],i=HF(),s=uB()[0],u=XF();_U(t.showPreview,a);var l=CF(null!=(e=null==r?void 0:r.unified)?e:null==r?void 0:r.originalUnified),c=null!=l&&null!=r;return(0,o.createElement)((function(){var e=null!=s?s:CF(t.defaultEmoji);if(!e)return null;var n=s?mF(s):t.defaultCaption;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",null,c?(0,o.createElement)(nU,{unified:null==r?void 0:r.unified,emoji:l,emojiStyle:i,size:45,getEmojiUrl:u,className:NO(OU.emoji)}):e?(0,o.createElement)(nU,{unified:gF(e),emoji:e,emojiStyle:i,size:45,getEmojiUrl:u,className:NO(OU.emoji)}):null),(0,o.createElement)("div",{className:NO(OU.label)},c?mF(l):n))}),null)}var OU=BO.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"}});function FU(e){var t;return null!=(t=null==e?void 0:e.getAttribute("data-name"))?t:null}function BU(){var e=OF().customEmojis;return!!e&&0===e.length}function zU(e){var t,n=e.isActiveCategory,r=e.category,a=e.allowNavigation,i=e.categoryConfig,s=e.onClick;return(0,o.createElement)(Gz,{tabIndex:a?0:-1,className:NO(HU.catBtn,VO.categoryBtn,"epr-icn-"+r,(t={},t[kO.active]=n,t)),onClick:s,"aria-label":oF(i),"aria-selected":n,role:"tab","aria-controls":"epr-category-nav-id"})}var UU={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},WU={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},VU={":not(.epr-search-active)":{catBtn:{":hover":UU,"&.epr-active":UU}}},HU=BO.create(LO({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+)",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},HO("catBtn",WU),{".epr-dark-theme":LO({},VU),".epr-auto-theme":LO({},VU)}));function YU(){var e=(0,o.useState)(null),t=e[0],n=e[1],r=function(){var e=kB(),t=xB();return function(n){var r;if(e.current){var a=null==(r=e.current)?void 0:r.querySelector('[data-name="'+n+'"]');if(a){var o=a.offsetTop||0;NB(t.current,o)}}}}();!function(e){var t=kB();(0,o.useEffect)((function(){var n=new Map,r=t.current,a=new IntersectionObserver((function(t){if(r){for(var a,o=OO(t);!(a=o()).done;){var i=a.value,s=FU(i.target);n.set(s,i.intersectionRatio)}var u=Array.from(n),l=u[u.length-1];if(1==l[1])return e(l[0]);for(var c=0,f=u;c<f.length;c++){var d=f[c],h=d[0];if(d[1]){e(h);break}}}}),{threshold:[0,1]});null==r||r.querySelectorAll(FO(kO.category)).forEach((function(e){a.observe(e)}))}),[t,e])}(n);var a=fB(),i=YF(),s=EB(),u=BU();return(0,o.createElement)("div",{className:NO(GU.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:s},i.map((function(e){var i=aF(e),s=i===t;if(function(e){return e.category===KO.CUSTOM}(e)&&u)return null;var l=!a&&!s;return(0,o.createElement)(zU,{key:i,category:i,isActiveCategory:s,allowNavigation:l,categoryConfig:e,onClick:function(){n(i),r(i)}})})))}var GU=BO.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),qU="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function QU(){var e=UB();return(0,o.createElement)(Gz,{className:NO(KU.btnClearSearch,VO.visibleOnSearchOnly),onClick:e,"aria-label":"Clear",title:"Clear"},(0,o.createElement)("div",{className:NO(KU.icnClearnSearch)}))}var XU={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},KU=BO.create(LO({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+qU+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},HO("icnClearnSearch",{backgroundPositionY:"-40px"}),HO("btnClearSearch",XU))),JU=FO(kO.emojiPicker)+" "+FO(kO.emojiList),ZU=["button",FO(kO.emoji)].join(""),$U=FO(kO.category);function eW(e){var t=e.value;if(!t)return null;var n=function(e){return[ZU,'[data-full-name*="',YB(e),'"]'].join("")}(t);return(0,o.createElement)("style",null,"\n    "+JU+" "+ZU+" {\n      display: none;\n    }\n\n\n    "+JU+" "+n+" {\n      display: flex;\n    }\n\n    "+JU+" "+$U+":not(:has("+n+")) {\n      display: none;\n    }\n  ")}function tW(){return(0,o.createElement)("div",{className:NO(nW.icnSearch)})}var nW=BO.create(LO({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+)"}},HO("icnSearch",{backgroundPositionY:"-20px"})));function rW(){var e=qF(),t=qB();return e?null:(0,o.createElement)(kU,{className:NO(oW.overlay)},(0,o.createElement)(aW,null),t?(0,o.createElement)(LU,null):null)}function aW(){var e=(0,o.useState)(0),t=e[0],n=e[1],r=RB(),a=SB(),i=function(){var e,t=OF();return null!=(e=[t.searchPlaceHolder,t.searchPlaceholder].find((function(e){return e!==EF})))?e:EF}(),s=OF().autoFocusSearch,u=WB(),l=u.statusSearchResults,c=u.searchTerm,f=u.onChange,d=null==a?void 0:a.current,h=null==d?void 0:d.value;return(0,o.createElement)(NU,{className:NO(oW.searchContainer)},(0,o.createElement)(eW,{value:h}),(0,o.createElement)("input",{autoFocus:s,"aria-label":"Type to search for an emoji",onFocus:r,className:NO(oW.search),type:"text","aria-controls":"epr-search-id",placeholder:i,onChange:function(e){n(t+1),setTimeout((function(){var t,n;f(null!=(t=null==e||null==(n=e.target)?void 0:n.value)?t:h)}))},ref:a}),c?(0,o.createElement)("div",{role:"status",className:NO("epr-status-search-results",oW.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},l):null,(0,o.createElement)(tW,null),(0,o.createElement)(QU,null))}var oW=BO.create(LO({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-input-bg-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+qU+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},HO("icnClearnSearch",{backgroundPositionY:"-40px"}),HO("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function iW(){return(0,o.createElement)(NU,{className:NO("epr-header",VO.hiddenOnReactions)},(0,o.createElement)(rW,null),(0,o.createElement)(YU,null))}function sW(e){return(0,o.createElement)(gB,null,(0,o.createElement)(WO,null),(0,o.createElement)(PF,Object.assign({},e),(0,o.createElement)(uW,null)))}function uW(){var e=aB()[0],t=WF(),n=(0,o.useState)(!e),r=n[0],a=n[1],i=OF().open;return(0,o.useEffect)((function(){e&&!t||r||a(!0)}),[r,t,e]),i?(0,o.createElement)(az,null,(0,o.createElement)(iU,null),(0,o.createElement)(lW,{renderAll:r})):null}function lW(e){return e.renderAll?(0,o.createElement)(o.Fragment,null,(0,o.createElement)(iW,null),(0,o.createElement)(bU,null),(0,o.createElement)(RU,null)):null}var cW=(0,o.memo)(sW,YO),fW=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,AO(t,n),r.getDerivedStateFromError=function(){return{hasError:!0}};var a=r.prototype;return a.componentDidCatch=function(e,t){console.error("Emoji Picker React failed to render:",e,t)},a.render=function(){return this.state.hasError?null:this.props.children},r}(o.Component);const dW=function(e){var t=function(e){var t=o.useRef({onEmojiClick:e.onEmojiClick||UF,onReactionClick:e.onReactionClick||e.onEmojiClick,onSkinToneChange:e.onSkinToneChange||UF});return o.useEffect((function(){t.current.onEmojiClick=e.onEmojiClick||UF,t.current.onReactionClick=e.onReactionClick||e.onEmojiClick}),[e.onEmojiClick,e.onReactionClick]),o.useEffect((function(){t.current.onSkinToneChange=e.onSkinToneChange||UF}),[e.onSkinToneChange]),t}({onEmojiClick:e.onEmojiClick,onReactionClick:e.onReactionClick,onSkinToneChange:e.onSkinToneChange});return(0,o.createElement)(fW,null,(0,o.createElement)(BF.Provider,{value:t},(0,o.createElement)(cW,Object.assign({},e))))},hW=e=>{let{chatFooter:t,room:n,isReplying:r,friendId:a,setIsTyping:i,chatNewAttachment:s,messageActionButtonContainer:u,setIsReplying:l,userId:c,messageInput:f,replyData:d,messages:h,setReplyData:p,isPreview:m,setIsPreview:v,msgListRef:g}=e;const y=xn(),[b,w]=(0,o.useState)(!0),[x,C]=(0,o.useState)(""),[_,k]=(0,o.useState)(!1),[S,M]=(0,o.useState)(!1),[E,N]=(0,o.useState)(!1),[T,I]=(0,o.useState)("\ud83d\udc4d"),[j,D]=(0,o.useState)(!1),L=(0,o.useRef)(null),A=(0,o.useRef)(null),R=dn((e=>e.setting)),{profile:P}=Xe();(0,o.useEffect)((()=>{"ai-chat"===P&&D(!0)}),[P]),(0,o.useEffect)((()=>{I(R.actionEmoji||"\ud83d\udc4d")}),[R]);const O=e=>{if(null!=(null===g||void 0===g?void 0:g.current)||void 0!=(null===g||void 0===g?void 0:g.current)){let e=setInterval((()=>{let e=document.querySelector("#chatMessageList .chat-message-container:last-child");null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500);null===g||void 0===g||g.current.addEventListener("scroll",(t=>{t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<=5&&clearInterval(e)}))}},F=(0,o.useCallback)((e=>{if(e.preventDefault(),!(Mn()(e.target).hasClass("button-disabled")||!1)){if(n)if(r){let e={room:n,senderId:c,receiverId:a,message:x,attachment:_,parent:d.messageId,isAi:j};Ui.emit("sendMessage",e),i(!1),y(ku(e)),O()}else{let e={room:n,senderId:c,receiverId:a,message:x,attachment:_,parent:!1,isAi:j};Ui.emit("sendMessage",e),i(!1),y(ku(e)),O()}C(""),l(!1),v(!1),k(""),p({messageId:null,body:null}),v(!1)}}),[h,x,_]);const B=new KeyboardEvent("keydown",{key:"Enter",keyCode:13,code:"Enter",which:13,bubbles:!0});let z=(0,o.useCallback)((async e=>{let t=new MouseEvent("click",{bubbles:!0,cancelable:!1}),n=document.createElement("input");n.type="file",n.addEventListener("change",(async e=>{let t=e.target.files[0];if(t){let e=new FormData;e.append("image",t),k("https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif"),v(!0);let n=await ao.post("/upload",e,{headers:{"Content-Type":"multipart/form-data"}});if(200===n.status){let e=n.data.secure_url;e&&k(e)}}})),n&&n.dispatchEvent(t)}),[_,m]),U=(0,o.useCallback)((()=>{M(!0)}),[S]),W=(0,o.useCallback)((()=>{N(!0)}),[E]),V=(0,o.useCallback)((e=>{C(x+e.emoji)}),[x]),H=(0,o.useCallback)((e=>{I(e.emoji),N(!1),M(!1),X(e.emoji)}),[]),Y=(0,o.useCallback)((e=>{A.current.dispatchEvent(new MouseEvent("click",{bubbles:!0}))}),[_]),G=(0,o.useCallback)((async e=>{if(e.target.files[0]){let e=new FormData;e.append("file",e),k("https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif");let t=await ao.post("/upload/file",e,{headers:{"Content-Type":"multipart/form-data"}});if(200===t.status){let e=t.data.secure_url;e&&k(e)}}}),[Ui]),q=(0,o.useRef)(null),Q=(0,o.useRef)(null);(0,o.useEffect)((()=>{let e=e=>{q.current&&!q.current.contains(e.target)&&M(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,o.useEffect)((()=>{let e=e=>{Q.current&&!Q.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);let X=(0,o.useCallback)((async e=>{let t=await ao.post("setting/update",{actionEmoji:e});200==t.status&&y(cO(t.data))}),[R]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{ref:t,className:"chat-footer",children:[m&&(0,Lt.jsxs)("div",{className:"new-message-preview-container",children:[r&&(0,Lt.jsx)("div",{className:"reply-message-preview-form",children:(0,Lt.jsx)("p",{className:"text-small",children:d.body})}),_&&(0,Lt.jsx)("div",{className:"attachment-preview-container",children:(0,Lt.jsx)("img",{className:"attachment-preview",src:_,alt:"Message Attachment"})}),(0,Lt.jsx)("span",{onClick:e=>{v(!1),l(!1)},className:"preview-close-button bg-danger",children:(0,Lt.jsx)("i",{className:"fa fa-times"})})]}),(0,Lt.jsxs)("div",{className:"new-message-container",children:[(0,Lt.jsx)("div",{ref:s,className:"chat-new-attachment",children:(0,Lt.jsxs)("div",{className:"chat-atachment-button-container",children:[(0,Lt.jsxs)("div",{className:"chat-attachment-button",onClick:Y.bind(void 0),children:[(0,Lt.jsx)("i",{className:"fas fa-plus-circle"}),(0,Lt.jsx)("input",{type:"file",name:"uploaded_file",onChange:G.bind(void 0),ref:A,style:{display:"none"}})]}),(0,Lt.jsxs)("div",{className:"chat-attachment-button",onClick:z.bind(void 0),children:[(0,Lt.jsx)("i",{className:"fas fa-images"}),(0,Lt.jsx)("input",{type:"file",style:{display:"none"},ref:L,onChange:(async e=>{}).bind(void 0)})]}),(0,Lt.jsxs)("div",{onClick:U.bind(void 0),className:"message-action-emoji-container chat-attachment-button",children:[(0,Lt.jsx)("i",{style:{color:"#F4D52F"},className:"fas fa-smile-beam"}),S&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{ref:q,className:"emoji-container",children:(0,Lt.jsx)(dW,{theme:"dark",onEmojiClick:V})})})]})]})}),(0,Lt.jsxs)("div",{className:"new-message-form",children:[(0,Lt.jsx)("div",{className:"new-message-input-container",children:(0,Lt.jsx)("input",{ref:f,style:{width:b+"px"},onChange:e=>{C(e.target.value),R.showIsTyping&&Ui.emit("update_type",{room:n,type:e.target.value})},value:x,onKeyDown:e=>{"Enter"===e.key&&(F(e),C(""))},placeholder:"Send Message....",id:"newMessageInput",className:"new-message-input",onFocus:e=>{Ui.emit("typing",{receiverId:c,room:n,isTyping:!0,type:x})},onBlur:()=>{Ui.emit("typing",{receiverId:c,room:n,isTyping:!1,type:x})}})}),(0,Lt.jsx)("div",{ref:u,className:"message-action-button-container",children:x.length>0||_?(0,Lt.jsx)("div",{onClick:F,className:"message-action-button send-message ".concat("https://res.cloudinary.com/dz88yjerw/image/upload/v1743092084/i5lcu63atrbkpcy6oqam.gif"==_&&"button-disabled"),children:(0,Lt.jsx)("i",{className:"fas fa-paper-plane"})}):(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("div",{onClick:e=>{C(T),setTimeout((()=>{f.current.dispatchEvent(B)}),200)},className:"message-action-button send-like",children:(0,Lt.jsx)("span",{className:"",children:T})}),(0,Lt.jsxs)("div",{onClick:W.bind(void 0),className:"message-action-emoji-container chat-attachment-button",children:[(0,Lt.jsx)("i",{className:"fas fa-chevron-up"}),E&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{ref:Q,className:"emoji-container",children:(0,Lt.jsx)(dW,{theme:"dark",onEmojiClick:H})})})]})]})})]})]})]})})},pW=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsxs)("div",{className:"chat-message-container message-receive skeleton-card border-0 p-1 my-2 w-75 sm-skleton px-3","data-toggle":"tooltip",children:[(0,Lt.jsx)("div",{className:"chat-message-profilePic",children:(0,Lt.jsx)("div",{className:"skeleton-avatar"})}),(0,Lt.jsx)("div",{className:"skeleton-lines",children:(0,Lt.jsx)("div",{className:"skeleton-line large mb-0"})})]}),(0,Lt.jsxs)("div",{className:"chat-message-container message-sent skeleton-card border-0 p-1 my-2 w-75 sm-skleton px-3","data-toggle":"tooltip",children:[(0,Lt.jsx)("div",{className:"skeleton-lines",children:(0,Lt.jsx)("div",{className:"skeleton-line large mb-0 ml-auto"})}),(0,Lt.jsx)("div",{className:"chat-message-profilePic",children:(0,Lt.jsx)("div",{className:"skeleton-avatar"})})]})]},t)))},mW=e=>{var t,n,r,a,i;let{socket:s}=e,u=xn(),l=dn((e=>e.profile)),c=dn((e=>e.option.headerHeight)),d=dn((e=>e.option.bodyHeight)),h=(dn((e=>e.setting)),l._id),[p,m]=(0,o.useState)({}),[v,g]=(0,o.useState)(!0);const[y,b]=(0,o.useState)(!1);let w=fo();const[x,C]=(0,o.useState)(""),[_,k]=(0,o.useState)(!1),[S,M]=(0,o.useState)(!1),[E,N]=(0,o.useState)(!1),[T,I]=(0,o.useState)([]),[j,D]=(0,o.useState)(!1),[L,A]=(0,o.useState)(!1),[R,P]=(0,o.useState)(""),[O,F]=(0,o.useState)(!0),[B,z]=(0,o.useState)(!1),[U,W]=(0,o.useState)(0),[V,H]=(0,o.useState)({messageId:null,body:null}),Y=(0,o.useRef)(null),G=(0,o.useRef)(null),q=(0,o.useRef)(null),Q=(0,o.useRef)(null),X=(0,o.useRef)(null),K=(0,o.useRef)(null),J=null===(t=q.current)||void 0===t?void 0:t.offsetHeight,Z=null===(n=Q.current)||void 0===n?void 0:n.offsetHeight,$=(null===(r=Q.current)||void 0===r?void 0:r.offsetWidth)-(null===(a=X.current)||void 0===a?void 0:a.offsetWidth)-(null===(i=K.current)||void 0===i?void 0:i.offsetWidth),ee=e=>{if(null!=Y.current){let e=setInterval((()=>{let e=document.querySelector("#chatMessageList .chat-message-container:last-child");null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500);Y.current.addEventListener("scroll",(t=>{let n=t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight;console.log("scrl",t.target.scrollHeight,t.target.scrollTop,n),n<=5&&clearInterval(e)}))}};null!==G.current&&(G.current.style.width=$+"px");const te=d-c;let ne=Xe(),re=ne.profile;(0,o.useEffect)((()=>{u(_u(ne.profile))}),[ne]);const[ae,oe]=(0,o.useState)(te-J-Z),[ie,se]=(0,o.useState)({height:"".concat(w?d-c-Z-J:ae,"px"),maxHeight:"".concat(w?ae+c:ae,"px"),overflowY:"scroll"});(0,o.useEffect)((()=>{oe(d-c-J-Z),se({height:"".concat(w?d-c-Z-J:ae,"px"),maxHeight:"".concat(w?ae+c:ae,"px"),overflowY:"scroll"})}),[S,B]),(0,o.useEffect)((()=>{const e=()=>{const e=Y.current,t=e.scrollTop,n=e.scrollHeight-e.clientHeight;W(t/n*100)},t=Y.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}}),[]),(0,o.useEffect)((()=>{O&&U<30&&(s.emit("loadMessages",{myId:h,friendId:re,skip:T.length}),A(!0),F(!1))}),[U]),(0,o.useEffect)((()=>(s.emit("is_active",{profileId:re,myId:h}),s.on("is_active",((e,t)=>{let n,r,a=mu()(t),o=mu()(Date.now()),i=o.diff(a,"days"),s=o.diff(a,"days");k(!0===e),0===i?(n=mu()(t),r=n.format("hh:mm A")):s>0?(n=mu()(t),r=n.format("MM/YY hh:mm A")):(n=mu()(t),r=n.format("DD/MM hh:mm A")),b(r)})),s.on("messageReacted",(e=>{let t="#chatMessageList .chat-message-container .message-id-"+e;Mn()(t).addClass("message-reacted")})),s.on("messageReactRemoved",(e=>{if(e){let t="#chatMessageList .chat-message-container .message-id-"+e;Mn()(t).removeClass("message-reacted")}})),()=>{s.off("messageReacted"),s.off("messageReactRemoved"),s.off("is_active")})),[p,ne]),(0,o.useEffect)((()=>{z(!B)}),[ae]),(0,o.useEffect)((()=>{ao.get("/profile",{params:{profileId:re}}).then((e=>{m(e.data),u(ts(!1))})).catch((e=>console.log(e)))}),[ne,re]),(0,o.useEffect)((()=>{if(p&&g(!!p.blockedUsers&&p.blockedUsers.includes(l._id)),ee(),!re||!h)return;const e=[h,re].sort().join("_");return s.emit("startChat",{user1:h,user2:re}),C(e),s.on("roomJoined",(e=>{let{room:t}=e;console.log("Joined room: ".concat(t)),localStorage.setItem("roomId",t)})),s.on("loadMessages",(e=>{let{loadedMessages:t,hasNewMessage:n}=e;F(n),A(!1),I((e=>[...t,...e]))})),s.on("previousMessages",(e=>{I(e),F(!0)})),s.on("newMessage",(e=>{let{updatedMessage:t,senderName:n,senderPP:r}=e;t.receiverId==h&&t.senderId==re&&(I((e=>[...e,t])),ee()),t.senderId==h&&t.receiverId==re&&(I((e=>[...e,t])),ee())})),s.on("deleteMessage",(e=>{Mn()("#chatBox .chat-body .chat-message-list").has(".chat-message-container.message-id-".concat(e))&&Mn()("#chatBox .chat-body .chat-message-list .chat-message-container.message-id-".concat(e)).hide()})),s.on("typing",(e=>{let{receiverId:t,isTyping:n,type:r}=e;t==re&&(1==n?(D(!0),P(r),ee()):D(!1))})),s.on("update_type",(e=>{let{type:t}=e;P(t)})),()=>{s.off("newMessage"),s.off("previousMessages"),s.off("deleteMessage"),s.off("update_type"),s.off("typing"),s.off("loadMessages")}}),[ne,p]),(0,o.useEffect)((()=>(T.length>0&&setTimeout((()=>{let e=T[T.length-1];e.senderId!==h&&(s.emit("seenMessage",e),u(_u(re)))}),2e3),s.on("seenMessage",(e=>{Mn()("#chatMessageList .message-sent.chat-message-container .chat-message-seen-status").css("visibility","hidden"),Mn()("#chatMessageList .message-sent.chat-message-container.message-id-"+e._id+":last-child .chat-message-seen-status").css("visibility","visible")})),()=>{s.off("seenMessage")})),[ne,T]);let ue={chatFooter:Q,room:x,friendId:re,setIsTyping:D,setIsReplying:M,isReplying:S,chatNewAttachment:X,messageActionButtonContainer:K,userId:h,messageInput:G,replyData:V,isPreview:E,setIsPreview:N,setReplyData:H,messages:T};return(0,Lt.jsx)("div",{children:(0,Lt.jsxs)("div",{id:"chatBox",style:{minHeight:"".concat(te,"px")},children:[(0,Lt.jsx)("div",{ref:q,className:"chat-header",children:(0,Lt.jsx)(uO,{friendProfile:p,friendProfilePic:p.profilePic,isActive:_,lastSeen:y,room:x})}),(0,Lt.jsx)("div",{className:"chat-body",children:(0,Lt.jsxs)("div",{className:"chat-message-list",style:ie,id:"chatMessageList",ref:Y,children:[T.length>0?T.map(((e,t)=>(0,Lt.jsx)(gu,{msg:e,friendProfile:p,messages:T,isActive:_,setIsReplying:M,setReplyData:H,isPreview:E,setIsPreview:N,msgListRef:Y,isMsgLoading:L},t))):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(pW,{count:10})}),j&&(0,Lt.jsxs)("div",{className:"chat-message-container message-receive message-typing",children:[(0,Lt.jsx)("div",{className:"chat-message-profilePic",children:(0,Lt.jsx)(Tn,{profilePic:"".concat(p.profilePic),profile:p._id,active:!0})}),(0,Lt.jsx)("div",{className:"chat-message",children:(0,Lt.jsx)("p",{className:"message-container mb-0",children:R||(0,Lt.jsxs)("div",{className:"typing-indicator",children:[(0,Lt.jsx)("span",{className:"typing-dots"}),(0,Lt.jsx)("span",{className:"typing-dots"}),(0,Lt.jsx)("span",{className:"typing-dots"})]})})})]})]})}),v?(0,Lt.jsx)("div",{ref:Q,className:"chat-footer",children:(0,Lt.jsxs)("p",{className:"text-center text-danger fs-4 mb-0",children:[p.fullName," Blocked You"]})}):(0,Lt.jsx)(hW,f({},ue))]})})},vW=e=>{let{profile:t}=Xe();return(0,o.useEffect)((()=>{}),[]),(0,Lt.jsx)(o.Fragment,{children:t?(0,Lt.jsx)(mW,{socket:Ui,cameraVideoRef:e.cameraVideoRef,children:" "}):(0,Lt.jsx)("h2",{className:"text-center mt-3",children:"Select an user to start conversation"})})};function gW(){return gW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gW.apply(this,arguments)}function yW(e,t){return yW=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yW(e,t)}var bW=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).state={columns:[],childRefs:[],hasDistributed:!1},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,yW(t,n);var a=r.prototype;return a.componentDidUpdate=function(){this.state.hasDistributed||this.props.sequential||this.distributeChildren()},r.getDerivedStateFromProps=function(e,t){var n=e.children,a=e.columnsCount,o=a!==t.columns.length;return t&&n===t.children&&!o?null:gW({},r.getEqualCountColumns(n,a),{children:n,hasDistributed:!1})},a.shouldComponentUpdate=function(e){return e.children!==this.state.children||e.columnsCount!==this.props.columnsCount},a.distributeChildren=function(){var e=this,t=this.props,n=t.children,r=t.columnsCount,a=Array(r).fill(0);if(this.state.childRefs.every((function(e){return e.current.getBoundingClientRect().height}))){var i=Array.from({length:r},(function(){return[]})),s=0;o.Children.forEach(n,(function(t){if(t&&o.isValidElement(t)){var n=e.state.childRefs[s].current.getBoundingClientRect().height,r=a.indexOf(Math.min.apply(Math,a));a[r]+=n,i[r].push(t),s++}})),this.setState((function(e){return gW({},e,{columns:i,hasDistributed:!0})}))}},r.getEqualCountColumns=function(e,t){var n=Array.from({length:t},(function(){return[]})),r=0,a=[];return o.Children.forEach(e,(function(e){if(e&&o.isValidElement(e)){var i=o.createRef();a.push(i),n[r%t].push(o.createElement("div",{style:{display:"flex",justifyContent:"stretch"},key:r,ref:i},e)),r++}})),{columns:n,childRefs:a}},a.renderColumns=function(){var e=this.props,t=e.gutter,n=e.itemTag,r=e.itemStyle;return this.state.columns.map((function(e,a){return o.createElement(n,{key:a,style:gW({display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},r)},e.map((function(e){return e})))}))},a.render=function(){var e=this.props,t=e.gutter,n=e.className,r=e.style,a=e.containerTag;return o.createElement(a,{style:gW({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:t},r),className:n},this.renderColumns())},r}(o.Component);bW.propTypes={},bW.defaultProps={columnsCount:3,gutter:"0",className:null,style:{},containerTag:"div",itemTag:"div",itemStyle:{},sequential:!1};const wW=bW;var xW="undefined"!==typeof window?o.useLayoutEffect:o.useEffect,CW=function(){var e=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return xW((function(){n(!0)}),[]),t}(),t=(0,o.useState)("undefined"!==typeof window?window.innerWidth:0),n=t[0],r=t[1],a=(0,o.useCallback)((function(){e&&r(window.innerWidth)}),[e]);return xW((function(){if(e)return window.addEventListener("resize",a),a(),function(){return window.removeEventListener("resize",a)}}),[e,a]),n},_W=function(e){var t=e.columnsCountBreakPoints,n=void 0===t?{350:1,750:2,900:3}:t,r=e.gutterBreakPoints,a=void 0===r?{}:r,i=e.children,s=e.className,u=void 0===s?null:s,l=e.style,c=void 0===l?null:l,f=CW(),d=(0,o.useCallback)((function(e,t){var n=Object.keys(e).sort((function(e,t){return e-t})),r=n.length>0?e[n[0]]:t;return n.forEach((function(t){t<f&&(r=e[t])})),r}),[f]),h=(0,o.useMemo)((function(){return d(n,1)}),[d,n]),p=(0,o.useMemo)((function(){return d(a,"10px")}),[d,a]);return o.createElement("div",{className:u,style:c},o.Children.map(i,(function(e,t){return o.cloneElement(e,{key:t,columnsCount:h,gutter:p})})))};_W.propTypes={};const kW=_W,SW=wW,MW=e=>{let{count:t=1,style:n}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"msg-media-item",children:(0,Lt.jsx)("div",{className:"pp-skleton-container",style:{backgroundColor:"gray"},children:(0,Lt.jsx)("div",{style:{padding:0,margin:0,width:"300px"},className:"skeleton-card no-border",children:(0,Lt.jsx)("div",{style:{padding:0,margin:0,height:"200px"},className:"skeleton-main"})})})},t)))},EW=e=>{let[t,n]=(0,o.useState)(!1);(0,o.useEffect)((()=>{Nn(e.src,n)}),[e.src]);let r=(0,o.useCallback)((t=>{e.setIsLightbox(!0),e.setImageIndex(e.index)}),[]);return(0,Lt.jsxs)(Lt.Fragment,{children:[!t&&(0,Lt.jsx)(MW,{count:1}),t&&(0,Lt.jsx)("div",{onClick:r.bind(void 0),className:"msg-media-item",children:(0,Lt.jsx)("img",{src:e.src,className:"w-100",alt:""})})]})},NW=(0,o.createContext)({});function TW(e){const t=(0,o.useRef)(null);return null===t.current&&(t.current=e()),t.current}const IW="undefined"!==typeof window,jW=IW?o.useLayoutEffect:o.useEffect,DW=(0,o.createContext)(null);function LW(e){return"object"===typeof e&&null!==e}function AW(e){return LW(e)&&"offsetHeight"in e}const RW=(0,o.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class PW extends o.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=AW(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OW(e){let{children:t,isPresent:n,anchorX:r}=e;const a=(0,o.useId)(),i=(0,o.useRef)(null),s=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,o.useContext)(RW);return(0,o.useInsertionEffect)((()=>{const{width:e,height:t,top:o,left:l,right:c}=s.current;if(n||!i.current||!e||!t)return;const f="left"===r?"left: ".concat(l):"right: ".concat(c);i.current.dataset.motionPopId=a;const d=document.createElement("style");return u&&(d.nonce=u),document.head.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat(f,"px !important;\n            top: ").concat(o,"px !important;\n          }\n        ")),()=>{document.head.contains(d)&&document.head.removeChild(d)}}),[n]),(0,Lt.jsx)(PW,{isPresent:n,childRef:i,sizeRef:s,children:o.cloneElement(t,{ref:i})})}const FW=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:a,custom:i,presenceAffectsLayout:s,mode:u,anchorX:l}=e;const c=TW(BW),d=(0,o.useId)();let h=!0,p=(0,o.useMemo)((()=>(h=!1,{id:d,initial:n,isPresent:r,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;a&&a()},register:e=>(c.set(e,!1),()=>c.delete(e))})),[r,c,a]);return s&&h&&(p=f({},p)),(0,o.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[r]),o.useEffect((()=>{!r&&!c.size&&a&&a()}),[r]),"popLayout"===u&&(t=(0,Lt.jsx)(OW,{isPresent:r,anchorX:l,children:t})),(0,Lt.jsx)(DW.Provider,{value:p,children:t})};function BW(){return new Map}function zW(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,o.useContext)(DW);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=(0,o.useId)();(0,o.useEffect)((()=>{if(e)return a(i)}),[e]);const s=(0,o.useCallback)((()=>e&&r&&r(i)),[i,r,e]);return!n&&r?[!1,s]:[!0]}const UW=e=>e.key||"";function WW(e){const t=[];return o.Children.forEach(e,(e=>{(0,o.isValidElement)(e)&&t.push(e)})),t}const VW=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:s="sync",propagate:u=!1,anchorX:l="left"}=e;const[c,f]=zW(u),d=(0,o.useMemo)((()=>WW(t)),[t]),h=u&&!c?[]:d.map(UW),p=(0,o.useRef)(!0),m=(0,o.useRef)(d),v=TW((()=>new Map)),[g,y]=(0,o.useState)(d),[b,w]=(0,o.useState)(d);jW((()=>{p.current=!1,m.current=d;for(let e=0;e<b.length;e++){const t=UW(b[e]);h.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}}),[b,h.length,h.join("-")]);const x=[];if(d!==g){let e=[...d];for(let t=0;t<b.length;t++){const n=b[t],r=UW(n);h.includes(r)||(e.splice(t,0,n),x.push(n))}return"wait"===s&&x.length&&(e=x),w(WW(e)),y(d),null}const{forceRender:C}=(0,o.useContext)(NW);return(0,Lt.jsx)(Lt.Fragment,{children:b.map((e=>{const t=UW(e),o=!(u&&!c)&&(d===b||h.includes(t));return(0,Lt.jsx)(FW,{isPresent:o,initial:!(p.current&&!r)&&void 0,custom:n,presenceAffectsLayout:i,mode:s,onExitComplete:o?void 0:()=>{if(!v.has(t))return;v.set(t,!0);let e=!0;v.forEach((t=>{t||(e=!1)})),e&&(null===C||void 0===C||C(),w(m.current),u&&(null===f||void 0===f||f()),a&&a())},anchorX:l,children:e},t)}))})};function HW(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}function YW(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}function GW(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function qW(e,t,n,r){if("function"===typeof t){const[a,o]=GW(r);t=t(void 0!==n?n:e.custom,a,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[a,o]=GW(r);t=t(void 0!==n?n:e.custom,a,o)}return t}function QW(e,t,n){const r=e.getProps();return qW(r,t,void 0!==n?n:r.custom,e)}function XW(e,t){var n,r;return null!==(n=null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null===e||void 0===e?void 0:e.default)&&void 0!==n?n:e}const KW=e=>e,JW={},ZW=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],$W={value:null,addProjectionMetrics:null};function eV(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=ZW.reduce(((e,n)=>(e[n]=function(e,t){let n=new Set,r=new Set,a=!1,o=!1;const i=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},u=0;function l(t){i.has(t)&&(c.schedule(t),e()),u++,t(s)}const c={schedule:function(e){const t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a?n:r;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),t.has(e)||t.add(e),e},cancel:e=>{r.delete(e),i.delete(e)},process:e=>{s=e,a?o=!0:(a=!0,[n,r]=[r,n],n.forEach(l),t&&$W.value&&$W.value.frameloop[t].push(u),u=0,n.clear(),a=!1,o&&(o=!1,c.process(e)))}};return c}(o,t?n:void 0),e)),{}),{setup:s,read:u,resolveKeyframes:l,preUpdate:c,update:f,preRender:d,render:h,postRender:p}=i,m=()=>{const o=JW.useManualTiming?a.timestamp:performance.now();n=!1,JW.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(o-a.timestamp,40),1)),a.timestamp=o,a.isProcessing=!0,s.process(a),u.process(a),l.process(a),c.process(a),f.process(a),d.process(a),h.process(a),p.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(m))},v=ZW.reduce(((t,o)=>{const s=i[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,a.isProcessing||e(m)),s.schedule(t,o,i)},t}),{});return{schedule:v,cancel:e=>{for(let t=0;t<ZW.length;t++)i[ZW[t]].cancel(e)},state:a,steps:i}}const{schedule:tV,cancel:nV,state:rV,steps:aV}=eV("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:KW,!0),oV=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],iV=(()=>new Set(oV))(),sV=new Set(["width","height","top","left","right","bottom",...oV]);function uV(e,t){-1===e.indexOf(t)&&e.push(t)}function lV(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class cV{constructor(){this.subscriptions=[]}add(e){return uV(this.subscriptions,e),()=>lV(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let a=0;a<r;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function fV(e,t){return t?e*(1e3/t):0}let dV;function hV(){dV=void 0}const pV={now:()=>(void 0===dV&&pV.set(rV.isProcessing||JW.useManualTiming?rV.timestamp:performance.now()),dV),set:e=>{dV=e,queueMicrotask(hV)}},mV={current:void 0};class vV{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=pV.now();var a,o;if((t.updatedAt!==r&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev)&&(null===(a=t.events.change)||void 0===a||a.notify(t.current),t.dependents))for(const i of t.dependents)i.dirty();n&&(null===(o=t.events.renderRequest)||void 0===o||o.notify(t.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=pV.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new cV);const n=this.events[e].add(t);return"change"===e?()=>{n(),tV.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null===(e=this.events.change)||void 0===e||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return mV.current&&mV.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=pV.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return fV(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null===(e=this.dependents)||void 0===e||e.clear(),null===(t=this.events.destroy)||void 0===t||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gV(e,t){return new vV(e,t)}const yV=e=>Array.isArray(e),bV=["transitionEnd","transition"];function wV(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,gV(n))}function xV(e){return yV(e)?e[e.length-1]||0:e}const CV=e=>Boolean(e&&e.getVelocity);function _V(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(CV(e)&&e.add)}(n))return n.add(t);if(!n&&JW.WillChange){const n=new JW.WillChange("auto");e.addValue("willChange",n),n.add(t)}}const kV=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),SV="data-"+kV("framerAppearId");function MV(e){return e.props[SV]}const EV=(e,t)=>n=>t(e(n)),NV=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(EV)},TV=(e,t,n)=>n>t?t:n<e?e:n,IV=e=>1e3*e,jV=e=>e/1e3,DV={layout:0,mainThread:0,waapi:0};const LV=e=>t=>"string"===typeof t&&t.startsWith(e),AV=LV("--"),RV=LV("var(--"),PV=e=>!!RV(e)&&OV.test(e.split("/*")[0].trim()),OV=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,FV={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},BV=f(f({},FV),{},{transform:e=>TV(0,1,e)}),zV=f(f({},FV),{},{default:1}),UV=e=>Math.round(1e5*e)/1e5,WV=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g;const VV=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i,HV=(e,t)=>n=>Boolean("string"===typeof n&&VV.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),YV=(e,t,n)=>r=>{if("string"!==typeof r)return r;const[a,o,i,s]=r.match(WV);return{[e]:parseFloat(a),[t]:parseFloat(o),[n]:parseFloat(i),alpha:void 0!==s?parseFloat(s):1}},GV=f(f({},FV),{},{transform:e=>Math.round((e=>TV(0,255,e))(e))}),qV={test:HV("rgb","red"),parse:YV("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:a=1}=e;return"rgba("+GV.transform(t)+", "+GV.transform(n)+", "+GV.transform(r)+", "+UV(BV.transform(a))+")"}};const QV={test:HV("#"),parse:function(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:qV.transform},XV=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),KV=XV("deg"),JV=XV("%"),ZV=XV("px"),$V=XV("vh"),eH=XV("vw"),tH=(()=>f(f({},JV),{},{parse:e=>JV.parse(e)/100,transform:e=>JV.transform(100*e)}))(),nH={test:HV("hsl","hue"),parse:YV("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:a=1}=e;return"hsla("+Math.round(t)+", "+JV.transform(UV(n))+", "+JV.transform(UV(r))+", "+UV(BV.transform(a))+")"}},rH={test:e=>qV.test(e)||QV.test(e)||nH.test(e),parse:e=>qV.test(e)?qV.parse(e):nH.test(e)?nH.parse(e):QV.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?qV.transform(e):nH.transform(e)},aH=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi;const oH="number",iH="color",sH=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function uH(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let o=0;const i=t.replace(sH,(e=>(rH.test(e)?(r.color.push(o),a.push(iH),n.push(rH.parse(e))):e.startsWith("var(")?(r.var.push(o),a.push("var"),n.push(e)):(r.number.push(o),a.push(oH),n.push(parseFloat(e))),++o,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:a}}function lH(e){return uH(e).values}function cH(e){const{split:t,types:n}=uH(e),r=t.length;return e=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],void 0!==e[o]){const t=n[o];a+=t===oH?UV(e[o]):t===iH?rH.transform(e[o]):e[o]}return a}}const fH=e=>"number"===typeof e?0:e;const dH={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(WV))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(aH))||void 0===n?void 0:n.length)||0)>0},parse:lH,createTransformer:cH,getAnimatableNone:function(e){const t=lH(e);return cH(e)(t.map(fH))}};function hH(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function pH(e,t){return n=>n>0?t:e}const mH=(e,t,n)=>e+(t-e)*n,vH=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},gH=[QV,qV,nH];function yH(e){const t=(e=>gH.find((t=>t.test(e))))(e);if(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),!Boolean(t))return!1;let n=t.parse(e);return t===nH&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:a}=e;t/=360,n/=100,r/=100;let o=0,i=0,s=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,a=2*r-e;o=hH(a,e,t+1/3),i=hH(a,e,t),s=hH(a,e,t-1/3)}else o=i=s=r;return{red:Math.round(255*o),green:Math.round(255*i),blue:Math.round(255*s),alpha:a}}(n)),n}const bH=(e,t)=>{const n=yH(e),r=yH(t);if(!n||!r)return pH(e,t);const a=f({},n);return e=>(a.red=vH(n.red,r.red,e),a.green=vH(n.green,r.green,e),a.blue=vH(n.blue,r.blue,e),a.alpha=mH(n.alpha,r.alpha,e),qV.transform(a))},wH=new Set(["none","hidden"]);function xH(e,t){return n=>mH(e,t,n)}function CH(e){return"number"===typeof e?xH:"string"===typeof e?PV(e)?pH:rH.test(e)?bH:SH:Array.isArray(e)?_H:"object"===typeof e?rH.test(e)?bH:kH:pH}function _H(e,t){const n=[...e],r=n.length,a=e.map(((e,n)=>CH(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=a[t](e);return n}}function kH(e,t){const n=f(f({},e),t),r={};for(const a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=CH(e[a])(e[a],t[a]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const SH=(e,t)=>{const n=dH.createTransformer(t),r=uH(e),a=uH(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?wH.has(e)&&!a.values.length||wH.has(t)&&!r.values.length?function(e,t){return wH.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):NV(_H(function(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){var a;const i=t.types[o],s=e.indexes[i][r[i]],u=null!==(a=e.values[s])&&void 0!==a?a:0;n[o]=u,r[i]++}return n}(r,a),a.values),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),pH(e,t))};function MH(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return mH(e,t,n);return CH(e)(e,t)}const EH=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return tV.update(t,e)},stop:()=>nV(t),now:()=>rV.isProcessing?rV.timestamp:pV.now()}},NH=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r="";const a=Math.max(Math.round(t/n),2);for(let o=0;o<a;o++)r+=e(o/(a-1))+", ";return"linear(".concat(r.substring(0,r.length-2),")")},TH=2e4;function IH(e){let t=0;let n=e.next(t);for(;!n.done&&t<TH;)t+=50,n=e.next(t);return t>=TH?1/0:t}function jH(e,t,n){const r=Math.max(t-5,0);return fV(n-e(r),t-r)}const DH={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},LH=.001;function AH(e){let t,n,{duration:r=DH.duration,bounce:a=DH.bounce,velocity:o=DH.velocity,mass:i=DH.mass}=e;IV(DH.maxDuration);let s=1-a;s=TV(DH.minDamping,DH.maxDamping,s),r=TV(DH.minDuration,DH.maxDuration,jV(r)),s<1?(t=e=>{const t=e*s,n=t*r,a=t-o,i=PH(e,s),u=Math.exp(-n);return LH-a/i*u},n=e=>{const n=e*s*r,a=n*o+o,i=Math.pow(s,2)*Math.pow(e,2)*r,u=Math.exp(-n),l=PH(Math.pow(e,2),s);return(-t(e)+LH>0?-1:1)*((a-i)*u)/l}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const u=function(e,t,n){let r=n;for(let a=1;a<RH;a++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=IV(r),isNaN(u))return{stiffness:DH.stiffness,damping:DH.damping,duration:r};{const e=Math.pow(u,2)*i;return{stiffness:e,damping:2*s*Math.sqrt(i*e),duration:r}}}const RH=12;function PH(e,t){return e*Math.sqrt(1-t*t)}const OH=["duration","bounce"],FH=["stiffness","damping","mass"];function BH(e,t){return t.some((t=>void 0!==e[t]))}function zH(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DH.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DH.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:u,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t=f({velocity:DH.velocity,stiffness:DH.stiffness,damping:DH.damping,mass:DH.mass,isResolvedFromDuration:!1},e);if(!BH(e,FH)&&BH(e,OH))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),a=r*r,o=2*TV(.05,1,1-(e.bounce||0))*Math.sqrt(a);t=f(f({},t),{},{mass:DH.mass,stiffness:a,damping:o})}else{const n=AH(e);t=f(f(f({},t),n),{},{mass:DH.mass}),t.isResolvedFromDuration=!0}return t}(f(f({},n),{},{velocity:-jV(n.velocity||0)})),m=h||0,v=l/(2*Math.sqrt(u*c)),g=i-o,y=jV(Math.sqrt(u/c)),b=Math.abs(g)<5;let w;if(r||(r=b?DH.restSpeed.granular:DH.restSpeed.default),a||(a=b?DH.restDelta.granular:DH.restDelta.default),v<1){const e=PH(y,v);w=t=>{const n=Math.exp(-v*y*t);return i-n*((m+v*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===v)w=e=>i-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(v*v-1);w=t=>{const n=Math.exp(-v*y*t),r=Math.min(e*t,300);return i-n*((m+v*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:p&&d||null,next:e=>{const t=w(e);if(p)s.done=e>=d;else{let n=0===e?m:0;v<1&&(n=0===e?IV(m):jH(w,e,t));const o=Math.abs(n)<=r,u=Math.abs(i-t)<=a;s.done=o&&u}return s.value=s.done?i:t,s},toString:()=>{const e=Math.min(IH(x),TH),t=NH((t=>x.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return x}function UH(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:a=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:s,min:u,max:l,restDelta:c=.5,restSpeed:f}=e;const d=t[0],h={done:!1,value:d},p=e=>void 0===u?l:void 0===l||Math.abs(u-e)<Math.abs(l-e)?u:l;let m=r*n;const v=d+m,g=void 0===s?v:s(v);g!==v&&(m=g-d);const y=e=>-m*Math.exp(-e/a),b=e=>g+y(e),w=e=>{const t=y(e),n=b(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let x,C;const _=e=>{(e=>void 0!==u&&e<u||void 0!==l&&e>l)(h.value)&&(x=e,C=zH({keyframes:[h.value,p(h.value)],velocity:jH(b,e,h.value),damping:o,stiffness:i,restDelta:c,restSpeed:f}))};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return C||void 0!==x||(t=!0,w(e),_(e)),void 0!==x&&e>=x?C.next(e-x):(!t&&w(e),h)}}}zH.applyToOptions=e=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const n=(arguments.length>2?arguments[2]:void 0)(f(f({},e),{},{keyframes:[0,t]})),r=Math.min(IH(n),TH);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:jV(r)}}(e,100,zH);return e.ease=t.ease,e.duration=IV(t.duration),e.type="keyframes",e};const WH=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function VH(e,t,n,r){if(e===t&&n===r)return KW;const a=t=>function(e,t,n,r,a){let o,i,s=0;do{i=t+(n-t)/2,o=WH(i,r,a)-e,o>0?n=i:t=i}while(Math.abs(o)>1e-7&&++s<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:WH(a(e),t,r)}const HH=VH(.42,0,1,1),YH=VH(0,0,.58,1),GH=VH(.42,0,.58,1),qH=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,QH=e=>t=>1-e(1-t),XH=VH(.33,1.53,.69,.99),KH=QH(XH),JH=qH(KH),ZH=e=>(e*=2)<1?.5*KH(e):.5*(2-Math.pow(2,-10*(e-1))),$H=e=>1-Math.sin(Math.acos(e)),eY=QH($H),tY=qH($H),nY=e=>Array.isArray(e)&&"number"===typeof e[0],rY={linear:KW,easeIn:HH,easeInOut:GH,easeOut:YH,circIn:$H,circInOut:tY,circOut:eY,backIn:KH,backInOut:JH,backOut:XH,anticipate:ZH},aY=e=>{if(nY(e)){e.length;const[t,n,r,a]=e;return VH(t,n,r,a)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),rY[e]):e},oY=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};function iY(e,t){let{clamp:n=!0,ease:r,mixer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(t.length,1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const s=function(e,t,n){const r=[],a=n||JW.mix||MH,o=e.length-1;for(let i=0;i<o;i++){let n=a(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||KW:t;n=NV(e,n)}r.push(n)}return r}(t,r,a),u=s.length,l=n=>{if(i&&n<e[0])return t[0];let r=0;if(u>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const a=oY(e[r],e[r+1],n);return s[r](a)};return n?t=>l(TV(e[0],e[o-1],t)):l}function sY(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=oY(0,t,r);e.push(mH(n,1,a))}}(t,e.length-1),t}function uY(e){let{duration:t=300,keyframes:n,times:r,ease:a="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(a)?a.map(aY):aY(a),i={done:!1,value:n[0]},s=function(e,t){return e.map((e=>e*t))}(r&&r.length===n.length?r:sY(n),t),u=iY(s,n,{ease:Array.isArray(o)?o:(l=n,c=o,l.map((()=>c||GH)).splice(0,l.length-1))});var l,c;return{calculatedDuration:t,next:e=>(i.value=u(e),i.done=e>=t,i)}}const lY=e=>null!==e;function cY(e,t,n){let{repeat:r,repeatType:a="loop"}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=e.filter(lY),s=o<0||r&&"loop"!==a&&r%2===1?0:i.length-1;return s&&void 0!==n?n:i[s]}const fY={decay:UH,inertia:UH,tween:uY,keyframes:uY,spring:zH};function dY(e){"string"===typeof e.type&&(e.type=fY[e.type])}class hY{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const pY=e=>e/100;class mY extends hY{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==pV.now()&&this.tick(pV.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null===(e=(t=this.options).onStop)||void 0===e||e.call(t))},DV.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;dY(e);const{type:t=uY,repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:o=0}=e;let{keyframes:i}=e;const s=t||uY;s!==uY&&"number"!==typeof i[0]&&(this.mixKeyframes=NV(pY,MH(i[0],i[1])),i=[0,100]);const u=s(f(f({},e),{},{keyframes:i}));"mirror"===a&&(this.mirroredGenerator=s(f(f({},e),{},{keyframes:[...i].reverse(),velocity:-o}))),null===u.calculatedDuration&&(u.calculatedDuration=IH(u));const{calculatedDuration:l}=u;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{generator:n,totalDuration:r,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:i,calculatedDuration:s}=this;if(null===this.startTime)return n.next(0);const{delay:u=0,keyframes:l,repeat:c,repeatType:f,repeatDelay:d,type:h,onUpdate:p,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?v<0:v>r;this.currentTime=Math.max(v,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let y=this.currentTime,b=n;if(c){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===f?(n=1-n,d&&(n-=d/i)):"mirror"===f&&(b=o)),y=TV(0,1,n)*i}const w=g?{done:!1,value:l[0]}:b.next(y);a&&(w.value=a(w.value));let{done:x}=w;g||null===s||(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const C=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return C&&h!==UH&&(w.value=cY(l,this.options,m,this.speed)),p&&p(w.value),C&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return jV(this.calculatedDuration)}get time(){return jV(this.currentTime)}set time(e){var t;e=IV(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null===(t=this.driver)||void 0===t||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(pV.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=jV(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=EH,startTime:r}=this.options;this.driver||(this.driver=n((e=>this.tick(e)))),null===(e=(t=this.options).onPlay)||void 0===e||e.call(t);const a=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=a):null!==this.holdTime?this.startTime=a-this.holdTime:this.startTime||(this.startTime=null!==r&&void 0!==r?r:a),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pV.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null===(e=(t=this.options).onComplete)||void 0===e||e.call(t)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null===(e=(t=this.options).onCancel)||void 0===e||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,DV.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null===(t=this.driver)||void 0===t||t.stop(),e.observe(this)}}const vY=e=>180*e/Math.PI,gY=e=>{const t=vY(Math.atan2(e[1],e[0]));return bY(t)},yY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:gY,rotateZ:gY,skewX:e=>vY(Math.atan(e[1])),skewY:e=>vY(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},bY=e=>((e%=360)<0&&(e+=360),e),wY=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),xY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),CY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wY,scaleY:xY,scale:e=>(wY(e)+xY(e))/2,rotateX:e=>bY(vY(Math.atan2(e[6],e[5]))),rotateY:e=>bY(vY(Math.atan2(-e[2],e[0]))),rotateZ:gY,rotate:gY,skewX:e=>vY(Math.atan(e[4])),skewY:e=>vY(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function _Y(e){return e.includes("scale")?1:0}function kY(e,t){if(!e||"none"===e)return _Y(t);const n=e.match(/^matrix3d\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);let r,a;if(n)r=CY,a=n;else{const t=e.match(/^matrix\(([\t-\r ,-\.0-9e\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)\)$/);r=yY,a=t}if(!a)return _Y(t);const o=r[t],i=a[1].split(",").map(SY);return"function"===typeof o?o(i):i[o]}function SY(e){return parseFloat(e.trim())}const MY=e=>e===FV||e===ZV,EY=new Set(["x","y","z"]),NY=oV.filter((e=>!EY.has(e)));const TY={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:a="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(a)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:(e,t)=>{let{transform:n}=t;return kY(n,"x")},y:(e,t)=>{let{transform:n}=t;return kY(n,"y")}};TY.translateX=TY.x,TY.translateY=TY.y;const IY=new Set;let jY=!1,DY=!1,LY=!1;function AY(){if(DY){const e=Array.from(IY).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return NY.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{var n;let[r,a]=t;null===(n=e.getValue(r))||void 0===n||n.set(a)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}DY=!1,jY=!1,IY.forEach((e=>e.complete(LY))),IY.clear()}function RY(){IY.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(DY=!0)}))}class PY{constructor(e,t,n,r,a){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(IY.add(this),jY||(jY=!0,tV.read(RY),tV.resolveKeyframes(AY))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const a=null===r||void 0===r?void 0:r.get(),o=e[e.length-1];if(void 0!==a)e[0]=a;else if(n&&t){const r=n.readValue(t,o);void 0!==r&&null!==r&&(e[0]=r)}void 0===e[0]&&(e[0]=o),r&&void 0===a&&r.set(e[0])}!function(e){for(let n=1;n<e.length;n++){var t;null!==(t=e[n])&&void 0!==t||(e[n]=e[n-1])}}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),IY.delete(this)}cancel(){"scheduled"===this.state&&(IY.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function OY(e){let t;return()=>(void 0===t&&(t=e()),t)}const FY=OY((()=>void 0!==window.ScrollTimeline)),BY={};function zY(e,t){const n=OY(e);return()=>{var e;return null!==(e=BY[t])&&void 0!==e?e:n()}}const UY=zY((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(Du){return!1}return!0}),"linearEasing"),WY=e=>{let[t,n,r,a]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(a,")")},VY={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:WY([0,.65,.55,1]),circOut:WY([.55,0,1,.45]),backIn:WY([.31,.01,.66,-.59]),backOut:WY([.33,1.53,.69,.99])};function HY(e,t){return e?"function"===typeof e?UY()?NH(e,t):"ease-out":nY(e)?WY(e):Array.isArray(e)?e.map((e=>HY(e,t)||VY.easeOut)):VY[e]:void 0}function YY(e,t,n){let{delay:r=0,duration:a=300,repeat:o=0,repeatType:i="loop",ease:s="easeOut",times:u}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const c={[t]:n};u&&(c.offset=u);const f=HY(s,a);Array.isArray(f)&&(c.easing=f),$W.value&&DV.waapi++;const d={delay:r,duration:a,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:"reverse"===i?"alternate":"normal"};l&&(d.pseudoElement=l);const h=e.animate(c,d);return $W.value&&h.finished.finally((()=>{DV.waapi--})),h}function GY(e){return"function"===typeof e&&"applyToOptions"in e}const qY=["type"];class QY extends hY{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:i,onComplete:s}=e;this.isPseudoElement=Boolean(a),this.allowFlatten=o,this.options=e,e.type;const l=function(e){let{type:t}=e,n=u(e,qY);return GY(t)&&UY()?t.applyToOptions(n):(null!==(r=n.duration)&&void 0!==r||(n.duration=300),null!==(a=n.ease)&&void 0!==a||(n.ease="easeOut"),n);var r,a}(e);this.animation=YY(t,n,r,l,a),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const e=cY(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null===s||void 0===s||s(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null===(e=(t=this.animation).finish)||void 0===e||e.call(t)}cancel(){try{this.animation.cancel()}catch(Du){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(null===(e=(t=this.animation).commitStyles)||void 0===e||e.call(t))}get duration(){var e,t;const n=(null===(e=this.animation.effect)||void 0===e||null===(t=e.getComputedTiming)||void 0===t?void 0:t.call(e).duration)||0;return jV(Number(n))}get time(){return jV(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=IV(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline(e){let{timeline:t,observe:n}=e;var r;this.allowFlatten&&(null===(r=this.animation.effect)||void 0===r||r.updateTiming({easing:"linear"}));return this.animation.onfinish=null,t&&FY()?(this.animation.timeline=t,KW):n(this)}}const XY={anticipate:ZH,backInOut:JH,circInOut:tY};function KY(e){"string"===typeof e.ease&&e.ease in XY&&(e.ease=XY[e.ease])}const JY=["motionValue","onUpdate","onComplete","element"];class ZY extends QY{constructor(e){KY(e),dY(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){var t;const n=this.options,{motionValue:r,onUpdate:a,onComplete:o,element:i}=n,s=u(n,JY);if(!r)return;if(void 0!==e)return void r.set(e);const l=new mY(f(f({},s),{},{autoplay:!1})),c=IV(null!==(t=this.finishedTime)&&void 0!==t?t:this.time);r.setWithVelocity(l.sample(c-10).value,l.sample(c).value,10),l.stop()}}const $Y=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!dH.test(e)&&"0"!==e||e.startsWith("url(")));const eG=new Set(["opacity","clipPath","filter","transform"]),tG=OY((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const nG=["autoplay","delay","type","repeat","repeatDelay","repeatType","keyframes","name","motionValue","element"];class rG extends hY{constructor(e){var t;let{autoplay:n=!0,delay:r=0,type:a="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",keyframes:l,name:c,motionValue:d,element:h}=e,p=u(e,nG);super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null===(t=this.stopTimeline)||void 0===t||t.call(this));null===(e=this.keyframeResolver)||void 0===e||e.cancel()},this.createdAt=pV.now();const m=f({autoplay:n,delay:r,type:a,repeat:o,repeatDelay:i,repeatType:s,name:c,motionValue:d,element:h},p),v=(null===h||void 0===h?void 0:h.KeyframeResolver)||PY;this.keyframeResolver=new v(l,((e,t,n)=>this.onKeyframesResolved(e,t,m,!n)),c,d,h),null===(t=this.keyframeResolver)||void 0===t||t.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:a,type:o,velocity:i,delay:s,isHandoff:u,onUpdate:l}=n;this.resolvedAt=pV.now(),function(e,t,n,r){const a=e[0];if(null===a)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],i=$Y(a,t),s=$Y(o,t);return"You are trying to animate ".concat(t,' from "').concat(a,'" to "').concat(o,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(o," via the `style` property."),!(!i||!s)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||GY(n))&&r)}(e,a,o,i)||(!JW.instantAnimations&&s||null===l||void 0===l||l(cY(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const c=f(f({startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t},n),{},{keyframes:e}),d=!u&&function(e){var t;const{motionValue:n,name:r,repeatDelay:a,repeatType:o,damping:i,type:s}=e;if(!AW(null===n||void 0===n||null===(t=n.owner)||void 0===t?void 0:t.current))return!1;const{onUpdate:u,transformTemplate:l}=n.owner.getProps();return tG()&&r&&eG.has(r)&&("transform"!==r||!l)&&!u&&!a&&"mirror"!==o&&0!==i&&"inertia"!==s}(c)?new ZY(f(f({},c),{},{element:c.motionValue.owner.current})):new mY(c);d.finished.then((()=>this.notifyFinished())).catch(KW),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){var e;this._animation||(null===(e=this.keyframeResolver)||void 0===e||e.resume(),LY=!0,RY(),AY(),LY=!1);return this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null===(e=this.keyframeResolver)||void 0===e||e.cancel()}}const aG=e=>null!==e;const oG={type:"spring",stiffness:500,damping:25,restSpeed:10},iG={type:"keyframes",duration:.8},sG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uG=(e,t)=>{let{keyframes:n}=t;return n.length>2?iG:iV.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:oG:sG},lG=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];const cG=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return i=>{const s=XW(r,e)||{},l=s.delay||r.delay||0;let{elapsed:c=0}=r;c-=IV(l);const d=f(f({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},s),{},{delay:-c,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:o?void 0:a});(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:a,staggerDirection:o,repeat:i,repeatType:s,repeatDelay:l,from:c,elapsed:f}=e,d=u(e,lG);return!!Object.keys(d).length})(s)||Object.assign(d,uG(e,d)),d.duration&&(d.duration=IV(d.duration)),d.repeatDelay&&(d.repeatDelay=IV(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let h=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(h=!0)),(JW.instantAnimations||JW.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!s.type&&!s.ease,h&&!o&&void 0!==t.get()){const e=function(e,t,n){let{repeat:r,repeatType:a="loop"}=t;const o=e.filter(aG),i=r&&"loop"!==a&&r%2===1?0:o.length-1;return i&&void 0!==n?n:o[i]}(d.keyframes,s);if(void 0!==e)return void tV.update((()=>{d.onUpdate(e),d.onComplete()}))}return s.isSync?new mY(d):new rG(d)}},fG=["transition","transitionEnd"];function dG(e,t){let{protectedKeys:n,needsAnimating:r}=e;const a=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}function hG(e,t){let{delay:n=0,transitionOverride:r,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:o=e.getDefaultTransition(),transitionEnd:i}=t,s=u(t,fG);r&&(o=r);const l=[],c=a&&e.animationState&&e.animationState.getState()[a];for(const u in s){var d;const t=e.getValue(u,null!==(d=e.latestValues[u])&&void 0!==d?d:null),r=s[u];if(void 0===r||c&&dG(c,u))continue;const a=f({delay:n},XW(o||{},u)),i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!a.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=MV(e);if(t){const e=window.MotionHandoffAnimation(t,u,tV);null!==e&&(a.startTime=e,h=!0)}}_V(e,u),t.start(cG(u,t,r,e.shouldReduceMotion&&sV.has(u)?{type:!1}:a,e,h));const p=t.animation;p&&l.push(p)}return i&&Promise.all(l).then((()=>{tV.update((()=>{i&&function(e,t){let n=QW(e,t)||{},{transitionEnd:r={},transition:a={}}=n,o=u(n,bV);o=f(f({},o),r);for(const i in o)wV(e,i,xV(o[i]))}(e,i)}))})),l}function pG(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=QW(e,t,"exit"===r.type?null===(n=e.presenceContext)||void 0===n?void 0:n.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(o=r.transitionOverride);const i=a?()=>Promise.all(hG(e,a,r)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:s}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const i=[],s=(e.variantChildren.size-1)*r,u=1===a?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return s-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(mG).forEach(((e,r)=>{e.notify("AnimationStart",t),i.push(pG(e,t,f(f({},o),{},{delay:n+u(r)})).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,a+n,i,s,r)}:()=>Promise.resolve(),{when:u}=o;if(u){const[e,t]="beforeChildren"===u?[i,s]:[s,i];return e().then((()=>t()))}return Promise.all([i(),s(r.delay)])}function mG(e,t){return e.sortNodePosition(t)}function vG(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function gG(e){return"string"===typeof e||Array.isArray(e)}const yG=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bG=["initial",...yG],wG=bG.length;function xG(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&xG(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<wG;n++){const r=bG[n],a=e.props[r];(gG(a)||!1===a)&&(t[r]=a)}return t}const CG=["transition","transitionEnd"],_G=[...yG].reverse(),kG=yG.length;function SG(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const a=t.map((t=>pG(e,t,r)));n=Promise.all(a)}else if("string"===typeof t)n=pG(e,t,r);else{const a="function"===typeof t?QW(e,t,r.custom):t;n=Promise.all(hG(e,a,r))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,r)})))}function MG(e){let t=SG(e),n=TG(),r=!0;const a=t=>(n,r)=>{var a;const o=QW(e,r,"exit"===t?null===(a=e.presenceContext)||void 0===a?void 0:a.custom:void 0);if(o){const{transition:e,transitionEnd:t}=o,r=u(o,CG);n=f(f(f({},n),r),t)}return n};function o(o){const{props:i}=e,s=xG(e.parent)||{},u=[],l=new Set;let c={},d=1/0;for(let t=0;t<kG;t++){const h=_G[t],p=n[h],m=void 0!==i[h]?i[h]:s[h],v=gG(m),g=h===o?p.isActive:null;!1===g&&(d=t);let y=m===s[h]&&m!==i[h]&&v;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys=f({},c),!p.isActive&&null===g||!m&&!p.prevProp||YW(m)||"boolean"===typeof m)continue;const b=EG(p.prevProp,m);let w=b||h===o&&p.isActive&&!y&&v||t>d&&v,x=!1;const C=Array.isArray(m)?m:[m];let _=C.reduce(a(h),{});!1===g&&(_={});const{prevResolvedValues:k={}}=p,S=f(f({},k),_),M=t=>{w=!0,l.has(t)&&(x=!0,l.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=_[e],n=k[e];if(c.hasOwnProperty(e))continue;let r=!1;r=yV(t)&&yV(n)?!vG(t,n):t!==n,r?void 0!==t&&null!==t?M(e):l.add(e):void 0!==t&&l.has(e)?M(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=_,p.isActive&&(c=f(f({},c),_)),r&&e.blockInitialAnimation&&(w=!1);w&&(!(y&&b)||x)&&u.push(...C.map((e=>({animation:e,options:{type:h}}))))}if(l.size){const t={};if("boolean"!==typeof i.initial){const n=QW(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}l.forEach((n=>{const r=e.getBaseTarget(n),a=e.getValue(n);a&&(a.liveStyle=!0),t[n]=null!==r&&void 0!==r?r:null})),u.push({animation:t})}let h=Boolean(u.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(u):Promise.resolve()}return{animateChanges:o,setActive:function(t,r){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const i=o(t);for(const e in n)n[e].protectedKeys={};return i},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=TG(),r=!0}}}function EG(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!vG(t,e)}function NG(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TG(){return{animate:NG(!0),whileInView:NG(),whileHover:NG(),whileTap:NG(),whileDrag:NG(),whileFocus:NG(),exit:NG()}}class IG{constructor(e){this.isMounted=!1,this.node=e}update(){}}let jG=0;const DG={animation:{Feature:class extends IG{constructor(e){super(e),e.animationState||(e.animationState=MG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YW(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends IG{constructor(){super(...arguments),this.id=jG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}},LG={x:!1,y:!1};function AG(){return LG.x||LG.y}function RG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const PG=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function OG(e){return{point:{x:e.pageX,y:e.pageY}}}function FG(e,t,n,r){return RG(e,t,(e=>t=>PG(t)&&e(t,OG(t)))(n),r)}function BG(e){let{top:t,left:n,right:r,bottom:a}=e;return{x:{min:n,max:r},y:{min:t,max:a}}}function zG(e){return e.max-e.min}function UG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=mH(t.min,t.max,e.origin),e.scale=zG(n)/zG(t),e.translate=mH(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function WG(e,t,n,r){UG(e.x,t.x,n.x,r?r.originX:void 0),UG(e.y,t.y,n.y,r?r.originY:void 0)}function VG(e,t,n){e.min=n.min+t.min,e.max=e.min+zG(t)}function HG(e,t,n){e.min=t.min-n.min,e.max=e.min+zG(t)}function YG(e,t,n){HG(e.x,t.x,n.x),HG(e.y,t.y,n.y)}const GG=()=>({x:{min:0,max:0},y:{min:0,max:0}});function qG(e){return[e("x"),e("y")]}function QG(e){return void 0===e||1===e}function XG(e){let{scale:t,scaleX:n,scaleY:r}=e;return!QG(t)||!QG(n)||!QG(r)}function KG(e){return XG(e)||JG(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function JG(e){return ZG(e.x)||ZG(e.y)}function ZG(e){return e&&"0%"!==e}function $G(e,t,n){return n+t*(e-n)}function eq(e,t,n,r,a){return void 0!==a&&(e=$G(e,a,r)),$G(e,n,r)+t}function tq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;e.min=eq(e.min,t,n,r,a),e.max=eq(e.max,t,n,r,a)}function nq(e,t){let{x:n,y:r}=t;tq(e.x,n.translate,n.scale,n.originPoint),tq(e.y,r.translate,r.scale,r.originPoint)}const rq=.999999999999,aq=1.0000000000001;function oq(e,t){e.min=e.min+t,e.max=e.max+t}function iq(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;tq(e,t,n,mH(e.min,e.max,a),r)}function sq(e,t){iq(e.x,t.x,t.scaleX,t.scale,t.originX),iq(e.y,t.y,t.scaleY,t.scale,t.originY)}function uq(e,t){return BG(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const lq=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null};function cq(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const fq=(e,t)=>Math.abs(e-t);class dq{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=mq(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=fq(e.x,t.x),r=fq(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:a}=rV;this.history.push(f(f({},r),{},{timestamp:a}));const{onStart:o,onMove:i}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=hq(t,this.transformPagePoint),tV.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=mq("pointercancel"===e.type?this.lastMoveEventInfo:hq(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),r&&r(e,o)},!PG(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const o=hq(OG(e),this.transformPagePoint),{point:i}=o,{timestamp:s}=rV;this.history=[f(f({},i),{},{timestamp:s})];const{onSessionStart:u}=t;u&&u(e,mq(o,this.history)),this.removeListeners=NV(FG(this.contextWindow,"pointermove",this.handlePointerMove),FG(this.contextWindow,"pointerup",this.handlePointerUp),FG(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),nV(this.updatePoint)}}function hq(e,t){return t?{point:t(e.point)}:e}function pq(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mq(e,t){let{point:n}=e;return{point:n,delta:pq(n,gq(t)),offset:pq(n,vq(t)),velocity:yq(t,.1)}}function vq(e){return e[0]}function gq(e){return e[e.length-1]}function yq(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=gq(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>IV(t)));)n--;if(!r)return{x:0,y:0};const o=jV(a.timestamp-r.timestamp);if(0===o)return{x:0,y:0};const i={x:(a.x-r.x)/o,y:(a.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function bq(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function wq(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const xq=.35;function Cq(e,t,n){return{min:_q(e,t),max:_q(e,n)}}function _q(e,t){return"number"===typeof e?e:e[t]||0}const kq=new WeakMap;class Sq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new dq(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(OG(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:a}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?LG[o]?null:(LG[o]=!0,()=>{LG[o]=!1}):LG.x||LG.y?null:(LG.x=LG.y=!0,()=>{LG.x=LG.y=!1}),!this.openDragLock))return;var o;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qG((e=>{let t=this.getAxisMotionValue(e).get()||0;if(JV.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=zG(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),a&&tV.postRender((()=>a(e,t))),_V(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:a,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&a&&a(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>qG((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:lq(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&tV.postRender((()=>a(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Mq(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:a}=t;return void 0!==r&&e<r?e=n?mH(r,e,n.min):Math.max(e,r):void 0!==a&&e>a&&(e=n?mH(a,e,n.max):Math.min(e,a)),e}(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&cq(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:a,right:o}=t;return{x:bq(e.x,r,o),y:bq(e.y,n,a)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xq;return!1===e?e=0:!0===e&&(e=xq),{x:Cq(e,"left","right"),y:Cq(e,"top","bottom")}}(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qG((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!cq(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=function(e,t,n){const r=uq(e,n),{scroll:a}=t;return a&&(oq(r.x,a.offset.x),oq(r.y,a.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:wq(e.x,t.x),y:wq(e.y,t.y)}}(r.layout.layoutBox,a);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=BG(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:i}=this.getProps(),s=this.constraints||{},u=qG((i=>{if(!Mq(i,t,this.currentDirection))return;let u=s&&s[i]||{};o&&(u={min:0,max:0});const l=r?200:1e6,c=r?40:1e7,d=f(f({type:"inertia",velocity:n?e[i]:0,bounceStiffness:l,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10},a),u);return this.startAxisValueAnimation(i,d)}));return Promise.all(u).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return _V(this.visualElement,e),n.start(cG(e,n,0,t,this.visualElement,!1))}stopAnimation(){qG((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){qG((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){qG((t=>{const{drag:n}=this.getProps();if(!Mq(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.layoutBox[t];a.set(e[t]-mH(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!cq(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};qG((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=zG(e),a=zG(t);return a>r?n=oY(t.min,t.max-r,e.min):r>a&&(n=oY(e.min,e.max-a,t.min)),TV(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),qG((t=>{if(!Mq(t,e,null))return;const n=this.getAxisMotionValue(t),{min:a,max:o}=this.constraints[t];n.set(mH(a,o,r[t]))}))}addListeners(){if(!this.visualElement.current)return;kq.set(this.visualElement,this);const e=FG(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();cq(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),tV.read(t);const a=RG(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(qG((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{a(),e(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:o=xq,dragMomentum:i=!0}=e;return f(f({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:o,dragMomentum:i})}}function Mq(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Eq=e=>(t,n)=>{e&&tV.postRender((()=>e(t,n)))};const{schedule:Nq,cancel:Tq}=eV(queueMicrotask,!1),Iq=(0,o.createContext)({}),jq={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Dq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Lq={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!ZV.test(e))return e;e=parseFloat(e)}const n=Dq(e,t.target.x),r=Dq(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Aq={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const a=e,o=dH.parse(e);if(o.length>5)return a;const i=dH.createTransformer(e),s="number"!==typeof o[0]?1:0,u=r.x.scale*n.x,l=r.y.scale*n.y;o[0+s]/=u,o[1+s]/=l;const c=mH(u,l,.5);return"number"===typeof o[2+s]&&(o[2+s]/=c),"number"===typeof o[3+s]&&(o[3+s]/=c),i(o)}},Rq={};class Pq extends o.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=e;!function(e){for(const t in e)Rq[t]=e[t],AV(t)&&(Rq[t].isCSSVariable=!0)}(Fq),a&&(t.group&&t.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",(()=>{this.safeToRemove()})),a.setOptions(f(f({},a.options),{},{onExitComplete:()=>this.safeToRemove()}))),jq.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:a}=this.props,{projection:o}=n;return o?(o.isPresent=a,r||e.layoutDependency!==t||void 0===t||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||tV.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Nq.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Oq(e){const[t,n]=zW(),r=(0,o.useContext)(NW);return(0,Lt.jsx)(Pq,f(f({},e),{},{layoutGroup:r,switchLayoutGroup:(0,o.useContext)(Iq),isPresent:t,safeToRemove:n}))}const Fq={borderRadius:f(f({},Lq),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Lq,borderTopRightRadius:Lq,borderBottomLeftRadius:Lq,borderBottomRightRadius:Lq,boxShadow:Aq};function Bq(e){return LW(e)&&"ownerSVGElement"in e}const zq=(e,t)=>e.depth-t.depth;class Uq{constructor(){this.children=[],this.isDirty=!1}add(e){uV(this.children,e),this.isDirty=!0}remove(e){lV(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zq),this.isDirty=!1,this.children.forEach(e)}}function Wq(e,t){const n=pV.now(),r=a=>{let{timestamp:o}=a;const i=o-n;i>=t&&(nV(r),e(i-t))};return tV.setup(r,!0),()=>nV(r)}function Vq(e){return CV(e)?e.get():e}const Hq=["TopLeft","TopRight","BottomLeft","BottomRight"],Yq=Hq.length,Gq=e=>"string"===typeof e?parseFloat(e):e,qq=e=>"number"===typeof e||ZV.test(e);function Qq(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Xq=Jq(0,.5,eY),Kq=Jq(.5,.95,KW);function Jq(e,t,n){return r=>r<e?0:r>t?1:n(oY(e,t,r))}function Zq(e,t){e.min=t.min,e.max=t.max}function $q(e,t){Zq(e.x,t.x),Zq(e.y,t.y)}function eQ(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function tQ(e,t,n,r,a){return e=$G(e-=t,1/n,r),void 0!==a&&(e=$G(e,1/a,r)),e}function nQ(e,t,n,r,a){let[o,i,s]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;JV.test(t)&&(t=parseFloat(t),t=mH(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let s=mH(o.min,o.max,r);e===o&&(s-=t),e.min=tQ(e.min,t,n,s,a),e.max=tQ(e.max,t,n,s,a)}(e,t[o],t[i],t[s],t.scale,r,a)}const rQ=["x","scaleX","originX"],aQ=["y","scaleY","originY"];function oQ(e,t,n,r){nQ(e.x,t,rQ,n?n.x:void 0,r?r.x:void 0),nQ(e.y,t,aQ,n?n.y:void 0,r?r.y:void 0)}function iQ(e){return 0===e.translate&&1===e.scale}function sQ(e){return iQ(e.x)&&iQ(e.y)}function uQ(e,t){return e.min===t.min&&e.max===t.max}function lQ(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function cQ(e,t){return lQ(e.x,t.x)&&lQ(e.y,t.y)}function fQ(e){return zG(e.x)/zG(e.y)}function dQ(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class hQ{constructor(){this.members=[]}add(e){uV(this.members,e),e.scheduleRender()}remove(e){if(lV(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pQ={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},mQ=["","X","Y","Z"],vQ={visibility:"hidden"};let gQ=0;function yQ(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function bQ(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=MV(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",tV,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&bQ(r)}function wQ(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:a,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=gQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$W.value&&(pQ.nodes=pQ.calculatedTargetDeltas=pQ.calculatedProjections=0),this.nodes.forEach(_Q),this.nodes.forEach(IQ),this.nodes.forEach(jQ),this.nodes.forEach(kQ),$W.addProjectionMetrics&&$W.addProjectionMetrics(pQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Uq)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new cV),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;var n;this.isSVG=Bq(e)&&!(Bq(n=e)&&"svg"===n.tagName),this.instance=e;const{layoutId:r,layout:a,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(a||r)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=Wq(r,250),jq.hasAnimatedSinceResize&&(jq.hasAnimatedSinceResize=!1,this.nodes.forEach(TQ))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&o&&(r||a)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:r,layout:a}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||OQ,{onLayoutAnimationStart:s,onLayoutAnimationComplete:u}=o.getProps(),l=!this.targetLayout||!cQ(this.targetLayout,a),c=!n&&r;if(this.options.layoutRoot||this.resumeFrom||c||n&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const e=f(f({},XW(i,"layout")),{},{onPlay:s,onComplete:u});(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,c)}else n||TQ(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nV(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DQ),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bQ(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let a=0;a<this.path.length;a++){const e=this.path[a];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(MQ);this.isUpdating||this.nodes.forEach(EQ),this.isUpdating=!1,this.nodes.forEach(NQ),this.nodes.forEach(xQ),this.nodes.forEach(CQ),this.clearAllSnapshots();const e=pV.now();rV.delta=TV(0,1e3/60,e-rV.timestamp),rV.timestamp=e,rV.isProcessing=!0,aV.update.process(rV),aV.preRender.process(rV),aV.render.process(rV),rV.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Nq.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SQ),this.sharedNodes.forEach(LQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tV.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tV.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||zG(this.snapshot.measuredBox.x)||zG(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=a(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sQ(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||KG(this.latestValues)||a)&&(o(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),zQ((r=n).x),zQ(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(WQ))){const{scroll:e}=this.root;e&&(oq(n.x,e.offset.x),oq(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if($q(n,e),null!==(t=this.scroll)&&void 0!==t&&t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:a,options:o}=t;t!==this.root&&a&&o.layoutScroll&&(a.wasRoot&&$q(n,e),oq(n.x,a.offset.x),oq(n.y,a.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};$q(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&sq(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),KG(e.latestValues)&&sq(n,e.latestValues)}return KG(this.latestValues)&&sq(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};$q(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!KG(e.latestValues))continue;XG(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};$q(r,e.measurePageBox()),oQ(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return KG(this.latestValues)&&oQ(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=f(f(f({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rV.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:o}=this.options;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=rV.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},YG(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),$q(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,s,u;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,s=this.relativeTarget,u=this.relativeParent.target,VG(i.x,s.x,u.x),VG(i.y,s.y,u.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):$q(this.target,this.layout.layoutBox),nq(this.target,this.targetDelta)):$q(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},YG(this.relativeTargetOrigin,this.target,e.target),$q(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$W.value&&pQ.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!XG(this.parent.latestValues)&&!JG(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||null!==(e=this.parent)&&void 0!==e&&e.isProjectionDirty)&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===rV.timestamp&&(r=!1),r)return;const{layout:a,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!a&&!o)return;$q(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,s=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=n.length;if(!a)return;let o,i;t.x=t.y=1;for(let s=0;s<a;s++){o=n[s],i=o.projectionDelta;const{visualElement:a}=o.options;a&&a.props.style&&"contents"===a.props.style.display||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&sq(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,nq(e,i)),r&&KG(o.latestValues)&&sq(e,o.latestValues))}t.x<aq&&t.x>rq&&(t.x=1),t.y<aq&&t.y>rq&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:u}=t;u?(this.projectionDelta&&this.prevProjectionDelta?(eQ(this.prevProjectionDelta.x,this.projectionDelta.x),eQ(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),WG(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.treeScale.x===i&&this.treeScale.y===s&&dQ(this.projectionDelta.x,this.prevProjectionDelta.x)&&dQ(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),$W.value&&pQ.calculatedProjections++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},a=f({},this.latestValues),o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),l=!u||u.members.length<=1,c=Boolean(s&&!l&&!0===this.options.crossfade&&!this.path.some(PQ));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;AQ(o.x,e.x,n),AQ(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(YG(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){RQ(e.x,t.x,n.x,r),RQ(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,i,n),d&&function(e,t){return uQ(e.x,t.x)&&uQ(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),$q(d,this.relativeTarget)),s&&(this.animationValues=a,function(e,t,n,r,a,o){var i,s;if(a)e.opacity=mH(0,null!==(i=n.opacity)&&void 0!==i?i:1,Xq(r)),e.opacityExit=mH(null!==(s=t.opacity)&&void 0!==s?s:1,0,Kq(r));else if(o){var u,l;e.opacity=mH(null!==(u=t.opacity)&&void 0!==u?u:1,null!==(l=n.opacity)&&void 0!==l?l:1,r)}for(let c=0;c<Yq;c++){const a="border".concat(Hq[c],"Radius");let o=Qq(t,a),i=Qq(n,a);void 0===o&&void 0===i||(o||(o=0),i||(i=0),0===o||0===i||qq(o)===qq(i)?(e[a]=Math.max(mH(Gq(o),Gq(i),r),0),(JV.test(i)||JV.test(o))&&(e[a]+="%")):e[a]=i)}(t.rotate||n.rotate)&&(e.rotate=mH(t.rotate||0,n.rotate||0,r))}(a,r,this.latestValues,n,c,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),null===(n=this.resumingFrom)||void 0===n||null===(n=n.currentAnimation)||void 0===n||n.stop(),this.pendingAnimation&&(nV(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tV.update((()=>{jq.hasAnimatedSinceResize=!0,DV.layout++,this.motionValue||(this.motionValue=gV(0)),this.currentAnimation=function(e,t,n){const r=CV(e)?e:gV(e);return r.start(cG("",r,t,n)),r.animation}(this.motionValue,[0,1e3],f(f({},e),{},{isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{DV.layout--},onComplete:()=>{DV.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:a}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&UQ(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=zG(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=zG(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}$q(t,n),sq(t,a),WG(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new hQ);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&yQ("z",e,r,this.animationValues);for(let a=0;a<mQ.length;a++)yQ("rotate".concat(mQ[a]),e,r,this.animationValues),yQ("skew".concat(mQ[a]),e,r,this.animationValues);e.render();for(const a in r)e.setStaticValue(a,r[a]),this.animationValues&&(this.animationValues[a]=r[a]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return vQ;const t={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=Vq(null===e||void 0===e?void 0:e.pointerEvents)||"",t.transform=n?n(this.latestValues,""):"none",t;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Vq(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!KG(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const a=r.animationValues||r.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,n){let r="";const a=e.x.translate/t.x,o=e.y.translate/t.y,i=(null===n||void 0===n?void 0:n.z)||0;if((a||o||i)&&(r="translate3d(".concat(a,"px, ").concat(o,"px, ").concat(i,"px) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:a,rotateY:o,skewX:i,skewY:s}=n;e&&(r="perspective(".concat(e,"px) ").concat(r)),t&&(r+="rotate(".concat(t,"deg) ")),a&&(r+="rotateX(".concat(a,"deg) ")),o&&(r+="rotateY(".concat(o,"deg) ")),i&&(r+="skewX(".concat(i,"deg) ")),s&&(r+="skewY(".concat(s,"deg) "))}const s=e.x.scale*t.x,u=e.y.scale*t.y;return 1===s&&1===u||(r+="scale(".concat(s,", ").concat(u,")")),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),n&&(t.transform=n(a,t.transform));const{x:o,y:i}=this.projectionDelta;var s,u;(t.transformOrigin="".concat(100*o.origin,"% ").concat(100*i.origin,"% 0"),r.animationValues)?t.opacity=r===this?null!==(s=null!==(u=a.opacity)&&void 0!==u?u:this.latestValues.opacity)&&void 0!==s?s:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:t.opacity=r===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const l in Rq){if(void 0===a[l])continue;const{correct:e,applyTo:n,isCSSVariable:o}=Rq[l],i="none"===t.transform?a[l]:e(a[l],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=i}else o?this.options.visualElement.renderState.vars[l]=i:t[l]=i}return this.options.layoutId&&(t.pointerEvents=r===this?Vq(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(MQ),this.root.sharedNodes.clear()}}}function xQ(e){e.updateLayout()}function CQ(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;"size"===a?qG((e=>{const r=o?n.measuredBox[e]:n.layoutBox[e],a=zG(r);r.min=t[e].min,r.max=r.min+a})):UQ(a,n.layoutBox,t)&&qG((r=>{const a=o?n.measuredBox[r]:n.layoutBox[r],i=zG(t[r]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};WG(i,t,n.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};o?WG(s,e.applyTransform(r,!0),n.measuredBox):WG(s,t,n.layoutBox);const u=!sQ(i);let l=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:a,layout:o}=r;if(a&&o){const i={x:{min:0,max:0},y:{min:0,max:0}};YG(i,n.layoutBox,a.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};YG(s,t,o.layoutBox),cQ(i,s)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:s,layoutDelta:i,hasLayoutChanged:u,hasRelativeLayoutChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function _Q(e){$W.value&&pQ.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kQ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function SQ(e){e.clearSnapshot()}function MQ(e){e.clearMeasurements()}function EQ(e){e.isLayoutDirty=!1}function NQ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function TQ(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function IQ(e){e.resolveTargetDelta()}function jQ(e){e.calcProjection()}function DQ(e){e.resetSkewAndRotation()}function LQ(e){e.removeLeadSnapshot()}function AQ(e,t,n){e.translate=mH(t.translate,0,n),e.scale=mH(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function RQ(e,t,n,r){e.min=mH(t.min,n.min,r),e.max=mH(t.max,n.max,r)}function PQ(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const OQ={duration:.45,ease:[.4,0,.1,1]},FQ=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),BQ=FQ("applewebkit/")&&!FQ("chrome/")?Math.round:KW;function zQ(e){e.min=BQ(e.min),e.max=BQ(e.max)}function UQ(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(fQ(t),fQ(n),.2)}function WQ(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const VQ=wQ({attachResizeListener:(e,t)=>RG(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),HQ={current:void 0},YQ=wQ({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!HQ.current){const e=new VQ({});e.mount(window),e.setOptions({layoutScroll:!0}),HQ.current=e}return HQ.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),GQ={pan:{Feature:class extends IG{constructor(){super(...arguments),this.removePointerDownListener=KW}onPointerDown(e){this.session=new dq(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lq(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Eq(e),onStart:Eq(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&tV.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=FG(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends IG{constructor(e){super(e),this.removeGroupControls=KW,this.removeListeners=KW,this.controls=new Sq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||KW}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:YQ,MeasureLayout:Oq}};function qQ(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"===typeof e){var r;let a=document;t&&(a=t.current);const o=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:a.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}(e),r=new AbortController;return[n,f(f({passive:!0},t),{},{signal:r.signal}),()=>r.abort()]}function QQ(e){return!("touch"===e.pointerType||AG())}function XQ(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const a=r["onHover"+n];a&&tV.postRender((()=>a(t,OG(t))))}const KQ=(e,t)=>!!t&&(e===t||KQ(e,t.parentElement)),JQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ZQ=new WeakSet;function $Q(e){return t=>{"Enter"===t.key&&e(t)}}function eX(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function tX(e){return PG(e)&&!AG()}function nX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,o]=qQ(e,n),i=e=>{const r=e.currentTarget;if(!tX(e))return;ZQ.add(r);const o=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",u),ZQ.has(r)&&ZQ.delete(r),tX(e)&&"function"===typeof o&&o(e,{success:t})},s=e=>{i(e,r===window||r===document||n.useGlobalTarget||KQ(r,e.target))},u=e=>{i(e,!1)};window.addEventListener("pointerup",s,a),window.addEventListener("pointercancel",u,a)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,a),AW(e)&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=$Q((()=>{if(ZQ.has(n))return;eX(n,"down");const e=$Q((()=>{eX(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>eX(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,a))),t=e,JQ.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),o}function rX(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const a=r["onTap"+("End"===n?"":n)];a&&tV.postRender((()=>a(t,OG(t))))}const aX=["root"],oX=new WeakMap,iX=new WeakMap,sX=e=>{const t=oX.get(e.target);t&&t(e)},uX=e=>{e.forEach(sX)};function lX(e,t,n){const r=function(e){let{root:t}=e,n=u(e,aX);const r=t||document;iX.has(r)||iX.set(r,{});const a=iX.get(r),o=JSON.stringify(n);return a[o]||(a[o]=new IntersectionObserver(uX,f({root:t},n))),a[o]}(t);return oX.set(e,n),r.observe(e),()=>{oX.delete(e),r.unobserve(e)}}const cX={some:0,all:1};const fX={inView:{Feature:class extends IG{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:cX[r]};return lX(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,a&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),o=t?n:r;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends IG{mount(){const{current:e}=this.node;e&&(this.unmount=nX(e,((e,t)=>(rX(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return rX(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends IG{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Du){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=NV(RG(this.node.current,"focus",(()=>this.onFocus())),RG(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends IG{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[r,a,o]=qQ(e,n),i=e=>{if(!QQ(e))return;const{target:n}=e,r=t(n,e);if("function"!==typeof r||!n)return;const o=e=>{QQ(e)&&(r(e),n.removeEventListener("pointerleave",o))};n.addEventListener("pointerleave",o,a)};return r.forEach((e=>{e.addEventListener("pointerenter",i,a)})),o}(e,((e,t)=>(XQ(this.node,t,"Start"),e=>XQ(this.node,e,"End")))))}unmount(){}}}},dX={layout:{ProjectionNode:YQ,MeasureLayout:Oq}},hX=(0,o.createContext)({strict:!1}),pX=(0,o.createContext)({});function mX(e){return YW(e.animate)||bG.some((t=>gG(e[t])))}function vX(e){return Boolean(mX(e)||e.variants)}function gX(e){const{initial:t,animate:n}=function(e,t){if(mX(e)){const{initial:t,animate:n}=e;return{initial:!1===t||gG(t)?t:void 0,animate:gG(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,o.useContext)(pX));return(0,o.useMemo)((()=>({initial:t,animate:n})),[yX(t),yX(n)])}function yX(e){return Array.isArray(e)?e.join(" "):e}const bX={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wX={};for(const n in bX)wX[n]={isEnabled:e=>bX[n].some((t=>!!e[t]))};const xX=Symbol.for("motionComponentSymbol");function CX(e,t,n){return(0,o.useCallback)((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):cq(n)&&(n.current=r))}),[t])}function _X(e,t,n,r,a){var i,s,u,l;const{visualElement:c}=(0,o.useContext)(pX),f=(0,o.useContext)(hX),d=(0,o.useContext)(DW),h=(0,o.useContext)(RW).reducedMotion,p=(0,o.useRef)(null);r=r||f.renderer,!p.current&&r&&(p.current=r(e,{visualState:t,parent:c,props:n,presenceContext:d,blockInitialAnimation:!!d&&!1===d.initial,reducedMotionConfig:h}));const m=p.current,v=(0,o.useContext)(Iq);!m||m.projection||!a||"html"!==m.type&&"svg"!==m.type||function(e,t,n,r){const{layoutId:a,layout:o,drag:i,dragConstraints:s,layoutScroll:u,layoutRoot:l,layoutCrossfade:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:kX(e.parent)),e.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:Boolean(i)||s&&cq(s),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:u,layoutRoot:l})}(p.current,n,a,v);const g=(0,o.useRef)(!1);(0,o.useInsertionEffect)((()=>{m&&g.current&&m.update(n,d)}));const y=n[SV],b=(0,o.useRef)(Boolean(y)&&!(null!==(i=(s=window).MotionHandoffIsComplete)&&void 0!==i&&i.call(s,y))&&(null===(u=(l=window).MotionHasOptimisedAnimation)||void 0===u?void 0:u.call(l,y)));return jW((()=>{m&&(g.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Nq.render(m.render),b.current&&m.animationState&&m.animationState.animateChanges())})),(0,o.useEffect)((()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask((()=>{var e,t;null===(e=(t=window).MotionHandoffMarkAsComplete)||void 0===e||e.call(t,y)})),b.current=!1))})),m}function kX(e){if(e)return!1!==e.options.allowProjection?e.projection:kX(e.parent)}function SX(e){var t,n;let{preloadedFeatures:r,createVisualElement:a,useRender:i,useVisualState:s,Component:u}=e;function l(e,t){let n;const r=f(f(f({},(0,o.useContext)(RW)),e),{},{layoutId:MX(e)}),{isStatic:l}=r,c=gX(e),d=s(e,l);if(!l&&IW){!function(){(0,o.useContext)(hX).strict;0}();const e=function(e){const{drag:t,layout:n}=wX;if(!t&&!n)return{};const r=f(f({},t),n);return{MeasureLayout:null!==t&&void 0!==t&&t.isEnabled(e)||null!==n&&void 0!==n&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(r);n=e.MeasureLayout,c.visualElement=_X(u,d,r,a,e.ProjectionNode)}return(0,Lt.jsxs)(pX.Provider,{value:c,children:[n&&c.visualElement?(0,Lt.jsx)(n,f({visualElement:c.visualElement},r)):null,i(u,e,CX(d,c.visualElement,t),d,l,c.visualElement)]})}r&&function(e){for(const t in e)wX[t]=f(f({},wX[t]),e[t])}(r),l.displayName="motion.".concat("string"===typeof u?u:"create(".concat(null!==(t=null!==(n=u.displayName)&&void 0!==n?n:u.name)&&void 0!==t?t:"",")"));const c=(0,o.forwardRef)(l);return c[xX]=u,c}function MX(e){let{layoutId:t}=e;const n=(0,o.useContext)(NW).id;return n&&void 0!==t?n+"-"+t:t}function EX(e,t){let{layout:n,layoutId:r}=t;return iV.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Rq[e]||"opacity"===e)}const NX=(e,t)=>t&&"number"===typeof e?t.transform(e):e,TX=f(f({},FV),{},{transform:Math.round}),IX=f(f({borderWidth:ZV,borderTopWidth:ZV,borderRightWidth:ZV,borderBottomWidth:ZV,borderLeftWidth:ZV,borderRadius:ZV,radius:ZV,borderTopLeftRadius:ZV,borderTopRightRadius:ZV,borderBottomRightRadius:ZV,borderBottomLeftRadius:ZV,width:ZV,maxWidth:ZV,height:ZV,maxHeight:ZV,top:ZV,right:ZV,bottom:ZV,left:ZV,padding:ZV,paddingTop:ZV,paddingRight:ZV,paddingBottom:ZV,paddingLeft:ZV,margin:ZV,marginTop:ZV,marginRight:ZV,marginBottom:ZV,marginLeft:ZV,backgroundPositionX:ZV,backgroundPositionY:ZV},{rotate:KV,rotateX:KV,rotateY:KV,rotateZ:KV,scale:zV,scaleX:zV,scaleY:zV,scaleZ:zV,skew:KV,skewX:KV,skewY:KV,distance:ZV,translateX:ZV,translateY:ZV,translateZ:ZV,x:ZV,y:ZV,z:ZV,perspective:ZV,transformPerspective:ZV,opacity:BV,originX:tH,originY:tH,originZ:ZV}),{},{zIndex:TX,fillOpacity:BV,strokeOpacity:BV,numOctaves:TX}),jX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DX=oV.length;function LX(e,t,n){const{style:r,vars:a,transformOrigin:o}=e;let i=!1,s=!1;for(const u in t){const e=t[u];if(iV.has(u))i=!0;else if(AV(u))a[u]=e;else{const t=NX(e,IX[u]);u.startsWith("origin")?(s=!0,o[u]=t):r[u]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",a=!0;for(let o=0;o<DX;o++){const i=oV[o],s=e[i];if(void 0===s)continue;let u=!0;if(u="number"===typeof s?s===(i.startsWith("scale")?1:0):0===parseFloat(s),!u||n){const e=NX(s,IX[i]);u||(a=!1,r+="".concat(jX[i]||i,"(").concat(e,") ")),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),s){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const AX=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RX(e,t,n){for(const r in t)CV(t[r])||EX(r,n)||(e[r]=t[r])}function PX(e,t){const n={};return RX(n,e.style||{},e),Object.assign(n,function(e,t){let{transformTemplate:n}=e;return(0,o.useMemo)((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return LX(e,t,n),Object.assign({},e.vars,e.style)}),[t])}(e,t)),n}function OX(e,t){const n={},r=PX(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const FX={offset:"stroke-dashoffset",array:"stroke-dasharray"},BX={offset:"strokeDashoffset",array:"strokeDasharray"};const zX=["attrX","attrY","attrScale","pathLength","pathSpacing","pathOffset"];function UX(e,t,n,r,a){let{attrX:o,attrY:i,attrScale:s,pathLength:l,pathSpacing:c=1,pathOffset:f=0}=t;if(LX(e,u(t,zX),r),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;var p,m;(d.transform&&(h.transform=d.transform,delete d.transform),h.transform||d.transformOrigin)&&(h.transformOrigin=null!==(p=d.transformOrigin)&&void 0!==p?p:"50% 50%",delete d.transformOrigin);h.transform&&(h.transformBox=null!==(m=null===a||void 0===a?void 0:a.transformBox)&&void 0!==m?m:"fill-box",delete d.transformBox);void 0!==o&&(d.x=o),void 0!==i&&(d.y=i),void 0!==s&&(d.scale=s),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=a?FX:BX;e[o.offset]=ZV.transform(-r);const i=ZV.transform(t),s=ZV.transform(n);e[o.array]="".concat(i," ").concat(s)}(d,l,c,f,!1)}const WX=()=>f(f({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),VX=e=>"string"===typeof e&&"svg"===e.toLowerCase();function HX(e,t,n,r){const a=(0,o.useMemo)((()=>{const n=WX();return UX(n,t,VX(r),e.transformTemplate,e.style),f(f({},n.attrs),{},{style:f({},n.style)})}),[t]);if(e.style){const t={};RX(t,e.style,e),a.style=f(f({},t),a.style)}return a}const YX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function GX(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||YX.has(e)}let qX=e=>!GX(e);try{(QX=require("@emotion/is-prop-valid").default)&&(qX=e=>e.startsWith("on")?!GX(e):QX(e))}catch(F$){}var QX;const XX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function KX(e){return"string"===typeof e&&!e.includes("-")&&!!(XX.indexOf(e)>-1||/[A-Z]/.test(e))}function JX(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,r,a,i)=>{let{latestValues:s}=a;const u=(KX(t)?HX:OX)(n,s,i,t),l=function(e,t,n){const r={};for(const a in e)"values"===a&&"object"===typeof e.values||(qX(a)||!0===n&&GX(a)||!t&&!GX(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(n,"string"===typeof t,e),c=t!==o.Fragment?f(f(f({},l),u),{},{ref:r}):{},{children:d}=n,h=(0,o.useMemo)((()=>CV(d)?d.get():d),[d]);return(0,o.createElement)(t,f(f({},c),{},{children:h}))}}const ZX=["transitionEnd","transition"];const $X=e=>(t,n)=>{const r=(0,o.useContext)(pX),a=(0,o.useContext)(DW),i=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:a,createRenderState:o}=e;return{latestValues:eK(t,n,r,a),renderState:o()}}(e,t,r,a);return n?i():TW(i)};function eK(e,t,n,r){const a={},o=r(e,{});for(const u in o)a[u]=Vq(o[u]);let{initial:i,animate:s}=e;const l=mX(e),c=vX(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===s&&(s=t.animate));let f=!!n&&!1===n.initial;f=f||!1===i;const d=f?s:i;if(d&&"boolean"!==typeof d&&!YW(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=qW(e,t[n]);if(r){const{transitionEnd:e,transition:t}=r,n=u(r,ZX);for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[f?e.length-1:0]}null!==e&&(a[r]=e)}for(const r in e)a[r]=e[r]}}}return a}function tK(e,t,n){const{style:r}=e,a={};for(const i in r){var o;(CV(r[i])||t.style&&CV(t.style[i])||EX(i,e)||void 0!==(null===n||void 0===n||null===(o=n.getValue(i))||void 0===o?void 0:o.liveStyle))&&(a[i]=r[i])}return a}const nK={useVisualState:$X({scrapeMotionValuesFromProps:tK,createRenderState:AX})};function rK(e,t,n){const r=tK(e,t,n);for(const a in e)if(CV(e[a])||CV(t[a])){r[-1!==oV.indexOf(a)?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a]=e[a]}return r}const aK={useVisualState:$X({scrapeMotionValuesFromProps:rK,createRenderState:WX})};function oK(e,t){return function(n){let{forwardMotionProps:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return SX(f(f({},KX(n)?aK:nK),{},{preloadedFeatures:e,useRender:JX(r),createVisualElement:t,Component:n}))}}const iK=e=>t=>t.test(e),sK=[FV,ZV,JV,KV,eH,$V,{test:e=>"auto"===e,parse:e=>e}],uK=e=>sK.find(iK(e)),lK=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),cK=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function fK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,a]=function(e){const t=cK.exec(e);if(!t)return[,];const[,n,r,a]=t;return["--".concat(null!==n&&void 0!==n?n:r),a]}(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const e=o.trim();return lK(e)?parseFloat(e):e}return PV(a)?fK(a,t,n+1):a}const dK=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function hK(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||dK(e))}const pK=new Set(["brightness","contrast","saturate","opacity"]);function mK(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(WV)||[];if(!r)return e;const a=n.replace(r,"");let o=pK.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+a+")"}const vK=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,gK=f(f({},dH),{},{getAnimatableNone:e=>{const t=e.match(vK);return t?t.map(mK).join(" "):e}}),yK=f(f({},IX),{},{color:rH,backgroundColor:rH,outlineColor:rH,fill:rH,stroke:rH,borderColor:rH,borderTopColor:rH,borderRightColor:rH,borderBottomColor:rH,borderLeftColor:rH,filter:gK,WebkitFilter:gK}),bK=e=>yK[e];function wK(e,t){let n=bK(e);return n!==gK&&(n=dH),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const xK=new Set(["auto","none","0"]);class CK extends PY{constructor(e,t,n,r,a){super(e,t,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let n=e[s];if("string"===typeof n&&(n=n.trim(),PV(n))){const r=fK(n,t.current);void 0!==r&&(e[s]=r),s===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!sV.has(n)||2!==e.length)return;const[r,a]=e,o=uK(r),i=uK(a);if(o!==i)if(MY(o)&&MY(i))for(let s=0;s<e.length;s++){const t=e[s];"string"===typeof t&&(e[s]=parseFloat(t))}else TY[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||hK(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,a=0;for(;a<e.length&&!r;){const t=e[a];"string"===typeof t&&!xK.has(t)&&uH(t).values.length&&(r=e[a]),a++}if(r&&n)for(const o of t)e[o]=wK(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=TY[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=r.length-1,i=r[o];r[o]=TY[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==i&&void 0===this.finalKeyframe&&(this.finalKeyframe=i),null!==(e=this.removedTransforms)&&void 0!==e&&e.length&&this.removedTransforms.forEach((e=>{let[n,r]=e;t.getValue(n).set(r)})),this.resolveNoneKeyframes()}}const _K=[...sK,rH,dH],kK={current:null},SK={current:!1};const MK=new WeakMap;const EK=["willChange"],NK=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class TK{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:o,visualState:i}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=PY,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=pV.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,tV.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget=f({},l),this.initialValues=n.initial?f({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=s,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=mX(n),this.isVariantNode=vX(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const d=this.scrapeMotionValuesFromProps(n,{},this),{willChange:h}=d,p=u(d,EK);for(const u in p){const e=p[u];void 0!==l[u]&&CV(e)&&e.set(l[u],!1)}}mount(e){this.current=e,MK.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),SK.current||function(){if(SK.current=!0,IW)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>kK.current=e.matches;e.addListener(t),t()}else kK.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||kK.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),nV(this.notifyUpdate),nV(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=iV.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&tV.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),a(),o&&o(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in wX){const t=wX[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<NK.length;n++){const t=NK[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const a=t[r],o=n[r];if(CV(a))e.addValue(r,a);else if(CV(o))e.addValue(r,gV(a,{owner:e}));else if(o!==a)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(a):t.hasAnimated||t.set(a)}else{const t=e.getStaticValue(r);e.addValue(r,gV(void 0!==t?t:a,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=gV(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let r=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==r&&null!==r&&("string"===typeof r&&(lK(r)||dK(r))?r=parseFloat(r):!(e=>_K.find(iK(e)))(r)&&dH.test(t)&&(r=wK(e,t)),this.setBaseTarget(e,CV(r)?r.get():r)),CV(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"===typeof t||"object"===typeof t){var r;const a=qW(this.props,t,null===(r=this.presenceContext)||void 0===r?void 0:r.custom);a&&(n=a[e])}if(t&&void 0!==n)return n;const a=this.getBaseTargetFromProps(this.props,e);return void 0===a||CV(a)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new cV),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class IK extends TK{constructor(){super(...arguments),this.KeyframeResolver=CK}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;CV(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent="".concat(e))})))}}function jK(e,t,n,r){let{style:a,vars:o}=t;Object.assign(e.style,a,r&&r.getProjectionStyles(n));for(const i in o)e.style.setProperty(i,o[i])}class DK extends IK{constructor(){super(...arguments),this.type="html",this.renderInstance=jK}readValueFromInstance(e,t){var n,r;if(iV.has(t))return null!==(n=this.projection)&&void 0!==n&&n.isProjecting?_Y(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return kY(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),a=(AV(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof a?a.trim():a}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return uq(e,n)}build(e,t,n){LX(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return tK(e,t,n)}}const LK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class AK extends IK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=GG}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(iV.has(t)){const e=bK(t);return e&&e.default||0}return t=LK.has(t)?t:kV(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return rK(e,t,n)}build(e,t,n){UX(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){jK(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(LK.has(a)?a:kV(a),t.attrs[a])}(e,t,0,r)}mount(e){this.isSVGTag=VX(e.tagName),super.mount(e)}}const RK=(e,t)=>KX(e)?new AK(t):new DK(t,{allowProjection:e!==o.Fragment}),PK=HW(oK(f(f(f(f({},DG),fX),GQ),dX),RK)),OK=e=>{let{images:t,imageIndex:n,setIsLightbox:r,setImageIndex:a}=e;const[i,s]=(0,o.useState)(n);let[u,l]=(0,o.useState)(0);const c=()=>r(!1);return(0,Lt.jsx)("div",{className:"media-lightbox",children:null!==i&&(0,Lt.jsx)("div",{id:"lightbox-overlay",onClick:e=>{"lightbox-overlay"===e.target.id&&c()},className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:(0,Lt.jsxs)("div",{className:"relative lightbox-content",children:[(0,Lt.jsx)("button",{onClick:c,className:"lightbox-close-button bg-danger",children:(0,Lt.jsx)("i",{className:"fas fa-times"})}),n>0&&(0,Lt.jsx)("button",{onClick:()=>{i>0&&(l(-1),a((e=>e-1)))},className:"lightbox-prev-button",children:(0,Lt.jsx)("i",{className:"fas fa-chevron-left"})}),n<t.length-1&&(0,Lt.jsx)("button",{onClick:()=>{l(-1),i<t.length-1&&a((e=>e+1))},className:"lightbox-next-button ",children:(0,Lt.jsx)("i",{className:"fas fa-chevron-right"})}),(0,Lt.jsx)("div",{className:"overflow-hidden",children:(0,Lt.jsx)(VW,{initial:!0,custom:1,children:(0,Lt.jsx)(PK.img,{src:t[n],alt:"Lightbox",className:"max-h-[80vh] mx-auto rounded w-100",custom:1,variants:{enter:e=>({x:e>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e>0?-300:300,opacity:0})},initial:"enter",animate:"center",exit:"exit",transition:{duration:.4}},t[n])})})]})})})},FK=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(0),s=Xe();return(0,o.useEffect)((()=>{t([]),ao.get("message/media/?profileId=".concat(s.profile)).then((e=>{t([...e.data.map((e=>e.attachment))])}))}),[s]),(0,Lt.jsxs)("div",{className:"text-center pt-2 right-sidebar-container",children:[n&&(0,Lt.jsx)(OK,{setIsLightbox:r,setImageIndex:i,imageIndex:a,images:e,index:a}),(0,Lt.jsx)("h3",{className:"msg-media-title",children:"Media"}),(0,Lt.jsx)("div",{className:"msg-media-container",children:(0,Lt.jsx)(kW,{children:(0,Lt.jsx)(SW,{columnsCount:2,gutter:"10px",children:e&&e.map(((t,n)=>(0,Lt.jsx)(EW,{setIsLightbox:r,setImageIndex:i,images:e,index:n,src:t},n)))})})})]})},BK=e=>{var t=(e=>{const[t,n]=(0,o.useState)(window.matchMedia(e).matches);return(0,o.useEffect)((()=>{const t=window.matchMedia(e),r=e=>n(e.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[e]),t})("(max-width: 768px)");return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{id:"message",children:(0,Lt.jsx)(Ht,{fluid:!0,children:(0,Lt.jsxs)(qt,{style:{minHeight:"400px"},children:[!t&&(0,Lt.jsx)(Jt,{md:"3",children:(0,Lt.jsx)(Hi,{})}),(0,Lt.jsx)(Jt,{md:"6",children:(0,Lt.jsx)(vW,{cameraVideoRef:e.cameraVideoRef})}),!t&&(0,Lt.jsx)(Jt,{md:"3",children:(0,Lt.jsx)(FK,{})})]})})})})},zK=e=>{let t=qe(),[n,r]=(0,o.useState)(e.stories);(0,o.useEffect)((()=>{r(e.stories)}));let{storyId:a}=Xe(),i=e=>{const t=mu()(e);mu()();return t.format("dddd, hh:mm A")},s=(0,o.useCallback)((e=>{t("/story/"+e.currentTarget.dataset.id)}),[]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"story-list-container",children:n.map(((e,t)=>{var n;return(0,Lt.jsx)("div",{"data-id":e._id,onClick:s,className:"text-decoration-none story-link",children:(0,Lt.jsx)("div",{className:"story-list-item mb-2 ".concat(a==e._id?"active":""),children:(0,Lt.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[(0,Lt.jsx)("div",{className:"story-pp-container text-end",children:(0,Lt.jsx)(Tn,{profilePic:null===e||void 0===e||null===(n=e.author)||void 0===n?void 0:n.profilePic,hasStory:!0,profile:null===e||void 0===e?void 0:e.author._id})}),(0,Lt.jsxs)("div",{className:"story-info-container px-2",children:[(0,Lt.jsxs)("h2",{className:"author-name fs-5 mb-0",children:[e.author.user.firstName+" "+e.author.user.surname," "]}),(0,Lt.jsx)("span",{className:"story-time text-mute text-small",children:i(e.createdAt)})]})]})})},t)}))})})};const UK=e=>{let{children:t}=e,{storyId:n}=Xe(),[r,a]=(0,o.useState)([]),i=(0,o.useRef)(),[s,u]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);const l=qe();return(0,o.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{u(e.matches)})),ao.get("/story/").then((e=>{200===e.status&&a(e.data)}))}),[n]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)(Ht,{fluid:!0,className:"story-container py-3",children:(0,Lt.jsxs)(qt,{children:[(0,Lt.jsx)(Jt,{md:"3",children:!s&&(0,Lt.jsx)(zK,{stories:r})}),(0,Lt.jsx)(Jt,{md:"6",children:(0,Lt.jsx)("div",{ref:i,className:"story-content-container",children:n?(0,Lt.jsxs)(Lt.Fragment,{children:[t,(0,Lt.jsx)("div",{className:"nf-story-arrow-left",onClick:function(e){var t;const a=r.findIndex((e=>(null===e||void 0===e?void 0:e._id)===n)),o=(null===(t=r[a-1])||void 0===t?void 0:t._id)||r[a]._id;l("/story/"+o),i.current.scrollBy({left:300,behavior:"smooth"})}.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Lt.jsx)("div",{className:"nf-story-arrow-right",onClick:function(e){var t;const a=r.findIndex((e=>(null===e||void 0===e?void 0:e._id)===n)),o=(null===(t=r[a+1])||void 0===t?void 0:t._id)||r[a]._id;l("/story/"+o)}.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Lt.jsx)("p",{className:"text-center fs-4",children:"Select a story owner from left"})})}),(0,Lt.jsx)(Jt,{md:"3",children:(0,Lt.jsx)(ct,{})})]})})})},WK=e=>{let{storyId:t}=Xe(),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(""),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(""),f=dn((e=>e.profile._id)),[d,h]=(0,o.useState)(!1),p=qe();(0,o.useEffect)((()=>{u(""),ao.get("/story/single",{params:{storyId:t}}).then((e=>{200==e.status&&(r(e.data),h(e.data.author._id==f),i(e.data.bgColor))})).catch((e=>{console.log(e)}))}),[t]),(0,o.useEffect)((()=>{n&&n.reacts.map((e=>{e.profile===f&&u(e.type.toLowerCase())})),h((null===n||void 0===n?void 0:n.author)&&n.author._id==f)}),[n]);let m=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"story";return 200===(await ao.post("/react/removeReact",{id:e,postType:t})).status&&(u(!1),!0)},v=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"story";return 200===(await ao.post("/react/addReact",{id:e,reactType:t,postType:n})).status&&(u(t),!0)};return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(UK,{children:null==n?(0,Lt.jsx)("p",{}):(0,Lt.jsxs)("div",{className:"single-story-container",children:[(0,Lt.jsxs)("div",{className:"single-story",style:{background:a},children:[(0,Lt.jsxs)("div",{className:"story-top",children:[(0,Lt.jsxs)("div",{className:"story-author-details",children:[(0,Lt.jsx)("div",{className:"author-pp-container",children:n.author&&(0,Lt.jsx)(Tn,{profilePic:n.author.profilePic,profile:n.author._id,hasStory:!1})}),(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)("h3",{children:n.author&&n.author.fullName})})]}),(0,Lt.jsxs)("div",{className:"story-options",children:[(0,Lt.jsx)("span",{className:"option-button reacts",children:(0,Lt.jsx)(Mt,{to:"reacts",children:(0,Lt.jsx)("i",{className:"fa fa-heart"})})}),(0,Lt.jsx)("span",{className:"option-button comments",children:(0,Lt.jsx)(Mt,{to:"comments",children:(0,Lt.jsx)("i",{className:"fa fa-comments"})})}),d&&(0,Lt.jsx)("span",{className:"option-button delete text-danger",onClick:(async e=>{(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{Mn()(e.currentTarget).parents(".single-story-container").remove(),200==(await ao.post("/story/delete",{storyId:t})).status&&p("/story")}},{label:"No",onClick:()=>{}}]})}).bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-trash"})})]})]}),(0,Lt.jsx)("div",{className:"single-story-image-container",style:{background:"url(".concat(n.image,")")}})]}),(0,Lt.jsxs)("div",{className:"single-story-meta-container",children:[(0,Lt.jsxs)("div",{className:"single-story-reacts-buttons",children:[(0,Lt.jsx)("div",{className:"single-story-react-button ".concat("like"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"like","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",alt:"Like"})}),(0,Lt.jsx)("div",{className:"single-story-react-button ".concat("love"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"love","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",alt:"Love"})}),(0,Lt.jsx)("div",{className:"single-story-react-button ".concat("haha"==s?"reacted":""),onClick:(async e=>{let n=e.currentTarget;n.classList.contains("reacted")?m(t)&&n.classList.remove("reacted"):v(t,"haha","story")&&n.classList.add("reacted")}).bind(void 0),children:(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",alt:"Haha"})})]}),(0,Lt.jsx)("div",{className:"single-story-comment-container",children:(0,Lt.jsx)("input",{type:"text",className:"single-story-comment-input",onChange:(async e=>{let t=e.target.value;c(t)}).bind(void 0),placeholder:"Post a comment to this story",value:l,onKeyUp:(async e=>{if(13===e.keyCode){200==(await ao.post("/comment/story/addComment",{body:l,storyId:t})).status&&c("")}}).bind(void 0)})})]}),(0,Lt.jsx)(ct,{})]})})})};const VK=()=>(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)(UK,{})}),HK="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",YK=e=>{let{reactor:t}=e,[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{let e=await ao.get("profile",{params:{profileId:t.profile}});if(200==e.status)switch(r(e.data),t.type){case"like":default:i(HK);break;case"love":i("https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg");break;case"haha":i("https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg")}})()}),[]),(0,Lt.jsx)("div",{children:n&&(0,Lt.jsxs)("li",{className:"sp-reacts-item",children:[(0,Lt.jsx)("div",{className:"reactor-pp",children:(0,Lt.jsx)(Tn,{profilePic:n.profilePic,profile:n._id})}),(0,Lt.jsx)("div",{className:"react-details",children:(0,Lt.jsx)(Mt,{to:"/".concat(n._id),children:(0,Lt.jsx)("span",{className:"reactor-name",children:n.fullName})})}),(0,Lt.jsx)("span",{className:"reactor-react",children:(0,Lt.jsx)("img",{src:a,alt:"love"})})]})})},GK=e=>{let{storyId:t}=Xe(),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(""),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(""),f=dn((e=>e.profile._id)),[d,h]=(0,o.useState)(!1),p=qe(),[m,v]=(0,o.useState)([]),g=(0,o.useRef)(),[y,b]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);(0,o.useEffect)((()=>{u(""),ao.get("/story/single",{params:{storyId:t}}).then((e=>{200==e.status&&(r(e.data),h(e.data.author._id==f),i(e.data.bgColor))})).catch((e=>{console.log(e)}))}),[t]),(0,o.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{b(e.matches)})),ao.get("/story/").then((e=>{200===e.status&&v(e.data)}))}),[t]),(0,o.useEffect)((()=>{n&&n.reacts.map((e=>{e.profile===f&&u(e.type.toLowerCase())})),h((null===n||void 0===n?void 0:n.author)&&n.author._id==f)}),[n]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(Ht,{fluid:!0,className:"story-container py-3",children:(0,Lt.jsxs)(qt,{children:[(0,Lt.jsx)(Jt,{md:"3",children:!y&&(0,Lt.jsx)(zK,{stories:m})}),(0,Lt.jsx)(Jt,{md:"6",children:(0,Lt.jsx)("div",{ref:g,className:"story-content-container",children:t?(0,Lt.jsxs)(Lt.Fragment,{children:["(",null==n?(0,Lt.jsx)("p",{}):(0,Lt.jsxs)("div",{className:"single-story-container",children:[(0,Lt.jsxs)("div",{className:"single-story",style:{background:a},children:[(0,Lt.jsxs)("div",{className:"story-top",children:[(0,Lt.jsxs)("div",{className:"story-author-details",children:[(0,Lt.jsx)("div",{className:"author-pp-container",children:n.author&&(0,Lt.jsx)(Tn,{profilePic:n.author.profilePic,profile:n.author._id,hasStory:!1})}),(0,Lt.jsx)("div",{className:"author-name",children:(0,Lt.jsx)("h3",{children:n.author&&n.author.fullName})})]}),(0,Lt.jsxs)("div",{className:"story-options",children:[(0,Lt.jsx)("span",{className:"option-button reacts",children:(0,Lt.jsx)(Mt,{to:"reacts",children:(0,Lt.jsx)("i",{class:"fa fa-heart"})})}),(0,Lt.jsx)("span",{className:"option-button comments",children:(0,Lt.jsx)(Mt,{to:"comments",children:(0,Lt.jsx)("i",{class:"fa fa-comments"})})}),d&&(0,Lt.jsx)("span",{className:"option-button delete text-danger",onClick:(async e=>{(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{Mn()(e.currentTarget).parents(".single-story-container").remove(),200==(await ao.post("/story/delete",{storyId:t})).status&&p("/story")}},{label:"No",onClick:()=>{}}]})}).bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-trash"})})]})]}),(0,Lt.jsx)("div",{className:"single-story-image-container",style:{background:"url(".concat(n.image,")")}})]}),(0,Lt.jsx)("div",{className:"single-story-meta-container"}),(0,Lt.jsx)(ct,{})]}),")",(0,Lt.jsx)("div",{className:"nf-story-arrow-left",onClick:function(e){var n;const r=m.findIndex((e=>(null===e||void 0===e?void 0:e._id)===t)),a=(null===(n=m[r-1])||void 0===n?void 0:n._id)||m[r]._id;p("/story/"+a),g.current.scrollBy({left:300,behavior:"smooth"})}.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-left"})}),(0,Lt.jsx)("div",{className:"nf-story-arrow-right",onClick:function(e){var n;const r=m.findIndex((e=>(null===e||void 0===e?void 0:e._id)===t)),a=(null===(n=m[r+1])||void 0===n?void 0:n._id)||m[r]._id;p("/story/"+a)}.bind(void 0),children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]}):(0,Lt.jsx)("p",{className:"text-center fs-4",children:"Select a story owner from left"})})}),(0,Lt.jsx)(Jt,{md:"3",children:(0,Lt.jsx)("div",{className:"single-story-meta-container",children:(0,Lt.jsx)("ul",{className:"story-reacts-list",children:n.reacts&&n.reacts.map(((e,t)=>(0,Lt.jsx)(YK,{reactor:e},t)))})})})]})})})},qK=()=>(0,Lt.jsx)("div",{children:(0,Lt.jsx)("h1",{children:"Sc"})}),QK="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",XK="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",KK="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",JK=e=>{var t;let{postId:n}=Xe(),[r,a]=(0,o.useState)(!1);const[i,s]=(0,o.useState)(e.videoUrl);let u=(0,o.useRef)(null),l=(0,o.useRef)(null);const{watchId:c}=Xe();(0,o.useEffect)((()=>{(async()=>{let e=await ao.get("watch/single",{params:{watchId:c}});200==e.status&&(a(e.data),s(e.data.videoUrl))})()}),[n]);let d=dn((e=>e.profile)),h=d._id,p=r&&(null===r||void 0===r?void 0:r.author._id),[m,v]=(0,o.useState)(r&&r.reacts.length),[g,y]=(0,o.useState)(r&&r.shares.length),[b,w]=(0,o.useState)(r&&r.comments.length),[x,C]=(0,o.useState)(!1),[_,k]=(0,o.useState)((null===r||void 0===r||null===(t=r.author)||void 0===t?void 0:t._id)===(null===d||void 0===d?void 0:d._id)),[S,M]=(0,o.useState)(!1),[E,N]=(0,o.useState)([]);const[T,I]=(0,o.useState)(null),[j,D]=(0,o.useState)(null);var L=h===p,A=r&&(null===r||void 0===r?void 0:r.author.profilePic);(0,o.useEffect)((()=>{let e=[];r&&r.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===h&&C(t.type)}})),N(e)}),[]);(e=>{const t=new Image;t.src=e,t.onload=()=>D(!0),t.onerror=()=>D(!1)})(r&&r.photos),(e=>{const t=new Image;t.src=e,t.onload=()=>I(!0),t.onerror=()=>I(!1)})(A),T||(A="https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png");let R=r&&(r.type||"post"),P=async function(){v((e=>e-1));let e=await ao.post("/react/removeReact",{id:r._id,postType:"post"});return 200===e.status&&(v(e.data.reacts.length),C(""),!0)},O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";v((e=>e+1));let n=await ao.post("/react/addReact",{id:r._id,postType:t,reactType:e});return 200===n.status&&(v(n.data.reacts.length),N([...E,e]),C(e),!0)},F=(dn((e=>e.profile.profilePic)),dn((e=>e.profile._id)),"".concat(r&&(null===r||void 0===r?void 0:r.author.profilePic))),[B,z]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);(0,o.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{z(e.matches)}))}),[]),(0,o.useEffect)((()=>{null!==d&&void 0!==d&&d.id&&null!==r&&void 0!==r&&r.author&&null!==r&&void 0!==r&&r.author._id&&k(d._id===r.author._id)}),[d,r]);let U=(0,o.useCallback)((async e=>{if(null!==l&&void 0!==l&&l.current&&null!==r&&void 0!==r&&r._id){let e=l.current.value;200===(await ao.post("/watch/update",{caption:e,watchId:r._id})).status&&a(f(f({},r),{},{caption:e}))}}),[l,r]),W=(0,o.useCallback)((t=>{null!==e&&void 0!==e&&e.videoUrl&&au(r._id,r.videoUrl,r)}),[e]);return(0,Lt.jsx)("div",{children:(0,Lt.jsx)(Ht,{className:"single-post-container",children:(0,Lt.jsx)(qt,{children:(0,Lt.jsx)(Jt,{md:"6",className:"offset-md-3",children:(0,Lt.jsx)("div",{id:"post-container",children:(0,Lt.jsx)("div",{children:r&&(0,Lt.jsxs)("div",{className:"nf-post ".concat(R),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===R&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsxs)("span",{className:"d-none",children:[(0,Lt.jsx)("b",{children:"A bitch"})," commented."]}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:F,profile:r.author._id,active:!0})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsx)(Mt,{to:"/"+r.author._id,children:(0,Lt.jsx)("h4",{className:"author-name",children:r.author.user.firstName+" "+r.author.user.surname})}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:r.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[(0,Lt.jsx)("button",{onClick:W,className:"watch-three-dot",children:(0,Lt.jsx)("i",{className:"fas fa-download"})}),L&&(0,Lt.jsx)("button",{className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})}),(0,Lt.jsxs)("button",{onClick:(async e=>{let t=e.currentTarget;L?(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{let e=await ao.post("/post/delete",{postId:r._id,authorId:r.author._id});200===e.status?(Mn()(t).parents(".nf-post").css({"min-height":"0px",padding:"10px"}),Mn()(t).parents(".nf-post").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete post")}},{label:"No",onClick:()=>{}}]}):Mn()(t).parents(".nf-post").hide()}).bind(void 0),className:"post-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{className:"body",children:[(0,Lt.jsxs)("div",{className:"caption",style:{display:"flex",alignItems:"center",justifyContent:"start"},children:[_&&S&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("textarea",{style:{width:"90%"},ref:l})}),!S&&(0,Lt.jsx)("p",{style:{margin:0,marginRight:20},children:r.caption}),_&&(0,Lt.jsx)("button",{style:{},className:"btn ".concat(S?"btn-primary":"btn-danger"),onClick:e=>{M(!S)},children:S?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("i",{onClick:U,className:"fas fa-check"})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("i",{onClick:()=>{},className:"fas fa-pen"})})})]}),i&&(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/watch/".concat(e._id),children:(0,Lt.jsx)("video",{id:"watch-".concat(e._id),ref:u,className:"w-100 watch-video",controls:!0,src:"".concat(i)})})})||(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(ys,{})})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[E.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:QK,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),E.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:XK,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),E.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:KK,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[r.reacts&&m," ",m>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:r.comments&&b}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:r.shares&&g}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(x?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:async e=>{let t=e.currentTarget;Mn()(t).parent().hasClass("reacted")?(P("post"),Mn()(t).parent().removeClass("reacted")):(O("like","post",t),Mn()(t).parent().addClass("reacted"))},onMouseOver:e=>{let t=e.currentTarget;Mn()(t).children(".post-react-container").css("visibility","visible")},className:"react-like ".concat(1==x?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:x||"",children:["haha"==x?(0,Lt.jsx)("img",{src:KK,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==x?(0,Lt.jsx)("img",{src:XK,alt:"love"}):(0,Lt.jsx)("span",{}),0==x||"like"==x?(0,Lt.jsx)("img",{src:QK,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:x||"like"})]}),(0,Lt.jsxs)("div",{className:"post-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==x?"reacted":""),onClick:async e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(t).hasClass("reacted")?(P("post"),Mn()(t).removeClass("reacted")):(O("like","post",t),Mn()(t).addClass("reacted"),Mn()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},id:"postReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:QK,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==x?"reacted":""),onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(P("post"),Mn()(e.currentTarget).removeClass("reacted")):(O("love","post"),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},id:"postReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:XK,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==x?"reacted":""),onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(P(),Mn()(e.currentTarget).removeClass("reacted")):(O("haha","post",t),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},id:"postReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:KK,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:e=>{let t=e.currentTarget;Mn()(t).parents(".footer").find(".field-comment-text").focus()},className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),(0,Lt.jsxs)("div",{onClick:e=>{},className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"})]})]})})]})]})})})})})})})};const ZK=e=>{var t;dn((e=>e.setting)),dn((e=>e.profile));let[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[s,u]=(0,o.useState)([]),[l,c]=(0,o.useState)([]),[f,d]=(0,o.useState)(""),[h,p]=(0,o.useState)(""),m=Xe(),v=m.profile;return(0,o.useEffect)((()=>{null!==a&&void 0!==a&&a.presentAddress&&d(a.presentAddress),null!==a&&void 0!==a&&a.permanentAddress&&p(a.permanentAddress),null!==a&&void 0!==a&&a.schools&&c(a.schools),null!==a&&void 0!==a&&a.workPlaces&&u(a.workPlaces)}),[a]),(0,o.useEffect)((()=>{ao.get("/profile",{params:{profileId:v}}).then((e=>{i(e.data)})).catch((e=>console.log(e)))}),[e]),(0,o.useEffect)((()=>{ao.get("/profile",{params:{profileId:v}}).then((e=>{i(e.data)})).catch((e=>console.log(e)))}),[]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"profile-details-list",className:"details-list",children:[s.map(((e,t)=>(0,Lt.jsxs)("div",{className:"details-list-item",children:[(0,Lt.jsx)("i",{className:"fas fa-briefcase"}),(0,Lt.jsxs)("span",{children:[null===e||void 0===e?void 0:e.designation," at ",(0,Lt.jsx)("b",{children:null===e||void 0===e?void 0:e.name})]})]},t))),l.map(((e,t)=>(0,Lt.jsxs)("div",{className:"details-list-item",children:[(0,Lt.jsx)("i",{className:"fas fa-graduation-cap"}),(0,Lt.jsxs)("span",{children:["Studied at ",(0,Lt.jsxs)("b",{children:[null===e||void 0===e?void 0:e.name," (",null===e||void 0===e?void 0:e.degree,")"]})]})]},t))),f?(0,Lt.jsxs)("div",{className:"details-list-item",children:[(0,Lt.jsx)("i",{className:"fas fa-home"}),(0,Lt.jsxs)("span",{children:["Lives in ",(0,Lt.jsx)("b",{children:f})]})]}):(0,Lt.jsx)(Lt.Fragment,{}),h?(0,Lt.jsxs)("div",{className:"details-list-item",children:[(0,Lt.jsx)("i",{className:"fas fa-globe"}),(0,Lt.jsxs)("span",{children:["From ",(0,Lt.jsx)("b",{children:h})]})]}):(0,Lt.jsx)(Lt.Fragment,{}),(0,Lt.jsxs)("div",{className:"details-list-item",children:[(0,Lt.jsx)("i",{className:"fas fa-clock"}),(0,Lt.jsxs)("span",{children:["Joined  ",(0,Lt.jsx)("b",{children:(0,Lt.jsx)(vo(),{format:"MMMM YYYY",children:null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.createdAt})})]})]})]})})};const $K=()=>(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)("div",{id:"profile-about-content",children:(0,Lt.jsx)("div",{className:"tab-content",children:(0,Lt.jsx)(ZK,{})})})});const eJ=()=>{let{profile:e}=Xe(),t=dn((e=>e.profile))||{},n=t._id===e,[r,a]=(0,o.useState)(!1);const[i,s]=(0,o.useState)([]),[u,l]=(0,o.useState)(t.bio);let c=qe(),f=(0,o.useRef)(null);(0,o.useEffect)((()=>{ao.get("/post/myPosts",{params:{profile:e}}).then((e=>{200===e.status&&s(e.data)})),ao.get("/profile",{params:{profileId:e}}).then((e=>{a(e.data)})).catch((e=>console.log(e)))}),[e]),(0,o.useEffect)((()=>{ao.get("/profile",{params:{profileId:e}}).then((e=>{a(e.data),l(e.data.bio)})).catch((e=>console.log(e)))}),[]);let d=(0,o.useCallback)((e=>{c("/settings/")}),[]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"profile-post-content",children:[(0,Lt.jsxs)("div",{className:"intro",children:[(0,Lt.jsx)("h4",{className:"section-title",children:"Intro"}),(0,Lt.jsxs)("div",{className:"profile-bio",children:[(0,Lt.jsx)("p",{className:"bio-text",children:u}),(0,Lt.jsx)("textarea",{onChange:e=>{l(e.target.value)},value:u,className:"bio-text-textarea"}),n&&(0,Lt.jsx)("div",{onClick:async e=>{try{let t=e.currentTarget;if(Mn()(t).hasClass("edit-button"))Mn()(t).siblings(".bio-text").hide(),Mn()(t).siblings(".bio-text-textarea").show(),Mn()(t).siblings(".bio-text-textarea").val(u),Mn()(t).removeClass("edit-button"),Mn()(t).addClass("save-button"),Mn()(t).text("Save Bio");else{await ao.post("/profile/update/bio",{bio:u});Mn()(t).text("Edit Bio"),Mn()(t).siblings(".bio-text").show(),Mn()(t).removeClass("save-button"),Mn()(t).siblings(".bio-text-textarea").hide(),Mn()(t).addClass("edit-button")}}catch(e){console.log(e)}},className:"edit-button",children:" Edit bio"})]}),(0,Lt.jsxs)("div",{className:"details",children:[(0,Lt.jsx)(ZK,{}),n&&(0,Lt.jsx)("div",{onClick:d,className:"edit-button",children:" Edit Details"})]})]}),(0,Lt.jsxs)("div",{ref:f,className:"posts-container",children:[n&&(0,Lt.jsx)(uo,{setPosts:s,posts:i}),i.length>0?i.map(((e,n)=>(0,Lt.jsx)(_s,{myProfile:t,postContainer:f,data:e},n))):(0,Lt.jsx)(Ss,{count:3})]})]})})},tJ=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"skeleton-card no-border",children:(0,Lt.jsx)("div",{className:"skeleton-main",style:{minHeight:"227px",height:"227px",marginBottom:"0px"},children:" "})},t)))},nJ=e=>{let t=e.friend,n=dn((e=>e.profile)),[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(t.profilePic||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),u=Xe(),[l,c]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n.friends&&n.friends.filter((e=>{e._id===t._id&&c(!0)})),Nn(t.profilePic,a)}),[u]),(0,o.useEffect)((()=>{r&&s(t.profilePic)}),[r]);let f=t.fullName?t.fullName:t.user&&t.user.firstName+" "+t.user.surname;return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-item",children:[(0,Lt.jsx)("div",{className:"friend-info",children:(0,Lt.jsxs)(Mt,{to:"/"+t._id,children:[(0,Lt.jsx)("div",{className:"friend-profilePic",children:r?(0,Lt.jsx)("img",{src:i,alt:f}):(0,Lt.jsx)(tJ,{})}),(0,Lt.jsxs)("div",{className:"friend-details",children:[(0,Lt.jsx)("h4",{className:"friend-name text-capitalize",children:f}),t.mutual&&(0,Lt.jsx)("span",{className:"friend-mutual",children:" 20 Mutual Friends"})]})]})}),(0,Lt.jsxs)("div",{className:"friend-options",onClick:e=>{let t=e.currentTarget;Mn()(t).children(".friend-options-menu").toggle()},children:[(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"}),(0,Lt.jsx)("div",{className:"friend-options-menu",children:l?(0,Lt.jsxs)("div",{onClick:async e=>{try{200==(await ao.post("/friend/removeFriend",{profile:t._id})).status&&Mn()(e.currentTarget).parents(".friend-item").fadeOut()}catch(n){console.log(n)}},className:"friend-options-menu-item",children:[(0,Lt.jsx)("div",{className:"menu-item-icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-times"})}),(0,Lt.jsx)("div",{className:"menu-item-text",children:"Remove Friend"})]}):(0,Lt.jsxs)("div",{onClick:async e=>{try{let n=e.currentTarget;200==(await ao.post("/friend/sendRequest/",{profile:t._id})).status&&Mn()(n).parents(".friend-item").hide()}catch(n){console.log(n)}},className:"friend-options-menu-item",children:[(0,Lt.jsx)("div",{className:"menu-item-icon",children:(0,Lt.jsx)("i",{className:"fas fa-user-plus"})}),(0,Lt.jsx)("div",{className:"menu-item-text",children:"Add Friend"})]})})]})]})})},rJ=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsxs)("div",{className:"friend-item skeleton-card",children:[(0,Lt.jsx)("div",{className:"friend-info",children:(0,Lt.jsxs)(Mt,{to:"/",children:[(0,Lt.jsx)("div",{className:"friend-profilePic",children:(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(nu,{})})}),(0,Lt.jsx)("div",{className:"friend-details",children:(0,Lt.jsxs)("div",{className:"skeleton-lines",children:[(0,Lt.jsx)("div",{className:"skeleton-line short"}),(0,Lt.jsx)("div",{className:"skeleton-line medium"})]})})]})}),(0,Lt.jsx)("div",{className:"friend-options",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})})]},t)))},aJ=()=>{let e=dn((e=>e.profile)),[t,n]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0),[i,s]=(0,o.useState)(!1),u=Xe();return(0,o.useEffect)((()=>{let t=u.profile===e._id;if(s(t),t)return n(e.friends);ao.get("/friend/getFriends",{params:{profile:u.profile}}).then((e=>{a(e.data.length>0),n(e.data)})).catch((e=>console.log(e)))}),[u,e]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"profile-friends-content",children:[(0,Lt.jsx)("h4",{className:"section-title",children:"Friends"}),t.length>0?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"friend-items-container",children:t.map(((t,n)=>i?t._id!==e._id?(0,Lt.jsx)(nJ,{friend:t},n):void 0:(0,Lt.jsx)(nJ,{friend:t},n)))})}):(0,Lt.jsx)(Lt.Fragment,{children:r&&(0,Lt.jsx)("div",{className:"friend-items-container",children:(0,Lt.jsx)(rJ,{count:6})})})]})})},oJ=e=>{let{imageData:t,setImageIndex:n,setIsLightbox:r,imageIndex:a}=e,[i,s]=(0,o.useState)(!1);(0,o.useEffect)((()=>{Nn(t.photos,s)}),[]);let u=(0,o.useCallback)((e=>{r(!0),n(a)}),[]);return(0,Lt.jsx)(Lt.Fragment,{children:i?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"image-item",onClick:u.bind(void 0),children:(0,Lt.jsx)("div",{className:"profile-image-container",children:(0,Lt.jsx)("img",{src:t.photos,alt:t.caption||""})})})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(nu,{})})})},iJ=()=>{let[e,t]=(0,o.useState)([]),{profile:n}=Xe(),r=Ye(),[a,i]=(0,o.useState)([]),[s,u]=(0,o.useState)(!1),[l,c]=(0,o.useState)(0);return(0,o.useEffect)((()=>{ao.get("profile/getImages",{params:{profileId:n}}).then((e=>{t(e.data),i([...e.data.map((e=>e.photos))])}))}),[r]),(0,Lt.jsxs)("div",{id:"profile-images-container",children:[s&&(0,Lt.jsx)(OK,{setIsLightbox:u,setImageIndex:c,imageIndex:l,images:a,index:l}),(0,Lt.jsx)("div",{className:"section-title",children:"Profile Images"}),(0,Lt.jsx)("div",{className:"image-items-container mt-3",children:(0,Lt.jsx)(kW,{children:(0,Lt.jsx)(SW,{columnsCount:2,gutter:"10px",children:e&&e.length>1?e.map(((e,t)=>(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(oJ,{setImageIndex:c,setIsLightbox:u,imageIndex:t,imageData:e},t)}))):(0,Lt.jsx)("p",{children:"No Images To Show"})})})})]})};const sJ=()=>{let{profile:e}=Xe(),t=dn((e=>e.profile))||{},[n,r]=(t._id===e||t.username,(0,o.useState)(!1));const[a,i]=(0,o.useState)([]),s=(0,o.useRef)();return(0,o.useEffect)((()=>{ao.get("/watch/myWatchs",{params:{profile:e}}).then((e=>{200===e.status&&i(e.data)})),ao.get("/profile",{params:{profileId:e}}).then((e=>{r(e.data)})).catch((e=>console.log(e)))}),[e]),(0,o.useEffect)((()=>{ao.get("/profile",{params:{profileId:e}}).then((e=>{r(e.data)})).catch((e=>console.log(e)))}),[]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"profile-post-content",children:[(0,Lt.jsxs)("div",{className:"intro",children:[(0,Lt.jsx)("h4",{className:"section-title",children:"Intro"}),(0,Lt.jsx)("div",{className:"details",children:(0,Lt.jsx)(ZK,{})})]}),(0,Lt.jsx)("div",{className:"posts-container",ref:s,children:a.length>0?a.map(((e,n)=>(0,Lt.jsx)(lu,{myProfile:t,watch:e},n))):(0,Lt.jsx)(Ss,{count:3})})]})})},uJ=JSON.parse('[{"id":1,"name":"Original phone ringtone","src":"https://programmerikram.com/wp-content/uploads/2025/05/original-phone-ringtone.mp3"},{"id":2,"name":"Phone ringtone bells","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-bells.mp3"},{"id":3,"name":"Telephone Ringtone","src":"https://programmerikram.com/wp-content/uploads/2025/05/old-telephone.mp3"},{"id":4,"name":"Telephone Ringtone 2","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-telephone.mp3"},{"id":5,"name":"Phone ringtone office","src":"https://programmerikram.com/wp-content/uploads/2025/05/phone-ringtone-office.mp3"}]'),lJ=e=>{let{myId:t}=e;const n=dn((e=>e.setting)),[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(),[u,l]=(0,o.useState)(""),[c,f]=(0,o.useState)(!1),[d,h]=(0,o.useState)(""),[p,m]=(0,o.useState)(),[v,g]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!0),[w,x]=(0,o.useState)(!0),[C,_]=(0,o.useState)(!1),[k,S]=(0,o.useState)(!0),[M,E]=(0,o.useState)("auto"),N=(0,o.useRef)(),T=(0,o.useRef)(),I=(0,o.useRef)(),j=(0,o.useRef)(),D=(0,o.useRef)(),L=fo(),A=()=>null===D||void 0===D?void 0:D.current.pause();(0,o.useEffect)((()=>{if(n.ringtone){const e=uJ.find((e=>e.id==n.ringtone)),t=(null===e||void 0===e?void 0:e.src)||"";null===D||void 0===D||D.current.setAttribute("src",t)}}),[n]),(0,o.useEffect)((()=>(Ui.on("receive-call",(e=>{a(!0),f(!0),h(e.from),m(e.signal),l(e.name),setTimeout((()=>null===D||void 0===D?void 0:D.current.play()),500)})),Ui.on("videoCallEnd",(()=>{A(),j.current&&j.current.dispatchEvent(new MouseEvent("click",{bubbles:!0}))})),()=>{Ui.off("receive-call"),Ui.off("videoCallEnd")})),[]);const R=(0,o.useCallback)((async()=>{try{var e;const t=(await navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),n=t.length>0;S(n);const r=t.find((e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("environment"))),a=C&&null!==r&&void 0!==r&&r.deviceId?r.deviceId:null===(e=t[0])||void 0===e?void 0:e.deviceId,o={audio:y,video:!(!w||!n)&&{deviceId:a}},i=await navigator.mediaDevices.getUserMedia(o);s(i),N.current&&(N.current.srcObject=i)}catch(O$){console.error("Media error:",O$),S(!1)}}),[C,w,y]);(0,o.useEffect)((()=>{r&&R()}),[r,R,w,y]),(0,o.useEffect)((()=>{r&&R()}),[w,C,R,w,y]);const P=(0,o.useCallback)((()=>{if(A(),!p)return;g(!0);const e=new(oO())({initiator:!1,trickle:!1,stream:i});e.on("signal",(e=>Ui.emit("answer-call",{signal:e,to:d}))),e.on("stream",(e=>{T.current&&(T.current.srcObject=e)})),e.signal(p),I.current=e}),[p,i]),O=(0,o.useCallback)((()=>{var e;A(),Ui.emit("leaveVideoCall",d),i&&i.getTracks().forEach((e=>e.stop())),N.current&&(N.current.srcObject=null),T.current&&(T.current.srcObject=null),s(null),g(!1),a(!1),null===(e=I.current)||void 0===e||e.destroy(),I.current=null}),[d,i,r]),F=(0,o.useCallback)((()=>{i&&i.getAudioTracks().forEach((e=>{e.enabled=!e.enabled,b(e.enabled)}))}),[i]),B=(0,o.useCallback)((async()=>{const e=i.getVideoTracks()[0];if(w){var t,n;e&&(x(!1),e.enabled=!1,e.stop(),i.removeTrack(e)),N.current&&(N.current.srcObject=i);const r=null===(t=I.current)||void 0===t||null===(n=t._pc)||void 0===n?void 0:n.getSenders().find((e=>{var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));if(r)try{await r.replaceTrack(null)}catch(O$){console.error("Error disabling video:",O$)}}else try{var r,a;const e=(await navigator.mediaDevices.getUserMedia({video:{facingMode:C?{exact:"environment"}:"user"},audio:y})).getVideoTracks()[0];i.addTrack(e),x(!0),N.current&&(N.current.srcObject=i);const t=null===(r=I.current)||void 0===r||null===(a=r._pc)||void 0===a?void 0:a.getSenders().find((e=>{var t;return"video"===(null===(t=e.track)||void 0===t?void 0:t.kind)}));var o,s;if(t)await t.replaceTrack(e);else null===(o=I.current)||void 0===o||null===(s=o.addTrack)||void 0===s||s.call(o,e,i)}catch(O$){console.error("Error enabling camera:",O$)}x((e=>!e))}),[i,w,y]),z=(0,o.useCallback)((()=>{_((e=>!e))}),[]);return(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)(En,{title:"Video Call",style:{width:L?"95%":"600px",top:"50%",height:M},isOpen:r,onRequestClose:()=>{},id:"videoCallModal",children:(0,Lt.jsxs)("div",{className:"".concat(v?"call-accepted":""),style:{padding:0},children:[(0,Lt.jsxs)("h2",{className:"text-center vc-modal-heading",children:["Video Call - ",u]}),(0,Lt.jsx)("p",{className:"fs-4 text-center",children:c&&!v&&"".concat(u," Calling you")}),(0,Lt.jsxs)("div",{className:"video-call-container ".concat(L?"mobile":""),children:[v&&(0,Lt.jsx)("video",{playsInline:!0,ref:T,className:"receive-friends-video",autoPlay:!0,style:{width:"100%"}}),(0,Lt.jsx)("video",{playsInline:!0,muted:!0,ref:N,className:"receive-my-video",autoPlay:!0,style:{width:"150px"}})]}),(0,Lt.jsxs)("div",{className:"call-buttons",children:[(0,Lt.jsx)("button",{onClick:O,ref:j,className:"call-button-ends call-button bg-danger",children:(0,Lt.jsx)("i",{className:"fa fa-phone"})}),v&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:F,className:"call-button-microphone call-button",children:y?(0,Lt.jsx)("i",{className:"fa fa-microphone"}):(0,Lt.jsx)("i",{className:"fa fa-microphone-slash"})}),k&&(0,Lt.jsx)("button",{onClick:B,className:"call-button-camera call-button",children:w?(0,Lt.jsx)("i",{className:"fa fa-video"}):(0,Lt.jsx)("i",{className:"fa fa-video-slash"})}),(0,Lt.jsx)("button",{onClick:z,className:"call-button-switch call-button",children:(0,Lt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",children:[(0,Lt.jsx)("path",{d:"M11 7H5a2 2 0 0 0-2 2v4"}),(0,Lt.jsx)("path",{d:"M13 17h6a2 2 0 0 0 2-2v-4"}),(0,Lt.jsx)("polyline",{points:"16 3 21 3 21 8"}),(0,Lt.jsx)("polyline",{points:"8 21 3 21 3 16"}),(0,Lt.jsx)("path",{d:"M21 3l-6.5 6.5"}),(0,Lt.jsx)("path",{d:"M3 21l6.5-6.5"})]})})]}),!v&&(0,Lt.jsx)("button",{onClick:P,className:"call-button-receive call-button bg-success",children:(0,Lt.jsx)("i",{className:"fa fa-phone-volume"})})]})]})}),(0,Lt.jsx)("audio",{ref:D,loop:!0})]})},cJ="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",fJ=e=>{let{viewer:t,reacts:n}=e,[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)("");return(0,o.useEffect)((()=>{(async()=>{let e=await ao.get("profile",{params:{profileId:t}});if(200==e.status){a(e.data);let r=n.filter((e=>e.profile==t));if(0==r.length)return;switch(r[0].type){case"like":default:s(cJ);break;case"love":s("https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg");break;case"haha":s("https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg")}}})()}),[]),(0,Lt.jsx)("div",{children:r&&(0,Lt.jsxs)("li",{className:"sp-reacts-item",children:[(0,Lt.jsx)("div",{className:"reactor-pp",children:(0,Lt.jsx)(Tn,{profilePic:r.profilePic,profile:r._id})}),(0,Lt.jsx)("div",{className:"react-details",children:(0,Lt.jsx)(Mt,{to:"/".concat(r._id),children:(0,Lt.jsx)("span",{className:"reactor-name",children:r.fullName})})}),(0,Lt.jsx)("span",{className:"reactor-react",children:i?(0,Lt.jsx)("img",{src:i}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("img",{style:{visibility:"hidden"},src:""})})})]})})},dJ="https://programmerikram.com/wp-content/uploads/2025/03/like-icon.svg",hJ="https://programmerikram.com/wp-content/uploads/2025/03/love-icon.svg",pJ="https://programmerikram.com/wp-content/uploads/2025/03/haha-icon.svg",mJ=()=>{let{postId:e}=Xe(),[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!1),[u,l]=(0,o.useState)(!1),c=fo(),d=qe();const h=Ye().pathname.includes("edit");(0,o.useEffect)((()=>{(async()=>{let t=await ao.get("post/single",{params:{postId:e}});200==t.status&&n(t.data)})()}),[e]);let p=dn((e=>e.profile)),m=p._id,v=t&&(null===t||void 0===t?void 0:t.author._id),[g,y]=(0,o.useState)(t&&t.reacts.length),[b,w]=(0,o.useState)(t&&t.shares.length),[x,C]=(0,o.useState)(t&&t.comments.length),[_,k]=(0,o.useState)(!1),[S,M]=(0,o.useState)([]);(0,o.useEffect)((()=>{y(t&&t.reacts.length),w(t&&t.shares.length),C(t&&t.comments.length)}),[t]);var E=m===v;let[N,T]=(0,o.useState)(t&&(null===t||void 0===t?void 0:t.author.profilePic)||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),I=t&&t.photos;(0,o.useEffect)((()=>{Nn(I,l)}),[I]),(0,o.useEffect)((()=>{let e=[];t&&t.reacts.map((t=>{if(t.profile){switch(t.type){case"like":e.includes("like")||e.push("like");break;case"love":e.includes("love")||e.push("love");break;case"haha":e.includes("haha")||e.push("haha")}t.profile===m&&k(t.type)}})),M(e)}),[]);let j=t&&(t.type||"post"),D=async e=>{let n=e.currentTarget;E?(0,gs.ZX)({title:"Confirm Action",message:"Are you sure you want to delete this post?",buttons:[{label:"Yes",onClick:async()=>{let e=await ao.post("/post/delete",{postId:t._id,authorId:t.author._id});200===e.status?(Mn()(n).parents(".nf-post").css({"min-height":"0px",padding:"10px"}),Mn()(n).parents(".nf-post").html('<p class="fs-6 mb-0 text-center text-danger">'+e.data.message+"</p>")):alert("Failed to delete post")}},{label:"No",onClick:()=>{}}]}):Mn()(n).parents(".nf-post").hide()},L=async function(){y((e=>e-1));let e=await ao.post("/react/removeReact",{id:t._id,postType:"post"});return 200===e.status&&(y(e.data.reacts.length),k(""),!0)},A=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";y((e=>e+1));let r=await ao.post("/react/addReact",{id:t._id,postType:n,reactType:e});return 200===r.status&&(y(r.data.reacts.length),M([...S,e]),k(e),!0)},R=async e=>{let t=e.currentTarget;Mn()(t).parent().hasClass("reacted")?(L("post"),Mn()(t).parent().removeClass("reacted")):(A("like","post",t),Mn()(t).parent().addClass("reacted"))},P=async e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(t).hasClass("reacted")?(L("post"),Mn()(t).removeClass("reacted")):(A("like","post",t),Mn()(t).addClass("reacted"),Mn()(e.currentTarget).siblings().removeClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},O=e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(L("post"),Mn()(e.currentTarget).removeClass("reacted")):(A("love","post"),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},F=e=>{let t=e.currentTarget;Mn()(t).parents(".post-react-container").css("visibility","hidden"),Mn()(e.currentTarget).hasClass("reacted")?(L(),Mn()(e.currentTarget).removeClass("reacted")):(A("haha","post",t),Mn()(e.currentTarget).siblings().removeClass("reacted"),Mn()(e.currentTarget).addClass("reacted")),setTimeout((()=>{Mn()(t).parents(".post-react-container").css("visibility","visible")}),500)},B=e=>{let t=e.currentTarget;Mn()(t).children(".post-react-container").css("visibility","visible")},z=e=>{let t=e.currentTarget;Mn()(t).parents(".footer").find(".field-comment-text").focus()},U=e=>{a(!0)},V=()=>{a(!1)},H=e=>{let t=e.currentTarget.value;s(t)},Y=async e=>{e.preventDefault();let n=await ao.post("post/share",{postId:t._id,caption:i});w((e=>e+1)),200==n.status?a(!1):w(t&&t.shares.length)},G=()=>{d("edit")},q=()=>{d("/post/".concat(e))},Q=dn((e=>e.profile.profilePic)),X=dn((e=>e.profile._id)),K="".concat(t&&(null===t||void 0===t?void 0:t.author.profilePic)),[J,Z]=(0,o.useState)(window.matchMedia("(max-width: 768px)").matches);(0,o.useEffect)((()=>{window.matchMedia("(max-width:768px)").addEventListener("change",(e=>{Z(e.matches)}))}),[]);let[$,ee]=(0,o.useState)("");(0,o.useEffect)((()=>{t.caption&&ee(t.caption)}),[t.caption]);let te=(0,o.useCallback)((async e=>(e.preventDefault(),ee(e.target.value),n((t=>f(f({},t),{},{caption:e.target.value}))))),[]),ne=(0,o.useCallback)((async n=>{200==(await ao.post("/post/update",{postId:e,caption:t.caption})).status&&W("Caption Updated")}),[]),re=()=>"share"===t.type?(0,Lt.jsxs)("div",{className:"share-nf-post nf-post",children:[(0,Lt.jsxs)("div",{className:"header",children:[(0,Lt.jsx)("div",{className:"reason",children:(0,Lt.jsxs)("span",{className:"fs-5",children:[(0,Lt.jsx)("b",{children:(0,Lt.jsx)(Mt,{to:"/".concat(t.author._id),children:t.author.fullName})})," Shared ",(0,Lt.jsxs)("b",{children:[(0,Lt.jsxs)(Mt,{to:"/".concat(t.parentPost.author._id),children:[t.parentPost.author.fullName,"'s"]})," "]}),(0,Lt.jsx)("span",{className:"text-capitalize",children:t.parentPost.type})]})}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:t.author.profilePic,profile:t.author._id,active:!1})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsxs)(Mt,{to:"/"+t.author._id,children:[(0,Lt.jsx)("h4",{className:"author-name",children:t.author.fullName}),t.feelings&&(0,Lt.jsxs)("span",{className:"post-feelings",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",t.feelings||""]}),t.location&&(0,Lt.jsxs)("span",{className:"post-location",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",t.location||""]})]}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[E&&(0,Lt.jsx)("button",{className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"far fa-ellipsis-h"})}),(0,Lt.jsxs)("button",{onClick:D.bind(void 0),className:"post-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{className:"nf-post ".concat(j," m-3 border body overflow-hidden"),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===j&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsx)("span",{className:"d-none",children:(0,Lt.jsx)("b",{children:"Shared a photos"})}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:t.parentPost.author.profilePic,profile:t.parentPost.author._id})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsxs)(Mt,{to:"/"+t.author._id,children:[(0,Lt.jsx)("h4",{className:"author-name",children:t.parentPost.author.fullName}),t.feelings&&(0,Lt.jsxs)("span",{className:"post-feelings",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",t.feelings||""]}),t.location&&(0,Lt.jsxs)("span",{className:"post-location",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",t.location||""]})]}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.parentPost.createdAt})})]})]}),(0,Lt.jsx)("div",{className:"right"})]})]}),(0,Lt.jsx)("p",{className:"caption",children:t.caption}),(0,Lt.jsxs)("div",{className:"body",children:[(0,Lt.jsx)("p",{className:"caption",children:t.parentPost.caption}),u?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/post/".concat(t._id),children:(0,Lt.jsx)("img",{src:I,alt:"post"})})})}):(0,Lt.jsx)(Lt.Fragment,{children:bs(I)&&(0,Lt.jsx)(ys,{})})]})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[S.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:dJ,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),S.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:hJ,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),S.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:pJ,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[t.reacts&&g," ",g>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:t.comments&&x}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:t.shares&&b}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(_?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:R,onMouseOver:B,className:"react-like ".concat(1==_?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:_||"",children:["haha"==_?(0,Lt.jsx)("img",{src:pJ,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==_?(0,Lt.jsx)("img",{src:hJ,alt:"love"}):(0,Lt.jsx)("span",{}),0==_||"like"==_?(0,Lt.jsx)("img",{src:dJ,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:_||"like"})]}),(0,Lt.jsxs)("div",{className:"post-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==_?"reacted":""),onClick:P,id:"postReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:dJ,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==_?"reacted":""),onClick:O,id:"postReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:hJ,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==_?"reacted":""),onClick:F,id:"postReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:pJ,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:z,className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),(0,Lt.jsxs)("div",{onClick:U,className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"})]}),(0,Lt.jsxs)(En,{title:"View Cover Photo",style:{width:c?"95%":"600px",top:"50%"},isOpen:r,onRequestClose:V,id:"cp-view-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{}),(0,Lt.jsx)("div",{onClick:V,className:"modal-close-btn text-danger",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("div",{className:"share-post-container",children:[(0,Lt.jsxs)("div",{className:"share-post-header",children:[(0,Lt.jsxs)("div",{className:"row",children:[(0,Lt.jsx)("div",{className:"col-1",children:(0,Lt.jsx)(Tn,{profilePic:p.profilePic})}),(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("h3",{children:p.fullName})})]}),(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsxs)("div",{className:"col",children:["Your Sharing ",t.author.fullName||"Someone","'s Post"]})})]}),(0,Lt.jsxs)("div",{className:"share-post-body my-3",children:[(0,Lt.jsx)("textarea",{className:"form-control",rows:"3",onChange:H.bind(void 0),placeholder:"What's On Your Mind?"}),(0,Lt.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Lt.jsx)("button",{className:"btn btn-primary",onClick:Y,children:"Share Now"})})]}),(0,Lt.jsx)("div",{className:"share-post-footer"})]})})]})]})})]})]}):(0,Lt.jsxs)("div",{className:"nf-post ".concat(j),children:[(0,Lt.jsxs)("div",{className:"header",children:["profilePic"===j&&(0,Lt.jsxs)("div",{className:"reason",children:[(0,Lt.jsxs)("span",{className:"d-none",children:[(0,Lt.jsx)("b",{children:"A bitch"})," commented."]}),(0,Lt.jsx)("span",{children:"Updated Profile Picture"})]}),(0,Lt.jsxs)("div",{className:"author-info",children:[(0,Lt.jsxs)("div",{className:"left",children:[(0,Lt.jsx)("div",{className:"author-pp",children:(0,Lt.jsx)(Tn,{profilePic:K,profile:t.author._id,active:!0})}),(0,Lt.jsxs)("div",{className:"post-nd-container",children:[(0,Lt.jsxs)("h4",{className:"author-name",children:[(0,Lt.jsx)(Mt,{to:"/"+t.author._id,children:t.author.fullName}),t.fellings&&(0,Lt.jsxs)("span",{className:"post-feelings",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:"is felling"})," ",t.fellings||""]}),t.location&&(0,Lt.jsxs)("span",{className:"post-location",children:[" ",(0,Lt.jsx)("small",{className:"text-lowercase text-secondary",children:" at"})," ",t.location||""]})]}),(0,Lt.jsx)("span",{className:"post-time",children:(0,Lt.jsx)(vo(),{fromNow:!0,children:t.createdAt})})]})]}),(0,Lt.jsxs)("div",{className:"right",children:[E&&!h&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("button",{onClick:G,className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"far fs-6 fa-pen"})})}),h&&(0,Lt.jsx)("button",{onClick:q,className:"post-three-dot",children:(0,Lt.jsx)("i",{className:"fas fa-arrow-left"})}),(0,Lt.jsxs)("button",{onClick:D.bind(void 0),className:"post-close",children:[" ",(0,Lt.jsx)("i",{className:"far fa-times"})]})]})]})]}),(0,Lt.jsxs)("div",{className:"body",children:[E&&h?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("input",{onChange:te.bind(void 0),className:"caption-editor form-control mb-2",placeholder:"Enter Your Caption",value:$}),(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("button",{onClick:ne,className:"btn btn-primary",children:"Update"})})]})}):(0,Lt.jsx)("p",{className:"caption",children:t.caption}),u?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"attachment",children:(0,Lt.jsx)(Mt,{to:"/post/".concat(t._id),children:(0,Lt.jsx)("img",{src:I,alt:"post"})})})}):(0,Lt.jsx)(Lt.Fragment,{children:bs(I)&&(0,Lt.jsx)(ys,{})})]}),(0,Lt.jsxs)("div",{className:"footer",children:[(0,Lt.jsxs)("div",{className:"react-count",children:[(0,Lt.jsxs)("div",{className:"reacts",children:[S.includes("like")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:dJ,alt:"like"}),"  "]}):(0,Lt.jsx)("span",{}),S.includes("love")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:hJ,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),S.includes("haha")?(0,Lt.jsxs)("div",{className:"react",children:[" ",(0,Lt.jsx)("img",{src:pJ,alt:"love"})," "]}):(0,Lt.jsx)("span",{}),(0,Lt.jsxs)("span",{className:"text",children:[t.reacts&&g," ",g>1?"Reacts":"React"]})]}),(0,Lt.jsxs)("div",{className:"comment-share",children:[(0,Lt.jsxs)("div",{className:"comment",children:[(0,Lt.jsx)("div",{className:"text",children:t.comments&&x}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})})]}),(0,Lt.jsxs)("div",{className:"shares",children:[(0,Lt.jsx)("div",{className:"text",children:t.shares&&b}),(0,Lt.jsx)("div",{className:"icon",children:(0,Lt.jsx)("i",{className:"fa fa-share"})})]})]})]}),(0,Lt.jsx)("div",{className:"like-comment-share",children:(0,Lt.jsxs)("div",{className:"buttons-container",children:[(0,Lt.jsxs)("div",{className:"react-buttons button ".concat(_?"reacted":""),children:[(0,Lt.jsxs)("div",{onClick:R,onMouseOver:B,className:"react-like ".concat(1==_?"reacted":""),children:[(0,Lt.jsxs)("span",{className:"react-icon",datatype:_||"",children:["haha"==_?(0,Lt.jsx)("img",{src:pJ,alt:"haha"}):(0,Lt.jsx)("span",{}),"love"==_?(0,Lt.jsx)("img",{src:hJ,alt:"love"}):(0,Lt.jsx)("span",{}),0==_||"like"==_?(0,Lt.jsx)("img",{src:dJ,alt:"like"}):(0,Lt.jsx)("span",{})]}),(0,Lt.jsx)("span",{className:"text text-capitalize",children:_||"like"})]}),(0,Lt.jsxs)("div",{className:"post-react-container",children:[(0,Lt.jsx)("div",{className:"react react-like ".concat("like"==_?"reacted":""),onClick:P,id:"postReactLike",title:"Like",children:(0,Lt.jsx)("img",{src:dJ,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-love ".concat("love"==_?"reacted":""),onClick:O,id:"postReactLove",title:"Love",children:(0,Lt.jsx)("img",{src:hJ,alt:"love"})}),(0,Lt.jsx)("div",{className:"react react-haha ".concat("haha"==_?"reacted":""),onClick:F,id:"postReactHaha",title:"Haha",children:(0,Lt.jsx)("img",{src:pJ,alt:"haha"})})]})]}),(0,Lt.jsxs)("div",{onClick:z,className:"comment button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-comment-alt"})}),(0,Lt.jsx)("span",{className:"text",children:"Comment"})]}),(0,Lt.jsxs)("div",{onClick:U,className:"share button",children:[(0,Lt.jsx)("span",{className:"icon",children:(0,Lt.jsx)("i",{className:"far fa-share"})}),(0,Lt.jsx)("span",{className:"text",children:"Share"}),(0,Lt.jsxs)(En,{title:"Share Post",style:{width:c?"95%":"600px",top:"50%"},isOpen:r,onRequestClose:V,id:"cp-view-modal",children:[(0,Lt.jsxs)("div",{className:"modal-header",children:[(0,Lt.jsx)("div",{}),(0,Lt.jsx)("div",{onClick:V,className:"modal-close-btn text-danger",children:(0,Lt.jsx)("i",{className:"far fa-times"})})]}),(0,Lt.jsx)("div",{className:"modal-body",children:(0,Lt.jsxs)("div",{className:"share-post-container",children:[(0,Lt.jsxs)("div",{className:"share-post-header",children:[(0,Lt.jsxs)("div",{className:"row",children:[(0,Lt.jsx)("div",{className:"col-1",children:(0,Lt.jsx)(Tn,{profilePic:p.profilePic})}),(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("h3",{children:p.fullName})})]}),(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsxs)("div",{className:"col",children:["Your Sharing ",t.author.fullName||"Someone","'s Post"]})})]}),(0,Lt.jsxs)("div",{className:"share-post-body my-3",children:[(0,Lt.jsx)("textarea",{className:"form-control",onChange:e=>s(e.target.value),value:i}),(0,Lt.jsx)("div",{className:"share-post-button text-end mt-2",children:(0,Lt.jsx)("button",{className:"btn btn-primary",onClick:Y,children:"Share Now"})})]}),(0,Lt.jsx)("div",{className:"share-post-footer"})]})})]})]})]})})]})]});return(0,Lt.jsx)("div",{children:(0,Lt.jsx)(Ht,{className:"single-post-container",children:(0,Lt.jsxs)(qt,{children:[(0,Lt.jsx)(Jt,{md:"6",className:"br",children:(0,Lt.jsx)("div",{id:"post-container",children:(0,Lt.jsx)("div",{children:t&&(0,Lt.jsx)(re,{})})})}),(0,Lt.jsx)(Jt,{md:"3",className:"br",children:(0,Lt.jsxs)("div",{className:"sp-reacts-container",children:[(0,Lt.jsxs)("h4",{className:"section-title",children:["Views ",t.viewers&&"(".concat(t.viewers.length,")")]}),(0,Lt.jsx)("ul",{className:"sp-reacts",children:t.viewers&&t.viewers.map(((e,n)=>(0,Lt.jsx)(fJ,{reacts:t.reacts,viewer:e._id},n)))})]})}),(0,Lt.jsx)(Jt,{md:"3",children:(0,Lt.jsxs)("div",{className:"sp-comments-container",children:[(0,Lt.jsxs)("h4",{className:"section-title",children:["Comments ",(null===t||void 0===t?void 0:t.comments)&&"(".concat(null===t||void 0===t?void 0:t.comments.length,")")]}),(null===t||void 0===t?void 0:t.comments)&&(0,Lt.jsx)(vs,{post:t,commentState:C,allComments:t.comments||[],myProfile:p,authProfile:X,isEditMode:h,authProfilePicture:Q})]})})]})})})},vJ=()=>(0,Lt.jsx)("div",{children:"post comments"}),gJ=()=>(0,Lt.jsx)("div",{children:"post reacts"}),yJ="SET_LOGIN",bJ=e=>({type:yJ,payload:e});var wJ=function(){return wJ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},wJ.apply(this,arguments)},xJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},CJ=function(e){var t=0;if(0===e.length)return!1;for(;t<e.length;){var n=e.charAt(t);if(n==n.toLowerCase());else if(n==n.toUpperCase())return!0;t++}return!1},_J=function(e){var t=0;if(0===e.length)return!1;for(;t<e.length;){var n=e.charAt(t);if(n==n.toUpperCase());else if(n==n.toLowerCase())return!0;t++}return!1},kJ=function(e){var t=e.valid,n=e.iconSize,r=e.validColor,a=e.invalidColor,i=e.validTextColor,s=e.invalidTextColor,u=e.iconComponents,l=e.hideIcon,c=e.rtl,f=e.children,d=e.itemClassName;return o.createElement("li",{className:"".concat(d," ").concat(t?"valid":"invalid"),style:{listStyleType:"none",display:"flex",alignItems:"center",margin:"2px 0"}},l?null:u?t?u.ValidIcon:u.InvalidIcon:o.createElement("svg",{className:"checklist-icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 512 512",style:{marginRight:c?0:5,marginLeft:c?5:0}},o.createElement("path",{fill:t?r:a,d:t?"M432 64l-240 240-112-112-80 80 192 192 320-320z":"M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"})),o.createElement("span",{style:{paddingTop:2,opacity:t?1:s?void 0:.5,flex:1,color:t?i:s}},f))};const SJ=function(e){var t=e.className,n=e.style,r=e.rules,a=e.value,i=e.valueAgain,s=e.minLength,u=e.maxLength,l=e.rtl,c=e.onChange,f=e.specialCharsRegex,d=void 0===f?/[~`\xbf\xa1!#$%\^&*\u20ac\xa3@+\xf7=\-\[\]\\';,/{}\(\)|\\":<>\?\.\_]/g:f,h=e.messages,p=void 0===h?{}:h,m=xJ(e,["className","style","rules","value","valueAgain","minLength","maxLength","rtl","onChange","specialCharsRegex","messages"]),v={minLength:{valid:a.length>=(s||100),message:p.minLength||"Password has at least ".concat(s," characters.")},specialChar:{valid:d.test(a),message:p.specialChar||"Password has special characters."},number:{valid:/\d/g.test(a),message:p.number||"Password has a number."},match:{valid:a.length>0&&a===i,message:p.match||"Passwords match."},capital:{valid:CJ(a),message:p.capital||"Password has a capital letter."},lowercase:{valid:_J(a),message:p.lowercase||"Password has a lowercase letter."},capitalAndLowercase:{valid:CJ(a)&&_J(a),message:p.capitalAndLowercase||"Password contains at least one uppercase and lowercase characters."},letter:{valid:/[a-zA-Z]/g.test(a),message:p.letter||"Password has a letter."},maxLength:{valid:a.length<=(u||16),message:p.maxLength||"Password has no more than ".concat(u," characters.")},notEmpty:{valid:Boolean(a.length>0&&i&&i.length>0),message:p.notEmpty||"Password fields are not empty."},noSpaces:{valid:Boolean(a.length>0&&!/\s/.test(a)),message:p.noSpaces||"Password contains no spaces."}},g=(0,o.useMemo)((function(){return r.filter((function(e){return Boolean(v[e])}))}),[r]),y=g.every((function(e){return v[e].valid})),b=(0,o.useMemo)((function(){return g.filter((function(e){return!v[e].valid}))}),[a,i,g]);return(0,o.useEffect)((function(){"function"===typeof c&&c(y,b)}),[y,b]),l&&(t=t?t+" rtl":"rtl"),o.createElement("ul",{className:t,style:wJ({margin:0,padding:0},n)},g.map((function(e){var t=v[e],n=t.message,r=t.valid;return o.createElement(kJ,wJ({key:e,valid:r,iconSize:18,validColor:"#4BCA81",invalidColor:"#FF0033",rtl:l},m),n)})))};var MJ=n(1899),EJ=n.n(MJ);const NJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function TJ(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const IJ={date:TJ({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:TJ({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:TJ({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},jJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function DJ(e){return(t,n)=>{let r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const LJ={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:DJ({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:DJ({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:DJ({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:DJ({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:DJ({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function AJ(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(i)));let l;l=e.valueCallback?e.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;return{value:l,rest:t.slice(i.length)}}}const RJ={ordinalNumber:(PJ={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(PJ.matchPattern);if(!n)return null;const r=n[0],a=e.match(PJ.parsePattern);if(!a)return null;let o=PJ.valueCallback?PJ.valueCallback(a[0]):a[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:AJ({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:AJ({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:AJ({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:AJ({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:AJ({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var PJ;const OJ={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=NJ[e];return r="string"===typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:IJ,formatRelative:(e,t,n,r)=>jJ[e],localize:LJ,match:RJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};let FJ={};function BJ(){return FJ}Math.pow(10,8);const zJ=6048e5,UJ=Symbol.for("constructDateFrom");function WJ(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&UJ in e?e[UJ](t):e instanceof Date?new e.constructor(t):new Date(t)}function VJ(e,t){return WJ(t||e,e)}function HJ(e){const t=VJ(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function YJ(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in);return n.setHours(0,0,0,0),n}function GJ(e,t,n){const[r,a]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=WJ.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(a)}(null===n||void 0===n?void 0:n.in,e,t),o=YJ(r),i=YJ(a),s=+o-HJ(o),u=+i-HJ(i);return Math.round((s-u)/864e5)}function qJ(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function QJ(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in);return GJ(n,qJ(n))+1}function XJ(e,t){var n,r,a,o,i,s;const u=BJ(),l=null!==(n=null!==(r=null!==(a=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:u.weekStartsOn)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==n?n:0,c=VJ(e,null===t||void 0===t?void 0:t.in),f=c.getDay(),d=(f<l?7:0)+f-l;return c.setDate(c.getDate()-d),c.setHours(0,0,0,0),c}function KJ(e,t){return XJ(e,f(f({},t),{},{weekStartsOn:1}))}function JJ(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in),r=n.getFullYear(),a=WJ(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=KJ(a),i=WJ(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const s=KJ(i);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function ZJ(e,t){const n=JJ(e,t),r=WJ((null===t||void 0===t?void 0:t.in)||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),KJ(r)}function $J(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in),r=+KJ(n)-+ZJ(n);return Math.round(r/zJ)+1}function eZ(e,t){var n,r,a,o,i,s;const u=VJ(e,null===t||void 0===t?void 0:t.in),l=u.getFullYear(),c=BJ(),f=null!==(n=null!==(r=null!==(a=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:c.firstWeekContainsDate)&&void 0!==r?r:null===(s=c.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,d=WJ((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(l+1,0,f),d.setHours(0,0,0,0);const h=XJ(d,t),p=WJ((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(l,0,f),p.setHours(0,0,0,0);const m=XJ(p,t);return+u>=+h?l+1:+u>=+m?l:l-1}function tZ(e,t){var n,r,a,o,i,s;const u=BJ(),l=null!==(n=null!==(r=null!==(a=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==a?a:u.firstWeekContainsDate)&&void 0!==r?r:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==n?n:1,c=eZ(e,t),f=WJ((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c,0,l),f.setHours(0,0,0,0);return XJ(f,t)}function nZ(e,t){const n=VJ(e,null===t||void 0===t?void 0:t.in),r=+XJ(n,t)-+tZ(n,t);return Math.round(r/zJ)+1}function rZ(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const aZ={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return rZ("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):rZ(n+1,2)},d:(e,t)=>rZ(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>rZ(e.getHours()%12||12,t.length),H:(e,t)=>rZ(e.getHours(),t.length),m:(e,t)=>rZ(e.getMinutes(),t.length),s:(e,t)=>rZ(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return rZ(Math.trunc(r*Math.pow(10,n-3)),t.length)}},oZ="midnight",iZ="noon",sZ="morning",uZ="afternoon",lZ="evening",cZ="night",fZ={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return aZ.y(e,t)},Y:function(e,t,n,r){const a=eZ(e,r),o=a>0?a:1-a;if("YY"===t){return rZ(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):rZ(o,t.length)},R:function(e,t){return rZ(JJ(e),t.length)},u:function(e,t){return rZ(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return rZ(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return rZ(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return aZ.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return rZ(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=nZ(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):rZ(a,t.length)},I:function(e,t,n){const r=$J(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):rZ(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):aZ.d(e,t)},D:function(e,t,n){const r=QJ(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):rZ(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return rZ(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return rZ(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return rZ(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?iZ:0===r?oZ:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?lZ:r>=12?uZ:r>=4?sZ:cZ,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return aZ.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):aZ.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):rZ(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):rZ(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):aZ.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):aZ.s(e,t)},S:function(e,t){return aZ.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return hZ(r);case"XXXX":case"XX":return pZ(r);default:return pZ(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return hZ(r);case"xxxx":case"xx":return pZ(r);default:return pZ(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+dZ(r,":");default:return"GMT"+pZ(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+dZ(r,":");default:return"GMT"+pZ(r,":")}},t:function(e,t,n){return rZ(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return rZ(+e,t.length)}};function dZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return 0===o?n+String(a):n+String(a)+t+rZ(o,2)}function hZ(e,t){if(e%60===0){return(e>0?"-":"+")+rZ(Math.abs(e)/60,2)}return pZ(e,t)}function pZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+rZ(Math.trunc(r/60),2)+t+rZ(r%60,2)}const mZ=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},vZ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},gZ={p:vZ,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return mZ(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",mZ(r,t)).replace("{{time}}",vZ(a,t))}},yZ=/^D+$/,bZ=/^Y+$/,wZ=["D","DD","YY","YYYY"];function xZ(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function CZ(e){return!(!xZ(e)&&"number"!==typeof e||isNaN(+VJ(e)))}const _Z=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SZ=/^'([^]*?)'?$/,MZ=/''/g,EZ=/[a-zA-Z]/;function NZ(e,t,n){var r,a,o,i,s,u,l,c,f,d,h,p,m,v;const g=BJ(),y=null!==(r=null!==(a=null===n||void 0===n?void 0:n.locale)&&void 0!==a?a:g.locale)&&void 0!==r?r:OJ,b=null!==(o=null!==(i=null!==(s=null!==(u=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==u?u:null===n||void 0===n||null===(l=n.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==s?s:g.firstWeekContainsDate)&&void 0!==i?i:null===(c=g.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==o?o:1,w=null!==(f=null!==(d=null!==(h=null!==(p=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==p?p:null===n||void 0===n||null===(m=n.locale)||void 0===m||null===(m=m.options)||void 0===m?void 0:m.weekStartsOn)&&void 0!==h?h:g.weekStartsOn)&&void 0!==d?d:null===(v=g.locale)||void 0===v||null===(v=v.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==f?f:0,x=VJ(e,null===n||void 0===n?void 0:n.in);if(!CZ(x))throw new RangeError("Invalid time value");let C=t.match(kZ).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,gZ[t])(e,y.formatLong)}return e})).join("").match(_Z).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:TZ(e)};if(fZ[t])return{isToken:!0,value:e};if(t.match(EZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(C=y.localize.preprocessor(x,C));const _={firstWeekContainsDate:b,weekStartsOn:w,locale:y};return C.map((r=>{if(!r.isToken)return r.value;const a=r.value;(null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!function(e){return bZ.test(e)}(a))&&(null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!function(e){return yZ.test(e)}(a))||function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(r),wZ.includes(e))throw new RangeError(r)}(a,t,String(e));return(0,fZ[a[0]])(x,a,y.localize,_)})).join("")}function TZ(e){const t=e.match(SZ);return t?t[1].replace(MZ,"'"):e}const IZ=()=>{let{token:e}=dn((e=>e.auth)),t=(0,o.useRef)(null),n=(0,o.useRef)(null);const[r,a]=(0,o.useState)(null);(0,o.useEffect)((()=>{e&&i("/")}),[e]);let i=qe(),s=xn(),[u,l]=(0,o.useState)({password:"",confirmPassword:"",firstName:"",email:"",gender:"",surname:""}),c=e=>{let t=e.currentTarget.name,n=e.currentTarget.value;"email"==t&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?e.target.classList.remove("is-invalid"):e.target.classList.add("is-invalid")),"confirmPassword"==t&&(u.password===n?e.target.classList.remove("is-invalid"):e.target.classList.add("is-invalid")),console.log(f(f({},u),{},{[t]:n})),l((e=>f(f({},e),{},{[t]:n})))},[d,h]=(0,o.useState)({}),p=(0,o.useCallback)((async e=>{try{ao.post("/auth/signup",u).then((e=>{if(201===e.status){Mn()("#signup-form input").val(""),Mn()(".signup-container").fadeOut("fast");let t=JSON.stringify(e.data);localStorage.setItem("user",t),s(bJ(e.data.accessToken)),window.location.reload()}else h(e.data)}))}catch(e){console.log(e)}}),[u]),m=(0,o.useCallback)((e=>{i("/portfolio")}),[]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{className:"signup-container",children:[(0,Lt.jsxs)("div",{id:"signup-form",children:[(0,Lt.jsx)("h1",{className:"text-center login-heading primary-color mb-3 fw-bold",children:"ICS - Signup"}),(0,Lt.jsxs)("div",{className:"forms-container",children:[(0,Lt.jsxs)("div",{className:"full-name",children:[(0,Lt.jsx)("input",{onChange:c,name:"firstName",className:"first-name field",type:"text",placeholder:"First Name"}),(0,Lt.jsx)("input",{name:"surname",onChange:c,className:"surname field",type:"text",placeholder:"Surame"})]}),(0,Lt.jsxs)("div",{className:"form-group",children:[(0,Lt.jsx)("input",{onChange:c,name:"email",className:"email field",type:"text",placeholder:"Email address or phone number"}),(0,Lt.jsx)("div",{className:"invalid-feedback pb-2 fw-bold",children:"Please provide a valid email."})]}),(0,Lt.jsx)("input",{onChange:c,ref:t,name:"password",type:"password",className:"password field",placeholder:"Password"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("input",{onChange:c,ref:n,name:"confirmPassword",type:"password",className:"confirm-password field",placeholder:"Confirm Password"}),(0,Lt.jsx)("div",{className:"invalid-feedback pb-2 fw-bold",children:"Please Match Password With Confirm Password."})]}),u.password.length>0&&(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)(SJ,{rules:["minLength","specialChar","number","capital"],minLength:6,value:u.password,onChange:e=>{t.current.value.length>0&&(e?t.current.classList.remove("is-invalid"):t.current.classList.add("is-invalid"))},className:"my-3"})}),(0,Lt.jsx)(EJ(),{selected:new Date,onChange:e=>{let t=NZ(e,"dd/MM/yyyy");console.log(f(f({},u),{},{DOB:t})),l(f(f({},u),{},{DOB:t}))},dateFormat:"dd/MM/yyyy",placeholderText:"Select a date",name:"DOB",className:"field w-100"}),(0,Lt.jsxs)("div",{className:"gender-container",children:[(0,Lt.jsx)("div",{className:"field-title",children:"Gender"}),(0,Lt.jsxs)("div",{className:"radio-container",children:[(0,Lt.jsx)("label",{htmlFor:"genderMale",children:"Male"}),(0,Lt.jsx)("input",{onFocus:c,type:"radio",id:"genderMale",name:"gender",value:"male"}),(0,Lt.jsx)("label",{htmlFor:"genderFemale",children:"Female"}),(0,Lt.jsx)("input",{onFocus:c,type:"radio",name:"gender",id:"genderFemale",value:"female"}),(0,Lt.jsx)("label",{htmlFor:"genderCustom",children:"Custom"}),(0,Lt.jsx)("input",{onFocus:c,type:"radio",name:"gender",id:"genderCustom",value:"custom"})]})]}),(0,Lt.jsx)("p",{style:{color:"red"},children:d.message}),(0,Lt.jsx)("input",{onClick:p,type:"submit",className:"submit-button field",value:"Sign UP"})]}),(0,Lt.jsxs)("div",{onClick:e=>i("/login"),className:"login-button",children:[(0,Lt.jsx)("i",{className:"fa fa-arrow-alt-circle-left"})," Login"]})]}),(0,Lt.jsx)("div",{className:"text-center",children:(0,Lt.jsxs)("div",{onClick:m.bind(void 0),className:"btn btn-primary mt-2 text-center",children:["View Ikram's Portfolio ",(0,Lt.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})})]})})};const jZ=e=>{let t=qe();const n=localStorage.getItem("user")||"{}",r=JSON.parse(n);(0,o.useEffect)((()=>{r.accessToken&&t("/")}),[r]);let[a,i]=(0,o.useState)({}),s=e=>{let t=e.target.name,n=e.target.value;i((e=>f(f({},e),{},{[t]:n})))},[u,l]=(0,o.useState)({}),c=(0,o.useCallback)((async e=>{try{let e=await ao.post("auth/login",a);if(202===e.status){let t=JSON.stringify(e.data);localStorage.setItem("user",t),window.location.reload()}else l({message:e.data.message})}catch(u){console.log(u)}}),[a]),d=(0,o.useCallback)((e=>{t("/portfolio")}),[]);return(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"login",children:[(0,Lt.jsxs)("div",{className:"login-container",children:[(0,Lt.jsx)("div",{className:"logo-container text-center",children:(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo_out_transparent.png",alt:"Connect Logo"})}),(0,Lt.jsxs)("div",{id:"login-form",children:[(0,Lt.jsx)("h1",{className:"text-center login-heading primary-color mb-3 fw-bold",children:"Connect - Login"}),(0,Lt.jsxs)("div",{className:"forms-container",children:[(0,Lt.jsx)("input",{onChange:s,className:"email",name:"email",type:"text",placeholder:"Email address or phone number"}),(0,Lt.jsx)("input",{onChange:s,type:"password",name:"password",className:"password",placeholder:"Password"}),(0,Lt.jsx)("p",{id:"loginErrorMsg",style:{color:"red"},children:u.message}),(0,Lt.jsx)("input",{type:"submit",onClick:c,className:"submit-button",value:"Login"}),(0,Lt.jsx)("span",{className:"forgot-password",children:"Forgotten password?"})]}),(0,Lt.jsxs)("div",{onClick:e=>t("/signup"),className:"create-account-button",children:["Create new account ",(0,Lt.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})]})]}),(0,Lt.jsx)("div",{className:"text-center",children:(0,Lt.jsxs)("div",{onClick:d.bind(void 0),className:"btn btn-primary mt-2 text-center",children:["View Ikram's Portfolio ",(0,Lt.jsx)("i",{className:"fa fa-arrow-alt-circle-right"})]})})]})})},DZ=()=>(0,Lt.jsx)("div",{className:"portfolio-menu-container",children:(0,Lt.jsxs)("ul",{className:"portfolio-menu",children:[(0,Lt.jsx)("li",{className:"portfolio-menu-item",children:(0,Lt.jsx)(Mt,{to:"/portfolio",children:"Home"})}),(0,Lt.jsx)("li",{className:"portfolio-menu-item",children:(0,Lt.jsx)(Mt,{to:"about",children:"About"})}),(0,Lt.jsx)("li",{className:"portfolio-menu-item",children:(0,Lt.jsx)(Mt,{to:"resume",children:"Resume"})}),(0,Lt.jsx)("li",{className:"portfolio-menu-item",children:(0,Lt.jsx)(Mt,{to:"blogs",children:"Blogs"})}),(0,Lt.jsx)("li",{className:"portfolio-menu-item",children:(0,Lt.jsx)(Mt,{to:"contact",children:"Contact "})})]})}),LZ=()=>(0,Lt.jsxs)("div",{className:"portfolio-page-container",children:[(0,Lt.jsxs)("div",{className:"left-sidebar",children:[(0,Lt.jsx)("h1",{className:"my-name mb-2",children:"Md Ikram"}),(0,Lt.jsx)("div",{className:"image-container my-2",children:(0,Lt.jsx)("img",{className:"avatar-image",src:"https://programmerikram.com/wp-content/uploads/2024/10/Ikramul-islam-transparent.png",alt:"Programmer Ikram"})}),(0,Lt.jsx)("hr",{className:"my-3",style:{color:"gray"}}),(0,Lt.jsx)(DZ,{})]}),(0,Lt.jsx)("div",{className:"column-9 content-container",children:(0,Lt.jsx)(ct,{})})]}),AZ=()=>(0,Lt.jsx)("div",{children:"contact"}),RZ=()=>(0,Lt.jsxs)("section",{id:"home",children:[(0,Lt.jsxs)("h1",{className:"font-bold home-title color-wh",children:["Hi, I am ",(0,Lt.jsx)("span",{className:"color-pc",children:"Md Ikram"})]}),(0,Lt.jsx)("p",{className:"color-tc home-desc",children:"I am a frontend web developer. I can provide clean code and pixel perfect design. I also make website more & more interactive with web animations."}),(0,Lt.jsx)("div",{className:"social-media-container"})]}),PZ=()=>(0,Lt.jsx)("div",{}),OZ=()=>(0,Lt.jsx)("div",{}),FZ=()=>(0,Lt.jsx)("div",{});const BZ=e=>{let[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)((null===e||void 0===e?void 0:e.profilePic)||"https://programmerikram.com/wp-content/uploads/2025/03/default-profilePic.png"),i=dn((e=>e.profile)),s=e.type,u=e.fullName,l=e.id?e.id:"",c=!!e.profileReqs&&e.profileReqs,f=c&&c.includes(i._id);(0,o.useEffect)((()=>{e.profilePic&&Nn(r,n)}),[e]),(0,o.useEffect)((()=>{t&&a(e.profilePic)}),[t]);let d=async e=>{200===(await ao.post("/friend/reqAccept",{profile:l})).status&&(Mn()(e.target).text("Request Accepted"),Mn()(e.target).parents(".friend-grid-item").hide())},h=async e=>{try{let t=e.currentTarget;await ao.post("/friend/reqDelete",{profile:l});Mn()(t).parents(".friend-grid-item ").hide()}catch(t){console.log(t)}},p=async e=>{try{let t=e.target;ao.post("/friend/sendRequest",{profile:l});Mn()(t).text("Request Sent"),Mn()(t).parents(".friend-grid-item").fadeOut()}catch(t){console.log(t)}},m=async e=>{let t=e.currentTarget;try{ao.post("/friend/removeRequest",{profile:l});Mn()(t).siblings(".add-friend").text("Add Friend"),!f&&Mn()(t).parents(".friend-grid-item").fadeOut()}catch(n){console.log(n)}};return"req"===s?(0,Lt.jsx)(o.Fragment,{children:1==t?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-item request",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("div",{className:"profile-picture",alt:"profile pic",style:{backgroundImage:"url(".concat(r,")")}})}),(0,Lt.jsxs)("div",{className:"grid-body",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("h5",{className:"profile-name",children:u})}),(0,Lt.jsx)("div",{onClick:d,className:"primary-button button",children:"Confirm"}),(0,Lt.jsx)("div",{onClick:h,className:"button",children:"Delete"})]})]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-item request",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)(tJ,{})}),(0,Lt.jsxs)("div",{className:"grid-body",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("h5",{className:"profile-name",children:u})}),(0,Lt.jsx)("div",{onClick:d,className:"primary-button button",children:"Confirm"}),(0,Lt.jsx)("div",{onClick:h,className:"button",children:"Delete"})]})]})})}):(0,Lt.jsx)(o.Fragment,{children:t?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-item suggest",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("div",{className:"profile-picture",alt:"profile pic",style:{backgroundImage:"url(".concat(r,")")}})}),(0,Lt.jsxs)("div",{className:"grid-body",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("h5",{className:"profile-name",children:u})}),(0,Lt.jsx)("div",{onClick:p,className:"primary-button add-friend button",children:f?"Request Sent":"Add Frind"}),(0,Lt.jsx)("div",{onClick:m,className:"button remove-friend",children:"Remove"})]})]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-item suggest",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)(tJ,{})}),(0,Lt.jsxs)("div",{className:"grid-body",children:[(0,Lt.jsx)(Mt,{to:"/".concat(l,"/"),children:(0,Lt.jsx)("h5",{className:"profile-name",children:u})}),(0,Lt.jsx)("div",{onClick:p,className:"primary-button add-friend button",children:f?"Request Sent":"Add Frind"}),(0,Lt.jsx)("div",{onClick:m,className:"button remove-friend",children:"Remove"})]})]})})})},zZ=e=>{let{count:t=1}=e;return Array(t).fill(0).map(((e,t)=>(0,Lt.jsx)("div",{className:"friend-grid-item",style:{minHeight:"unset"},children:(0,Lt.jsxs)("div",{className:"skeleton-card",style:{marginBottom:"0px"},children:[(0,Lt.jsx)("div",{className:"skeleton-main",style:{marginBottom:"0",height:"270px"}}),(0,Lt.jsxs)("div",{className:"skeleton-footer",style:{flexDirection:"column",marginTop:"10px"},children:[(0,Lt.jsx)("div",{style:{display:"block"},className:"skeleton-line small w-100 py-2 d-block button mb-1"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("div",{className:"skeleton-line small w-100 py-2 d-block button mb-1"})]})]})},t)))};const UZ=()=>{let[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{ao.get("/friend/getRequest/").then((e=>{t(e.data),r(e.data.length>0)})).catch((e=>{console.log(e)}))}),[]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"friends-container",children:[(0,Lt.jsxs)("div",{className:"heading",children:[(0,Lt.jsx)("h4",{className:"heading-title",children:"Friend Requests"}),(0,Lt.jsx)(Mt,{to:"/friends/requests",className:"view-more-btn",children:"See All"})]}),e.length>0?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-container",children:[e.map(((e,t)=>(0,Lt.jsx)(BZ,{id:e._id,profilePic:e.profilePic,fullName:e.user.firstName+" "+e.user.surname,type:"req"},t))),0===e.length&&(0,Lt.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friend Request to show"})]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"friend-grid-container",children:n?(0,Lt.jsx)(zZ,{count:4}):(0,Lt.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friend Request to show"})})})]})})};const WZ=()=>{let e=dn((e=>e.profile)),[t,n]=(0,o.useState)([]),[r,a]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{ao.get("/friend/getSuggetions/",{params:{profile:e._id}}).then((e=>{200===e.status&&(a(0!=e.data.length),n(e.data))})).catch((e=>{console.log(e)}))}),[e._id]),(0,o.useEffect)((()=>{}),[]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsxs)("div",{id:"friends-container",className:"mb-5",children:[(0,Lt.jsx)("div",{className:"heading",children:(0,Lt.jsx)("h4",{className:"heading-title",children:"People You May Know"})}),t.length>0?(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"friend-grid-container",children:[t.map(((t,n)=>t.user?e.friendReqs&&e.friendReqs.includes(t._id)?(0,Lt.jsx)(BZ,{profileReqs:t.friendReqs,type:"req",id:t._id,profilePic:t.profilePic,fullName:t.user.firstName+" "+t.user.surname},n):(0,Lt.jsx)(BZ,{profileReqs:t.friendReqs,type:"sug",id:t._id,profilePic:t.profilePic,fullName:t.user.firstName+" "+t.user.surname},n):(0,Lt.jsx)(Lt.Fragment,{}))),0===t.length&&(0,Lt.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friends to Suggest"})]})}):(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"friend-grid-container",children:r?(0,Lt.jsx)(zZ,{count:4}):(0,Lt.jsx)("h4",{className:"data-not-found text-center",children:"You don't have any Friends to Suggest"})})})]})})};const VZ=()=>(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsx)(UZ,{}),(0,Lt.jsx)(WZ,{})]}),HZ="GET_PROFILE_REQ",YZ="GET_PROFILE_SUCCESS",GZ="GET_PROFILE_FAILED",qZ=e=>{let t=e.profilePic,n=e.coverPic,r=f(f({},e),{},{coverPic:n,profilePic:t});return{type:YZ,payload:r}},QZ=()=>{(0,o.useEffect)((()=>{}),[]);let e=(0,o.useCallback)((async e=>{Mn()(e.currentTarget).addClass("active"),Mn()(e.currentTarget).siblings().removeClass("active")}),[]);return(0,Lt.jsx)("div",{className:"setting-page",children:(0,Lt.jsxs)("div",{className:"container py-3",children:[(0,Lt.jsx)("div",{className:"row bb",children:(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsx)("h1",{className:"primary-color mb-3 py-0",children:" Settings Page"})})}),(0,Lt.jsxs)("div",{className:"row py-3",children:[(0,Lt.jsx)("div",{className:"col-md-3 br",children:(0,Lt.jsx)("div",{className:"setting-groups-container",children:(0,Lt.jsxs)("ul",{className:"setting-groups",children:[(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item active",children:(0,Lt.jsxs)(Mt,{to:"/settings",children:[(0,Lt.jsx)("span",{children:"Profile"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"privacy",children:[(0,Lt.jsx)("span",{children:"Privacy"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"notification",children:[(0,Lt.jsx)("span",{children:"Notification"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"account",children:[(0,Lt.jsx)("span",{children:"Account"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"preference",children:[(0,Lt.jsx)("span",{children:"Preference"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"message",children:[(0,Lt.jsx)("span",{children:"Messaging"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})}),(0,Lt.jsx)("li",{onClick:e.bind(void 0),className:"setting-groups-item",children:(0,Lt.jsxs)(Mt,{to:"sound",children:[(0,Lt.jsx)("span",{children:"Sounds"}),(0,Lt.jsx)("span",{children:(0,Lt.jsx)("i",{className:"fa fa-chevron-right"})})]})})]})})}),(0,Lt.jsx)("div",{className:"col-md-6",children:(0,Lt.jsx)(ct,{})})]})]})})},XZ=()=>{let e=dn((e=>e.profile)),t=(dn((e=>e.setting)),xn()),[n,r]=(0,o.useState)({firstName:"",surname:"",nickname:"",username:"",workPlaces:[{}],schools:[{}],displayName:""});(0,o.useEffect)((()=>{null!==e&&void 0!==e&&e.user&&r({firstName:e.user.firstName||"",surname:e.user.surname||"",nickname:e.nickname||"",username:e.username||"",displayName:e.displayName||""})}),[e]);let a=(0,o.useCallback)((async e=>{r(f(f({},n),{},{[e.target.name]:e.target.value}))}),[n]),i=(0,o.useCallback)((async r=>{r.preventDefault();let a=await ao.post("/profile/update",n);200===a.status&&(t(qZ(a.data)),W((0,Lt.jsx)(Mt,{className:"text-decoration-none text-secondary",to:"",children:(0,Lt.jsx)("div",{style:{color:"blue",fontWeight:"bold"},children:(0,Lt.jsxs)("div",{className:"row d-flex align-items-center",children:[(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("img",{className:"rounded-circle w-100",src:e.profilePic,alt:"Connect"})}),(0,Lt.jsxs)("div",{className:"col-9",children:[e.fullName&&(0,Lt.jsx)("h3",{className:"text-success fs-4 mb-0",children:e.fullName}),(0,Lt.jsx)("p",{className:"text-small text-secondary fs-6 text-muted mb-0",children:"Your Profile Updated Successfully"})]})]})})})))}),[n]);const[s,u]=(0,o.useState)([{}]),[l,c]=(0,o.useState)([{}]);(0,o.useEffect)((()=>{u((null===e||void 0===e?void 0:e.workPlaces)||[{}]),c((null===e||void 0===e?void 0:e.schools)||[{}])}),[e]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"profile-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Profile Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"firstName",children:"First Name"}),(0,Lt.jsx)("input",{type:"text",onChange:a.bind(void 0),className:"form-control",id:"firstName",value:n.firstName,name:"firstName",placeholder:"Enter Frist Name"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"surname",children:"Surname"}),(0,Lt.jsx)("input",{type:"text",onChange:a.bind(void 0),className:"form-control",value:n.surname,id:"surname",name:"surname",placeholder:"Enter Last Name"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"username",children:"Userame"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text",children:"@"})}),(0,Lt.jsx)("input",{type:"text",className:"form-control",value:n.username,name:"username",onChange:a.bind(void 0),id:"username","aria-describedby":"emailHelp",placeholder:"Enter Username"})]})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"nickname",children:"Nickname"}),(0,Lt.jsx)("input",{type:"text",onChange:a.bind(void 0),value:n.nickname,className:"form-control",id:"nickname",name:"nickname",placeholder:"Enter Nickname"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"displayName",children:"Display Name"}),(0,Lt.jsx)("input",{type:"text",onChange:a.bind(void 0),value:n.displayName,className:"form-control",id:"displayName",name:"displayName",placeholder:"Enter Display Name"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"presentAddress",children:"Present Address"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text py-3",children:(0,Lt.jsx)("i",{className:"fas fa-home"})})}),(0,Lt.jsx)("input",{type:"text",value:e.presentAddress,onChange:a.bind(void 0),className:"form-control",id:"presentAddress",name:"presentAddress",placeholder:"Enter Present Address"})]})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"permanentAddress",children:"Permanent Address"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsxs)("span",{className:"input-group-text py-3",children:[" ",(0,Lt.jsx)("i",{className:"fa fa-globe"})]})}),(0,Lt.jsx)("input",{value:e.permanentAddress,type:"text",onChange:a.bind(void 0),className:"form-control",id:"permanentAddress",name:"permanentAddress",placeholder:"Enter Permanent Address"})]})]}),(0,Lt.jsx)("hr",{}),(0,Lt.jsxs)("div",{className:"multiple-input-container schools-container my-3 p-3",children:[(0,Lt.jsx)("h4",{className:"text-center",children:"Your Schools"}),l.map(((e,t)=>(0,Lt.jsxs)("div",{className:"row border border-secondary border-round my-2",children:[(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{className:"form-label",children:"Degree"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text py-3",children:(0,Lt.jsx)("i",{className:"fas fa-graduation-cap"})})}),(0,Lt.jsx)("input",{type:"text",value:e.degree,onChange:e=>((e,t)=>{let a=[...l],o=t.currentTarget.dataset.index;a[o]={degree:t.target.value,name:l[o].name},c(a);let i=f(f({},n),{},{schools:a.filter(((e,t)=>""!==e.name||""!==e.degree))});r(i)})(0,e),placeholder:"Your Degree",className:"form-control",name:"degree","data-index":t})]})]},t)}),(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{className:"form-label",children:"SChool Name"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text py-3",children:(0,Lt.jsx)("i",{className:"fas fa-graduation-cap"})})}),(0,Lt.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,t)=>{let a=[...l],o=t.currentTarget.dataset.index;a[o]={degree:l[o].degree,name:t.target.value},c(a);let i=f(f({},n),{},{schools:a.filter(((e,t)=>""!==e.name||""!==e.degree))});r(i)})(0,e),placeholder:"School Name",className:"form-control",name:"name","data-index":t})]})]},t)})]}))),(0,Lt.jsx)("button",{className:"btn btn-secondary",onClick:(e=>{e.preventDefault(),c([...l,{name:"",degree:""}])}).bind(void 0),children:"".concat(l.length>0?"Add Another School":"Add School")})]}),(0,Lt.jsx)("hr",{}),(0,Lt.jsxs)("div",{className:"multiple-input-container workplaces-container my-3 p-3",children:[(0,Lt.jsx)("h4",{className:"text-center",children:"Your Workplaces"}),s.map(((e,t)=>(0,Lt.jsxs)("div",{className:"row border border-secondary border-round my-2",children:[(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{className:"form-label",children:"Designation"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text py-3",children:(0,Lt.jsx)("i",{className:"fas fa-briefcase"})})}),(0,Lt.jsx)("input",{type:"text",value:e.designation,onChange:e=>((e,t)=>{const a=[...s];let o=t.currentTarget.dataset.index;a[o]={designation:t.target.value,name:s[o].name},u(a);let i=f(f({},n),{},{workPlaces:a.filter(((e,t)=>""!==e.name||""!==e.designation))});r(i)})(0,e),placeholder:"Your Designation",className:"form-control",name:"designation","data-index":t})]})]},t)}),(0,Lt.jsx)("div",{className:"col",children:(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{className:"form-label",children:"Company Name"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("div",{className:"input-group-prepend",children:(0,Lt.jsx)("span",{className:"input-group-text py-3",children:(0,Lt.jsx)("i",{className:"fas fa-briefcase"})})}),(0,Lt.jsx)("input",{type:"text",value:e.name,onChange:e=>((e,t)=>{const a=[...s];let o=t.currentTarget.dataset.index;a[o]={name:t.target.value,designation:s[o].designation},u(a);let i=f(f({},n),{},{workPlaces:a.filter(((e,t)=>""!==e.name||""!==e.designation))});r(i)})(0,e),placeholder:"Workplace Name",className:"form-control",name:"name","data-index":t})]})]},t)})]}))),(0,Lt.jsx)("button",{className:"btn btn-secondary",onClick:(e=>{e.preventDefault(),u([...s,{name:"",designation:""}])}).bind(void 0),children:"".concat(s.length>0?"Add Another Workplace":"Add Workplace")})]}),(0,Lt.jsx)("button",{type:"submit",onClick:i.bind(void 0),className:"btn btn-primary",children:"Save Settings"})]})]})})})},KZ=()=>{let e=dn((e=>e.profile)),[t,n]=(0,o.useState)({userEmail:(null===e||void 0===e?void 0:e.user)&&e.user.email}),[r,a]=(0,o.useState)(!1),i=(0,o.useCallback)((async e=>{let r=e.target.id,a=e.target.value;n(f(f({},t),{},{[r]:a}))}),[]),s=(0,o.useCallback)((async n=>{if(n.preventDefault(),t.userEmail!=(null===e||void 0===e?void 0:e.user.email)){let e=await ao.post("auth/changeEmail",{email:t.userEmail});if(200==e.status){let t=JSON.stringify(e.data);return localStorage.setItem("user",t),window.location.reload()}}if(t.confirmPassword&&t.confirmPassword.length<2)return;if(t.newPassword!==t.confirmPassword)return alert("Your New password and Confirm Password is not same");let r=await ao.post("auth/changePass",t);if(400==r.status)return alert("Your Current password is invalid");if(200==r.status){let e=JSON.stringify(r.data);localStorage.setItem("user",e),window.location.reload()}}),[t]),u=(0,o.useCallback)((async e=>{e.preventDefault();let t=JSON.parse(localStorage.getItem("user")),n=await ao.post("auth/delete",{userData:t});200==n.status&&(localStorage.removeItem("user"),alert(n.data.message),window.location.reload())}),[e]),l=(0,o.useCallback)((e=>{e.preventDefault(),a(!r)}),[r]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"profile-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Account Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsx)("h3",{className:"fs-4",children:"Change Password"}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"userEmail",children:"Email"}),(0,Lt.jsxs)("div",{className:"input-group",children:[(0,Lt.jsx)("input",{onChange:i.bind(void 0),type:"email",className:"form-control",id:"userEmail",disabled:!r&&!0,value:r?t.userEmail:(null===e||void 0===e?void 0:e.user)&&(null===e||void 0===e?void 0:e.user.email),placeholder:"Email"}),(0,Lt.jsx)("div",{className:"input-group-append",children:(0,Lt.jsx)("button",{onClick:l.bind(void 0),className:"btn btn-danger",children:(0,Lt.jsx)("i",{className:"fas fa-pen"})})})]})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"currentPassword",children:"Current Password"}),(0,Lt.jsx)("input",{onChange:i.bind(void 0),type:"password",className:"form-control",id:"currentPassword",placeholder:"Current Password"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"newPassword",children:"New Password"}),(0,Lt.jsx)("input",{onChange:i.bind(void 0),type:"password",className:"form-control",id:"newPassword",placeholder:"New Password"})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"confirmPassword",children:"Confirm Password"}),(0,Lt.jsx)("input",{onChange:i.bind(void 0),type:"password",className:"form-control",id:"confirmPassword",placeholder:"Confirm Password"})]}),(0,Lt.jsx)("button",{type:"submit",onClick:s.bind(void 0),className:"btn btn-primary",children:"Save Settings"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("button",{onClick:u.bind(void 0),className:"btn btn-danger mt-3",children:"Delete My Account"})]})]})})})},JZ=()=>(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"profile-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Privacy Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"username",children:"Who Can See you Posts?"}),(0,Lt.jsxs)("select",{className:"form-control",children:[(0,Lt.jsx)("option",{value:"om",children:"Only Me"}),(0,Lt.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Lt.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"username",children:"Who Can Sent you Friend Request?"}),(0,Lt.jsxs)("select",{className:"form-control",children:[(0,Lt.jsx)("option",{value:"om",children:"Only Me"}),(0,Lt.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Lt.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"username",children:"Who Can Post on your Timeline?"}),(0,Lt.jsxs)("select",{className:"form-control",children:[(0,Lt.jsx)("option",{value:"om",children:"Only Me"}),(0,Lt.jsx)("option",{value:"fof",children:"Friend of Friends"}),(0,Lt.jsx)("option",{value:"public",children:"Public"})]})]}),(0,Lt.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})}),ZZ=()=>(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"message-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Notification Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewReceived"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"friendRewReceived",children:"Friends Request Received"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"friendRewReceived",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Received"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewAccepted"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"friendRewAccepted",children:"Friends Request Accpeted"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"ifriendRewAcceptedHelp",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Accpeted"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newMessageReceived"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newMessageReceived",children:"New Message Received"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Message Received"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendPost"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendPost",children:"New Frieds's Post"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Post"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendStory"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendStory",children:"New Frieds's Story"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Story"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendWatch"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendWatch",children:"New Frieds's Watch"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"newFriendWatchHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Watch"})]}),(0,Lt.jsx)("hr",{}),(0,Lt.jsx)("h4",{className:"text-center",children:"Email Notifications"}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewReceivedEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"friendRewReceivedEmail",children:"Friends Request Received"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"friendRewReceivedEmail",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Received"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"friendRewAcceptedEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"friendRewAcceptedEmail",children:"Friends Request Accpeted"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"ifriendRewAcceptedEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each new Friends Request Accpeted"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newMessageReceivedEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newMessageReceivedEmail",children:"New Message Received"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"isNotificationEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each Message Received"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendPostEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendPostEmail",children:"New Frieds's Post"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"newFriendPostEmailHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Post"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendStoryEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendStoryEmail",children:"New Frieds's Story"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"isNotificationHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Story"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{type:"checkbox",className:"form-check-input",id:"newFriendWatchEmail"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"newFriendWatchEmail",children:"New Frieds's Watch"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"newFriendWatchHelp",className:"form-text text-muted",children:"We Will sent you notification for each Frieds's new Watch"})]}),(0,Lt.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})}),$Z=()=>{let e=xn(),t=dn((e=>e.setting)),n=(0,o.useCallback)((async t=>{let n=t.currentTarget.checked,r=await ao.post("setting/update",{isShareEmotion:n});200==r.status&&e(cO(r.data))}),[t]),r=(0,o.useCallback)((async t=>{let n=t.currentTarget.checked,r=await ao.post("setting/update",{showIsTyping:n});200==r.status&&e(cO(r.data))}),[t]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"message-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Message Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{checked:!0===t.showIsTyping,type:"checkbox",onChange:r.bind(void 0),className:"form-check-input",id:"showTyping"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"showTyping",children:"Show Typing"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"showTypingChangeText",className:"form-text text-muted",children:"It will show your typing message to your friends inbox before sending"})]}),(0,Lt.jsxs)("div",{className:"form-check form-switch my-3",children:[(0,Lt.jsx)("input",{checked:!0===t.isShareEmotion,type:"checkbox",onChange:n.bind(void 0),className:"form-check-input",id:"shareEmotionCheck"}),(0,Lt.jsx)("label",{className:"form-check-label",for:"shareEmotionCheck",children:"Share Face Mode"}),(0,Lt.jsx)("br",{}),(0,Lt.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll access your camera to recognize your mode by scanning your face"})]}),(0,Lt.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})},e$=()=>{let e=dn((e=>e.setting)),t=xn(),[n,r]=(0,o.useState)({themeMode:e.themeMode||"dark"}),a=(0,o.useCallback)((async e=>{let t=e.target.name,n=e.target.value;r((e=>f(f({},e),{},{[t]:n})))}),[n]),i=(0,o.useCallback)((async e=>{e.preventDefault();let r=await ao.post("setting/update",f({},n));200==r.status&&t(cO(r.data))}),[]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"profile-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Preference Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"themeMode",children:"Theme Mode"}),(0,Lt.jsxs)("select",{value:n.themeMode||"dark",onChange:a.bind(void 0),className:"form-control",name:"themeMode",id:"themeMode",children:[(0,Lt.jsx)("option",{value:"default",children:"Default"}),(0,Lt.jsx)("option",{value:"dark",children:"Dark"}),(0,Lt.jsx)("option",{value:"light",children:"Light"})]})]}),(0,Lt.jsx)("button",{onClick:i.bind(void 0),type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})},t$=()=>{let e=dn((e=>e.setting)),t=xn(),[n,r]=(0,o.useState)({ringtone:e.ringtone});(0,o.useEffect)((()=>{e.ringtone>0&&r({ringtone:e.ringtone||1})}),[e]);let a=(0,o.useCallback)((async e=>{let t=e.target.name,n=e.target.value;r((e=>f(f({},e),{},{[t]:n})))}),[n]),i=(0,o.useCallback)((async e=>{e.preventDefault();let r=await ao.post("setting/update",f({},n));200==r.status&&t(cO(r.data))}),[n,e]);return(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsx)("div",{className:"profile-setting",children:(0,Lt.jsxs)("div",{className:"setting-field-container",children:[(0,Lt.jsx)("h3",{className:"text-center",children:"Sound Settings"}),(0,Lt.jsxs)("form",{children:[(0,Lt.jsxs)("div",{className:"form-group mb-2",children:[(0,Lt.jsx)("label",{for:"ringTone",children:"Calling Ringtones"}),(0,Lt.jsx)("select",{value:n.ringtone,onChange:a.bind(void 0),className:"form-control",name:"ringtone",id:"ringTone",children:uJ.map(((e,t)=>(0,Lt.jsx)("option",{value:"".concat(e.id),children:e.name},t)))})]}),(0,Lt.jsx)("button",{onClick:i.bind(void 0),type:"submit",className:"btn btn-primary",children:"Save Settings"})]})]})})})},n$=Fi("http://localhost:5000"),r$=()=>{const[e,t]=(0,o.useState)(null),[n,r]=(0,o.useState)(null),[a,i]=(0,o.useState)(""),[s,u]=(0,o.useState)(""),[l,c]=(0,o.useState)([]),[f,d]=(0,o.useState)(!0),[h,p]=(0,o.useState)(!0),[m,v]=(0,o.useState)(!0);console.log("vc");const g=(0,o.useRef)(),y=(0,o.useRef)();(0,o.useEffect)((()=>(n$.on("connect",(()=>{i(n$.id)})),navigator.mediaDevices.enumerateDevices().then((e=>{const t=e.filter((e=>"videoinput"===e.kind));c(t),v(t.length>0),b(t.length>0)})),n$.on("receive-call",(t=>{let{signal:n,from:a}=t;const o=new(oO())({initiator:!1,trickle:!1,stream:e});o.on("signal",(e=>{n$.emit("answer-call",{signal:e,to:a})})),o.on("stream",(e=>{y.current.srcObject=e})),o.signal(n),r(o)})),n$.on("call-answered",(e=>{let{signal:t}=e;null===n||void 0===n||n.signal(t)})),()=>n$.disconnect())),[e]);const b=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{const n=await navigator.mediaDevices.getUserMedia({video:e,audio:!0});t(n),g.current&&(g.current.srcObject=n)}catch(O$){console.error("Failed to get media stream:",O$)}};return(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("h3",{children:["My ID: ",a]}),(0,Lt.jsx)("input",{type:"text",placeholder:"Enter ID to call",value:s,onChange:e=>u(e.target.value)}),(0,Lt.jsx)("button",{onClick:()=>{const t=new(oO())({initiator:!0,trickle:!1,stream:e});t.on("signal",(e=>{n$.emit("call-user",{signal:e,to:s})})),t.on("stream",(e=>{y.current.srcObject=e})),r(t)},children:"Call"}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("video",{ref:g,autoPlay:!0,muted:!0,playsInline:!0,style:{width:300}}),(0,Lt.jsx)("video",{ref:y,autoPlay:!0,playsInline:!0,style:{width:300}})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("button",{onClick:()=>{const t=null===e||void 0===e?void 0:e.getAudioTracks()[0];t&&(t.enabled=!t.enabled,p(t.enabled))},children:h?"Mute Mic":"Unmute Mic"}),m&&(0,Lt.jsx)("button",{onClick:()=>{const t=null===e||void 0===e?void 0:e.getVideoTracks()[0];t&&(t.enabled=!t.enabled,d(t.enabled))},children:f?"Turn Off Camera":"Turn On Camera"}),!m&&(0,Lt.jsx)("p",{children:"Camera not available. Audio-only mode enabled."})]})]})},a$=()=>(0,Lt.jsx)("div",{children:(0,Lt.jsx)("iframe",{style:{minHeight:"90vh",minWidth:"100vw"},src:"https://youtube.com"})}),o$=()=>{let{videoId:e}=Xe(),[t,n]=(0,o.useState)({}),[r,a]=(0,o.useState)(""),i=qe();(0,o.useEffect)((()=>{e&&((e,t)=>{ru((n=>{if(!n)return;const r=n.transaction("videos","readonly").objectStore("videos").get(e);r.onsuccess=()=>{const n=r.result;if(n){const e=URL.createObjectURL(n.blob);t(e,n.metadata)}else console.warn("No video found with ID:",e)}}))})(e,((e,t)=>{n(t),a(e)}))}),[e]);return(0,Lt.jsx)("div",{className:"single-saved-video-page",children:(0,Lt.jsx)("div",{className:"container py-3",children:(0,Lt.jsx)("div",{className:"row",children:(0,Lt.jsx)("div",{className:"col-md-6 offset-md-3",children:(0,Lt.jsxs)("div",{className:"saved-video-card card bg-dark text-white",children:[r&&(0,Lt.jsx)("video",{className:"card-img-top",controls:!0,src:r,style:{width:"100%"}}),(0,Lt.jsxs)("div",{className:"card-body",children:[(0,Lt.jsx)("h5",{className:"card-title fs-4 text-capitalize",children:t.caption}),(0,Lt.jsx)("button",{onClick:()=>{ou(e),i("/downloads")},className:"btn btn-danger",children:"Delete"})]})]})})})})})},i$=e=>{let{videoData:t,videoUrl:n}=e,r=qe();if(t)return(0,Lt.jsx)("div",{className:"col-md-4",children:(0,Lt.jsxs)("div",{className:"saved-video-card card bg-dark text-white",onClick:()=>{t&&r("/downloads/".concat(t._id))},children:[(0,Lt.jsx)("video",{className:"card-img-top",src:n,style:{width:"100%"}}),(0,Lt.jsxs)("div",{className:"card-body",children:[(0,Lt.jsx)("h5",{className:"card-title fs-4 text-capitalize mt-0",children:t.caption}),(0,Lt.jsx)(Mt,{className:"btn btn-primary d-inline-block",style:{marginRight:"5px"},to:"/downloads/".concat(t._id),children:"View"}),(0,Lt.jsx)("button",{className:"btn btn-danger",onClick:e=>{t&&(ou(t._id),window.location.reload())},children:"Delete"})]})]})})},s$=()=>{let[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{var e;e=e=>{console.log(e),t(e)},ru((t=>{if(!t)return e([]);const n=t.transaction("videos","readonly").objectStore("videos").getAll();n.onsuccess=()=>{const t=n.result.map((e=>({id:e.id,metadata:e.metadata,videoURL:URL.createObjectURL(e.blob)})));e(t)},n.onerror=()=>{console.error("Failed to fetch videos from IndexedDB"),e([])}}))}),[]),(0,Lt.jsx)(Lt.Fragment,{children:(0,Lt.jsxs)("div",{className:"download-page container",children:[(0,Lt.jsx)("h1",{children:"Saved Videos"}),(0,Lt.jsx)("div",{className:"saved-videos-container",children:(0,Lt.jsx)("div",{className:"row",children:e&&e.map(((e,t)=>(0,Lt.jsx)(i$,{videoData:e.metadata,videoUrl:e.videoURL},t)))})})]})})};n(246);function u$(e,t){new Notification("New Message!",{body:e.message,icon:"https://programmerikram.com/wp-content/uploads/2025/03/ics_logo.png"}).onclick=()=>{window.open("".concat("https://programmerikram.com/ics/","/message/").concat(t))}}const l$=()=>{const e=xn();let{token:t}=dn((e=>e.auth));const n=dn((e=>e.option.isLoading)),r=Xe(),a=(0,o.useRef)(null),[i,s]=(0,o.useState)(!document.hidden),u=JSON.parse(localStorage.getItem("user")||"{}"),l=u.profile;(0,o.useEffect)((()=>{t&&ao.get("setting",{params:{profileId:l}}).then((t=>{200==t.status&&e(cO(t.data))}))}),[t]);const c=(e,t,n,r)=>{null===a||void 0===a||a.current.play(),W((0,Lt.jsx)(Mt,{className:"text-decoration-none text-secondary",to:"".concat(r),children:(0,Lt.jsx)("div",{style:{color:"blue",fontWeight:"bold"},children:(0,Lt.jsxs)("div",{className:"row d-flex align-items-center",children:[(0,Lt.jsx)("div",{className:"col-3",children:(0,Lt.jsx)("img",{className:"rounded-circle w-100",src:n,alt:"connect"})}),(0,Lt.jsxs)("div",{className:"col-9",children:[t&&(0,Lt.jsx)("h3",{className:"text-success mb-0",children:t}),(0,Lt.jsx)("p",{className:"text-small text-secondary text-muted mb-0",children:e})]})]})})}))};return(0,o.useEffect)((()=>(Ui.emit("fetchNotifications",l),Ui.on("oldNotifications",(t=>{e(Xi(t.reverse(),!0))})),Ui.on("newNotification",(t=>{e({type:Yi,payload:t}),c(t.text,!1,t.icon,t.link)})),Ui.emit("fetchMessages",l),Ui.on("oldMessages",(t=>{e(function(e){return{type:yu,payload:e,reset:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}(t.reverse(),!0))})),Ui.on("newMessage",(t=>{let{updatedMessage:n,senderName:r,senderPP:a}=t;e(Cu(n)),c(n.message,r,a,"/message/"+n.senderId)})),Ui.on("bumpUser",((e,t)=>{c("".concat(t.fullName," Bumped you"),e.fullName,t.profilePic,"/message/"+t._id)})),()=>{Ui.off("oldNotifications"),Ui.off("newNotification"),Ui.off("oldMessages"),Ui.off("newMessage"),Ui.off("bumpUser")})),[Ui]),(0,o.useEffect)((()=>{const e=()=>{s(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[]),(0,o.useEffect)((()=>(Ui.on("notification",((t,n,r)=>{1==i?(c(t.message,n,r,"/message/"+t.senderId),e(Cu(t))):Notification&&"granted"===Notification.permission?u$(t):"denied"!==Notification.permission&&Notification.requestPermission().then((e=>{"granted"===e&&u$(t)}))})),Ui.on("speak_message",(e=>{(e=>{if(!e)return;const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=1,t.pitch=1,window.speechSynthesis.speak(t)})(e)})),()=>{Ui.off("notification"),Ui.off("speak_message")})),[Ui,i]),(0,o.useEffect)((()=>{var n;e((n=window.innerHeight,{type:$i,payload:n})),e(ts(!1)),t&&(ao.post("/profile",{profile:l}).then((t=>{e({type:HZ}),200===t.status&&e(qZ(t.data))})).catch((t=>{e({type:GZ,payload:t})})),"/"==window.location.pathname||e(ts(!1)))}),[r,t,e]),(0,o.useEffect)((()=>{if(i)return u.user_id&&Ui.emit("update_last_login",u.user_id),setInterval((()=>{u.user_id&&Ui.emit("update_last_login",u.user_id)}),18e4),()=>{Ui.off("update_last_login")}}),[i]),(0,Lt.jsxs)(o.Fragment,{children:[(0,Lt.jsx)("audio",{ref:a,src:"https://programmerikram.com/wp-content/uploads/2025/05/connect-message-sound.wav"}),(0,Lt.jsxs)(_t,{children:[n&&(0,Lt.jsx)("div",{id:"site-loader",children:(0,Lt.jsx)("div",{className:"loader-logo-container",children:(0,Lt.jsx)("img",{src:"https://programmerikram.com/wp-content/uploads/2025/05/ics_logo_out_transparent.png",alt:"connect"})})}),(0,Lt.jsx)(ns,{}),(0,Lt.jsx)("div",{id:"main-container",className:n?"loading":"",children:(0,Lt.jsx)(ht,{children:(0,Lt.jsxs)(ft,{path:"/",children:[(0,Lt.jsx)(ft,{path:"video-call",element:(0,Lt.jsx)(r$,{})}),(0,Lt.jsx)(ft,{path:"youtube",element:(0,Lt.jsx)(a$,{})}),(0,Lt.jsx)(ft,{path:"downloads",element:(0,Lt.jsx)(s$,{})}),(0,Lt.jsx)(ft,{path:"downloads/:videoId",element:(0,Lt.jsx)(o$,{})}),(0,Lt.jsx)(ft,{path:"login",element:(0,Lt.jsx)(jZ,{})}),(0,Lt.jsx)(ft,{path:"signup",element:(0,Lt.jsx)(IZ,{})}),(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(Es,{})})}),(0,Lt.jsxs)(ft,{path:"/portfolio/",element:(0,Lt.jsx)(LZ,{}),children:[(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(RZ,{})}),(0,Lt.jsx)(ft,{path:"about",element:(0,Lt.jsx)(PZ,{})}),(0,Lt.jsx)(ft,{path:"resume",element:(0,Lt.jsx)(FZ,{})}),(0,Lt.jsx)(ft,{path:"blogs",element:(0,Lt.jsx)(OZ,{})}),(0,Lt.jsx)(ft,{path:"contact",element:(0,Lt.jsx)(AZ,{})})]}),(0,Lt.jsxs)(ft,{path:"/:profile/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(Ks,{})}),children:[(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(eJ,{})}),(0,Lt.jsx)(ft,{path:"about",element:(0,Lt.jsx)($K,{})}),(0,Lt.jsx)(ft,{path:"friends",element:(0,Lt.jsx)(aJ,{})}),(0,Lt.jsx)(ft,{path:"images",element:(0,Lt.jsx)(iJ,{})}),(0,Lt.jsx)(ft,{path:"videos",element:(0,Lt.jsx)(sJ,{})})]}),(0,Lt.jsx)(ft,{path:"/story/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(VK,{})}),children:" "}),(0,Lt.jsxs)(ft,{path:"/story/:storyId",children:[(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(WK,{})})}),(0,Lt.jsx)(ft,{path:"comments/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(qK,{})})}),(0,Lt.jsx)(ft,{path:"reacts/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(GK,{})})})]}),(0,Lt.jsxs)(ft,{path:"/post/",children:[(0,Lt.jsx)(ft,{path:":postId",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(mJ,{})})}),(0,Lt.jsx)(ft,{path:":postId/edit",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(mJ,{})})}),(0,Lt.jsx)(ft,{path:":postId/comments",element:(0,Lt.jsx)(vJ,{})}),(0,Lt.jsx)(ft,{path:":postId/reacts",element:(0,Lt.jsx)(gJ,{})})]}),(0,Lt.jsxs)(ft,{path:"/friends/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(Js,{})}),children:[(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(VZ,{})}),(0,Lt.jsx)(ft,{path:"requests",element:(0,Lt.jsx)(UZ,{})}),(0,Lt.jsx)(ft,{path:"suggestions",element:(0,Lt.jsx)(WZ,{})})]}),(0,Lt.jsx)(ft,{path:"/watch",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(cu,{})}),children:" "}),(0,Lt.jsx)(ft,{path:"/watch/:watchId",children:(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(JK,{})})})}),(0,Lt.jsx)(ft,{path:"/message",element:(0,Lt.jsx)(BK,{}),children:(0,Lt.jsx)(ft,{path:":profile/",element:(0,Lt.jsx)(Ks,{})})}),(0,Lt.jsx)(ft,{path:"/marketplace",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(fu,{})}),children:" "}),(0,Lt.jsx)(ft,{path:"/groups",element:(0,Lt.jsx)(du,{}),children:" "}),(0,Lt.jsx)(ft,{path:"/yt-download",element:(0,Lt.jsx)(hu,{}),children:" "}),(0,Lt.jsx)(ft,{path:"/settings",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(QZ,{})})}),(0,Lt.jsxs)(ft,{path:"/settings/",element:(0,Lt.jsx)(fs,{children:(0,Lt.jsx)(QZ,{})}),children:[(0,Lt.jsx)(ft,{index:!0,element:(0,Lt.jsx)(XZ,{})}),(0,Lt.jsx)(ft,{path:"account",element:(0,Lt.jsx)(KZ,{})}),(0,Lt.jsx)(ft,{path:"privacy",element:(0,Lt.jsx)(JZ,{})}),(0,Lt.jsx)(ft,{path:"notification",element:(0,Lt.jsx)(ZZ,{})}),(0,Lt.jsx)(ft,{path:"message",element:(0,Lt.jsx)($Z,{})}),(0,Lt.jsx)(ft,{path:"preference",element:(0,Lt.jsx)(e$,{})}),(0,Lt.jsx)(ft,{path:"sound",element:(0,Lt.jsx)(t$,{})})]})]})})}),(0,Lt.jsx)(lJ,{myId:l}),(0,Lt.jsx)($,{})]})]})};var c$=n(2285),f$=n.n(c$);window.process=f$();const d$=function(){const e=xn(),t=localStorage.getItem("user")||"{}",n=JSON.parse(t),{isExpired:r}=us(n.accessToken||null);return(0,o.useEffect)((()=>{n.accessToken&&e(bJ(n.accessToken)),r&&e(bJ(void 0))}),[e,r]),(0,Lt.jsx)(o.Fragment,{children:(0,Lt.jsx)(l$,{})})},h$=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:a,getLCP:o,getTTFB:i}=t;n(e),r(e),a(e),o(e),i(e)}))};function p$(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var m$="function"===typeof Symbol&&Symbol.observable||"@@observable",v$=function(){return Math.random().toString(36).substring(7).split("").join(".")},g$={INIT:"@@redux/INIT"+v$(),REPLACE:"@@redux/REPLACE"+v$(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+v$()}};function y$(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function b$(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(p$(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(p$(1));return n(b$)(e,t)}if("function"!==typeof e)throw new Error(p$(2));var a=e,o=t,i=[],s=i,u=!1;function l(){s===i&&(s=i.slice())}function c(){if(u)throw new Error(p$(3));return o}function f(e){if("function"!==typeof e)throw new Error(p$(4));if(u)throw new Error(p$(5));var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error(p$(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),i=null}}}function d(e){if(!y$(e))throw new Error(p$(7));if("undefined"===typeof e.type)throw new Error(p$(8));if(u)throw new Error(p$(9));try{u=!0,o=a(o,e)}finally{u=!1}for(var t=i=s,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:g$.INIT}),(r={dispatch:d,subscribe:f,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(p$(10));a=e,d({type:g$.REPLACE})}})[m$]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(p$(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[m$]=function(){return this},e},r}function w$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function x$(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(a){return"function"===typeof a?a(n,r,e):t(a)}}}}var C$=x$();C$.withExtraArgument=x$;const _$=C$,k$={isLoggedIn:{},profile:{},error:null},S$={user:{},token:null};let M$=[];let E$={headerHeight:null,bodyHeight:null,isLoading:!0};let N$=[];const T$=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N$,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_MESSAGE":let r=n.payload;return t.filter((e=>e._id===n.payload._id)).length>0?t:[r,...t];case yu:let a=n.payload;return n.reset||!1?[...a]:[...t,...a];case bu:let o=n.payload,i=o.senderId,s=t.filter((e=>e.person._id!==i)),u=t.filter((e=>e.person._id===i));return u[0].messages=[o],[...u,...s];case xu:let l=n.payload.contactId,c=t.filter((e=>{var t;return(null===e||void 0===e||null===(t=e.person)||void 0===t?void 0:t._id)!==l})),f=t.filter((e=>e.person._id===l));return f.length>0&&(null===(e=f[0])||void 0===e?void 0:e.messages.length)>0&&(console.log("s c",f[0].messages[0]),f[0].messages[0].isSeen=!0),[...f,...c];case wu:let d=n.payload,h=d.receiverId,p=t.filter((e=>e.person._id!==h)),m=t.filter((e=>e.person._id===h));return m[0].messages=[d],[...m,...p];default:return t}};let I$={isShareEmotion:!1,notification:!0,showTyping:!0};const j$=[],D$=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var a=t[r];0,"function"===typeof e[a]&&(n[a]=e[a])}var o,i=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:g$.INIT}))throw new Error(p$(12));if("undefined"===typeof n(void 0,{type:g$.PROBE_UNKNOWN_ACTION()}))throw new Error(p$(13))}))}(n)}catch(Du){o=Du}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},s=0;s<i.length;s++){var u=i[s],l=n[u],c=e[u],f=l(c,t);if("undefined"===typeof f){t&&t.type;throw new Error(p$(14))}a[u]=f,r=r||f!==c}return(r=r||i.length!==Object.keys(e).length)?a:e}}({profile:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case HZ:return f(f({},e),{},{isLoading:!0});case YZ:return f(f({},e),{},{isLoading:!1},t.payload);case GZ:return f(f({},e),{},{isLoading:!1,error:t.payload});default:return e}},auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yJ:return f(f({},e),{},{token:t.payload});case"LOGOUT":return{token:void 0};case"GET_USER":return f(f({},e),{},{user:t.payload.token});default:return e}},option:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zi:return f(f({},e),{},{headerHeight:t.payload});case es:return f(f({},e),{},{isLoading:t.payload});case $i:return f(f({},e),{},{bodyHeight:t.payload});default:return e}},notification:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NOTIFICATIONS":return[...e];case Yi:let n=t.payload;return e.filter((e=>e._id===t.payload._id)).length>0?e:[n,...e];case Gi:let r=t.payload;return t.reset||!1?[...r]:[...e,...r];case qi:let a=t.payload,o=e.filter((e=>e._id!==a)),i=e.filter((e=>e._id===a));return i.length>0&&(i[0].isSeen=!0),[...o,i[0]];case Qi:let s=[];return e.map(((e,t)=>{s.push(f(f({},e),{},{isSeen:!0}))})),s;case"DELETE_NOTIFICATIONS":return[];default:return e}},message:T$,setting:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MODE_SHARE":return{isShareEmotion:t.payload};case"SET_NOTIFICATION":case"UPDATE_OPTION":break;case lO:return t.payload;default:return e}},post:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oo:return[...e,...t.payload];case io:return console.log(t.payload),[t.payload,...e];case"REMOVE_POST":let n=t.payload.postId;return e.filter((e=>!e._id==n));default:return e}}}),L$=b$(D$,w$(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(p$(15))},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(a)}));return r=w$.apply(void 0,o)(n.dispatch),f(f({},n),{},{dispatch:r})}}}(_$)));L$.subscribe((()=>{console.log(L$.getState())}));const A$=L$,R$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P$(e,t){navigator.serviceWorker.register(e).then((e=>{e.waiting?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e)})).catch((e=>{console.error("Error during service worker registration:",e)}))}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("","/service-worker.js");R$?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||r&&!r.includes("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):P$(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker.")}))):P$(t,e)}))}}({onSuccess:e=>{console.log("Service Worker registered successfully:",e)}}),"serviceWorker"in navigator&&(console.log("'serviceWorker' in navigator"),window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js")})));s.createRoot(document.getElementById("root")).render((0,Lt.jsx)(o.StrictMode,{children:(0,Lt.jsxs)(gn,{store:A$,children:[(0,Lt.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),(0,Lt.jsx)(d$,{})]})})),h$()})()})();
//# sourceMappingURL=main.04bb17e7.js.map